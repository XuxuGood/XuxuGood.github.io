<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>Java多线程情况下执行Shell命令</title>
      <link href="posts/c4fc7445.html"/>
      <url>posts/c4fc7445.html</url>
      
        <content type="html"><![CDATA[<p>因为代码太多，所以我放入折叠框了，点击就能查看。相信各位都能看懂代码。</p><h2 id="🔥-命令执行入口">🔥 命令执行入口</h2><details green><summary> IExecCommandServer </summary>              <div class='content'>              <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">import java.util.List;</span><br><span class="line"></span><br><span class="line">&#x2F;**</span><br><span class="line"> * @author xuxu</span><br><span class="line"> * @date 2020&#x2F;12&#x2F;23 12:17</span><br><span class="line"> *&#x2F;</span><br><span class="line">public interface IExecCommandServer &#123;</span><br><span class="line"></span><br><span class="line">    &#x2F;**</span><br><span class="line">     * 执行command</span><br><span class="line">     *</span><br><span class="line">     * @param job</span><br><span class="line">     * @param cmd</span><br><span class="line">     * @param dir</span><br><span class="line">     * @return</span><br><span class="line">     *&#x2F;</span><br><span class="line">    List&lt;String&gt; execCommand(ShellJob job, List&lt;String&gt; cmd, String dir);</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>              </div>            </details><h2 id="🔥-命令执行入口的实现">🔥 命令执行入口的实现</h2><details green><summary> ExecCommandServerImpl </summary>              <div class='content'>              <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br></pre></td><td class="code"><pre><span class="line">import lombok.extern.slf4j.Slf4j;</span><br><span class="line">import org.apache.commons.lang3.StringUtils;</span><br><span class="line">import org.springframework.stereotype.Service;</span><br><span class="line"></span><br><span class="line">import java.io.*;</span><br><span class="line">import java.util.ArrayList;</span><br><span class="line">import java.util.List;</span><br><span class="line"></span><br><span class="line">&#x2F;**</span><br><span class="line"> * @author xuxu</span><br><span class="line"> * @date 2020&#x2F;12&#x2F;23 12:18</span><br><span class="line"> *&#x2F;</span><br><span class="line"></span><br><span class="line">@Slf4j</span><br><span class="line">@Service</span><br><span class="line">public class ExecCommandServerImpl implements IExecCommandServer &#123;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public List&lt;String&gt; execCommand(ShellJob job, List&lt;String&gt; cmd, String dir) &#123;</span><br><span class="line">        Process process;</span><br><span class="line">        try &#123;</span><br><span class="line">            log.info(&quot;当前执行cmd为：&#123;&#125;&quot;, cmd.toString());</span><br><span class="line">            ProcessBuilder processBuilder &#x3D; new ProcessBuilder(cmd);</span><br><span class="line">            &#x2F;&#x2F; 设置此进程生成器的工作目录</span><br><span class="line">            if (StringUtils.isNotEmpty(dir)) &#123;</span><br><span class="line">                processBuilder.directory(new File(dir));</span><br><span class="line">            &#125;</span><br><span class="line">            processBuilder.redirectErrorStream(true);</span><br><span class="line">            &#x2F;&#x2F; 此进程生成器是否合并标准错误和标准输出</span><br><span class="line">            process &#x3D; processBuilder.start();</span><br><span class="line">            if (job !&#x3D; null) &#123;</span><br><span class="line">                job.setProcess(process);</span><br><span class="line">            &#125;</span><br><span class="line">            &#x2F;&#x2F; 读流</span><br><span class="line">            List&lt;String&gt; lineString &#x3D; readFromStream(process.getInputStream());</span><br><span class="line">            if (process.waitFor() &#x3D;&#x3D; 0) &#123;</span><br><span class="line">                return lineString;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; catch (Exception e) &#123;</span><br><span class="line">            log.error(&quot;执行命令异常：&#123;&#125;&quot;, e);</span><br><span class="line">        &#125;</span><br><span class="line">        return null;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    &#x2F;**</span><br><span class="line">     * 从流中读取数据，防止进程僵死</span><br><span class="line">     *</span><br><span class="line">     * @param inputStream</span><br><span class="line">     *&#x2F;</span><br><span class="line">    private static List&lt;String&gt; readFromStream(InputStream inputStream) &#123;</span><br><span class="line">        List&lt;String&gt; lineList &#x3D; new ArrayList&lt;&gt;();</span><br><span class="line">        InputStreamReader isr &#x3D; null;</span><br><span class="line">        BufferedReader br &#x3D; null;</span><br><span class="line">        try &#123;</span><br><span class="line">            isr &#x3D; new InputStreamReader(inputStream);</span><br><span class="line">            br &#x3D; new BufferedReader(isr);</span><br><span class="line">            String line;</span><br><span class="line">            while ((line &#x3D; br.readLine()) !&#x3D; null) &#123;</span><br><span class="line">                if (StringUtils.isEmpty(line)) &#123;</span><br><span class="line">                    try &#123;</span><br><span class="line">                        log.info(&quot;读取输出只是为了防止进程僵死&quot;);</span><br><span class="line">                    &#125; catch (Exception ex) &#123;</span><br><span class="line">                        log.error(&quot;读取shell输出流错误&quot;);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">                lineList.add(line);</span><br><span class="line">            &#125;</span><br><span class="line">            return lineList;</span><br><span class="line">        &#125; catch (IOException e) &#123;</span><br><span class="line">            &#x2F;&#x2F; do nothing，当进程被kill时，会报IOException</span><br><span class="line">        &#125; catch (Exception e) &#123;</span><br><span class="line">            log.error(&quot;读取shell输出流异常：&#123;&#125;&quot;, e);</span><br><span class="line">        &#125; finally &#123;</span><br><span class="line">            try &#123;</span><br><span class="line">                if (inputStream !&#x3D; null) &#123;</span><br><span class="line">                    inputStream.close();</span><br><span class="line">                &#125;</span><br><span class="line">                if (isr !&#x3D; null) &#123;</span><br><span class="line">                    isr.close();</span><br><span class="line">                &#125;</span><br><span class="line">                if (br !&#x3D; null) &#123;</span><br><span class="line">                    br.close();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; catch (Exception ex) &#123;</span><br><span class="line">                log.error(&quot;关闭输入流异常：&#123;&#125;&quot;, ex);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        return null;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>              </div>            </details><h2 id="🔥-利用以下实现每次Job调起都会向线程池提交一个对应的Job">🔥 利用以下实现每次Job调起都会向线程池提交一个对应的Job</h2><details green><summary> ShellJob </summary>              <div class='content'>              <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br></pre></td><td class="code"><pre><span class="line">import com.scaffolding.example.utils.SpringUtils;</span><br><span class="line">import lombok.Data;</span><br><span class="line">import lombok.extern.slf4j.Slf4j;</span><br><span class="line">import org.apache.commons.collections.CollectionUtils;</span><br><span class="line"></span><br><span class="line">import java.util.ArrayList;</span><br><span class="line">import java.util.List;</span><br><span class="line">import java.util.concurrent.atomic.AtomicBoolean;</span><br><span class="line"></span><br><span class="line">&#x2F;**</span><br><span class="line"> * 可以是任何一个Job，每次Job调起都会向线程池提交一个对应的Job</span><br><span class="line"> *</span><br><span class="line"> * @author xuxu</span><br><span class="line"> * @date 2020&#x2F;12&#x2F;26 10:22</span><br><span class="line"> *&#x2F;</span><br><span class="line">@Slf4j</span><br><span class="line">@Data</span><br><span class="line">public class ShellJob implements Runnable &#123;</span><br><span class="line"></span><br><span class="line">    private IExecCommandServer commandServer;</span><br><span class="line"></span><br><span class="line">    &#x2F;**</span><br><span class="line">     * 设置进程生成器的工作目录</span><br><span class="line">     *&#x2F;</span><br><span class="line">    private final String workspace;</span><br><span class="line"></span><br><span class="line">    &#x2F;**</span><br><span class="line">     * 执行的命令</span><br><span class="line">     *&#x2F;</span><br><span class="line">    private final List&lt;String&gt; cmd;</span><br><span class="line"></span><br><span class="line">    &#x2F;**</span><br><span class="line">     * Job标识</span><br><span class="line">     *&#x2F;</span><br><span class="line">    private final Long jobId;</span><br><span class="line"></span><br><span class="line">    &#x2F;**</span><br><span class="line">     * 终止线程使用</span><br><span class="line">     *&#x2F;</span><br><span class="line">    private volatile Process process;</span><br><span class="line"></span><br><span class="line">    &#x2F;**</span><br><span class="line">     * 记录线程状态</span><br><span class="line">     *&#x2F;</span><br><span class="line">    private static AtomicBoolean killed &#x3D; new AtomicBoolean(false);</span><br><span class="line"></span><br><span class="line">    &#x2F;**</span><br><span class="line">     * 构造方法</span><br><span class="line">     *</span><br><span class="line">     * @param workspace</span><br><span class="line">     * @param cmd</span><br><span class="line">     * @param jobId</span><br><span class="line">     *&#x2F;</span><br><span class="line">    public ShellJob(String workspace, List&lt;String&gt; cmd, Long jobId) &#123;</span><br><span class="line">        this.workspace &#x3D; workspace;</span><br><span class="line">        this.cmd &#x3D; cmd;</span><br><span class="line">        this.jobId &#x3D; jobId;</span><br><span class="line">        this.commandServer &#x3D; SpringUtils.getBean(IExecCommandServer.class);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void run() &#123;</span><br><span class="line">        log.info(&quot;Job开始执行，Job标识为：&#123;&#125;&quot;, jobId);</span><br><span class="line">        Thread.currentThread().setName(&quot;shell-job-&quot; + this.jobId);</span><br><span class="line">        List&lt;String&gt; printString &#x3D; new ArrayList&lt;&gt;();</span><br><span class="line">        try &#123;</span><br><span class="line">            printString &#x3D; commandServer.execCommand(this, cmd, workspace);</span><br><span class="line">            log.info(&quot;Job执行结束, 执行结果：&#123;&#125;&quot;, printString.toString());</span><br><span class="line">        &#125; catch (Exception e) &#123;</span><br><span class="line">            log.info(&quot;Job执行异常：&#123;&#125;&quot;, e.toString() + &quot;：&quot; + e.getMessage());</span><br><span class="line">            JobManager.removeJob(this.getJobId());</span><br><span class="line">            &#x2F;&#x2F; 回调的操作</span><br><span class="line">            callback(&quot;Fail&quot;);</span><br><span class="line">        &#125;</span><br><span class="line">        &#x2F;&#x2F; 根据需求执行自己的逻辑</span><br><span class="line">        if (!killed.get()) &#123;</span><br><span class="line">            if (CollectionUtils.isNotEmpty(printString)) &#123;</span><br><span class="line">                &#x2F;&#x2F; 回调的操作</span><br><span class="line">                callback(&quot;Success&quot;);</span><br><span class="line">            &#125; else &#123;</span><br><span class="line">                &#x2F;&#x2F; 回调的操作</span><br><span class="line">                callback(&quot;Fail&quot;);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        &#x2F;&#x2F; 无论执行失败还是成功都要移除Job</span><br><span class="line">        JobManager.removeJob(this.getJobId());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    &#x2F;**</span><br><span class="line">     * 停止进程</span><br><span class="line">     *&#x2F;</span><br><span class="line">    public synchronized void stop() &#123;</span><br><span class="line">        killed.set(true);</span><br><span class="line">        process.destroy();</span><br><span class="line">        JobManager.removeJob(this.getJobId());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    &#x2F;**</span><br><span class="line">     * 回调方法，可根据需求自行实现。</span><br><span class="line">     *&#x2F;</span><br><span class="line">    private void callback(String msg) &#123;</span><br><span class="line">        log.info(&quot;Job执行状态：&#123;&#125;&quot;, msg);</span><br><span class="line">        &#x2F;&#x2F; 可以写点回调的逻辑</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>              </div>            </details><h2 id="🔥-Job管理器">🔥 Job管理器</h2><details green><summary> JobManager </summary>              <div class='content'>              <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><span class="line">import lombok.extern.slf4j.Slf4j;</span><br><span class="line"></span><br><span class="line">import java.util.Map;</span><br><span class="line">import java.util.concurrent.ConcurrentHashMap;</span><br><span class="line"></span><br><span class="line">&#x2F;**</span><br><span class="line"> * Job管理器</span><br><span class="line"> *</span><br><span class="line"> * @author xuxu</span><br><span class="line"> * @date 2020&#x2F;12&#x2F;26 10:55</span><br><span class="line"> *&#x2F;</span><br><span class="line">@Slf4j</span><br><span class="line">public class JobManager &#123;</span><br><span class="line">    &#x2F;**</span><br><span class="line">     * 记录Job</span><br><span class="line">     *&#x2F;</span><br><span class="line">    private static final Map&lt;Long, ShellJob&gt; JOB_MAP &#x3D; new ConcurrentHashMap&lt;&gt;();</span><br><span class="line"></span><br><span class="line">    &#x2F;**</span><br><span class="line">     * 添加Job</span><br><span class="line">     *</span><br><span class="line">     * @param job</span><br><span class="line">     * @return</span><br><span class="line">     *&#x2F;</span><br><span class="line">    public static boolean addJob(ShellJob job) &#123;</span><br><span class="line">        if (JOB_MAP.containsKey(job.getJobId())) &#123;</span><br><span class="line">            log.warn(&quot;添加Job失败, Job已经存在, Job标识：&#123;&#125;&quot;, job.getJobId());</span><br><span class="line">            return false;</span><br><span class="line">        &#125;</span><br><span class="line">        log.info(&quot;添加Job成功, Job标识：&#123;&#125;&quot;, job.getJobId());</span><br><span class="line">        JOB_MAP.put(job.getJobId(), job);</span><br><span class="line">        return true;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    &#x2F;**</span><br><span class="line">     * 删除Job</span><br><span class="line">     *</span><br><span class="line">     * @param jobId</span><br><span class="line">     * @return</span><br><span class="line">     *&#x2F;</span><br><span class="line">    public static void removeJob(Long jobId) &#123;</span><br><span class="line">        if (!JOB_MAP.containsKey(jobId)) &#123;</span><br><span class="line">            log.warn(&quot;删除Job失败, Job不存在, Job标识：&#123;&#125;&quot;, jobId);</span><br><span class="line">            return;</span><br><span class="line">        &#125;</span><br><span class="line">        log.info(&quot;删除Job成功, Job标识：&#123;&#125;&quot;, jobId);</span><br><span class="line">        JOB_MAP.remove(jobId);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    &#x2F;**</span><br><span class="line">     * Kill Job</span><br><span class="line">     *</span><br><span class="line">     * @param jobId</span><br><span class="line">     * @return</span><br><span class="line">     *&#x2F;</span><br><span class="line">    public static boolean killJob(Long jobId) &#123;</span><br><span class="line">        log.info(&quot;开始终止Job, Job标识：&#123;&#125;&quot;, jobId);</span><br><span class="line">        if (JOB_MAP.containsKey(jobId)) &#123;</span><br><span class="line">            JOB_MAP.get(jobId).stop();</span><br><span class="line">            log.info(&quot;终止Job成功, Job标识：&#123;&#125;&quot;, jobId);</span><br><span class="line">            return true;</span><br><span class="line">        &#125;</span><br><span class="line">        log.info(&quot;终止Job失败, Job不存在, Job标识：&#123;&#125;&quot;, jobId);</span><br><span class="line">        return false;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    &#x2F;**</span><br><span class="line">     * 停止所有Job</span><br><span class="line">     *&#x2F;</span><br><span class="line">    public static void stopAll() &#123;</span><br><span class="line">        for (Map.Entry&lt;Long, ShellJob&gt; entry : JOB_MAP.entrySet()) &#123;</span><br><span class="line">            entry.getValue().stop();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>              </div>            </details><h2 id="🔥-测试">🔥 测试</h2><details green><summary> ExecCommandController </summary>              <div class='content'>              <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line">import lombok.extern.slf4j.Slf4j;</span><br><span class="line">import org.springframework.web.bind.annotation.GetMapping;</span><br><span class="line">import org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line">import org.springframework.web.bind.annotation.RestController;</span><br><span class="line"></span><br><span class="line">import java.util.ArrayList;</span><br><span class="line">import java.util.List;</span><br><span class="line">import java.util.concurrent.ExecutorService;</span><br><span class="line"></span><br><span class="line">import static java.util.concurrent.Executors.newFixedThreadPool;</span><br><span class="line"></span><br><span class="line">&#x2F;**</span><br><span class="line"> * @author xuxu</span><br><span class="line"> * @date 2020&#x2F;12&#x2F;26 15:12</span><br><span class="line"> *&#x2F;</span><br><span class="line">@Slf4j</span><br><span class="line">@RestController</span><br><span class="line">@RequestMapping(&quot;&#x2F;linux&quot;)</span><br><span class="line">public class ExecCommandController &#123;</span><br><span class="line"></span><br><span class="line">    private final static ExecutorService EXECUTE &#x3D; newFixedThreadPool(Runtime.getRuntime().availableProcessors() + 1);</span><br><span class="line"></span><br><span class="line">    &#x2F;**</span><br><span class="line">     * 执行命令</span><br><span class="line">     *&#x2F;</span><br><span class="line">    @GetMapping(&quot;&#x2F;exec&quot;)</span><br><span class="line">    public void exec() &#123;</span><br><span class="line">        &#x2F;&#x2F; 具体业务场景根据自己情况而定，我这里只举了个例子。</span><br><span class="line">        for (int j &#x3D; 1; j &lt;&#x3D; 3; j++) &#123;</span><br><span class="line">            List&lt;String&gt; cmd &#x3D; new ArrayList&lt;&gt;();</span><br><span class="line">            cmd.add(&quot;D:\\Software\\Git\\bin\\bash.exe&quot;);</span><br><span class="line">            cmd.add(&quot;-c&quot;);</span><br><span class="line">            cmd.add(&quot;curl -u admin:Xu19960211 -T \&quot;C:&#x2F;test&#x2F;1607428204749_&quot; + j + &quot;.tar\&quot; -X PUT \&quot;http:&#x2F;&#x2F;localhost:8081&#x2F;artifactory&#x2F;DEV&#x2F;TEST&#x2F;1607428204749_&quot; + j + &quot;.tar\&quot;&quot;);</span><br><span class="line">            &#x2F;&#x2F; 这里我用for循环的下标作为Job的标识</span><br><span class="line">            ShellJob job &#x3D; new ShellJob(System.getProperty(&quot;user.dir&quot;), cmd, (long) j);</span><br><span class="line">            if (JobManager.addJob(job)) &#123;</span><br><span class="line">                &#x2F;&#x2F; 执行线程</span><br><span class="line">                EXECUTE.execute(job);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    &#x2F;**</span><br><span class="line">     * 停止执行命令</span><br><span class="line">     *&#x2F;</span><br><span class="line">    @GetMapping(&quot;&#x2F;kill&quot;)</span><br><span class="line">    public void kill(Long jobId) &#123;</span><br><span class="line">        boolean result &#x3D; JobManager.killJob(jobId);</span><br><span class="line">        if (result) &#123;</span><br><span class="line">            log.info(&quot;Kill job success&quot;);</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">            log.info(&quot;Kill job fail&quot;);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>              </div>            </details><h2 id="🔥-Spring工具类，方便在非spring管理环境中获取bean">🔥 Spring工具类，方便在非spring管理环境中获取bean</h2><details green><summary> SpringUtils </summary>              <div class='content'>              <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br></pre></td><td class="code"><pre><span class="line">import org.springframework.beans.BeansException;</span><br><span class="line">import org.springframework.beans.factory.NoSuchBeanDefinitionException;</span><br><span class="line">import org.springframework.beans.factory.config.BeanFactoryPostProcessor;</span><br><span class="line">import org.springframework.beans.factory.config.ConfigurableListableBeanFactory;</span><br><span class="line">import org.springframework.context.ApplicationContext;</span><br><span class="line">import org.springframework.context.ApplicationContextAware;</span><br><span class="line">import org.springframework.stereotype.Component;</span><br><span class="line"></span><br><span class="line">&#x2F;**</span><br><span class="line"> * spring工具类 方便在非spring管理环境中获取bean</span><br><span class="line"> *</span><br><span class="line"> * @author xuxu</span><br><span class="line"> * @date 2020&#x2F;12&#x2F;26 12:28</span><br><span class="line"> *&#x2F;</span><br><span class="line"></span><br><span class="line">@Component</span><br><span class="line">public final class SpringUtils implements BeanFactoryPostProcessor, ApplicationContextAware &#123;</span><br><span class="line">    &#x2F;**</span><br><span class="line">     * Spring应用上下文环境</span><br><span class="line">     *&#x2F;</span><br><span class="line">    private static ConfigurableListableBeanFactory beanFactory;</span><br><span class="line">    private static ApplicationContext applicationContext &#x3D; null;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void postProcessBeanFactory(ConfigurableListableBeanFactory beanFactory) throws BeansException &#123;</span><br><span class="line">        SpringUtils.beanFactory &#x3D; beanFactory;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    &#x2F;**</span><br><span class="line">     * 获取对象</span><br><span class="line">     *</span><br><span class="line">     * @param name</span><br><span class="line">     * @return Object 一个以所给名字注册的bean的实例</span><br><span class="line">     * @throws org.springframework.beans.BeansException</span><br><span class="line">     *&#x2F;</span><br><span class="line">    @SuppressWarnings(&quot;unchecked&quot;)</span><br><span class="line">    public static &lt;T&gt; T getBean(String name) throws BeansException &#123;</span><br><span class="line">        return (T) beanFactory.getBean(name);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    &#x2F;**</span><br><span class="line">     * 获取类型为requiredType的对象</span><br><span class="line">     *</span><br><span class="line">     * @param clz</span><br><span class="line">     * @return</span><br><span class="line">     * @throws org.springframework.beans.BeansException</span><br><span class="line">     *&#x2F;</span><br><span class="line">    public static &lt;T&gt; T getBean(Class&lt;T&gt; clz) throws BeansException &#123;</span><br><span class="line">        T result &#x3D; (T) beanFactory.getBean(clz);</span><br><span class="line">        return result;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    &#x2F;**</span><br><span class="line">     * 如果BeanFactory包含一个与所给名称匹配的bean定义，则返回true</span><br><span class="line">     *</span><br><span class="line">     * @param name</span><br><span class="line">     * @return boolean</span><br><span class="line">     *&#x2F;</span><br><span class="line">    public static boolean containsBean(String name) &#123;</span><br><span class="line">        return beanFactory.containsBean(name);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    &#x2F;**</span><br><span class="line">     * 判断以给定名字注册的bean定义是一个singleton还是一个prototype。 如果与给定名字相应的bean定义没有被找到，将会抛出一个异常（NoSuchBeanDefinitionException）</span><br><span class="line">     *</span><br><span class="line">     * @param name</span><br><span class="line">     * @return boolean</span><br><span class="line">     * @throws org.springframework.beans.factory.NoSuchBeanDefinitionException</span><br><span class="line">     *&#x2F;</span><br><span class="line">    public static boolean isSingleton(String name) throws NoSuchBeanDefinitionException &#123;</span><br><span class="line">        return beanFactory.isSingleton(name);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    &#x2F;**</span><br><span class="line">     * @param name</span><br><span class="line">     * @return Class 注册对象的类型</span><br><span class="line">     * @throws org.springframework.beans.factory.NoSuchBeanDefinitionException</span><br><span class="line">     *&#x2F;</span><br><span class="line">    public static Class&lt;?&gt; getType(String name) throws NoSuchBeanDefinitionException &#123;</span><br><span class="line">        return beanFactory.getType(name);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    &#x2F;**</span><br><span class="line">     * 如果给定的bean名字在bean定义中有别名，则返回这些别名</span><br><span class="line">     *</span><br><span class="line">     * @param name</span><br><span class="line">     * @return</span><br><span class="line">     * @throws org.springframework.beans.factory.NoSuchBeanDefinitionException</span><br><span class="line">     *&#x2F;</span><br><span class="line">    public static String[] getAliases(String name) throws NoSuchBeanDefinitionException &#123;</span><br><span class="line">        return beanFactory.getAliases(name);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void setApplicationContext(ApplicationContext applicationContext) throws BeansException &#123;</span><br><span class="line">        if (SpringUtils.applicationContext &#x3D;&#x3D; null) &#123;</span><br><span class="line">            SpringUtils.applicationContext &#x3D; applicationContext;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    &#x2F;**</span><br><span class="line">     * 获取applicationContext</span><br><span class="line">     *</span><br><span class="line">     * @return</span><br><span class="line">     *&#x2F;</span><br><span class="line">    public static ApplicationContext getApplicationContext() &#123;</span><br><span class="line">        return applicationContext;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>              </div>            </details>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
          <category> 线程 </category>
          
          <category> Shell </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> 线程 </tag>
            
            <tag> Shell </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Java下载网络文件到指定目录</title>
      <link href="posts/611a48d3.html"/>
      <url>posts/611a48d3.html</url>
      
        <content type="html"><![CDATA[<p>工具类代码如下：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br></pre></td><td class="code"><pre><span class="line">import lombok.extern.slf4j.Slf4j;</span><br><span class="line"></span><br><span class="line">import java.io.*;</span><br><span class="line">import java.net.HttpURLConnection;</span><br><span class="line">import java.net.MalformedURLException;</span><br><span class="line">import java.net.URL;</span><br><span class="line">import java.net.URLConnection;</span><br><span class="line"></span><br><span class="line">&#x2F;**</span><br><span class="line"> * @author xuxu</span><br><span class="line"> * @date 2020&#x2F;12&#x2F;9 12:55</span><br><span class="line"> *&#x2F;</span><br><span class="line">@Slf4j</span><br><span class="line">public class FileUtil &#123;</span><br><span class="line">    &#x2F;**</span><br><span class="line">     * 说明：根据指定URL将文件下载到指定目标位置</span><br><span class="line">     *</span><br><span class="line">     * @param urlPath     下载路径</span><br><span class="line">     * @param downloadDir 文件存放目录</span><br><span class="line">     * @return 返回下载文件</span><br><span class="line">     *&#x2F;</span><br><span class="line">    public static File downloadFile(String urlPath, String downloadDir) &#123;</span><br><span class="line">        File file &#x3D; null;</span><br><span class="line">        try &#123;</span><br><span class="line">            &#x2F;&#x2F; 统一资源</span><br><span class="line">            URL url &#x3D; new URL(urlPath);</span><br><span class="line">            &#x2F;&#x2F; 连接类的父类，抽象类</span><br><span class="line">            URLConnection urlConnection &#x3D; url.openConnection();</span><br><span class="line">            &#x2F;&#x2F; http的连接类</span><br><span class="line">            HttpURLConnection httpUrlConnection &#x3D; (HttpURLConnection) urlConnection;</span><br><span class="line">            &#x2F;&#x2F;设置超时</span><br><span class="line">            httpUrlConnection.setConnectTimeout(1000 * 5);</span><br><span class="line">            &#x2F;&#x2F;设置请求方式，默认是GET</span><br><span class="line">            httpUrlConnection.setRequestMethod(&quot;GET&quot;);</span><br><span class="line">            &#x2F;&#x2F; 设置字符编码</span><br><span class="line">            httpUrlConnection.setRequestProperty(&quot;Charset&quot;, &quot;UTF-8&quot;);</span><br><span class="line">            &#x2F;&#x2F; 打开到此 URL引用的资源的通信链接（如果尚未建立这样的连接）。</span><br><span class="line">            httpUrlConnection.connect();</span><br><span class="line">            &#x2F;&#x2F; 文件大小</span><br><span class="line">            int fileLength &#x3D; httpUrlConnection.getContentLength();</span><br><span class="line"></span><br><span class="line">            &#x2F;&#x2F; 控制台打印文件大小</span><br><span class="line">            log.info(&quot;您要下载的文件大小为:&quot; + fileLength &#x2F; (1024 * 1024) + &quot;MB&quot;);</span><br><span class="line"></span><br><span class="line">            &#x2F;&#x2F; 建立链接从请求中获取数据</span><br><span class="line">            BufferedInputStream bin &#x3D; new BufferedInputStream(httpUrlConnection.getInputStream());</span><br><span class="line">            &#x2F;&#x2F; 指定文件名称(有需求可以自定义)</span><br><span class="line">            String fileFullName &#x3D; urlPath.substring(urlPath.lastIndexOf(&quot;&#x2F;&quot;) + 1);</span><br><span class="line">            &#x2F;&#x2F; 指定存放位置(有需求可以自定义)</span><br><span class="line">            File filePath &#x3D; new File(downloadDir);</span><br><span class="line">            &#x2F;&#x2F; 是否是文件夹</span><br><span class="line">            if (!filePath.exists() &amp;&amp; !filePath.isDirectory()) &#123;</span><br><span class="line">                log.info(&quot;目录不存在，创建目录:&quot; + filePath);</span><br><span class="line">                filePath.mkdir();</span><br><span class="line">            &#125;</span><br><span class="line">            file &#x3D; new File(downloadDir + File.separatorChar + fileFullName);</span><br><span class="line">            OutputStream out &#x3D; new FileOutputStream(file);</span><br><span class="line">            int size;</span><br><span class="line">            int len &#x3D; 0;</span><br><span class="line">            byte[] buf &#x3D; new byte[2048];</span><br><span class="line">            while ((size &#x3D; bin.read(buf)) !&#x3D; -1) &#123;</span><br><span class="line">                len +&#x3D; size;</span><br><span class="line">                out.write(buf, 0, size);</span><br><span class="line">            &#125;</span><br><span class="line">            &#x2F;&#x2F; 关闭资源</span><br><span class="line">            bin.close();</span><br><span class="line">            out.close();</span><br><span class="line">            log.info(&quot;文件下载成功！&quot;);</span><br><span class="line">        &#125; catch (MalformedURLException e) &#123;</span><br><span class="line">            &#x2F;&#x2F; TODO Auto-generated catch block</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; catch (IOException e) &#123;</span><br><span class="line">            &#x2F;&#x2F; TODO Auto-generated catch block</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            log.info(&quot;文件下载失败！&quot;);</span><br><span class="line">        &#125;</span><br><span class="line">        return file;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    &#x2F;**</span><br><span class="line">     * 测试</span><br><span class="line">     *</span><br><span class="line">     * @param args</span><br><span class="line">     *&#x2F;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        &#x2F;&#x2F; 指定资源地址，下载文件测试</span><br><span class="line">        File file &#x3D; downloadFile(&quot;http:&#x2F;&#x2F;192.168.80.97:9090&#x2F;artifactory&#x2F;DEV&#x2F;ipipe&#x2F;pipeline&#x2F;1607175965084_15.tar&quot;, &quot;E:\\down&quot;);</span><br><span class="line">        System.out.println(file.getName());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
          <category> 工具类 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> 工具类 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>基于HttpClient实现java中实现数据传输及文件传输</title>
      <link href="posts/b85c80d5.html"/>
      <url>posts/b85c80d5.html</url>
      
        <content type="html"><![CDATA[<h2 id="🔥-在pom文件中引入相关jar">🔥 在pom文件中引入相关jar</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&lt;dependency&gt;</span><br><span class="line">&lt;groupId&gt;commons-httpclient&lt;&#x2F;groupId&gt;</span><br><span class="line">&lt;artifactId&gt;commons-httpclient&lt;&#x2F;artifactId&gt;</span><br><span class="line">&lt;version&gt;3.1&lt;&#x2F;version&gt;</span><br><span class="line">&lt;&#x2F;dependency&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">&lt;groupId&gt;org.apache.commons&lt;&#x2F;groupId&gt;</span><br><span class="line">&lt;artifactId&gt;commons-lang3&lt;&#x2F;artifactId&gt;</span><br><span class="line">&lt;version&gt;3.8&lt;&#x2F;version&gt;</span><br><span class="line">&lt;&#x2F;dependency&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">&lt;groupId&gt;org.apache.httpcomponents&lt;&#x2F;groupId&gt;</span><br><span class="line">&lt;artifactId&gt;httpclient&lt;&#x2F;artifactId&gt;</span><br><span class="line">&lt;version&gt;4.5&lt;&#x2F;version&gt;</span><br><span class="line">&lt;&#x2F;dependency&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">&lt;groupId&gt;org.apache.httpcomponents&lt;&#x2F;groupId&gt;</span><br><span class="line">&lt;artifactId&gt;httpmime&lt;&#x2F;artifactId&gt;</span><br><span class="line">&lt;version&gt;4.5&lt;&#x2F;version&gt;</span><br><span class="line">&lt;&#x2F;dependency&gt;</span><br></pre></td></tr></table></figure><h2 id="🔥-创建HttpClientRequestUtil工具类">🔥 创建HttpClientRequestUtil工具类</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br></pre></td><td class="code"><pre><span class="line">import net.sf.json.JSONObject;</span><br><span class="line">import org.apache.http.HttpEntity;</span><br><span class="line">import org.apache.http.HttpResponse;</span><br><span class="line">import org.apache.http.HttpStatus;</span><br><span class="line">import org.apache.http.NameValuePair;</span><br><span class="line">import org.apache.http.client.ClientProtocolException;</span><br><span class="line">import org.apache.http.client.HttpClient;</span><br><span class="line">import org.apache.http.client.config.RequestConfig;</span><br><span class="line">import org.apache.http.client.entity.UrlEncodedFormEntity;</span><br><span class="line">import org.apache.http.client.methods.CloseableHttpResponse;</span><br><span class="line">import org.apache.http.client.methods.HttpGet;</span><br><span class="line">import org.apache.http.client.methods.HttpPost;</span><br><span class="line">import org.apache.http.entity.ContentType;</span><br><span class="line">import org.apache.http.entity.StringEntity;</span><br><span class="line">import org.apache.http.entity.mime.HttpMultipartMode;</span><br><span class="line">import org.apache.http.entity.mime.MultipartEntityBuilder;</span><br><span class="line">import org.apache.http.impl.client.CloseableHttpClient;</span><br><span class="line">import org.apache.http.impl.client.DefaultHttpClient;</span><br><span class="line">import org.apache.http.impl.client.HttpClientBuilder;</span><br><span class="line">import org.apache.http.impl.client.HttpClients;</span><br><span class="line">import org.apache.http.protocol.HTTP;</span><br><span class="line">import org.apache.http.util.EntityUtils;</span><br><span class="line">import org.springframework.web.multipart.MultipartFile;</span><br><span class="line"></span><br><span class="line">import java.io.*;</span><br><span class="line">import java.util.HashMap;</span><br><span class="line">import java.util.List;</span><br><span class="line">import java.util.Map;</span><br><span class="line"></span><br><span class="line">&#x2F;**</span><br><span class="line"> * @author xuxu</span><br><span class="line"> * @date 2020&#x2F;12&#x2F;9 10:31</span><br><span class="line"> *&#x2F;</span><br><span class="line">public class HttpClientRequestUtil &#123;</span><br><span class="line">    private static final HttpClient client &#x3D; HttpClientBuilder.create().build();</span><br><span class="line"></span><br><span class="line">    &#x2F;**</span><br><span class="line">     * 使用POST请求</span><br><span class="line">     *</span><br><span class="line">     * @param urlParameters</span><br><span class="line">     * @param url</span><br><span class="line">     * @return</span><br><span class="line">     *&#x2F;</span><br><span class="line">    public static String doPost(List&lt;NameValuePair&gt; urlParameters, String url) &#123;</span><br><span class="line">        String result &#x3D; &quot;&quot;;</span><br><span class="line">        &#x2F;&#x2F; 创建默认的httpClient实例.</span><br><span class="line">        CloseableHttpClient httpclient &#x3D; HttpClients.createDefault();</span><br><span class="line">        &#x2F;&#x2F; 创建httpPost</span><br><span class="line">        HttpPost httppost &#x3D; new HttpPost(url);</span><br><span class="line">        RequestConfig requestConfig &#x3D; RequestConfig.custom().setConnectTimeout(3000)</span><br><span class="line">                .setSocketTimeout(3000).setConnectionRequestTimeout(3000)</span><br><span class="line">                .setRedirectsEnabled(true).build();</span><br><span class="line">        UrlEncodedFormEntity uefEntity;</span><br><span class="line">        try &#123;</span><br><span class="line">            uefEntity &#x3D; new UrlEncodedFormEntity(urlParameters, &quot;UTF-8&quot;);</span><br><span class="line">            httppost.setEntity(uefEntity);</span><br><span class="line">            httppost.setConfig(requestConfig);</span><br><span class="line">            System.out.println(&quot;executing request &quot; + httppost.getURI());</span><br><span class="line">            CloseableHttpResponse response &#x3D; httpclient.execute(httppost);</span><br><span class="line">            if (response.getStatusLine().getStatusCode() &#x3D;&#x3D; 200) &#123;</span><br><span class="line">                try &#123;</span><br><span class="line">                    HttpEntity entity &#x3D; response.getEntity();</span><br><span class="line">                    if (entity !&#x3D; null) &#123;</span><br><span class="line">                        result &#x3D; EntityUtils.toString(entity, &quot;UTF-8&quot;);</span><br><span class="line">                        System.out.println(&quot;--------------------------------------&quot;);</span><br><span class="line">                        System.out.println(&quot;Response content: &quot; + result);</span><br><span class="line">                        System.out.println(&quot;--------------------------------------&quot;);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125; finally &#123;</span><br><span class="line">                    response.close();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; else &#123;</span><br><span class="line">                System.out.println(&quot;******************************************请求失败+++++++++++++++++++++++++++++&#x3D;&#x3D;&#x3D;&#x3D;&quot;);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        &#125; catch (ClientProtocolException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; catch (UnsupportedEncodingException e1) &#123;</span><br><span class="line">            e1.printStackTrace();</span><br><span class="line">        &#125; catch (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; finally &#123;</span><br><span class="line">            &#x2F;&#x2F; 关闭连接,释放资源</span><br><span class="line">            try &#123;</span><br><span class="line">                httpclient.close();</span><br><span class="line">            &#125; catch (IOException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        return result;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    &#x2F;**</span><br><span class="line">     * GET请求方式</span><br><span class="line">     *</span><br><span class="line">     * @param URL</span><br><span class="line">     * @return</span><br><span class="line">     *&#x2F;</span><br><span class="line">    public static String doGet(String URL) &#123;</span><br><span class="line">        try &#123;</span><br><span class="line">            HttpClient client &#x3D; new DefaultHttpClient();</span><br><span class="line">            &#x2F;&#x2F; 发送get请求</span><br><span class="line">            HttpGet request &#x3D; new HttpGet(URL);</span><br><span class="line">            HttpResponse response &#x3D; client.execute(request);</span><br><span class="line">            &#x2F;&#x2F; 请求发送成功，并得到响应</span><br><span class="line">            if (response.getStatusLine().getStatusCode() &#x3D;&#x3D; HttpStatus.SC_OK) &#123;</span><br><span class="line">                &#x2F;&#x2F; 读取服务器返回过来的json字符串数据</span><br><span class="line">                String strResult &#x3D; EntityUtils.toString(response.getEntity());</span><br><span class="line"></span><br><span class="line">                return strResult;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; catch (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        return null;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    &#x2F;**</span><br><span class="line">     * POST请求application&#x2F;json</span><br><span class="line">     *</span><br><span class="line">     * @param jsonStr</span><br><span class="line">     * @param url</span><br><span class="line">     * @return</span><br><span class="line">     * @throws Exception</span><br><span class="line">     *&#x2F;</span><br><span class="line">    public static String doPostJson(String jsonStr, String url) throws Exception &#123;</span><br><span class="line">        StringEntity sEntity &#x3D; new StringEntity(JSONObject.fromObject(jsonStr).toString(), &quot;utf-8&quot;);</span><br><span class="line">        sEntity.setContentType(&quot;application&#x2F;json&quot;);</span><br><span class="line">        HttpPost post &#x3D; new HttpPost(url);</span><br><span class="line">        post.setEntity(sEntity);</span><br><span class="line">        HttpResponse response &#x3D; client.execute(post);</span><br><span class="line">        HttpEntity entity &#x3D; response.getEntity();</span><br><span class="line">        return EntityUtils.toString(entity, &quot;UTF-8&quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    &#x2F;**</span><br><span class="line">     * POST请求发送MultipartFile文件参数</span><br><span class="line">     *</span><br><span class="line">     * @param url</span><br><span class="line">     * @param multipartFiles</span><br><span class="line">     * @param fileParName</span><br><span class="line">     * @param params</span><br><span class="line">     * @param headers</span><br><span class="line">     * @param timeout</span><br><span class="line">     * @return</span><br><span class="line">     *&#x2F;</span><br><span class="line">    public static Map&lt;String, String&gt; doPostFile(String url, List&lt;MultipartFile&gt; multipartFiles, String fileParName,</span><br><span class="line">                                                 Map&lt;String, Object&gt; params, Map&lt;String, String&gt; headers, int timeout) &#123;</span><br><span class="line">        Map&lt;String, String&gt; resultMap &#x3D; new HashMap&lt;&gt;();</span><br><span class="line">        CloseableHttpClient httpClient &#x3D; HttpClients.createDefault();</span><br><span class="line">        String result;</span><br><span class="line">        try &#123;</span><br><span class="line">            HttpPost httpPost &#x3D; new HttpPost(url);</span><br><span class="line">            &#x2F;&#x2F; 设置请求头</span><br><span class="line">            for (Map.Entry&lt;String, String&gt; entry : headers.entrySet()) &#123;</span><br><span class="line">                if (entry.getValue() &#x3D;&#x3D; null) &#123;</span><br><span class="line">                    continue;</span><br><span class="line">                &#125;</span><br><span class="line">                httpPost.setHeader(entry.getKey(), entry.getValue());</span><br><span class="line">            &#125;</span><br><span class="line">            MultipartEntityBuilder builder &#x3D; MultipartEntityBuilder.create();</span><br><span class="line">            builder.setCharset(java.nio.charset.Charset.forName(&quot;UTF-8&quot;));</span><br><span class="line">            builder.setMode(HttpMultipartMode.BROWSER_COMPATIBLE);</span><br><span class="line">            for (MultipartFile item : multipartFiles) &#123;</span><br><span class="line">                &#x2F;&#x2F; 文件流</span><br><span class="line">                builder.addBinaryBody(fileParName, item.getInputStream(), ContentType.MULTIPART_FORM_DATA, item.getOriginalFilename());</span><br><span class="line">            &#125;</span><br><span class="line">            &#x2F;&#x2F;解决中文乱码</span><br><span class="line">            ContentType contentType &#x3D; ContentType.create(HTTP.PLAIN_TEXT_TYPE, HTTP.UTF_8);</span><br><span class="line">            for (Map.Entry&lt;String, Object&gt; entry : params.entrySet()) &#123;</span><br><span class="line">                if (entry.getValue() &#x3D;&#x3D; null) &#123;</span><br><span class="line">                    continue;</span><br><span class="line">                &#125;</span><br><span class="line">                &#x2F;&#x2F; 类似浏览器表单提交，对应input的name和value</span><br><span class="line">                builder.addTextBody(entry.getKey(), entry.getValue().toString(), contentType);</span><br><span class="line">            &#125;</span><br><span class="line">            HttpEntity entity &#x3D; builder.build();</span><br><span class="line">            httpPost.setEntity(entity);</span><br><span class="line">            &#x2F;&#x2F; 执行提交</span><br><span class="line">            HttpResponse response &#x3D; httpClient.execute(httpPost);</span><br><span class="line"></span><br><span class="line">            &#x2F;&#x2F; 设置连接超时时间</span><br><span class="line">            RequestConfig requestConfig &#x3D; RequestConfig.custom().setConnectTimeout(timeout)</span><br><span class="line">                    .setConnectionRequestTimeout(timeout).setSocketTimeout(timeout).build();</span><br><span class="line">            httpPost.setConfig(requestConfig);</span><br><span class="line"></span><br><span class="line">            HttpEntity responseEntity &#x3D; response.getEntity();</span><br><span class="line">            resultMap.put(&quot;code&quot;, String.valueOf(response.getStatusLine().getStatusCode()));</span><br><span class="line">            resultMap.put(&quot;data&quot;, &quot;&quot;);</span><br><span class="line">            if (responseEntity !&#x3D; null) &#123;</span><br><span class="line">                &#x2F;&#x2F; 将响应内容转换为字符串</span><br><span class="line">                result &#x3D; EntityUtils.toString(responseEntity, java.nio.charset.Charset.forName(&quot;UTF-8&quot;));</span><br><span class="line">                resultMap.put(&quot;data&quot;, result);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; catch (Exception e) &#123;</span><br><span class="line">            resultMap.put(&quot;code&quot;, &quot;error&quot;);</span><br><span class="line">            resultMap.put(&quot;data&quot;, &quot;HTTP请求出现异常: &quot; + e.getMessage());</span><br><span class="line"></span><br><span class="line">            Writer w &#x3D; new StringWriter();</span><br><span class="line">            e.printStackTrace(new PrintWriter(w));</span><br><span class="line">        &#125; finally &#123;</span><br><span class="line">            try &#123;</span><br><span class="line">                httpClient.close();</span><br><span class="line">            &#125; catch (IOException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        return resultMap;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
          <category> 工具类 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> 工具类 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Java代替if和switch的方法</title>
      <link href="posts/bc6f4faf.html"/>
      <url>posts/bc6f4faf.html</url>
      
        <content type="html"><![CDATA[<h3 id="🎉-公共接口">🎉 公共接口</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">package com.scaffolding.example.test;</span><br><span class="line"></span><br><span class="line">&#x2F;**</span><br><span class="line"> * 公共接口</span><br><span class="line"> *</span><br><span class="line"> * @author xuxu</span><br><span class="line"> * @date 2020&#x2F;11&#x2F;12 15:49</span><br><span class="line"> *&#x2F;</span><br><span class="line">public interface Function &#123;</span><br><span class="line">    &#x2F;**</span><br><span class="line">     * 要做的事情</span><br><span class="line">     *&#x2F;</span><br><span class="line">    void invoke();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="🎉-代替if-else和switch的方法">🎉 代替<code>if else</code>和<code>switch</code>的方法</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line">package com.scaffolding.example.test;</span><br><span class="line"></span><br><span class="line">import java.util.Map;</span><br><span class="line"></span><br><span class="line">&#x2F;**</span><br><span class="line"> * 代替&#39;if else&#39; 和 &#39;switch&#39;的方法</span><br><span class="line"> *</span><br><span class="line"> * @author xuxu</span><br><span class="line"> * @date 2020&#x2F;11&#x2F;12 15:49</span><br><span class="line"> *&#x2F;</span><br><span class="line">public class IfFunction&lt;K&gt; &#123;</span><br><span class="line"></span><br><span class="line">    private Map&lt;K, Function&gt; map;</span><br><span class="line"></span><br><span class="line">    &#x2F;**</span><br><span class="line">     * 通过map类型来保存对应的条件key和方法</span><br><span class="line">     *</span><br><span class="line">     * @param map a map</span><br><span class="line">     *&#x2F;</span><br><span class="line">    public IfFunction(Map&lt;K, Function&gt; map) &#123;</span><br><span class="line">        this.map &#x3D; map;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    &#x2F;**</span><br><span class="line">     * 添加条件</span><br><span class="line">     *</span><br><span class="line">     * @param key      需要验证的条件（key）</span><br><span class="line">     * @param function 要执行的方法</span><br><span class="line">     * @return this.</span><br><span class="line">     *&#x2F;</span><br><span class="line">    public IfFunction&lt;K&gt; add(K key, Function function) &#123;</span><br><span class="line">        this.map.put(key, function);</span><br><span class="line">        return this;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    &#x2F;**</span><br><span class="line">     * 确定key是否存在，如果存在，则执行相应的方法。</span><br><span class="line">     *</span><br><span class="line">     * @param key the key need to verify</span><br><span class="line">     *&#x2F;</span><br><span class="line">    public void doIf(K key) &#123;</span><br><span class="line">        if (this.map.containsKey(key)) &#123;</span><br><span class="line">            map.get(key).invoke();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    &#x2F;**</span><br><span class="line">     * 确定key是否存在，如果存在，则执行相应的方法。</span><br><span class="line">     * 否则将执行默认方法</span><br><span class="line">     *</span><br><span class="line">     * @param key             需要验证的条件（key）</span><br><span class="line">     * @param defaultFunction 要执行的方法</span><br><span class="line">     *&#x2F;</span><br><span class="line">    public void doIfWithDefault(K key, Function defaultFunction) &#123;</span><br><span class="line">        if (this.map.containsKey(key)) &#123;</span><br><span class="line">            map.get(key).invoke();</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">            defaultFunction.invoke();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="🎉-测试">🎉 测试</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">package com.scaffolding.example.test;</span><br><span class="line"></span><br><span class="line">import java.util.HashMap;</span><br><span class="line"></span><br><span class="line">&#x2F;**</span><br><span class="line"> * 测试</span><br><span class="line"> *</span><br><span class="line"> * @author xuxu</span><br><span class="line"> * @date 2020&#x2F;11&#x2F;12 15:51</span><br><span class="line"> *&#x2F;</span><br><span class="line">public class Test &#123;</span><br><span class="line"></span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        IfFunction&lt;String&gt; ifFunction &#x3D; new IfFunction&lt;&gt;(new HashMap&lt;&gt;(5));</span><br><span class="line"></span><br><span class="line">        &#x2F;&#x2F;定义好要判断的条件和对应执行的方法</span><br><span class="line">        ifFunction.add(&quot;1&quot;, () -&gt; System.out.println(&quot;苹果&quot;))</span><br><span class="line">                .add(&quot;2&quot;, () -&gt; System.out.println(&quot;西瓜&quot;))</span><br><span class="line">                .add(&quot;3&quot;, () -&gt; System.out.println(&quot;橙子&quot;));</span><br><span class="line"></span><br><span class="line">        &#x2F;&#x2F; 要进入的条件</span><br><span class="line">        ifFunction.doIf(&quot;1&quot;);</span><br><span class="line">        &#x2F;&#x2F; 执行默认方法</span><br><span class="line">        ifFunction.doIfWithDefault(&quot;4&quot;, () -&gt; System.out.println(&quot;默认方法&quot;));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
          <category> 优化 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> 优化 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Jenkins + Gitlab + Docker + Spring Boot 实现自动部署</title>
      <link href="posts/3fe685e0.html"/>
      <url>posts/3fe685e0.html</url>
      
        <content type="html"><![CDATA[<p>本文主要介绍持续集成的搭建方式，采用 Docker 的方式去搭建 Jenkins 环境，篇幅有点长，请仔细阅读。（无废话版）</p><a id="more"></a><p>推荐阅读本篇文章的注意事项篇节以后再进行搭建。</p><h2 id="🔥-Docker安装">🔥 Docker安装</h2><p>本文中我们使用 Centos7.x 进行 Docker 安装，所以我们需要在虚拟中先安装 Centos7，这一步请阅读者自行安装。</p><h3 id="🎉-Docker安装步骤">🎉 Docker安装步骤</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 1. yum 包更新到最新。</span></span><br><span class="line">sudo yum update</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 2. 安装需要的软件包，yum-util提供yun-config-manager功能，另外两个是devicemapper驱动依赖的。</span></span><br><span class="line">sudo yum install -y yum-utils device-mapper-persistent-data lvm2</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 3. 设置yum源为阿里云。</span></span><br><span class="line">sudo yum-config-manager --add-repo http://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 4. 安装docker。</span></span><br><span class="line">sudo yum install docker-ce</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 5. 安装完成后查看docker版本。</span></span><br><span class="line">docker -v</span><br></pre></td></tr></table></figure><h3 id="🎉-设置ustc的镜像-此处也可用阿里云免费镜像加速">🎉 设置ustc的镜像(此处也可用阿里云免费镜像加速)</h3><p>ustc是老牌的linux镜像服务提供者了，还在遥远的ubuntu 5.04版本的时候就在用。ustc的docker镜像加速器速度很快。ustc docker mirror的优势之一就是不需要注册，是真正的公共服务。</p><div class="tag link"><a class="link-card" title="ustc镜像帮助" href="https://lug.ustc.edu.cn/wiki/mirrors/help/docker"><div class="left"><img src="https://cdn.jsdelivr.net/gh/volantis-x/cdn-org/logo/256/safari.png" class="lazyload placeholder" data-srcset="https://cdn.jsdelivr.net/gh/volantis-x/cdn-org/logo/256/safari.png" srcset="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/site-img/img-loading.gif"/></div><div class="right"><p class="text">ustc镜像帮助</p><p class="url">https://lug.ustc.edu.cn/wiki/mirrors/help/docker</p></div></a></div><p>编辑该文件（没有该文件则新建）：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/docker/daemon.json</span><br></pre></td></tr></table></figure><p>在该文件中输入如下内容：</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line"><span class="attr">&quot;registry-mirrors&quot;:</span> [<span class="string">&quot;https://docker.mirrors.ustc.edu.cn&quot;</span>]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>或阿里云的镜像加速（二选一）</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line"><span class="attr">&quot;registry-mirrors&quot;:</span> [<span class="string">&quot;https://9cpn8tt6.mirror.aliyuncs.com&quot;</span>]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="🎉-Docker的启动与停止">🎉 Docker的启动与停止</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 启动docker</span></span><br><span class="line">systemctl start docker</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 停止docker</span></span><br><span class="line">systemctl stop docker</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 重启docker</span></span><br><span class="line">systemctl restart docker</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 查看docker状态</span></span><br><span class="line">systemctl status docker</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 开机启动docker</span></span><br><span class="line">systemctl enable docker</span><br></pre></td></tr></table></figure><div class="tag link"><a class="link-card" title="Docker的虚拟机常用命令" href="https://www.cnblogs.com/ghostdot/p/12652820.html"><div class="left"><img src="https://cdn.jsdelivr.net/gh/volantis-x/cdn-org/logo/256/safari.png" class="lazyload placeholder" data-srcset="https://cdn.jsdelivr.net/gh/volantis-x/cdn-org/logo/256/safari.png" srcset="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/site-img/img-loading.gif"/></div><div class="right"><p class="text">Docker的虚拟机常用命令</p><p class="url">https://www.cnblogs.com/ghostdot/p/12652820.html</p></div></a></div><h2 id="🔥-Gitlab安装">🔥 Gitlab安装</h2><p>GitLab是一个利用 Ruby on Rails 开发的开源应用程序，实现一个自托管的Git项目仓库，可通过Web界面进行访问公开的或者私人项目安装。类似GitHub，能够浏览源代码，管理缺陷和注释，可以管理团队对仓库的访问。</p><h3 id="🎉-查询并拉取镜像">🎉 查询并拉取镜像</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 查询gitlab镜像版本</span></span><br><span class="line">docker search gitlab</span><br><span class="line"><span class="meta">#</span><span class="bash"> 拉取镜像</span></span><br><span class="line">docker pull gitlab/gitlab-ce:latest</span><br></pre></td></tr></table></figure><h3 id="🎉-创建GitLab的配置-config-、-日志-log-、数据-data-三个文件夹，放到容器之外，-便于日后升级，-因此请先准备这三个目录">🎉 创建GitLab的配置 (config) 、 日志 (log) 、数据 (data) 三个文件夹，放到容器之外， 便于日后升级， 因此请先准备这三个目录</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mkdir -p /apps/Devops/gitlab/config</span><br><span class="line">mkdir -p /apps/Devops/gitlab/log</span><br><span class="line">mkdir -p /apps/Devops/gitlab/data</span><br></pre></td></tr></table></figure><h3 id="🎉-运行GitLab容器">🎉 运行GitLab容器</h3><p>运行成功后，此时会在上面我们创建的目录中生成一些文件，后面需要修改文件。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">docker run --detach \</span><br><span class="line">--publish 8443:443 --publish 8090:8090 --publish 2222:22 \</span><br><span class="line">--name gitlab \</span><br><span class="line">--restart always \</span><br><span class="line">--volume /apps/Devops/gitlab/config:/etc/gitlab \</span><br><span class="line">--volume /apps/Devops/gitlab/logs:/var/log/gitlab \</span><br><span class="line">--volume /apps/Devops/gitlab/data:/var/opt/gitlab \</span><br><span class="line">gitlab/gitlab-ce:latest</span><br></pre></td></tr></table></figure><p>8090端口是页面访问端口。</p><p>【注意】：gitlab初次启动比较慢，耐心等待后再访问页面！</p><h3 id="🎉-修改配置文件">🎉 修改配置文件</h3><p>修改 <code>/apps/Devops/gitlab/config/gitlab.rb</code></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">进入文件后，把external_url改成部署机器的域名或者IP地址，并取消注释。</span><br><span class="line"></span><br><span class="line">vim /apps/Devops/gitlab/config/gitlab.rb</span><br><span class="line">external_url &#x27;http://192.168.137.119:8090&#x27;      #ip为部署机器的IP或域名</span><br></pre></td></tr></table></figure><p>如图：</p><div class="gallery ">              <p><img src="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/article/abbrlink-3fe685e0/gitlab%E9%85%8D%E7%BD%AE%E8%AE%BF%E9%97%AE.png" class="lazyload placeholder" data-srcset="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/article/abbrlink-3fe685e0/gitlab%E9%85%8D%E7%BD%AE%E8%AE%BF%E9%97%AE.png" srcset="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/site-img/img-loading.gif" alt="gitlab配置访问"></p>            </div><h3 id="🎉-更改完配置文件运行以下命令重启容器">🎉 更改完配置文件运行以下命令重启容器</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker restart gitlab</span><br></pre></td></tr></table></figure><p>通过浏览器访问，默认账号root, 需要设置一个新密码。</p><p>访问报502说明容器还没启动完成，等待片刻即可访问到如下页面。</p><div class="gallery ">              <p><img src="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/article/abbrlink-3fe685e0/gitlab%E7%99%BB%E5%BD%95.png" class="lazyload placeholder" data-srcset="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/article/abbrlink-3fe685e0/gitlab%E7%99%BB%E5%BD%95.png" srcset="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/site-img/img-loading.gif" alt="gitlab登录"></p>            </div><p>至此，Gitlab搭建完成。</p><h2 id="🔥-Jenkins安装">🔥 Jenkins安装</h2><h3 id="🎉-拉取镜像">🎉 拉取镜像</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker pull jenkins/jenkins:lts</span><br></pre></td></tr></table></figure><h3 id="🎉-创建目录">🎉 创建目录</h3><p>由于防止jenkins中重要文件因为容器损毁或删除导致文件丢失，因此创建文件对外挂载。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mkdir -p /apps/Devops/jenkins</span><br></pre></td></tr></table></figure><p>并且需要对目录开放docker进程操作的完全读写的权限</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chmod 777 /apps/Devops/jenkins</span><br></pre></td></tr></table></figure><h3 id="🎉-启动容器">🎉 启动容器</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -itd -p 9980:8080 -p 50000:50000  --restart always -v /apps/Devops/jenkins:/var/jenkins_home --name jenkins  jenkins/jenkins:lts</span><br></pre></td></tr></table></figure><p>-p 端口映射：Jenkins是Java程序，默认端口是8080</p><h3 id="🎉-打开Jenkins管理页面">🎉 打开Jenkins管理页面</h3><p>访问地址：<code>http://192.168.137.119:9980/</code></p><div class="gallery ">              <p><img src="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/article/abbrlink-3fe685e0/jenkins%E7%99%BB%E5%BD%95%E9%A1%B5.png" class="lazyload placeholder" data-srcset="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/article/abbrlink-3fe685e0/jenkins%E7%99%BB%E5%BD%95%E9%A1%B5.png" srcset="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/site-img/img-loading.gif" alt="jenkins登录页"></p>            </div><p>出现如上页面，代表jenkins启动成功。</p><h3 id="🎉-查看日志获取初始密码">🎉 查看日志获取初始密码</h3><p>执行以下命令：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker logs -f jenkins</span><br></pre></td></tr></table></figure><p>复制下图中红框内的初始密码。</p><p>当然，你也可以不通过日志查看，你可以进入黄色框中描述的文件查看初始密码也是一样的，二选一。</p><div class="gallery ">              <p><img src="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/article/abbrlink-3fe685e0/jenkins%E6%97%A5%E5%BF%97.png" class="lazyload placeholder" data-srcset="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/article/abbrlink-3fe685e0/jenkins%E6%97%A5%E5%BF%97.png" srcset="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/site-img/img-loading.gif" alt="jenkins日志"></p>            </div><p>通过描述文件查看密码：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 1. 进入运行的jenkins容器中。</span></span><br><span class="line">docker exec -it jenkins /bin/bash</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 2. 进入容器中的/var/jenkins_home/secrets目录，初始密码就在initialAdminPassword文件中。</span></span><br><span class="line">cd /var/jenkins_home/secrets</span><br><span class="line">cat  initialAdminPassword</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 3. 退出容器</span></span><br><span class="line">exit</span><br></pre></td></tr></table></figure><p>将密码复制、粘贴到如下框框中，进入jenkins，需要等待数十秒（可能更久）！</p><div class="gallery ">              <p><img src="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/article/abbrlink-3fe685e0/jenkins%E5%AF%86%E7%A0%81%E8%BE%93%E5%85%A5.png" class="lazyload placeholder" data-srcset="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/article/abbrlink-3fe685e0/jenkins%E5%AF%86%E7%A0%81%E8%BE%93%E5%85%A5.png" srcset="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/site-img/img-loading.gif" alt="jenkins密码输入"></p>            </div><p>如果出现下图情况，等很久，还没有进入：</p><div class="gallery ">              <p><img src="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/article/abbrlink-3fe685e0/jenkins%E7%99%BB%E5%BD%95%E5%8A%A0%E8%BD%BD%E4%B8%AD.png" class="lazyload placeholder" data-srcset="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/article/abbrlink-3fe685e0/jenkins%E7%99%BB%E5%BD%95%E5%8A%A0%E8%BD%BD%E4%B8%AD.png" srcset="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/site-img/img-loading.gif" alt="jenkins登录加载中"></p>            </div><p>解决方案：<br>（1）进入我们前面挂载的Jenkins目录 <code>/apps/Devops/jenkins</code>，修改文件 <code>hudson.model.UpdateCenter.xml</code>。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd /apps/Devops/jenkins</span><br><span class="line">vim hudson.model.UpdateCenter.xml</span><br></pre></td></tr></table></figure><p>（2）将文件 <code>hudson.model.UpdateCenter.xml</code> 中 <code>https://updates.jenkins.io/update-center.json</code> 改成 <code>http://updates.jenkins.io/update-center.json</code>（把https改成http）。</p><div class="gallery ">              <p><img src="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/article/abbrlink-3fe685e0/https%E6%9B%BF%E6%8D%A2.png" class="lazyload placeholder" data-srcset="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/article/abbrlink-3fe685e0/https%E6%9B%BF%E6%8D%A2.png" srcset="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/site-img/img-loading.gif" alt="https替换"></p>            </div><p>（3）保存，重启Jenkins容器</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker restart jenkins</span><br></pre></td></tr></table></figure><p>（4）重新进入Jenkins管理页面：<code>http://192.168.137.119:9980/</code>（稍等一会儿，就可以进入）</p><h3 id="🎉-安装推荐的插件">🎉 安装推荐的插件</h3><p>如下图所示，左侧显示安装建议的插件。右侧选择自定义安装插件。</p><p>先按照建议插件进行安装，点击左侧即可。</p><div class="gallery ">              <p><img src="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/article/abbrlink-3fe685e0/%E5%AE%89%E8%A3%85%E6%8E%A8%E8%8D%90%E6%8F%92%E4%BB%B6.png" class="lazyload placeholder" data-srcset="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/article/abbrlink-3fe685e0/%E5%AE%89%E8%A3%85%E6%8E%A8%E8%8D%90%E6%8F%92%E4%BB%B6.png" srcset="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/site-img/img-loading.gif" alt="安装推荐插件"></p>            </div><p>如果全部都能正确安装，更好。出现安装失败的插件，等待所有结束，下方会有Retry可以进行重试。</p><p>最后重试后，依旧没有安装成功的，可以先continue,完成初始化的步骤。随后<a href="https://www.cnblogs.com/sxdcgaq8080/p/10489326.html">参考这篇文章解决</a>。</p><p>安装完成后会自动出现如下界面：</p><div class="gallery ">              <p><img src="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/article/abbrlink-3fe685e0/%E5%88%9B%E5%BB%BA%E7%AE%A1%E7%90%86%E7%94%A8%E6%88%B7.png" class="lazyload placeholder" data-srcset="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/article/abbrlink-3fe685e0/%E5%88%9B%E5%BB%BA%E7%AE%A1%E7%90%86%E7%94%A8%E6%88%B7.png" srcset="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/site-img/img-loading.gif" alt="创建管理用户"></p>            </div><p>将信息输入对应输入框内，点击保存并完成，之后的步骤默认点击保存并完成即可。</p><h3 id="🎉-成功安装Jenkins">🎉 成功安装Jenkins</h3><p>出现下图代表成功安装Jenkins：</p><div class="gallery ">              <p><img src="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/article/abbrlink-3fe685e0/jenkins%E5%AE%89%E8%A3%85%E6%88%90%E5%8A%9F%E5%9B%BE.png" class="lazyload placeholder" data-srcset="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/article/abbrlink-3fe685e0/jenkins%E5%AE%89%E8%A3%85%E6%88%90%E5%8A%9F%E5%9B%BE.png" srcset="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/site-img/img-loading.gif" alt="jenkins安装成功图"></p>            </div><p>安装成功之后重启一下jenkins容器：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker restart jenkins</span><br></pre></td></tr></table></figure><h2 id="🔥-Jenkins配置">🔥 Jenkins配置</h2><h3 id="🎉-设置Jenkins时区为北京时间">🎉 设置Jenkins时区为北京时间</h3><p>点击 Manage Jenkins（系统管理） ——&gt; Script Console（脚本命令行）</p><div class="gallery ">              <p><img src="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/article/abbrlink-3fe685e0/%E8%AE%BE%E7%BD%AEjenkins%E6%97%B6%E5%8C%BA.png" class="lazyload placeholder" data-srcset="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/article/abbrlink-3fe685e0/%E8%AE%BE%E7%BD%AEjenkins%E6%97%B6%E5%8C%BA.png" srcset="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/site-img/img-loading.gif" alt="设置jenkins时区"></p>            </div><p>输入脚本并运行：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">System.setProperty(&#39;org.apache.commons.jelly.tags.fmt.timeZone&#39;, &#39;Asia&#x2F;Shanghai&#39;)</span><br></pre></td></tr></table></figure><p>如图显示Result表示成功：</p><div class="gallery ">              <p><img src="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/article/abbrlink-3fe685e0/%E8%AE%BE%E7%BD%AEjenkins%E6%97%B6%E5%8C%BA%E6%88%90%E5%8A%9F.png" class="lazyload placeholder" data-srcset="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/article/abbrlink-3fe685e0/%E8%AE%BE%E7%BD%AEjenkins%E6%97%B6%E5%8C%BA%E6%88%90%E5%8A%9F.png" srcset="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/site-img/img-loading.gif" alt="设置jenkins时区成功"></p>            </div><h3 id="🎉-安装自动化构建和部署所需的插件">🎉 安装自动化构建和部署所需的插件</h3><p>所需插件：<code>Maven Integration</code>、<code>Pipeline Maven Integration</code>、<code>Gitlab</code>、<code>Gitlab hook</code>、<code>SSH</code>、<code>Publish Over SSH</code>、<code>Docker</code></p><p>点击 Manage Jenkins（系统管理） ——&gt; Manage Plugins（插件管理）</p><div class="gallery ">              <p><img src="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/article/abbrlink-3fe685e0/%E6%8F%92%E4%BB%B6%E7%AE%A1%E7%90%86.png" class="lazyload placeholder" data-srcset="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/article/abbrlink-3fe685e0/%E6%8F%92%E4%BB%B6%E7%AE%A1%E7%90%86.png" srcset="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/site-img/img-loading.gif" alt="插件管理"></p>            </div><h4 id="🐳-安装Maven插件">🐳 安装Maven插件</h4><p>点击可选插件 ——&gt; 过滤Maven Integration插件 ——&gt; 勾选Maven Integration和Pipeline Maven Integration ——&gt; 点击直接安装</p><div class="gallery ">              <p><img src="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/article/abbrlink-3fe685e0/%E5%AE%89%E8%A3%85Maven%E6%8F%92%E4%BB%B6.png" class="lazyload placeholder" data-srcset="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/article/abbrlink-3fe685e0/%E5%AE%89%E8%A3%85Maven%E6%8F%92%E4%BB%B6.png" srcset="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/site-img/img-loading.gif" alt="安装Maven插件"></p>            </div><p>如图开始安装插件：</p><div class="gallery ">              <p><img src="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/article/abbrlink-3fe685e0/%E5%AE%89%E8%A3%85Maven%E6%8F%92%E4%BB%B6%E8%BF%9B%E8%A1%8C%E4%B8%AD.png" class="lazyload placeholder" data-srcset="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/article/abbrlink-3fe685e0/%E5%AE%89%E8%A3%85Maven%E6%8F%92%E4%BB%B6%E8%BF%9B%E8%A1%8C%E4%B8%AD.png" srcset="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/site-img/img-loading.gif" alt="安装Maven插件进行中"></p>            </div><p>安装完成后，即可在插件管理下的已安装选项卡下看到刚刚已经安装的插件。</p><h4 id="🐳-安装Gitlab插件">🐳 安装Gitlab插件</h4><p>点击可选插件 ——&gt; 过滤Gitlab插件 ——&gt; 勾选Gitlab和Gitlab Hook ——&gt; 点击直接安装</p><div class="gallery ">              <p><img src="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/article/abbrlink-3fe685e0/%E5%AE%89%E8%A3%85Gitlab%E6%8F%92%E4%BB%B6.png" class="lazyload placeholder" data-srcset="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/article/abbrlink-3fe685e0/%E5%AE%89%E8%A3%85Gitlab%E6%8F%92%E4%BB%B6.png" srcset="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/site-img/img-loading.gif" alt="安装Gitlab插件"></p>            </div><h4 id="🐳-安装SSH插件和Publish-Over-SSH插件">🐳 安装SSH插件和Publish Over SSH插件</h4><p>安装Publish Over SSH插件的原因：因为本方式是使用docker启动jenkins服务，所以在jenkins后续执行构建任务时候，需要在build成功后，将服务的jar包（以spring boot）服务为例，需要将jar包拷贝到Dockerfile所在服务器的指定目录，进行微服务的启动；所以，此处需要配置SSH服务器的连接，意思就是在jenkins的任务结束后，去执行指定的服务器上的shell命令，做spring boot或cloud服务的镜像的构建，容器的运行，等一系列的事情。</p><p>点击可选插件 ——&gt; 过滤SSH插件 ——&gt; 勾选SSH和Publish Over SSH ——&gt; 点击直接安装</p><div class="gallery ">              <p><img src="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/article/abbrlink-3fe685e0/%E5%AE%89%E8%A3%85SSH%E6%8F%92%E4%BB%B6.png" class="lazyload placeholder" data-srcset="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/article/abbrlink-3fe685e0/%E5%AE%89%E8%A3%85SSH%E6%8F%92%E4%BB%B6.png" srcset="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/site-img/img-loading.gif" alt="安装SSH插件"></p>            </div><h4 id="🐳-安装Docker插件">🐳 安装Docker插件</h4><p>点击可选插件 ——&gt; 过滤Docker插件 ——&gt; 勾选Docker ——&gt; 点击直接安装</p><div class="gallery ">              <p><img src="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/article/abbrlink-3fe685e0/%E5%AE%89%E8%A3%85Docker%E6%8F%92%E4%BB%B6.png" class="lazyload placeholder" data-srcset="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/article/abbrlink-3fe685e0/%E5%AE%89%E8%A3%85Docker%E6%8F%92%E4%BB%B6.png" srcset="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/site-img/img-loading.gif" alt="安装Docker插件"></p>            </div><p>插件全部安装完成后，可以重启一下Jenkins。</p><h3 id="🎉-添加凭据">🎉 添加凭据</h3><p>点击 Manage Jenkins（系统管理） ——&gt; Manage Credentials（凭据管理）</p><div class="gallery ">              <p><img src="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/article/abbrlink-3fe685e0/%E5%87%AD%E6%8D%AE%E7%AE%A1%E7%90%86.png" class="lazyload placeholder" data-srcset="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/article/abbrlink-3fe685e0/%E5%87%AD%E6%8D%AE%E7%AE%A1%E7%90%86.png" srcset="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/site-img/img-loading.gif" alt="凭据管理"></p>            </div><p>点击添加凭据 ——&gt; 输入宿主机服务器的用户名和密码等信息并保存</p><div class="gallery ">              <p><img src="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/article/abbrlink-3fe685e0/%E5%87%AD%E6%8D%AE%E4%BF%A1%E6%81%AF.png" class="lazyload placeholder" data-srcset="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/article/abbrlink-3fe685e0/%E5%87%AD%E6%8D%AE%E4%BF%A1%E6%81%AF.png" srcset="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/site-img/img-loading.gif" alt="凭据信息"></p>            </div><h3 id="🎉-配置SSH-remote-hosts">🎉 配置SSH remote hosts</h3><p>这个配置是干什么的呢？配置SSH连接Dockerfile所在服务器的相关信息，并添加凭证，最后测试连接并保存，以备后面使用！！！</p><p>点击 Manage Jenkins（系统管理） ——&gt; 系统配置</p><div class="gallery ">              <p><img src="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/article/abbrlink-3fe685e0/%E9%85%8D%E7%BD%AESSH-remote-hosts.png" class="lazyload placeholder" data-srcset="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/article/abbrlink-3fe685e0/%E9%85%8D%E7%BD%AESSH-remote-hosts.png" srcset="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/site-img/img-loading.gif" alt="配置SSH-remote-hosts"></p>            </div><p>找到配置 ——&gt; 下拉选择SSH remote hosts</p><div class="gallery ">              <p><img src="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/article/abbrlink-3fe685e0/%E6%89%BE%E5%88%B0SSH-remote-hosts.png" class="lazyload placeholder" data-srcset="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/article/abbrlink-3fe685e0/%E6%89%BE%E5%88%B0SSH-remote-hosts.png" srcset="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/site-img/img-loading.gif" alt="找到SSH-remote-hosts"></p>            </div><p>如下图，输入对应的信息，并校验是否连接成功！成功后，点击应用 ——&gt; 点击保存</p><div class="gallery ">              <p><img src="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/article/abbrlink-3fe685e0/SSH-remote-hosts%E9%85%8D%E7%BD%AE%E4%BF%A1%E6%81%AF.png" class="lazyload placeholder" data-srcset="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/article/abbrlink-3fe685e0/SSH-remote-hosts%E9%85%8D%E7%BD%AE%E4%BF%A1%E6%81%AF.png" srcset="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/site-img/img-loading.gif" alt="SSH-remote-hosts配置信息"></p>            </div><h3 id="🎉-配置Publish-over-SSH">🎉 配置Publish over SSH</h3><p>找到配置 ——&gt; 下拉选择SSH remote hosts</p><p>进行相关配置即可。</p><div class="gallery ">              <p><img src="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/article/abbrlink-3fe685e0/Publish-over-SSH.png" class="lazyload placeholder" data-srcset="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/article/abbrlink-3fe685e0/Publish-over-SSH.png" srcset="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/site-img/img-loading.gif" alt="Publish-over-SSH"></p>            </div><h3 id="🎉-全局工具配置">🎉 全局工具配置</h3><p>由于我们要实现的是SpringBoot项目的自动化部署操作，所以需要安装JDK、Git、Maven、Docker。</p><div class="gallery ">              <p><img src="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/article/abbrlink-3fe685e0/%E5%85%A8%E5%B1%80%E5%B7%A5%E5%85%B7%E9%85%8D%E7%BD%AE.png" class="lazyload placeholder" data-srcset="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/article/abbrlink-3fe685e0/%E5%85%A8%E5%B1%80%E5%B7%A5%E5%85%B7%E9%85%8D%E7%BD%AE.png" srcset="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/site-img/img-loading.gif" alt="全局工具配置"></p>            </div><h4 id="🐳-安装JDK">🐳 安装JDK</h4><p>可以安装多个，根据项目JDK版本需求。</p><p>输入自定义JDK名称 ——&gt; 勾选自动安装 ——&gt; 输入Oracle账户、密码 ——&gt; 选择JDK版本 ——&gt; 勾选同意协议</p><div class="gallery ">              <p><img src="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/article/abbrlink-3fe685e0/%E5%AE%89%E8%A3%85JDK.png" class="lazyload placeholder" data-srcset="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/article/abbrlink-3fe685e0/%E5%AE%89%E8%A3%85JDK.png" srcset="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/site-img/img-loading.gif" alt="安装JDK"></p>            </div><h4 id="🐳-安装Git">🐳 安装Git</h4><p>输入自定义Git名称 ——&gt; 勾选自动安装</p><div class="gallery ">              <p><img src="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/article/abbrlink-3fe685e0/%E5%AE%89%E8%A3%85Git.png" class="lazyload placeholder" data-srcset="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/article/abbrlink-3fe685e0/%E5%AE%89%E8%A3%85Git.png" srcset="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/site-img/img-loading.gif" alt="安装Git"></p>            </div><h4 id="🐳-安装Maven">🐳 安装Maven</h4><p>输入自定义名称 ——&gt; 勾选自动安装 ——&gt; 选择版本</p><div class="gallery ">              <p><img src="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/article/abbrlink-3fe685e0/%E5%AE%89%E8%A3%85Maven.png" class="lazyload placeholder" data-srcset="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/article/abbrlink-3fe685e0/%E5%AE%89%E8%A3%85Maven.png" srcset="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/site-img/img-loading.gif" alt="安装Maven"></p>            </div><h4 id="🐳-安装Docker">🐳 安装Docker</h4><p>输入自定义名称 ——&gt; 勾选自动安装</p><div class="gallery ">              <p><img src="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/article/abbrlink-3fe685e0/%E5%AE%89%E8%A3%85Docker.png" class="lazyload placeholder" data-srcset="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/article/abbrlink-3fe685e0/%E5%AE%89%E8%A3%85Docker.png" srcset="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/site-img/img-loading.gif" alt="安装Docker"></p>            </div><p>最后，点击应用 ——&gt; 点击保存即可。</p><h2 id="🔥-新建Jenkins任务">🔥 新建Jenkins任务</h2><h3 id="🎉-点击新建任务，输入名称">🎉 点击新建任务，输入名称</h3><p>注意：本名称一般和项目名称一致，因为本名称会在jenkins工作空间下生成目录，类似于IDEA或Eclipse的工作空间的概念。所以，一般情况下，保证本名称=项目名称=docker镜像名称=docker容器名称 这样能尽可能的减轻jenkins配置的shell命令的复杂性！（空间命名要小写：因为镜像名不允许存在大写字母）</p><p>选择构建一个Maven项目（因为是Spring Boot的服务）</p><div class="gallery ">              <p><img src="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/article/abbrlink-3fe685e0/%E6%9E%84%E5%BB%BAMaven%E9%A1%B9%E7%9B%AE.png" class="lazyload placeholder" data-srcset="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/article/abbrlink-3fe685e0/%E6%9E%84%E5%BB%BAMaven%E9%A1%B9%E7%9B%AE.png" srcset="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/site-img/img-loading.gif" alt="构建Maven项目"></p>            </div><h3 id="🎉-源码管理">🎉 源码管理</h3><p>输入描述信息，源码管理选择Git，从gitlab复制克隆地址粘贴到Repository URL中，没有报错就表示OK的，（注意，这里我是克隆HTTP方式的地址，如果你是克隆SSH方式的地址，你需要添加Credentials，配置一下就可以了）</p><div class="gallery ">              <p><img src="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/article/abbrlink-3fe685e0/%E6%BA%90%E7%A0%81%E7%AE%A1%E7%90%86.png" class="lazyload placeholder" data-srcset="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/article/abbrlink-3fe685e0/%E6%BA%90%E7%A0%81%E7%AE%A1%E7%90%86.png" srcset="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/site-img/img-loading.gif" alt="源码管理"></p>            </div><h3 id="🎉-构建触发器">🎉 构建触发器</h3><p>接下来将会生成供gitlab配置webhook使用的URL和Token，请记录下来，后面会使用。</p><div class="gallery ">              <p><img src="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/article/abbrlink-3fe685e0/%E8%A7%A6%E5%8F%91%E6%9E%84%E5%BB%BAURL.png" class="lazyload placeholder" data-srcset="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/article/abbrlink-3fe685e0/%E8%A7%A6%E5%8F%91%E6%9E%84%E5%BB%BAURL.png" srcset="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/site-img/img-loading.gif" alt="触发构建URL"></p>            </div><p>点击高级，拉下来找到Generate并点击，生成一串Secret Token。</p><div class="gallery ">              <p><img src="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/article/abbrlink-3fe685e0/%E8%A7%A6%E5%8F%91%E6%9E%84%E5%BB%BAToken.png" class="lazyload placeholder" data-srcset="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/article/abbrlink-3fe685e0/%E8%A7%A6%E5%8F%91%E6%9E%84%E5%BB%BAToken.png" srcset="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/site-img/img-loading.gif" alt="触发构建Token"></p>            </div><h3 id="🎉-添加webhook">🎉 添加webhook</h3><p>前往gitlab，进入要构建的项目，在setting中选择Webhooks，输入URL和Secret Token 这两在上面图中已经给你标注了，去掉Enable SSL verification的勾选。</p><div class="gallery ">              <p><img src="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/article/abbrlink-3fe685e0/gitlab-webhook%E9%85%8D%E7%BD%AE.png" class="lazyload placeholder" data-srcset="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/article/abbrlink-3fe685e0/gitlab-webhook%E9%85%8D%E7%BD%AE.png" srcset="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/site-img/img-loading.gif" alt="gitlab-webhook配置"></p>            </div><p>点击Add webhook，如图表示成功添加了webhook：</p><div class="gallery ">              <p><img src="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/article/abbrlink-3fe685e0/webhook%E9%85%8D%E7%BD%AE%E6%88%90%E5%8A%9F.png" class="lazyload placeholder" data-srcset="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/article/abbrlink-3fe685e0/webhook%E9%85%8D%E7%BD%AE%E6%88%90%E5%8A%9F.png" srcset="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/site-img/img-loading.gif" alt="webhook配置成功"></p>            </div><p>如果添加不成功解决方案请参考：<a href="https://www.cnblogs.com/zhongyuanzhao000/p/11379098.html">解决 Url is blocked: Requests to the local network are not allowed</a></p><h3 id="🎉-构建环境">🎉 构建环境</h3><p>勾选Add timestamps to the Console Output，等下可以看到控制台打印的信息，这个根据自己的需求勾选。</p><div class="gallery ">              <p><img src="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/article/abbrlink-3fe685e0/%E6%9E%84%E5%BB%BA%E7%8E%AF%E5%A2%83.png" class="lazyload placeholder" data-srcset="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/article/abbrlink-3fe685e0/%E6%9E%84%E5%BB%BA%E7%8E%AF%E5%A2%83.png" srcset="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/site-img/img-loading.gif" alt="构建环境"></p>            </div><h3 id="🎉-Pre-Steps-构建之前的步骤">🎉 Pre Steps(构建之前的步骤)</h3><p>配置前一步需要做的事情是：清理本项目在jenkins的workspace中的历史文件夹。</p><p>你可以不用知道WORKSPACE具体的地址在哪里，因为下方有链接可以查看到当前jenkins中有哪些可用的变量供你使用。</p><p>默认WORKSPACE地址：<code>/var/jenkins_home/workspace</code>（如果你jenkins是docker启动的，并且挂载了目录在宿主机，那你在宿主机也是可以看到的，即 <code>/apps/Devops/jenkins/workspace</code>）</p><p>本处选择的是执行shell，则表示本处配置的shell命令，是默认在jenkins容器中执行的，而不是在宿主机上。</p><p>下拉选择执行 shell：</p><div class="gallery ">              <p><img src="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/article/abbrlink-3fe685e0/%E6%89%A7%E8%A1%8C%E6%9E%84%E5%BB%BA%E5%89%8D%E7%9A%84%E6%93%8D%E4%BD%9C.png" class="lazyload placeholder" data-srcset="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/article/abbrlink-3fe685e0/%E6%89%A7%E8%A1%8C%E6%9E%84%E5%BB%BA%E5%89%8D%E7%9A%84%E6%93%8D%E4%BD%9C.png" srcset="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/site-img/img-loading.gif" alt="执行构建前的操作"></p>            </div><p>在执行shell的命令中输入以下命令，设置全局变量：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">SERVER_NAME_1=jenkins-docker-gitlab-springboot</span><br><span class="line">echo &quot;=========================&gt;&gt;&gt;&gt;&gt;&gt;&gt;工作空间WORKSPACE的地址：$WORKSPACE &quot;</span><br><span class="line">cd $WORKSPACE</span><br><span class="line">echo &quot;=========================&gt;&gt;&gt;&gt;&gt;&gt;&gt;进入工作空间WORKSPACE，清除工作空间中原项目的工作空间$SERVER_NAME_1 &quot;</span><br><span class="line">rm -rf $SERVER_NAME_1</span><br><span class="line">echo &quot;=========================&gt;&gt;&gt;&gt;&gt;&gt;&gt;清除工作空间中原项目的工作空间$SERVER_NAME_1 ......成功success&quot;</span><br></pre></td></tr></table></figure><p>注意：本处的SERVER_NAME_1=jenkins-docker-gitlab-springboot是配置项目的名称</p><h3 id="🎉-Build-构建">🎉 Build(构建)</h3><p>我们是SpringBoot项目，所以用到maven，这里设置一下全局操作，clean项目，并打成jar包，所以这里输入：<code>clean package</code></p><div class="gallery ">              <p><img src="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/article/abbrlink-3fe685e0/Build%E6%9E%84%E5%BB%BA.png" class="lazyload placeholder" data-srcset="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/article/abbrlink-3fe685e0/Build%E6%9E%84%E5%BB%BA.png" srcset="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/site-img/img-loading.gif" alt="Build构建"></p>            </div><h3 id="🎉-Post-Steps-执行任务">🎉 Post Steps(执行任务)</h3><p>只在jenkins构建成功后，才执行这一步。</p><p>因为最后的构建成功的maven项目的jar包是以docker启动服务为目的，所以最后的docker操作，一定是在jenkins容器以外的服务器上运行的，可能是本机宿主机，也可能是远程的服务器，这个根据自己的情况去配置。</p><p>本处选择，在远程的SSH执行shell脚本。</p><p>选中只有构建成功才执行这些命令，然后选择Execute shell script on remote host using ssh。</p><div class="gallery ">              <p><img src="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/article/abbrlink-3fe685e0/%E6%89%A7%E8%A1%8C%E4%BB%BB%E5%8A%A1.png" class="lazyload placeholder" data-srcset="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/article/abbrlink-3fe685e0/%E6%89%A7%E8%A1%8C%E4%BB%BB%E5%8A%A1.png" srcset="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/site-img/img-loading.gif" alt="执行任务"></p>            </div><details green><summary> shell命令 </summary>              <div class='content'>              <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">=====================================================================================</span></span><br><span class="line"><span class="meta">#</span><span class="bash">=================================定义初始化变量======================================</span></span><br><span class="line"><span class="meta">#</span><span class="bash">=====================================================================================</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">操作/项目路径(Dockerfile存放的路劲)</span></span><br><span class="line">BASE_PATH=/apps/jenkins-docker-gitlab-springboot</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> jenkins构建好的源jar路径</span>  </span><br><span class="line">SOURCE_PATH=/apps/Devops/jenkins/workspace</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">【docker 镜像】【docker容器】【Dockerfile同目录下的jar名字[用它build生成image的jar]】【jenkins的workspace下的项目名称】</span></span><br><span class="line"><span class="meta">#</span><span class="bash">这里都以这个命名[微服务的话，每个服务都以 ms-项目名 这种格式命名]</span></span><br><span class="line"><span class="meta">#</span><span class="bash">注意统一名称！！！！！</span></span><br><span class="line">SERVER_NAME=jenkins-docker-gitlab-springboot</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">容器id  [grep -w 全量匹配容器名] [awk 获取信息行的第一列，即容器ID]  [无论容器启动与否，都获取到]</span></span><br><span class="line">CID=$(docker ps -a | grep -w &quot;$SERVER_NAME&quot; | awk &#x27;&#123;print $1&#125;&#x27;)</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">镜像id  [grep -w 全量匹配镜像名] [awk 获取信息行的第三列，即镜像ID]</span></span><br><span class="line">IID=$(docker images | grep -w &quot;$SERVER_NAME&quot; | awk &#x27;&#123;print $3&#125;&#x27;)</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">源jar完整地址  [jenkins构建成功后，会在自己的workspace/项目/target 下生成maven构建成功的jar包，获取jar包名的完整路径]</span></span><br><span class="line"><span class="meta">#</span><span class="bash">例如：/apps/Devops/jenkins/workspace/jenkins-docker-gitlab-springboot/target/jenkins-docker-gitlab-springboot-0.0.1-SNAPSHOT.jar</span></span><br><span class="line">SOURCE_JAR_PATH=$(find &quot;$SOURCE_PATH/$SERVER_NAME/target/&quot;  -name &quot;*$SERVER_NAME*.jar&quot; )</span><br><span class="line"></span><br><span class="line">DATE=`date +%Y%m%d%H%M%S`</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">=====================================================================================</span></span><br><span class="line"><span class="meta">#</span><span class="bash">============================对原本已存在的jar进行备份================================</span></span><br><span class="line"><span class="meta">#</span><span class="bash">=====================================================================================</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 备份</span></span><br><span class="line">function backup()&#123;</span><br><span class="line">    if [ -f &quot;$BASE_PATH/$SERVER_NAME.jar&quot; ]; then</span><br><span class="line">        echo &quot;=========================&gt;&gt;&gt;&gt;&gt;&gt;&gt;$SERVER_NAME.jar 备份...&quot;</span><br><span class="line">            mv $BASE_PATH/$SERVER_NAME.jar $BASE_PATH/backup/$SERVER_NAME-$DATE.jar</span><br><span class="line">        echo &quot;=========================&gt;&gt;&gt;&gt;&gt;&gt;&gt;备份老的 $SERVER_NAME.jar 完成&quot;</span><br><span class="line"></span><br><span class="line">    else</span><br><span class="line">        echo &quot;=========================&gt;&gt;&gt;&gt;&gt;&gt;&gt;老的$BASE_PATH/$SERVER_NAME.jar不存在，跳过备份&quot;</span><br><span class="line">    fi</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">=====================================================================================</span></span><br><span class="line"><span class="meta">#</span><span class="bash">=========================移动最新源jar包到Dockerfile所在目录=========================</span></span><br><span class="line"><span class="meta">#</span><span class="bash">=====================================================================================</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"><span class="meta">#</span><span class="bash"> 查找源jar文件名，进行重命名，最后将源文件移动到Dockerfile文件所在目录</span></span><br><span class="line">function transfer()&#123;</span><br><span class="line">       </span><br><span class="line">         </span><br><span class="line">    echo &quot;=========================&gt;&gt;&gt;&gt;&gt;&gt;&gt;源文件完整地址为 $SOURCE_JAR_PATH&quot;</span><br><span class="line"></span><br><span class="line">        </span><br><span class="line">    echo &quot;=========================&gt;&gt;&gt;&gt;&gt;&gt;&gt;重命名源文件&quot;</span><br><span class="line">        mv $SOURCE_JAR_PATH  $SOURCE_PATH/$SERVER_NAME/target/$SERVER_NAME.jar</span><br><span class="line"></span><br><span class="line">    echo &quot;=========================&gt;&gt;&gt;&gt;&gt;&gt;&gt;最新构建代码 $SOURCE_PATH/$SERVER_NAME/target/$SERVER_NAME.jar 迁移至 $BASE_PATH&quot;</span><br><span class="line">        cp $SOURCE_PATH/$SERVER_NAME/target/$SERVER_NAME.jar $BASE_PATH </span><br><span class="line"></span><br><span class="line">    echo &quot;=========================&gt;&gt;&gt;&gt;&gt;&gt;&gt;迁移完成Success&quot;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">=====================================================================================</span></span><br><span class="line"><span class="meta">#</span><span class="bash">==================================构建最新镜像=======================================</span></span><br><span class="line"><span class="meta">#</span><span class="bash">=====================================================================================</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"><span class="meta">#</span><span class="bash"> 构建docker镜像</span></span><br><span class="line">function build()&#123;</span><br><span class="line">    </span><br><span class="line">    #无论镜像存在与否，都停止原容器服务，并移除原容器服务</span><br><span class="line">    echo &quot;=========================&gt;&gt;&gt;&gt;&gt;&gt;&gt;停止$SERVER_NAME容器，CID=$CID&quot;</span><br><span class="line">    docker stop $CID</span><br><span class="line"></span><br><span class="line">    echo &quot;=========================&gt;&gt;&gt;&gt;&gt;&gt;&gt;移除$SERVER_NAME容器，CID=$CID&quot;</span><br><span class="line">    docker rm $CID</span><br><span class="line"></span><br><span class="line">    #无论如何，都去构建新的镜像</span><br><span class="line">    if [ -n &quot;$IID&quot; ]; then</span><br><span class="line">        echo &quot;=========================&gt;&gt;&gt;&gt;&gt;&gt;&gt;存在$SERVER_NAME镜像，IID=$IID&quot;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        echo &quot;=========================&gt;&gt;&gt;&gt;&gt;&gt;&gt;移除老的$SERVER_NAME镜像，IID=$IID&quot;</span><br><span class="line">        docker rmi $IID</span><br><span class="line"></span><br><span class="line">        echo &quot;=========================&gt;&gt;&gt;&gt;&gt;&gt;&gt;构建新的$SERVER_NAME镜像，开始----&gt;&quot;</span><br><span class="line">        cd $BASE_PATH</span><br><span class="line">        docker build -t $SERVER_NAME .</span><br><span class="line">        echo &quot;=========================&gt;&gt;&gt;&gt;&gt;&gt;&gt;构建新的$SERVER_NAME镜像，完成----&gt;&quot;</span><br><span class="line"></span><br><span class="line">    else</span><br><span class="line">        echo &quot;=========================&gt;&gt;&gt;&gt;&gt;&gt;&gt;不存在$SERVER_NAME镜像，构建新的镜像，开始---&gt;&quot;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        cd $BASE_PATH</span><br><span class="line">        docker build -t $SERVER_NAME .</span><br><span class="line">        echo &quot;=========================&gt;&gt;&gt;&gt;&gt;&gt;&gt;构建新的$SERVER_NAME镜像，结束---&gt;&quot;</span><br><span class="line">    fi</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">=====================================================================================</span></span><br><span class="line"><span class="meta">#</span><span class="bash">==============================运行docker容器，启动服务===============================</span></span><br><span class="line"><span class="meta">#</span><span class="bash">=====================================================================================</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 运行docker容器</span></span><br><span class="line">function run()&#123;</span><br><span class="line">    backup</span><br><span class="line">    transfer</span><br><span class="line">    build</span><br><span class="line"></span><br><span class="line">    docker run --name $SERVER_NAME -itd --net=host -v /etc/localtime:/etc/localtime:ro  -v /etc/timezone:/etc/timezone:ro  $SERVER_NAME </span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="meta">#</span><span class="bash">入口</span></span><br><span class="line">run</span><br></pre></td></tr></table></figure>              </div>            </details><div class="gallery ">              <p><img src="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/article/abbrlink-3fe685e0/shell%E8%84%9A%E6%9C%AC%E5%91%BD%E4%BB%A4.png" class="lazyload placeholder" data-srcset="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/article/abbrlink-3fe685e0/shell%E8%84%9A%E6%9C%AC%E5%91%BD%E4%BB%A4.png" srcset="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/site-img/img-loading.gif" alt="shell脚本命令"></p>            </div><p>OK，到这里基本的任务已经新建成功，至于后续的两个步骤，根据自己的需求自行配置，没有难度的。</p><p>点击应用，保存。</p><h3 id="🎉-测试">🎉 测试</h3><p>测试push事件触发自动化构建和部署，点击test下拉选择push events，出现HTTP 200表示OK了。</p><div class="gallery ">              <p><img src="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/article/abbrlink-3fe685e0/%E6%B5%8B%E8%AF%95webhook.png" class="lazyload placeholder" data-srcset="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/article/abbrlink-3fe685e0/%E6%B5%8B%E8%AF%95webhook.png" srcset="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/site-img/img-loading.gif" alt="测试webhook"></p>            </div><p>回到Jenkins可以看到任务列表，查看构建信息等。</p><div class="gallery ">              <p><img src="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/article/abbrlink-3fe685e0/%E6%9E%84%E5%BB%BA%E4%BF%A1%E6%81%AF.png" class="lazyload placeholder" data-srcset="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/article/abbrlink-3fe685e0/%E6%9E%84%E5%BB%BA%E4%BF%A1%E6%81%AF.png" srcset="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/site-img/img-loading.gif" alt="构建信息"></p>            </div><p>待Jenkins构建成功之后，在服务器上执行命令：<code>docker ps</code>，可以看到我们启动起来的 SpringBoot 容器：</p><div class="gallery ">              <p><img src="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/article/abbrlink-3fe685e0/docker%E5%90%AF%E5%8A%A8%E7%9A%84%E5%AE%B9%E5%99%A8.png" class="lazyload placeholder" data-srcset="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/article/abbrlink-3fe685e0/docker%E5%90%AF%E5%8A%A8%E7%9A%84%E5%AE%B9%E5%99%A8.png" srcset="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/site-img/img-loading.gif" alt="docker启动的容器"></p>            </div><p>在浏览器输入：<code>http://服务器ip:端口/</code> 即可访问刚自动部署的项目：</p><div class="gallery ">              <p><img src="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/article/abbrlink-3fe685e0/%E8%BF%90%E8%A1%8C%E6%88%90%E5%8A%9F.png" class="lazyload placeholder" data-srcset="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/article/abbrlink-3fe685e0/%E8%BF%90%E8%A1%8C%E6%88%90%E5%8A%9F.png" srcset="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/site-img/img-loading.gif" alt="运行成功"></p>            </div><h2 id="🔥-配置邮件通知">🔥 配置邮件通知</h2><p>完成基于jenkins的持续集成部署后，任务构建执行完成，测试结果需要通知到相关人员（这个邮件通知根据自己需求选择添加，非必须）。</p><h3 id="🎉-安装邮件插件">🎉 安装邮件插件</h3><p>由于Jenkins自带的邮件功能比较鸡肋，因此这里推荐安装专门的邮件插件，不过下面也会顺带介绍如何配置Jenkins自带的邮件功能作用。</p><p>点击系统管理  ——&gt;  插件管理  ——&gt; 可选插件：</p><div class="gallery ">              <p><img src="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/article/abbrlink-3fe685e0/%E5%AE%89%E8%A3%85%E9%82%AE%E4%BB%B6%E6%8F%92%E4%BB%B6.png" class="lazyload placeholder" data-srcset="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/article/abbrlink-3fe685e0/%E5%AE%89%E8%A3%85%E9%82%AE%E4%BB%B6%E6%8F%92%E4%BB%B6.png" srcset="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/site-img/img-loading.gif" alt="安装邮件插件"></p>            </div><p>选择Email Extension Plugin插件进行安装，安装好之后重启Jenkins。</p><div class="gallery ">              <p><img src="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/article/abbrlink-3fe685e0/%E9%82%AE%E4%BB%B6%E6%8F%92%E4%BB%B6.png" class="lazyload placeholder" data-srcset="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/article/abbrlink-3fe685e0/%E9%82%AE%E4%BB%B6%E6%8F%92%E4%BB%B6.png" srcset="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/site-img/img-loading.gif" alt="邮件插件"></p>            </div><h3 id="🎉-系统设置">🎉 系统设置</h3><p>点击系统管理  ——&gt;  系统配置，进行邮件配置：</p><div class="gallery ">              <p><img src="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/article/abbrlink-3fe685e0/%E7%B3%BB%E7%BB%9F%E9%85%8D%E7%BD%AE.png" class="lazyload placeholder" data-srcset="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/article/abbrlink-3fe685e0/%E7%B3%BB%E7%BB%9F%E9%85%8D%E7%BD%AE.png" srcset="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/site-img/img-loading.gif" alt="系统配置"></p>            </div><h4 id="🐳-设置Jenkins地址和管理员邮箱地址">🐳 设置Jenkins地址和管理员邮箱地址</h4><div class="gallery ">              <p><img src="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/article/abbrlink-3fe685e0/jenkins-location%E9%85%8D%E7%BD%AE.png" class="lazyload placeholder" data-srcset="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/article/abbrlink-3fe685e0/jenkins-location%E9%85%8D%E7%BD%AE.png" srcset="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/site-img/img-loading.gif" alt="jenkins-location配置"></p>            </div><h4 id="🐳-设置发件人等信息">🐳 设置发件人等信息</h4><p>这里的发件人邮箱地址切记要和系统管理员邮件地址保持一致（当然，也可以设置专门的发件人邮箱，不过不影响使用，根据具体情况设置即可）</p><div class="gallery ">              <p><img src="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/article/abbrlink-3fe685e0/%E5%8F%91%E4%BB%B6%E4%BA%BA%E4%BF%A1%E6%81%AF.png" class="lazyload placeholder" data-srcset="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/article/abbrlink-3fe685e0/%E5%8F%91%E4%BB%B6%E4%BA%BA%E4%BF%A1%E6%81%AF.png" srcset="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/site-img/img-loading.gif" alt="发件人信息"></p>            </div><div class="gallery ">              <p><img src="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/article/abbrlink-3fe685e0/SMTP%E9%82%AE%E4%BB%B6%E5%8D%8F%E8%AE%AE.png" class="lazyload placeholder" data-srcset="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/article/abbrlink-3fe685e0/SMTP%E9%82%AE%E4%BB%B6%E5%8D%8F%E8%AE%AE.png" srcset="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/site-img/img-loading.gif" alt="SMTP邮件协议"></p>            </div><h4 id="🐳-配置邮件内容模版">🐳 配置邮件内容模版</h4><div class="gallery ">              <p><img src="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/article/abbrlink-3fe685e0/%E9%82%AE%E4%BB%B6%E6%A8%A1%E6%9D%BF.png" class="lazyload placeholder" data-srcset="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/article/abbrlink-3fe685e0/%E9%82%AE%E4%BB%B6%E6%A8%A1%E6%9D%BF.png" srcset="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/site-img/img-loading.gif" alt="邮件模板"></p>            </div><details green><summary> 邮箱内容模版（Default Content） </summary>              <div class='content'>              <figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span>    </span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span>    </span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span>    </span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span>    </span><br><span class="line"><span class="tag">&lt;<span class="name">title</span>&gt;</span>$&#123;ENV, var=&quot;JOB_NAME&quot;&#125;-第$&#123;BUILD_NUMBER&#125;次构建日志<span class="tag">&lt;/<span class="name">title</span>&gt;</span>    </span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span>    </span><br><span class="line">    </span><br><span class="line"><span class="tag">&lt;<span class="name">body</span> <span class="attr">leftmargin</span>=<span class="string">&quot;8&quot;</span> <span class="attr">marginwidth</span>=<span class="string">&quot;0&quot;</span> <span class="attr">topmargin</span>=<span class="string">&quot;8&quot;</span> <span class="attr">marginheight</span>=<span class="string">&quot;4&quot;</span>    </span></span><br><span class="line"><span class="tag">    <span class="attr">offset</span>=<span class="string">&quot;0&quot;</span>&gt;</span>    </span><br><span class="line">    <span class="tag">&lt;<span class="name">table</span> <span class="attr">width</span>=<span class="string">&quot;95%&quot;</span> <span class="attr">cellpadding</span>=<span class="string">&quot;0&quot;</span> <span class="attr">cellspacing</span>=<span class="string">&quot;0&quot;</span>  <span class="attr">style</span>=<span class="string">&quot;font-size: 11pt; font-family: Tahoma, Arial, Helvetica, sans-serif&quot;</span>&gt;</span>    </span><br><span class="line">        <span class="tag">&lt;<span class="name">tr</span>&gt;</span>    </span><br><span class="line">            本邮件由系统自动发出，无需回复！<span class="tag">&lt;<span class="name">br</span>/&gt;</span>            </span><br><span class="line">            各位同事，大家好，以下为$&#123;PROJECT_NAME&#125;项目构建信息<span class="tag">&lt;/<span class="name">br</span>&gt;</span> </span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">font</span> <span class="attr">color</span>=<span class="string">&quot;#CC0000&quot;</span>&gt;</span>构建结果 - $&#123;BUILD_STATUS&#125;<span class="tag">&lt;/<span class="name">font</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span>   </span><br><span class="line">        <span class="tag">&lt;/<span class="name">tr</span>&gt;</span>    </span><br><span class="line">        <span class="tag">&lt;<span class="name">tr</span>&gt;</span>    </span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">br</span> /&gt;</span>    </span><br><span class="line">            <span class="tag">&lt;<span class="name">b</span>&gt;</span><span class="tag">&lt;<span class="name">font</span> <span class="attr">color</span>=<span class="string">&quot;#0B610B&quot;</span>&gt;</span>构建信息<span class="tag">&lt;/<span class="name">font</span>&gt;</span><span class="tag">&lt;/<span class="name">b</span>&gt;</span>    </span><br><span class="line">            <span class="tag">&lt;<span class="name">hr</span> <span class="attr">size</span>=<span class="string">&quot;2&quot;</span> <span class="attr">width</span>=<span class="string">&quot;100%&quot;</span> <span class="attr">align</span>=<span class="string">&quot;center&quot;</span> /&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span>    </span><br><span class="line">        <span class="tag">&lt;/<span class="name">tr</span>&gt;</span>    </span><br><span class="line">        <span class="tag">&lt;<span class="name">tr</span>&gt;</span>    </span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span>    </span><br><span class="line">                <span class="tag">&lt;<span class="name">ul</span>&gt;</span>    </span><br><span class="line">                    <span class="tag">&lt;<span class="name">li</span>&gt;</span>项目名称 ： $&#123;PROJECT_NAME&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span>    </span><br><span class="line">                    <span class="tag">&lt;<span class="name">li</span>&gt;</span>构建编号 ： 第$&#123;BUILD_NUMBER&#125;次构建<span class="tag">&lt;/<span class="name">li</span>&gt;</span>    </span><br><span class="line">                    <span class="tag">&lt;<span class="name">li</span>&gt;</span>触发原因： $&#123;CAUSE&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span>    </span><br><span class="line">                    <span class="tag">&lt;<span class="name">li</span>&gt;</span>构建状态： $&#123;BUILD_STATUS&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span>    </span><br><span class="line">                    <span class="tag">&lt;<span class="name">li</span>&gt;</span>构建日志： <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;$&#123;BUILD_URL&#125;console&quot;</span>&gt;</span>$&#123;BUILD_URL&#125;console<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span>    </span><br><span class="line">                    <span class="tag">&lt;<span class="name">li</span>&gt;</span>构建  Url ： <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;$&#123;BUILD_URL&#125;&quot;</span>&gt;</span>$&#123;BUILD_URL&#125;<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span>    </span><br><span class="line">                    <span class="tag">&lt;<span class="name">li</span>&gt;</span>工作目录 ： <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;$&#123;PROJECT_URL&#125;ws&quot;</span>&gt;</span>$&#123;PROJECT_URL&#125;ws<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span>    </span><br><span class="line">                    <span class="tag">&lt;<span class="name">li</span>&gt;</span>项目  Url ： <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;$&#123;PROJECT_URL&#125;&quot;</span>&gt;</span>$&#123;PROJECT_URL&#125;<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span>    </span><br><span class="line">                <span class="tag">&lt;/<span class="name">ul</span>&gt;</span>    </span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">h4</span>&gt;</span><span class="tag">&lt;<span class="name">font</span> <span class="attr">color</span>=<span class="string">&quot;#0B610B&quot;</span>&gt;</span>失败用例<span class="tag">&lt;/<span class="name">font</span>&gt;</span><span class="tag">&lt;/<span class="name">h4</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">hr</span> <span class="attr">size</span>=<span class="string">&quot;2&quot;</span> <span class="attr">width</span>=<span class="string">&quot;100%&quot;</span> /&gt;</span></span><br><span class="line">$FAILED_TESTS<span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">h4</span>&gt;</span><span class="tag">&lt;<span class="name">font</span> <span class="attr">color</span>=<span class="string">&quot;#0B610B&quot;</span>&gt;</span>最近提交(#$SVN_REVISION)<span class="tag">&lt;/<span class="name">font</span>&gt;</span><span class="tag">&lt;/<span class="name">h4</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">hr</span> <span class="attr">size</span>=<span class="string">&quot;2&quot;</span> <span class="attr">width</span>=<span class="string">&quot;100%&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">$&#123;CHANGES_SINCE_LAST_SUCCESS, reverse=true, format=&quot;%c&quot;, changesFormat=&quot;<span class="tag">&lt;<span class="name">li</span>&gt;</span>%d [%a] %m<span class="tag">&lt;/<span class="name">li</span>&gt;</span>&quot;&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">详细提交: <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;$&#123;PROJECT_URL&#125;changes&quot;</span>&gt;</span>$&#123;PROJECT_URL&#125;changes<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="tag">&lt;/<span class="name">td</span>&gt;</span>    </span><br><span class="line">        <span class="tag">&lt;/<span class="name">tr</span>&gt;</span>    </span><br><span class="line">    <span class="tag">&lt;/<span class="name">table</span>&gt;</span>    </span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span>    </span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>              </div>            </details><h4 id="🐳-设置邮件触发机制">🐳 设置邮件触发机制</h4><div class="gallery ">              <p><img src="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/article/abbrlink-3fe685e0/%E9%82%AE%E4%BB%B6%E8%A7%A6%E5%8F%91%E6%9C%BA%E5%88%B6.png" class="lazyload placeholder" data-srcset="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/article/abbrlink-3fe685e0/%E9%82%AE%E4%BB%B6%E8%A7%A6%E5%8F%91%E6%9C%BA%E5%88%B6.png" srcset="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/site-img/img-loading.gif" alt="邮件触发机制"></p>            </div><p>上面的几步完成后，点击应用，保存即可。</p><h4 id="🐳-配置Jenkins自带的邮件功能">🐳 配置Jenkins自带的邮件功能</h4><p>配置内容如下，和Email Extension Plugin插件同样的配置，可以通过勾选<emp>通过发送测试邮件测试配置</emp>按钮来测试配置是否成功发送邮件，如下图：</p><div class="gallery ">              <p><img src="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/article/abbrlink-3fe685e0/%E8%87%AA%E5%B8%A6%E7%9A%84%E9%82%AE%E4%BB%B6%E5%8A%9F%E8%83%BD.png" class="lazyload placeholder" data-srcset="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/article/abbrlink-3fe685e0/%E8%87%AA%E5%B8%A6%E7%9A%84%E9%82%AE%E4%BB%B6%E5%8A%9F%E8%83%BD.png" srcset="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/site-img/img-loading.gif" alt="自带的邮件功能"></p>            </div><p>完成上面的系统设置后，点击应用保存即可。</p><h3 id="🎉-项目配置">🎉 项目配置</h3><p>在完成系统设置后，还需要给需要构建的项目进行邮件配置。</p><h4 id="🐳-进入项目配置界面">🐳 进入项目配置界面</h4><p>进入新建的项目界面，点击配置按钮，进入系统配置页面。</p><div class="gallery ">              <p><img src="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/article/abbrlink-3fe685e0/%E8%BF%9B%E5%85%A5%E9%A1%B9%E7%9B%AE%E9%85%8D%E7%BD%AE.png" class="lazyload placeholder" data-srcset="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/article/abbrlink-3fe685e0/%E8%BF%9B%E5%85%A5%E9%A1%B9%E7%9B%AE%E9%85%8D%E7%BD%AE.png" srcset="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/site-img/img-loading.gif" alt="进入项目配置"></p>            </div><h4 id="🐳-配置构建设置模块">🐳 配置构建设置模块</h4><p>点击上方的<emp>构建设置</emp>选项，配置内容如下：</p><div class="gallery ">              <p><img src="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/article/abbrlink-3fe685e0/%E6%9E%84%E5%BB%BA%E8%AE%BE%E7%BD%AE.png" class="lazyload placeholder" data-srcset="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/article/abbrlink-3fe685e0/%E6%9E%84%E5%BB%BA%E8%AE%BE%E7%BD%AE.png" srcset="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/site-img/img-loading.gif" alt="构建设置"></p>            </div><h4 id="🐳-配置构建后操作模块">🐳 配置构建后操作模块</h4><p>点击上方的<emp>构建后操作</emp>选项，添加构建后操作步骤 <code>Editable Email Notification</code>，配置内容如下：</p><div class="gallery ">              <p><img src="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/article/abbrlink-3fe685e0/%E6%9E%84%E5%BB%BA%E5%90%8E%E6%93%8D%E4%BD%9C1.png" class="lazyload placeholder" data-srcset="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/article/abbrlink-3fe685e0/%E6%9E%84%E5%BB%BA%E5%90%8E%E6%93%8D%E4%BD%9C1.png" srcset="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/site-img/img-loading.gif" alt="构建后操作1"></p>            </div><p>接上图：</p><div class="gallery ">              <p><img src="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/article/abbrlink-3fe685e0/%E6%9E%84%E5%BB%BA%E5%90%8E%E6%93%8D%E4%BD%9C2.png" class="lazyload placeholder" data-srcset="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/article/abbrlink-3fe685e0/%E6%9E%84%E5%BB%BA%E5%90%8E%E6%93%8D%E4%BD%9C2.png" srcset="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/site-img/img-loading.gif" alt="构建后操作2"></p>            </div><p>配置内容默认即可，邮件内容类型可以根据自己的配置选择，收件人列表可以从前面的系统设置中默认收件人选项配置。</p><h3 id="🎉-构建触发邮件测试">🎉 构建触发邮件测试</h3><p>如下图，为我收到的测试邮件，邮件内容可以通过系统设置里面进行个性化的配置，可参考我上面的模板，或者自定义即可。</p><div class="gallery ">              <p><img src="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/article/abbrlink-3fe685e0/%E6%9E%84%E5%BB%BA%E8%A7%A6%E5%8F%91%E9%82%AE%E4%BB%B6%E6%88%90%E5%8A%9F.png" class="lazyload placeholder" data-srcset="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/article/abbrlink-3fe685e0/%E6%9E%84%E5%BB%BA%E8%A7%A6%E5%8F%91%E9%82%AE%E4%BB%B6%E6%88%90%E5%8A%9F.png" srcset="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/site-img/img-loading.gif" alt="构建触发邮件成功"></p>            </div><h2 id="🔥-注意">🔥 注意</h2><p>（1）shell脚本中需要的文件夹没有则自建（不用完全跟我一样）。</p><p>（2）Dockerfile需和jar包放到同一目录下，附上我使用的Dockerfile文件内容：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">FROM jdk1.8</span><br><span class="line">MAINTAINER xuxu</span><br><span class="line">COPY jenkins-docker-gitlab-springboot.jar jenkins-docker-gitlab-springboot.jar</span><br><span class="line">CMD [&quot;java&quot;,&quot;-jar&quot;,&quot;jenkins-docker-gitlab-springboot.jar&quot;]</span><br></pre></td></tr></table></figure><p>（3）如果没有基础 JDK 镜像可参照 <a href="https://www.cnblogs.com/ztone/p/10558803.html">这篇文章</a> 完成。</p><p>（4）构建过程中可能提示没有权限操作文件夹，按照下面执行解决即可：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"># 1. 查看所有容器</span><br><span class="line">docker ps -a</span><br><span class="line"></span><br><span class="line"># 2. 进入jenkins容器内部</span><br><span class="line">docker exec -it jenkins &#x2F;bin&#x2F;bash</span><br><span class="line"></span><br><span class="line"># 3. 查看当前操作用户是否是jenkins</span><br><span class="line">whoami</span><br><span class="line"></span><br><span class="line"># 4. 推出</span><br><span class="line">exit</span><br><span class="line"></span><br><span class="line"># 5. 以root用户进入jenkins容器内部</span><br><span class="line">docker exec -it -u root jenkins &#x2F;bin&#x2F;bash</span><br><span class="line"></span><br><span class="line"># 6. 切换到下面目录</span><br><span class="line">cd &#x2F;var&#x2F;jenkins_home</span><br><span class="line"></span><br><span class="line"># 7. 如果workspace可操作的用户不是jenkins用户需添加jenkins用户操作权限</span><br><span class="line">ls -all</span><br><span class="line"></span><br><span class="line"># 8. 添加jenkins用户操作权限</span><br><span class="line">chown -R jenkins workspace</span><br><span class="line"></span><br><span class="line"># 9. 添加目录操作权限</span><br><span class="line">chmod 777 workspace</span><br></pre></td></tr></table></figure><h2 id="🔥-总结">🔥 总结</h2><p>经过我们多款软件的安装配置，我们逐步掌握了如何上床Spring Boot项目到Gitlab中，并使用Jenkins自动构建任务，另外依托于Docker，让这一切变得更加方便，希望大家都多多思考，让机器自动干活，减少我们IT从业人员的重复、繁琐的工作量。</p>]]></content>
      
      
      <categories>
          
          <category> 自动部署 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Gitlab </tag>
            
            <tag> Jenkins </tag>
            
            <tag> Docker </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CyclicBarrier 的理解和使用</title>
      <link href="posts/6d42a1fc.html"/>
      <url>posts/6d42a1fc.html</url>
      
        <content type="html"><![CDATA[<h2 id="🔥-CyclicBarrier-的理解">🔥 CyclicBarrier 的理解</h2><p>CyclicBarrier 是一个同步辅助类，它允许一组线程互相等待，直到到达某个公共屏障点 (common barrier point)。在涉及一组固定大小的线程程序中，这些线程必须不时地互相等待，此时 CyclicBarrier 很有用。因为该 barrier 在释放等待线程后可以重用，所以称它为循环的 barrier 。</p><p>举个例子，就像生活中我们会约朋友们到某个餐厅一起吃饭，有些朋友可能会早到，有些朋友可能会晚到，但是这个餐厅规定必须等到所有人到齐之后才会让我们进去。这里的朋友们就是各个线程，餐厅就是 CyclicBarrier 。</p><h2 id="🔥-CyclicBarrier-的方法说明">🔥 CyclicBarrier 的方法说明</h2><h3 id="🎉-构造方法">🎉 构造方法</h3><p><strong>CyclicBarrier(int parties)</strong>：创建一个新的 CyclicBarrier ，当给定数量的线程（线程）等待它时，它将跳闸，并且当屏障跳闸时不执行预定义的动作。</p><p><strong>CyclicBarrier(int parties, Runnable barrierAction)</strong>：创建一个新的 CyclicBarrier ，当给定数量的线程（线程）等待时，它将跳闸，当屏障跳闸时执行给定的屏障动作，由最后一个进入屏障的线程执行。</p><h3 id="🎉-方法">🎉 方法</h3><ul><li><strong>int await()</strong> 等待所有 parties 已经在这个障碍上调用了 await 。</li><li><strong>int await(long timeout, TimeUnit unit)</strong> 等待所有 parties 已经在此屏障上调用 await ，或指定的等待时间过去。</li><li><strong>int getNumberWaiting()</strong> 返回目前在屏障处等待的线程个数。</li><li><strong>int getParties()</strong> 返回履行这个障碍所需的 parties 数量。</li><li><strong>boolean isBroken()</strong> 查询这个障碍是否处于破碎状态。</li><li><strong>void reset()</strong> 将屏障重置为初始状态。</li></ul><h2 id="🔥-CyclicBarrier-的用法">🔥 CyclicBarrier 的用法</h2><p>CyclicBarrier 核心主要有两点：线程组内彼此相互等待，然后大家开始做某件事；这一代结束后开始下一代–重用思想。</p><p>CountDownLatch 核心思想为确保某些活动直到其他活动都完成才继续执行，而且 CountDownLatch 不可重用。</p><p>举例，班级集体野炊，在大巴上等待所有同学到来才开始出发，一个班级集合完毕出发一辆大巴，这是 CyclicBarrier 。到达目的地后需要同学自行寻找食材，寻找到需要的所有食材后才开始做饭，一个班级做饭活动是一次性的，这是 CountDownLatch 。</p><h3 id="🎉-典型用法1">🎉 典型用法1</h3><p>赛跑时，等待所有人都准备好时，才起跑。</p><p>代码示例：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> lombok.extern.slf4j.Slf4j;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Random;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.BrokenBarrierException;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.CyclicBarrier;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.ExecutorService;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="keyword">static</span> java.util.concurrent.Executors.*;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span>: Xuxu</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span>: 2020-08-31 10:48</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CyclicBarrierTest</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        CyclicBarrier cyclicBarrier = <span class="keyword">new</span> CyclicBarrier(<span class="number">3</span>);</span><br><span class="line"></span><br><span class="line">        ExecutorService executorService = newFixedThreadPool(<span class="number">3</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= <span class="number">3</span>; i++) &#123;</span><br><span class="line">            executorService.submit(<span class="keyword">new</span> Thread(<span class="keyword">new</span> Runner(cyclicBarrier, i + <span class="string">&quot;号选手&quot;</span>)));</span><br><span class="line">        &#125;</span><br><span class="line">        executorService.shutdown();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">Runner</span> <span class="keyword">implements</span> <span class="title">Runnable</span> </span>&#123;</span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * 一个同步辅助类，它允许一组线程互相等待，直到到达某个公共屏障点 (common barrier point)</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="keyword">private</span> CyclicBarrier barrier;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">private</span> String name;</span><br><span class="line"></span><br><span class="line">        Runner(CyclicBarrier barrier, String name) &#123;</span><br><span class="line">            <span class="keyword">super</span>();</span><br><span class="line">            <span class="keyword">this</span>.barrier = barrier;</span><br><span class="line">            <span class="keyword">this</span>.name = name;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                Thread.sleep(<span class="number">1000</span> * (<span class="keyword">new</span> Random()).nextInt(<span class="number">8</span>));</span><br><span class="line">                System.out.println(name + <span class="string">&quot; 准备好了...&quot;</span>);</span><br><span class="line">                <span class="comment">// barrier的await方法，在所有参与者都已经在此 barrier 上调用 await 方法之前，将一直等待。</span></span><br><span class="line">                barrier.await();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (InterruptedException | BrokenBarrierException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">            System.out.println(name + <span class="string">&quot; 起跑！&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>运行结果：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">1号选手 准备好了...</span><br><span class="line">3号选手 准备好了...</span><br><span class="line">2号选手 准备好了...</span><br><span class="line">2号选手 起跑！</span><br><span class="line">1号选手 起跑！</span><br><span class="line">3号选手 起跑！</span><br></pre></td></tr></table></figure><h3 id="🎉-典型用法2">🎉 典型用法2</h3><p>CyclicBarrier 等待与复用：宿舍四哥们约着去操场打球</p><p>代码示例：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.concurrent.*;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span>: Xuxu</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span>: 2020-08-31 11:31</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CyclicBarrierTest1</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> ExecutorService executorService = Executors.newFixedThreadPool(<span class="number">4</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 当拦截线程数达到4时，便优先执行barrierAction，然后再执行被拦截的线程。</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> CyclicBarrier cyclicBarrier = <span class="keyword">new</span> CyclicBarrier(<span class="number">4</span>,</span><br><span class="line">            () -&gt; System.out.println(<span class="string">&quot;寝室四兄弟一起出发去球场&quot;</span>)</span><br><span class="line">    );</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">GoThread</span> <span class="keyword">extends</span> <span class="title">Thread</span> </span>&#123;</span><br><span class="line">        <span class="keyword">private</span> <span class="keyword">final</span> String name;</span><br><span class="line"></span><br><span class="line">        GoThread(String name) &#123;</span><br><span class="line">            <span class="keyword">this</span>.name = name;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            System.out.println(name + <span class="string">&quot;开始从宿舍出发&quot;</span>);</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                cyclicBarrier.await();<span class="comment">//拦截线程</span></span><br><span class="line">                System.out.println(name + <span class="string">&quot;从楼底下出发&quot;</span>);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (InterruptedException | BrokenBarrierException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">        String[] str = &#123;<span class="string">&quot;李明&quot;</span>, <span class="string">&quot;王强&quot;</span>, <span class="string">&quot;刘凯&quot;</span>, <span class="string">&quot;赵杰&quot;</span>&#125;;</span><br><span class="line">        String[] str1 = &#123;<span class="string">&quot;王二&quot;</span>, <span class="string">&quot;洪光&quot;</span>, <span class="string">&quot;雷兵&quot;</span>, <span class="string">&quot;赵三&quot;</span>&#125;;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">4</span>; i++) &#123;</span><br><span class="line">            executorService.execute(<span class="keyword">new</span> GoThread(str[i]));</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            Thread.sleep(<span class="number">4000</span>);</span><br><span class="line">            System.out.println(<span class="string">&quot;四个人一起到达球场，现在开始打球&quot;</span>);</span><br><span class="line">            System.out.println(<span class="string">&quot;现在对CyclicBarrier进行复用.....&quot;</span>);</span><br><span class="line">            System.out.println(<span class="string">&quot;又来了一拨人，看看愿不愿意一起打：&quot;</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        cyclicBarrier.reset();</span><br><span class="line">        <span class="comment">//进行复用：</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">4</span>; i++) &#123;</span><br><span class="line">            executorService.execute(<span class="keyword">new</span> GoThread(str1[i]));</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            Thread.sleep(<span class="number">4000</span>);</span><br><span class="line">            System.out.println(<span class="string">&quot;四个人一起到达球场，表示愿意一起打球，现在八个人开始打球&quot;</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        executorService.shutdown();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>运行结果：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">刘凯开始从宿舍出发</span><br><span class="line">赵杰开始从宿舍出发</span><br><span class="line">王强开始从宿舍出发</span><br><span class="line">李明开始从宿舍出发</span><br><span class="line">寝室四兄弟一起出发去球场</span><br><span class="line">李明从楼底下出发</span><br><span class="line">刘凯从楼底下出发</span><br><span class="line">赵杰从楼底下出发</span><br><span class="line">王强从楼底下出发</span><br><span class="line">四个人一起到达球场，现在开始打球</span><br><span class="line">现在对CyclicBarrier进行复用.....</span><br><span class="line">又来了一拨人，看看愿不愿意一起打：</span><br><span class="line">王二开始从宿舍出发</span><br><span class="line">洪光开始从宿舍出发</span><br><span class="line">雷兵开始从宿舍出发</span><br><span class="line">赵三开始从宿舍出发</span><br><span class="line">寝室四兄弟一起出发去球场</span><br><span class="line">赵三从楼底下出发</span><br><span class="line">王二从楼底下出发</span><br><span class="line">洪光从楼底下出发</span><br><span class="line">雷兵从楼底下出发</span><br><span class="line">四个人一起到达球场，表示愿意一起打球，现在八个人开始打球</span><br></pre></td></tr></table></figure><h2 id="🔥-CountDownLatch-和-CyclicBarrier-的比较">🔥 CountDownLatch 和 CyclicBarrier 的比较</h2><ol><li>CountDownLatch 是线程组之间的等待，即一个(或多个)线程等待N个线程完成某件事情之后再执行；而 CyclicBarrier 则是线程组内的等待，即每个线程相互等待，即N个线程都被拦截之后，然后依次执行。</li><li>CountDownLatch 是减计数方式，而 CyclicBarrier 是加计数方式。</li><li>CountDownLatch 计数为0无法重置，而 CyclicBarrier 计数达到初始值，则可以重置。</li><li>CountDownLatch 不可以复用，而 CyclicBarrier 可以复用。</li></ol>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
          <category> 线程 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> 线程 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Java 垃圾收集算法</title>
      <link href="posts/2375015f.html"/>
      <url>posts/2375015f.html</url>
      
        <content type="html"><![CDATA[<p>JVM 中的垃圾回收算法有标记-清除算法、复制算法、标记-整理算法、分代收集算法四种算法。</p><h2 id="🔥-标记-清除算法">🔥 标记 - 清除算法</h2><p>标记-清除（Mark-Sweep）算法是现代垃圾回收算法的思想基础，它将垃圾回收分为「标记」和「清除」两个阶段：</p><ol><li>在标记阶段，通过 「可达性分析算法」标记出所有需要回收的对象</li><li>在清除阶段，清除所有被标记为可以回收的对象。</li></ol><p>算法示意图如下：</p><p><img src="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/article/abbrlink-2375015f/%E6%A0%87%E8%AE%B0-%E6%B8%85%E9%99%A4%E7%AE%97%E6%B3%95.jpg" class="lazyload placeholder" data-srcset="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/article/abbrlink-2375015f/%E6%A0%87%E8%AE%B0-%E6%B8%85%E9%99%A4%E7%AE%97%E6%B3%95.jpg" srcset="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/site-img/img-loading.gif" alt="标记-清除算法"></p><p>这个算法的<emp>主要缺点</emp>有两个：</p><ol><li>效率问题，标记和清除两个过程的效率都不高</li><li>空间问题，标记清除之后会产生大量不连续的内存碎片，空间碎片太多可能会导致以后在程序运行过程中需要分配较大对象时，无法找到足够的连续内存而不得不提前触发另一次垃圾收集动作。</li></ol><p>后续的很多垃圾收集算法都是基于此算法的思路进行改进而得到的。垃圾收集器中的 CMS 是基于标记-清除算法实现的，不过这种收集器也逐渐被取代了。</p><h2 id="🔥-标记-整理算法">🔥 标记 - 整理算法</h2><p>标记-整理（Mark-Compact）算法，类似于标记-清除算法，不过它标记完对象后，不是直接对可回收对象进行清除；而是让所有仍会存活的对象都向一端移动，然后直接清理掉边界以外的内存。算法示意如下图所示：</p><p><img src="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/article/abbrlink-2375015f/%E6%A0%87%E8%AE%B0-%E6%95%B4%E7%90%86%E7%AE%97%E6%B3%95.jpg" class="lazyload placeholder" data-srcset="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/article/abbrlink-2375015f/%E6%A0%87%E8%AE%B0-%E6%95%B4%E7%90%86%E7%AE%97%E6%B3%95.jpg" srcset="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/site-img/img-loading.gif" alt="标记-整理算法"></p><p>相对于标记-清除算法，标记-整理算法的<emp>优点</emp>是解决了内存空间碎片的问题，使对象创建时的内存分配更快速了（也可以使用 TLAB 进行分配）；<emp>缺点</emp>还是效率问题，标记和整理这两个过程的效率都不高。</p><p>基于标记-整理算法实现的垃圾收集器有很多，如 Serial 收集器、ParNew 收集器、Parallel Old 收集器、G1 收集器等。</p><h2 id="🔥-复制算法">🔥 复制算法</h2><p>复制（copying）算法的思路为：它将内存按容量分为大小相等的两块，每次只使用其中的一块。当正在使用的内存块 A 的内存用完了，就将还活着的对象复制到另一块内存 B 上面，然后再把之前使用的内存块 A 的空间一次性清理掉，就这样循环往复。</p><p>这样使得每次都是对整个半区进行内存回收，内存分配时也不用考虑内存碎片等复杂情况，只需要移动堆顶指针，按顺序分配内存即可。复制算法的<emp>优点</emp>是解决了效率问题和内存碎片的问题，算法示意图如下：</p><p><img src="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/article/abbrlink-2375015f/%E5%A4%8D%E5%88%B6%E7%AE%97%E6%B3%95.jpg" class="lazyload placeholder" data-srcset="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/article/abbrlink-2375015f/%E5%A4%8D%E5%88%B6%E7%AE%97%E6%B3%95.jpg" srcset="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/site-img/img-loading.gif" alt="复制算法"></p><p>由此可见，复制算法的<emp>缺点</emp>就是每次都会浪费掉一半的内存空间，而且，在对象存活率较高时就要进行较多的复制操作，效率会变低。</p><p>现在很多垃圾收集器都采用复制算法来回收新生代。</p><h2 id="🔥-分代收集算法">🔥 分代收集算法</h2><p>分代收集（Generational Collection）算法并没有什么新的垃圾回收思想，它只是根据对象存活周期的不同将内存划分为几块（一般是把 Java 堆划分为新生代和老年代），然后根据各个块的特点采用最适当的垃圾收集算法。</p><p>算法示意如图（其中，Eden、Survivor From 和 Survivor To 空间均属于<emp>新生代</emp>（Young），Old 空间属于<emp>老年代</emp>，一般这几个内存空间的大小比例为：<code>Eden : Survivor From : Survivor To = 8 : 1 : 1</code> 、<code>Young : Old = 1 : 2</code> ）：</p><p><img src="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/article/abbrlink-2375015f/%E5%88%86%E4%BB%A3%E6%94%B6%E9%9B%86%E7%AE%97%E6%B3%95.jpg" class="lazyload placeholder" data-srcset="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/article/abbrlink-2375015f/%E5%88%86%E4%BB%A3%E6%94%B6%E9%9B%86%E7%AE%97%E6%B3%95.jpg" srcset="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/site-img/img-loading.gif" alt="分代收集算法"></p><p>如上图所示，分代收集算法的策略为：</p><ul><li>在新生代中，每次垃圾收集都有都发现有大批对象死去，只有少量存活，就选用<emp>复制算法</emp>。将 Eden 和 Survivor From 空间中还存活着的对象一次性复制到 Survivor To 空间上；当 Survivor To 空间不够用时，需要依赖其它内存（这里指老年代）来进行分配担保（Handle Promotion）；最后对刚才用过的 Eden 和 Survivor From 空间进行清理，清理之后 Survivor 区的 From 和 To 进行角色交换，之前的 From 变成了 To，之前的 To 变成了 From，也就是说无论如何都要保证名为 To 的 Survivor 区域是空的。</li><li>在老年代中，因为对象存活率高，也没有额外空间对它进行分配担保，就必须使用「标记-清除」或者「标记-整理」算法来进行回收。</li></ul><p>当前的商业虚拟机基本都是采用的分代收集算法。</p><h2 id="🔥-附：对象的一辈子理解">🔥 附：对象的一辈子理解</h2><p>我是一个普通的 Java 对象，我出生在 Eden 区，在 Eden 区我还看到和我长得很像的小兄弟，我们在 Eden 区中玩了挺长时间。有一天 Eden 区中的人实在太多了，我就被迫去了 Survivor 区的 From 区，自从去了 Survivor 区，我就开始飘了，有时候在 Survivor 区的 From 区，有时候在 Survivor 区的 To 区，居无定所，直到我18岁的时候，爸爸说我成人了，该去社会上闯闯了。于是我就去了老年代那边，老年代里，人很多，并且年龄都挺大的，我这里也认识了很多人。在老年代里，我生活了20年（每次GC加一岁），然后被回收。</p><p>新对象申请内存空间流程图如下：</p><p><img src="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/article/abbrlink-2375015f/%E5%AF%B9%E8%B1%A1%E7%94%B3%E8%AF%B7%E5%86%85%E5%AD%98%E7%A9%BA%E9%97%B4%E6%B5%81%E7%A8%8B.jpg" class="lazyload placeholder" data-srcset="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/article/abbrlink-2375015f/%E5%AF%B9%E8%B1%A1%E7%94%B3%E8%AF%B7%E5%86%85%E5%AD%98%E7%A9%BA%E9%97%B4%E6%B5%81%E7%A8%8B.jpg" srcset="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/site-img/img-loading.gif" alt="新对象申请内存空间流程图"></p><p>如有不正，欢迎指出。</p>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
          <category> JVM </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> JVM </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CountDownLatch 的理解和使用</title>
      <link href="posts/cf9c1454.html"/>
      <url>posts/cf9c1454.html</url>
      
        <content type="html"><![CDATA[<p>最近在看多线程之间的通信，笔者我觉得自己的脑袋实在不够用了，很多东西看过就忘，所以今天抽出点时间码一遍 CountDownLatch 的理解和使用。</p><p>此文也是从网上查找的资料，然后自己敲一遍，以便加深印象和更深入的理解。</p><a id="more"></a><h2 id="🔥-CountDownLatch-的概念">🔥 CountDownLatch 的概念</h2><p>CountDownLatch 是一个同步工具类，用来协调多个线程之间的同步，或者说其为线程之间的<emp>通信</emp>（而不是用作<emp>互斥作用</emp>）。</p><p>CountDownLatch 能够使一个线程在等待另外一些线程完成各自的工作之后，再继续执行。通过一个计数器来进行实现，计数器的初始值为线程的数量，当每一个线程完成自己的任务后，计数器的值就会减一，当计数器的值为零时，表示所有线程都已经完成相应的任务，然后在 CountDownLatch 上等待的线程就可以恢复执行接下来的任务。</p><h2 id="🔥-CountDownLatch-的方法说明">🔥 CountDownLatch 的方法说明</h2><p><strong>public void countDown()</strong></p><p>递减锁存器的计数，如果计数到达零，则释放所有等待的线程。如果当前计数大于零，则将计数减少。如果新的计数为零，出于线程调度目的，将重新启用所有的等待线程。如果当前计数等于零，则不发生任何操作。</p><p><strong>public boolean await (long timeout, TimeUnit unit) throws InterruptedException</strong></p><p>使当前线程在锁存器倒计数至零之前一直等待，除非线程被中断或超出了指定的等待时间。如果当前计数为零，则此方法立刻返回 true 值。</p><p>如果当前计数大于零，则出于线程调度目的，将禁用当前线程，且在发生以下三种情况之一前，该线程将一直处于休眠状态：</p><ol><li>如果计数到达零，则该方法返回 true 值。</li><li>如果当前线程，在进入此方法时已经设置了该线程的中断状态；或者在等待时被中断，则抛出 InterruptedException，并且清除当前线程的已中断状态。</li><li>如果超出了指定的等待时间，则返回值为 false。如果该时间小于等于零，则此方法根本不会等待。</li></ol><p>参数：</p><ul><li>timeout - 要等待的最长时间</li><li>unit - timeout 参数的时间单位</li></ul><p>返回：</p><ul><li>如果计数到达零，则返回true；如果在计数到达零之前超过了等待时间，则返回false。</li></ul><p>抛出：</p><ul><li>InterruptedException - 如果当前线程在等待时被中断则抛出 InterruptedException 异常</li></ul><h2 id="🔥-CountDownLatch-的用法">🔥 CountDownLatch 的用法</h2><h3 id="🎉-典型用法1">🎉 典型用法1</h3><p>某一线程在开始运行前等待n个线程执行完毕。将 CountDownLatch 的计数器初始化为n <code>new CountDownLatch(n)</code>，每当一个任务线程执行完毕，就将计数器减1 <code>countdownlatch.countDown()</code>，当计数器的值变为0时，在 CountDownLatch 上 <code>await()</code> 的线程就会被唤醒。一个典型应用场景就是启动一个服务时，主线程需要等待多个组件加载完毕，之后再继续执行。</p><p>代码示例：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.concurrent.CountDownLatch;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.ExecutorService;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="keyword">static</span> java.lang.Math.*;</span><br><span class="line"><span class="keyword">import</span> <span class="keyword">static</span> java.util.concurrent.Executors.newFixedThreadPool;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span>: Xuxu</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span>: 2020-08-21 14:51</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CountdownLatchTest1</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        ExecutorService service = newFixedThreadPool(<span class="number">3</span>);</span><br><span class="line">        <span class="keyword">final</span> CountDownLatch latch = <span class="keyword">new</span> CountDownLatch(<span class="number">3</span>);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">3</span>; i++) &#123;</span><br><span class="line">            Runnable runnable = () -&gt; &#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    System.out.println(<span class="string">&quot;子线程&quot;</span> + Thread.currentThread().getName() + <span class="string">&quot;开始执行&quot;</span>);</span><br><span class="line">                    Thread.sleep((<span class="keyword">long</span>) (random() * <span class="number">10000</span>));</span><br><span class="line">                    System.out.println(<span class="string">&quot;子线程&quot;</span> + Thread.currentThread().getName() + <span class="string">&quot;执行完成&quot;</span>);</span><br><span class="line">                &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">                    <span class="comment">// 很关键, 无论上面程序是否异常必须执行countDown,否则await无法释放</span></span><br><span class="line">                    latch.countDown();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;;</span><br><span class="line">            service.execute(runnable);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;主线程&quot;</span> + Thread.currentThread().getName() + <span class="string">&quot;等待子线程执行完成...&quot;</span>);</span><br><span class="line">            latch.await();<span class="comment">//阻塞当前线程，直到计数器的值为0</span></span><br><span class="line">            System.out.println(<span class="string">&quot;主线程&quot;</span> + Thread.currentThread().getName() + <span class="string">&quot;开始执行...&quot;</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        service.shutdown();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>运行结果：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">主线程main等待子线程执行完成...</span><br><span class="line">子线程pool-1-thread-3开始执行</span><br><span class="line">子线程pool-1-thread-1开始执行</span><br><span class="line">子线程pool-1-thread-2开始执行</span><br><span class="line">子线程pool-1-thread-2执行完成</span><br><span class="line">子线程pool-1-thread-1执行完成</span><br><span class="line">子线程pool-1-thread-3执行完成</span><br><span class="line">主线程main开始执行...</span><br></pre></td></tr></table></figure><h3 id="🎉-典型用法2">🎉 典型用法2</h3><p>实现多个线程开始执行任务的最大<emp>并行性</emp>。注意是并行性，不是并发，强调的是多个线程在某一时刻同时开始执行。类似于赛跑，将多个线程放到起点，等待发令枪响，然后同时开跑。做法是初始化一个共享的 CountDownLatch(1)，将其计数器初始化为1，多个线程在开始执行任务前首先 <code>coundownlatch.await()</code>，当主线程调用 <code>countDown()</code> 时，计数器变为0，多个线程同时被唤醒。</p><p>代码示例：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.concurrent.CountDownLatch;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.ExecutorService;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="keyword">static</span> java.lang.Math.*;</span><br><span class="line"><span class="keyword">import</span> <span class="keyword">static</span> java.util.concurrent.Executors.*;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span>: Xuxu</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span>: 2020-08-21 15:15</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CountdownLatchTest2</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        ExecutorService service = newCachedThreadPool();</span><br><span class="line">        <span class="keyword">final</span> CountDownLatch cdOrder = <span class="keyword">new</span> CountDownLatch(<span class="number">1</span>);</span><br><span class="line">        <span class="keyword">final</span> CountDownLatch cdAnswer = <span class="keyword">new</span> CountDownLatch(<span class="number">4</span>);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">4</span>; i++) &#123;</span><br><span class="line">            Runnable runnable = () -&gt; &#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    System.out.println(<span class="string">&quot;选手&quot;</span> + Thread.currentThread().getName() + <span class="string">&quot;正在等待裁判发布口令&quot;</span>);</span><br><span class="line">                    cdOrder.await();</span><br><span class="line">                    System.out.println(<span class="string">&quot;选手&quot;</span> + Thread.currentThread().getName() + <span class="string">&quot;已接受裁判口令&quot;</span>);</span><br><span class="line">                    Thread.sleep((<span class="keyword">long</span>) (random() * <span class="number">10000</span>));</span><br><span class="line">                    System.out.println(<span class="string">&quot;选手&quot;</span> + Thread.currentThread().getName() + <span class="string">&quot;到达终点&quot;</span>);</span><br><span class="line">                &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">                    <span class="comment">// 很关键, 无论上面程序是否异常必须执行countDown,否则await无法释放</span></span><br><span class="line">                    cdAnswer.countDown();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;;</span><br><span class="line">            service.execute(runnable);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            Thread.sleep((<span class="keyword">long</span>) (Math.random() * <span class="number">10000</span>));</span><br><span class="line">            System.out.println(<span class="string">&quot;裁判&quot;</span> + Thread.currentThread().getName() + <span class="string">&quot;即将发布口令&quot;</span>);</span><br><span class="line">            cdOrder.countDown();</span><br><span class="line">            System.out.println(<span class="string">&quot;裁判&quot;</span> + Thread.currentThread().getName() + <span class="string">&quot;已发送口令，正在等待所有选手到达终点&quot;</span>);</span><br><span class="line">            cdAnswer.await();</span><br><span class="line">            System.out.println(<span class="string">&quot;所有选手都到达终点&quot;</span>);</span><br><span class="line">            System.out.println(<span class="string">&quot;裁判&quot;</span> + Thread.currentThread().getName() + <span class="string">&quot;汇总成绩排名&quot;</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        service.shutdown();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>运行结果：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">选手pool-1-thread-2正在等待裁判发布口令</span><br><span class="line">选手pool-1-thread-3正在等待裁判发布口令</span><br><span class="line">选手pool-1-thread-4正在等待裁判发布口令</span><br><span class="line">选手pool-1-thread-1正在等待裁判发布口令</span><br><span class="line">裁判main即将发布口令</span><br><span class="line">裁判main已发送口令，正在等待所有选手到达终点</span><br><span class="line">选手pool-1-thread-3已接受裁判口令</span><br><span class="line">选手pool-1-thread-1已接受裁判口令</span><br><span class="line">选手pool-1-thread-4已接受裁判口令</span><br><span class="line">选手pool-1-thread-2已接受裁判口令</span><br><span class="line">选手pool-1-thread-2到达终点</span><br><span class="line">选手pool-1-thread-1到达终点</span><br><span class="line">选手pool-1-thread-4到达终点</span><br><span class="line">选手pool-1-thread-3到达终点</span><br><span class="line">所有选手都到达终点</span><br><span class="line">裁判main汇总成绩排名</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
          <category> 线程 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> 线程 </tag>
            
            <tag> 通信 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Java 多线程的实现</title>
      <link href="posts/f48050ed.html"/>
      <url>posts/f48050ed.html</url>
      
        <content type="html"><![CDATA[<h2 id="🔥-进程和线程之间的关系">🔥 进程和线程之间的关系</h2><p>线程是在进程基础之上创建并使用的更小的程序单元，所以线程依赖于进程的支持。线程的启动速度要比进程快上很多，高并发处理的时候，线程的性能要高于进程。</p><ul><li>进程：指在系统中正在运行的一个应用程序；程序一旦运行就是进程；进程——资源分配的最小单位。</li><li>线程：系统分配处理器时间资源的基本单元，或者说进程之内独立执行的一个单元执行流。线程——程序执行的最小单位。</li></ul><h2 id="🔥-多线程实现的四种方式">🔥 多线程实现的四种方式</h2><ol><li>继承Thread类，重写run方法。</li><li>实现Runnable接口，重写run方法。</li><li>通过Callable和FutureTask创建线程</li><li>通过线程池创建线程</li></ol><h2 id="🔥-代码示例">🔥 代码示例</h2><h3 id="🎉-继承Thread类">🎉 继承Thread类</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span>: Xuxu</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span>: 2020-08-10 10:00</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ThreadTest1</span> <span class="keyword">extends</span> <span class="title">Thread</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">// 线程代码区</span></span><br><span class="line">        System.out.println(Thread.currentThread().getName());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        ThreadTest1 threadTest1 = <span class="keyword">new</span> ThreadTest1();</span><br><span class="line">        threadTest1.setName(<span class="string">&quot;线程1&quot;</span>);</span><br><span class="line">        threadTest1.start();</span><br><span class="line">        System.out.println(Thread.currentThread().toString());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>运行结果：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Thread[main,5,main]</span><br><span class="line">线程1：我是通过继承Thread类实现的</span><br></pre></td></tr></table></figure><h3 id="🎉-实现Runnable接口">🎉 实现Runnable接口</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span>: Xuxu</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span>: 2020-08-10 10:19</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ThreadTest2</span> </span>&#123;</span><br><span class="line">    <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">MyThread</span> <span class="keyword">implements</span> <span class="title">Runnable</span> </span>&#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            System.out.println(Thread.currentThread().getName());</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Thread thread = <span class="keyword">new</span> Thread(<span class="keyword">new</span> MyThread());</span><br><span class="line">        thread.setName(<span class="string">&quot;线程2：我是通过Runnable接口实现的&quot;</span>);</span><br><span class="line">        thread.start();</span><br><span class="line">        System.out.println(Thread.currentThread().toString());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>运行结果：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Thread[main,5,main]</span><br><span class="line">线程2：我是通过Runnable接口实现的</span><br></pre></td></tr></table></figure><h3 id="🎉-通过Callable和FutureTask创建线程">🎉 通过Callable和FutureTask创建线程</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.concurrent.Callable;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.FutureTask;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span>: Xuxu</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span>: 2020-08-10 10:28</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ThreadTest3</span> </span>&#123;</span><br><span class="line">    <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">MyThread</span>&lt;<span class="title">Object</span>&gt; <span class="keyword">implements</span> <span class="title">Callable</span>&lt;<span class="title">Object</span>&gt; </span>&#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> Object <span class="title">call</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            System.out.println(Thread.currentThread().getName());</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Callable&lt;Object&gt; callable = <span class="keyword">new</span> MyThread&lt;&gt;();</span><br><span class="line">        FutureTask&lt;Object&gt; futureTask = <span class="keyword">new</span> FutureTask&lt;&gt;(callable);</span><br><span class="line">        Thread thread = <span class="keyword">new</span> Thread(futureTask);</span><br><span class="line">        thread.setName(<span class="string">&quot;线程3：我是通过Callable和FutureTask创建的&quot;</span>);</span><br><span class="line">        thread.start();</span><br><span class="line">        System.out.println(Thread.currentThread().toString());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>运行结果：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Thread[main,5,main]</span><br><span class="line">线程3：我是通过Callable和FutureTask创建的</span><br></pre></td></tr></table></figure><h3 id="🎉-通过线程池创建线程">🎉 通过线程池创建线程</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.concurrent.ExecutorService;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="keyword">static</span> java.util.concurrent.Executors.*;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span>: Xuxu</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span>: 2020-08-10 10:39</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ThreadTest4</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//线程池数量</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">int</span> POOL_NUM = <span class="number">10</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">MyThread</span> <span class="keyword">implements</span> <span class="title">Runnable</span> </span>&#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;通过线程池方式创建的线程：&quot;</span> + Thread.currentThread().getName());</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        ExecutorService executorService = newFixedThreadPool(<span class="number">5</span>);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; POOL_NUM; i++) &#123;</span><br><span class="line">            MyThread myThread = <span class="keyword">new</span> MyThread();</span><br><span class="line">            executorService.execute(myThread);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//关闭线程池</span></span><br><span class="line">        executorService.shutdown();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>运行结果：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">通过线程池方式创建的线程：pool-1-thread-2</span><br><span class="line">通过线程池方式创建的线程：pool-1-thread-4</span><br><span class="line">通过线程池方式创建的线程：pool-1-thread-1</span><br><span class="line">通过线程池方式创建的线程：pool-1-thread-4</span><br><span class="line">通过线程池方式创建的线程：pool-1-thread-2</span><br><span class="line">通过线程池方式创建的线程：pool-1-thread-3</span><br><span class="line">通过线程池方式创建的线程：pool-1-thread-1</span><br><span class="line">通过线程池方式创建的线程：pool-1-thread-5</span><br><span class="line">通过线程池方式创建的线程：pool-1-thread-2</span><br><span class="line">通过线程池方式创建的线程：pool-1-thread-4</span><br></pre></td></tr></table></figure><h2 id="🔥-线程运行状态">🔥 线程运行状态</h2><p>对于多线程的开发而言，编写程序的过程中总是按照：定义线程的主体类，然后通过Thread类进行线程的启动，但是并不意味着你调用了<code>start()</code>方法，线程就已经开始启动了，因为整体的线程处理有自己的一套运行状态。</p>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
          <category> 线程 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> 线程 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Vue 格式化数字为金额格式</title>
      <link href="posts/6b9072d4.html"/>
      <url>posts/6b9072d4.html</url>
      
        <content type="html"><![CDATA[<p>代码：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description </span>格式化金额</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param </span>number：要格式化的数字</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param </span>decimals：保留几位小数 默认0位</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param </span>decPoint：小数点符号 默认.</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param </span>thousandsSep：千分位符号 默认为,</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> formatMoney = <span class="function">(<span class="params">number, decimals = <span class="number">0</span>, decPoint = <span class="string">&#x27;.&#x27;</span>, thousandsSep = <span class="string">&#x27;,&#x27;</span></span>) =&gt;</span> &#123;</span><br><span class="line">  number = (number + <span class="string">&#x27;&#x27;</span>).replace(<span class="regexp">/[^0-9+-Ee.]/g</span>, <span class="string">&#x27;&#x27;</span>)</span><br><span class="line">  <span class="keyword">let</span> n = !<span class="built_in">isFinite</span>(+number) ? <span class="number">0</span> : +number</span><br><span class="line">  <span class="keyword">let</span> prec = !<span class="built_in">isFinite</span>(+decimals) ? <span class="number">0</span> : <span class="built_in">Math</span>.abs(decimals)</span><br><span class="line">  <span class="keyword">let</span> sep = (<span class="keyword">typeof</span> thousandsSep === <span class="string">&#x27;undefined&#x27;</span>) ? <span class="string">&#x27;,&#x27;</span> : thousandsSep</span><br><span class="line">  <span class="keyword">let</span> dec = (<span class="keyword">typeof</span> decPoint === <span class="string">&#x27;undefined&#x27;</span>) ? <span class="string">&#x27;.&#x27;</span> : decPoint</span><br><span class="line">  <span class="keyword">let</span> s = <span class="string">&#x27;&#x27;</span></span><br><span class="line">  <span class="keyword">let</span> toFixedFix = <span class="function"><span class="keyword">function</span> (<span class="params">n, prec</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> k = <span class="built_in">Math</span>.pow(<span class="number">10</span>, prec)</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&#x27;&#x27;</span> + <span class="built_in">Math</span>.ceil(n * k) / k</span><br><span class="line">  &#125;</span><br><span class="line">  s = (prec ? toFixedFix(n, prec) : <span class="string">&#x27;&#x27;</span> + <span class="built_in">Math</span>.round(n)).split(<span class="string">&#x27;.&#x27;</span>)</span><br><span class="line">  <span class="keyword">let</span> re = <span class="regexp">/(-?\d+)(\d&#123;3&#125;)/</span></span><br><span class="line">  <span class="keyword">while</span> (re.test(s[<span class="number">0</span>])) &#123;</span><br><span class="line">    s[<span class="number">0</span>] = s[<span class="number">0</span>].replace(re, <span class="string">&#x27;$1&#x27;</span> + sep + <span class="string">&#x27;$2&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">if</span> ((s[<span class="number">1</span>] || <span class="string">&#x27;&#x27;</span>).length &lt; prec) &#123;</span><br><span class="line">    s[<span class="number">1</span>] = s[<span class="number">1</span>] || <span class="string">&#x27;&#x27;</span></span><br><span class="line">    s[<span class="number">1</span>] += <span class="keyword">new</span> <span class="built_in">Array</span>(prec - s[<span class="number">1</span>].length + <span class="number">1</span>).join(<span class="string">&#x27;0&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> s.join(dec)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Vue </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 工具类 </tag>
            
            <tag> Vue </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Java 中 sleep() 和 wait() 的区别</title>
      <link href="posts/47cc5feb.html"/>
      <url>posts/47cc5feb.html</url>
      
        <content type="html"><![CDATA[<h2 id="🎉-两者区别">🎉 两者区别</h2><ol><li>对于 sleep() 方法，我们首先要知道该方法属于 Thread 类中。而 wait() 方法则属于 Object 类中的。</li><li>sleep() 方法导致了程序暂停执行指定的时间，让出cpu该其他线程，但是他的监控状态依然保持着，当指定的时间到了又会自动恢复运行状态。</li><li>调用 sleep() 方法过程中，线程不会释放对象锁。</li><li>调用 wait() 方法的时候，线程会放弃对象锁，进入等待此对象的等待锁定池，只有针对此对象调用 notify() 方法后本线程才进入对象锁定池准备获取对象锁进入运行状态。</li></ol><h2 id="🎉-举例说明">🎉 举例说明</h2><p>代码如下：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span>: Xuxu</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span>: 2020-08-02 18:43</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestD</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">new</span> Thread(<span class="keyword">new</span> Thread1()).start();</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            Thread.sleep(<span class="number">5000</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">new</span> Thread(<span class="keyword">new</span> Thread2()).start();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">Thread1</span> <span class="keyword">implements</span> <span class="title">Runnable</span> </span>&#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            <span class="keyword">synchronized</span> (TestD.class) &#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;enter thread1...&quot;</span>);</span><br><span class="line">                System.out.println(<span class="string">&quot;thread1 is waiting...&quot;</span>);</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    <span class="comment">// 调用wait()方法，线程会放弃对象锁，进入等待此对象的等待锁定池</span></span><br><span class="line">                    TestD.class.wait();</span><br><span class="line">                &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">                System.out.println(<span class="string">&quot;thread1 is going on ....&quot;</span>);</span><br><span class="line">                System.out.println(<span class="string">&quot;thread1 is over!!!&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">Thread2</span> <span class="keyword">implements</span> <span class="title">Runnable</span> </span>&#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            <span class="keyword">synchronized</span> (TestD.class) &#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;enter thread2....&quot;</span>);</span><br><span class="line">                System.out.println(<span class="string">&quot;thread2 is sleep....&quot;</span>);</span><br><span class="line">                <span class="comment">// 只有针对此对象调用notify()方法后本线程才进入对象锁定池准备获取对象锁进入运行状态。</span></span><br><span class="line">                TestD.class.notify();</span><br><span class="line">                <span class="comment">//区别</span></span><br><span class="line">                <span class="comment">//如果我们把代码：TestD.class.notify();给注释掉，即TestD.class调用了wait()方法，但是没有调用notify()方法，则线程永远处于挂起状态。</span></span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    <span class="comment">//sleep()方法导致了程序暂停执行指定的时间，让出cpu该其他线程，</span></span><br><span class="line">                    <span class="comment">//但是他的监控状态依然保持者，当指定的时间到了又会自动恢复运行状态。</span></span><br><span class="line">                    <span class="comment">//在调用sleep()方法的过程中，线程不会释放对象锁。</span></span><br><span class="line">                    Thread.sleep(<span class="number">5000</span>);</span><br><span class="line">                &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">                System.out.println(<span class="string">&quot;thread2 is going on....&quot;</span>);</span><br><span class="line">                System.out.println(<span class="string">&quot;thread2 is over!!!&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>运行结果：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">enter thread1...</span><br><span class="line">thread1 is waiting...</span><br><span class="line">enter thread2....</span><br><span class="line">thread2 is sleep....</span><br><span class="line">thread2 is going on....</span><br><span class="line">thread2 is over!!!</span><br><span class="line">thread1 is going on ....</span><br><span class="line">thread1 is over!!!</span><br></pre></td></tr></table></figure><p>如果注释掉下面这行代码：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">TestD.class.notify();</span><br></pre></td></tr></table></figure><p>运行结果变为：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">enter thread1...</span><br><span class="line">thread1 is waiting...</span><br><span class="line">enter thread2....</span><br><span class="line">thread2 is sleep....</span><br><span class="line">thread2 is going on....</span><br><span class="line">thread2 is over!!!</span><br></pre></td></tr></table></figure><p>且程序一直处于挂起状态。</p><p>经过上面这段代码演示我相信大家会更容易的理解 sleep() 和 wait() 的区别。</p>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
          <category> 线程 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> 线程 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Vue Element-UI 采用 http-request 方式自定义文件上传</title>
      <link href="posts/461108bb.html"/>
      <url>posts/461108bb.html</url>
      
        <content type="html"><![CDATA[<p>Vue 的文件上传组件 upload，拥有支持多种格式文件上传，单文件多文件等都支持，许多项目现在都少不了文件上传功能，但是 vue 的 upload 组件如果直接引用，肯定也有一些不方便之处，有的时候需要传参数，需要手动触发上传方法，而不是选择了文件就上传，所以结合我项目实例，写一 vue 自定义文件上传的实现，包括前端和后台的处理以及参数的接收。</p><h2 id="🌞-Vue-界面示例">🌞 Vue 界面示例</h2><p>我这里是富文本中的图片上传，以下教程也同样适用于其他方面，可根据自己需求修改。</p><p><img src="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/article/abbrlink-461108bb/vue%E7%A4%BA%E4%BE%8B.png" class="lazyload placeholder" data-srcset="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/article/abbrlink-461108bb/vue%E7%A4%BA%E4%BE%8B.png" srcset="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/site-img/img-loading.gif" alt=""></p><h2 id="🌞-Vue-代码">🌞 Vue 代码</h2><p>以下代码可根据自己业务需求进行合理的修改使用。</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;upload-container&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">:style</span>=<span class="string">&quot;&#123;background:color,borderColor:color&#125;&quot;</span> <span class="attr">icon</span>=<span class="string">&quot;el-icon-upload&quot;</span> <span class="attr">size</span>=<span class="string">&quot;mini&quot;</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> @<span class="attr">click</span>=<span class="string">&quot; dialogVisible=true&quot;</span>&gt;</span></span><br><span class="line">      上传</span><br><span class="line">    <span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-dialog</span> <span class="attr">:visible.sync</span>=<span class="string">&quot;dialogVisible&quot;</span>&gt;</span></span><br><span class="line">      &lt;el-upload</span><br><span class="line">        :multiple=&quot;true&quot;</span><br><span class="line">        :file-list=&quot;fileList&quot;</span><br><span class="line">        :show-file-list=&quot;true&quot;</span><br><span class="line">        :on-remove=&quot;handleRemove&quot;</span><br><span class="line">        :before-upload=&quot;beforeUpload&quot;</span><br><span class="line">        :http-request=&quot;uploadImage&quot;</span><br><span class="line">        action=&quot;#&quot;</span><br><span class="line">        class=&quot;editor-slide-upload&quot;</span><br><span class="line">        list-type=&quot;picture-card&quot;</span><br><span class="line">      &gt;</span><br><span class="line">        <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">size</span>=<span class="string">&quot;small&quot;</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span>&gt;</span></span><br><span class="line">          点击上传</span><br><span class="line">        <span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">el-upload</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">el-button</span> @<span class="attr">click</span>=<span class="string">&quot;dialogVisible = false&quot;</span>&gt;</span></span><br><span class="line">        取消</span><br><span class="line">      <span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;handleSubmit&quot;</span>&gt;</span></span><br><span class="line">        确定</span><br><span class="line">      <span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">el-dialog</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript"><span class="keyword">import</span> &#123; uploadALocalPicture &#125; <span class="keyword">from</span> <span class="string">&#x27;../../../api/upload&#x27;</span></span></span><br><span class="line"></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="javascript">  name: <span class="string">&#x27;EditorSlideUpload&#x27;</span>,</span></span><br><span class="line">  props: &#123;</span><br><span class="line">    color: &#123;</span><br><span class="line"><span class="javascript">      type: <span class="built_in">String</span>,</span></span><br><span class="line"><span class="javascript">      <span class="keyword">default</span>: <span class="string">&#x27;#1890ff&#x27;</span></span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line"><span class="javascript">  <span class="function"><span class="title">data</span>(<span class="params"></span>)</span> &#123;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="javascript">      dialogVisible: <span class="literal">false</span>,</span></span><br><span class="line">      listObj: &#123;&#125;,</span><br><span class="line">      fileList: []</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line"><span class="javascript">    <span class="comment">// 校验所有文件是否上传成功</span></span></span><br><span class="line"><span class="javascript">    <span class="function"><span class="title">checkAllSuccess</span>(<span class="params"></span>)</span> &#123;</span></span><br><span class="line"><span class="javascript">      <span class="keyword">return</span> <span class="built_in">Object</span>.keys(<span class="built_in">this</span>.listObj).every(<span class="function"><span class="params">item</span> =&gt;</span> <span class="built_in">this</span>.listObj[item].hasSuccess)</span></span><br><span class="line">    &#125;,</span><br><span class="line"><span class="javascript">    <span class="comment">// 确定提交事件</span></span></span><br><span class="line"><span class="javascript">    <span class="function"><span class="title">handleSubmit</span>(<span class="params"></span>)</span> &#123;</span></span><br><span class="line"><span class="javascript">      <span class="comment">// 我这里是将数组递交给父级组件，根据自己的需求进行合理处理</span></span></span><br><span class="line"><span class="javascript">      <span class="keyword">const</span> arr = <span class="built_in">Object</span>.keys(<span class="built_in">this</span>.listObj).map(<span class="function"><span class="params">v</span> =&gt;</span> <span class="built_in">this</span>.listObj[v])</span></span><br><span class="line"><span class="javascript">      <span class="comment">// 校验所有文件是否上传成功</span></span></span><br><span class="line"><span class="javascript">      <span class="keyword">if</span> (!<span class="built_in">this</span>.checkAllSuccess()) &#123;</span></span><br><span class="line"><span class="javascript">        <span class="built_in">this</span>.$message(<span class="string">&#x27;请等待所有图像成功上传。如果出现网络问题，请刷新页面，然后重新上传！&#x27;</span>)</span></span><br><span class="line"><span class="javascript">        <span class="keyword">return</span></span></span><br><span class="line">      &#125;</span><br><span class="line"><span class="javascript">      <span class="comment">// 集合递交给父级组件方法</span></span></span><br><span class="line"><span class="javascript">      <span class="built_in">this</span>.$emit(<span class="string">&#x27;successCBK&#x27;</span>, arr)</span></span><br><span class="line"><span class="javascript">      <span class="built_in">this</span>.listObj = &#123;&#125;</span></span><br><span class="line"><span class="javascript">      <span class="built_in">this</span>.fileList = []</span></span><br><span class="line"><span class="javascript">      <span class="built_in">this</span>.dialogVisible = <span class="literal">false</span></span></span><br><span class="line">    &#125;,</span><br><span class="line"><span class="javascript">    <span class="comment">// 移除文件</span></span></span><br><span class="line"><span class="javascript">    <span class="function"><span class="title">handleRemove</span>(<span class="params">file</span>)</span> &#123;</span></span><br><span class="line"><span class="javascript">      <span class="keyword">const</span> uid = file.uid</span></span><br><span class="line"><span class="javascript">      <span class="keyword">const</span> objKeyArr = <span class="built_in">Object</span>.keys(<span class="built_in">this</span>.listObj)</span></span><br><span class="line"><span class="javascript">      <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>, len = objKeyArr.length; i &lt; len; i++) &#123;</span></span><br><span class="line"><span class="javascript">        <span class="keyword">if</span> (<span class="built_in">this</span>.listObj[objKeyArr[i]].uid === uid) &#123;</span></span><br><span class="line"><span class="javascript">          <span class="keyword">delete</span> <span class="built_in">this</span>.listObj[objKeyArr[i]]</span></span><br><span class="line"><span class="javascript">          <span class="keyword">return</span></span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line"><span class="javascript">    <span class="comment">// 上传文件前调用的方法，主要为了校验文件</span></span></span><br><span class="line"><span class="javascript">    <span class="function"><span class="title">beforeUpload</span>(<span class="params">file</span>)</span> &#123;</span></span><br><span class="line"><span class="javascript">      <span class="keyword">if</span> (!(file.type === <span class="string">&#x27;image/png&#x27;</span> || file.type === <span class="string">&#x27;image/jpg&#x27;</span> || file.type === <span class="string">&#x27;image/jpeg&#x27;</span> || file.type === <span class="string">&#x27;image/gif&#x27;</span>)) &#123;</span></span><br><span class="line"><span class="javascript">        <span class="built_in">this</span>.$notify.warning(&#123;</span></span><br><span class="line"><span class="javascript">          title: <span class="string">&#x27;警告&#x27;</span>,</span></span><br><span class="line"><span class="javascript">          message: <span class="string">&#x27;上传应用Logo图片只能是 JPG/PNG/JPEG/GIF 格式！&#x27;</span></span></span><br><span class="line">        &#125;)</span><br><span class="line"><span class="javascript">        <span class="keyword">return</span> <span class="literal">false</span></span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line"><span class="javascript">    <span class="comment">// 上传文件</span></span></span><br><span class="line"><span class="javascript">    <span class="function"><span class="title">uploadImage</span>(<span class="params">param</span>)</span> &#123;</span></span><br><span class="line"><span class="javascript">      <span class="keyword">const</span> _self = <span class="built_in">this</span></span></span><br><span class="line"><span class="javascript">      <span class="keyword">const</span> fileName = param.file.uid</span></span><br><span class="line"><span class="javascript">      <span class="built_in">this</span>.listObj[fileName] = &#123;&#125;</span></span><br><span class="line"><span class="javascript">      <span class="keyword">const</span> formData = <span class="keyword">new</span> FormData()</span></span><br><span class="line"><span class="javascript">      formData.append(<span class="string">&#x27;picFile&#x27;</span>, param.file)</span></span><br><span class="line"><span class="javascript">      <span class="comment">// 这里调用的axios封装的请求方法（根据自己项目进行调用）</span></span></span><br><span class="line"><span class="javascript">      uploadALocalPicture(formData).then(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="javascript">        <span class="comment">// 上传成功的图片会显示绿色的对勾</span></span></span><br><span class="line">        param.onSuccess()</span><br><span class="line"><span class="javascript">        <span class="built_in">console</span>.log(<span class="string">&#x27;上传图片成功&#x27;</span>)</span></span><br><span class="line"><span class="javascript">        _self.listObj[fileName] = &#123; <span class="attr">hasSuccess</span>: <span class="literal">false</span>, <span class="attr">uid</span>: param.file.uid &#125;</span></span><br><span class="line"><span class="javascript">        <span class="built_in">this</span>.handleSuccess(res, param.file)</span></span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;,</span><br><span class="line"><span class="javascript">    <span class="comment">// 上传成功时调用的方法</span></span></span><br><span class="line"><span class="javascript">    <span class="function"><span class="title">handleSuccess</span>(<span class="params">response, file</span>)</span> &#123;</span></span><br><span class="line"><span class="javascript">      <span class="keyword">const</span> uid = file.uid</span></span><br><span class="line"><span class="javascript">      <span class="keyword">const</span> objKeyArr = <span class="built_in">Object</span>.keys(<span class="built_in">this</span>.listObj)</span></span><br><span class="line"><span class="javascript">      <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>, len = objKeyArr.length; i &lt; len; i++) &#123;</span></span><br><span class="line"><span class="javascript">        <span class="keyword">if</span> (<span class="built_in">this</span>.listObj[objKeyArr[i]].uid === uid) &#123;</span></span><br><span class="line"><span class="javascript">          <span class="built_in">this</span>.listObj[objKeyArr[i]].url = response.data</span></span><br><span class="line"><span class="javascript">          <span class="built_in">this</span>.listObj[objKeyArr[i]].hasSuccess = <span class="literal">true</span></span></span><br><span class="line"><span class="javascript">          <span class="keyword">return</span></span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">lang</span>=<span class="string">&quot;scss&quot;</span> <span class="attr">scoped</span>&gt;</span></span><br><span class="line"><span class="css">    <span class="selector-class">.editor-slide-upload</span> &#123;</span></span><br><span class="line">      margin-bottom: 20px;</span><br><span class="line"><span class="css">      /<span class="selector-tag">deep</span>/ <span class="selector-class">.el-upload--picture-card</span> &#123;</span></span><br><span class="line">        width: 100%;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="🌞-Java-代码">🌞 Java 代码</h2><p>以下代码各位看个思路就行，具体代码实现根据自己情况而定。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.scaffolding.demo.sys.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.scaffolding.demo.annotation.CheckToken;</span><br><span class="line"><span class="keyword">import</span> com.scaffolding.demo.annotation.Log;</span><br><span class="line"><span class="keyword">import</span> com.scaffolding.demo.annotation.PassToken;</span><br><span class="line"><span class="keyword">import</span> com.scaffolding.demo.common.ErrorCode;</span><br><span class="line"><span class="keyword">import</span> com.scaffolding.demo.common.OperationLogConstant;</span><br><span class="line"><span class="keyword">import</span> com.scaffolding.demo.common.Result;</span><br><span class="line"><span class="keyword">import</span> com.scaffolding.demo.common.ResultGenerator;</span><br><span class="line"><span class="keyword">import</span> com.scaffolding.demo.config.EnvConfig;</span><br><span class="line"><span class="keyword">import</span> com.scaffolding.demo.exception.BusinessException;</span><br><span class="line"><span class="keyword">import</span> com.scaffolding.demo.utils.UuidUtil;</span><br><span class="line"><span class="keyword">import</span> io.swagger.annotations.Api;</span><br><span class="line"><span class="keyword">import</span> io.swagger.annotations.ApiOperation;</span><br><span class="line"><span class="keyword">import</span> io.swagger.annotations.ApiResponse;</span><br><span class="line"><span class="keyword">import</span> io.swagger.annotations.ApiResponses;</span><br><span class="line"><span class="keyword">import</span> lombok.extern.slf4j.Slf4j;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.PostMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestParam;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RestController;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.multipart.MultipartFile;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> java.io.File;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.util.Objects;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span>: Xuxu</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span>: 2020-01-16 15:41</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/sys/upload&quot;)</span></span><br><span class="line"><span class="meta">@Api(value = &quot;上传文件&quot;, tags = &quot;操作上传文件相关API&quot;)</span></span><br><span class="line"><span class="meta">@ApiResponses(&#123;@ApiResponse(code = 400, message = &quot;请求参数没填好&quot;),</span></span><br><span class="line"><span class="meta">        @ApiResponse(code = 404, message = &quot;请求路径没有或页面跳转路径不对&quot;)</span></span><br><span class="line"><span class="meta">&#125;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UploadFileController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 获取配置文件中的变量</span></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> EnvConfig envConfig;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 上传图片</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@CheckToken</span></span><br><span class="line">    <span class="meta">@PostMapping(&quot;/image&quot;)</span></span><br><span class="line">    <span class="meta">@ApiOperation(value = &quot;上传图片&quot;)</span></span><br><span class="line">    <span class="meta">@Log(operationModule = &quot;上传图片&quot;, operationType = OperationLogConstant.UPLOAD, operationDesc = &quot;上传图片&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Result&lt;String&gt; <span class="title">uploadImage</span><span class="params">(<span class="meta">@RequestParam(&quot;picFile&quot;)</span> MultipartFile picFile)</span> </span>&#123;</span><br><span class="line">        log.info(<span class="string">&quot;开始上传图片&quot;</span>);</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            String showPath = uploadFile(picFile);</span><br><span class="line">            <span class="keyword">return</span> ResultGenerator.genSuccessResult(showPath);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            log.error(<span class="string">&quot;上传图片异常&quot;</span>);</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> BusinessException(ErrorCode.UPLOAD_IMAGE_ERROR);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 上传文件</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> file</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> IOException</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> String <span class="title">uploadFile</span><span class="params">(MultipartFile file)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        <span class="comment">//获取原始文件名称(包含格式)</span></span><br><span class="line">        String filename = file.getOriginalFilename();</span><br><span class="line">        <span class="comment">//获取文件类型，以最后一个`.`为标识</span></span><br><span class="line">        String type = filename.substring(Objects.requireNonNull(filename).lastIndexOf(<span class="string">&quot;.&quot;</span>) + <span class="number">1</span>);</span><br><span class="line">        <span class="comment">//文件名</span></span><br><span class="line">        String name = filename.substring(<span class="number">0</span>, Objects.requireNonNull(filename).lastIndexOf(<span class="string">&quot;.&quot;</span>));</span><br><span class="line">        <span class="comment">//当前时间戳</span></span><br><span class="line">        <span class="keyword">long</span> timeMillis = System.currentTimeMillis();</span><br><span class="line">        <span class="comment">//获取文件在服务器的储存位置</span></span><br><span class="line">        File filePath = <span class="keyword">new</span> File(envConfig.getUploadPath());</span><br><span class="line">        <span class="comment">// 是否是文件夹</span></span><br><span class="line">        <span class="keyword">if</span> (!filePath.exists() &amp;&amp; !filePath.isDirectory()) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;目录不存在，创建目录:&quot;</span> + filePath);</span><br><span class="line">            filePath.mkdir();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//在指定路径下创建一个文件</span></span><br><span class="line">        File newFile = <span class="keyword">new</span> File(envConfig.getUploadPath(), name + timeMillis + <span class="string">&quot;.&quot;</span> + type);</span><br><span class="line">        <span class="comment">// 上传文件</span></span><br><span class="line">        file.transferTo(newFile);</span><br><span class="line">        <span class="keyword">return</span> envConfig.getShowPath() + name + timeMillis + <span class="string">&quot;.&quot;</span> + type;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Vue </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Vue </tag>
            
            <tag> 文件上传 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Java获取两个日期之间包含的年、月、日</title>
      <link href="posts/f4a01af3.html"/>
      <url>posts/f4a01af3.html</url>
      
        <content type="html"><![CDATA[<p>不多废话，直接上代码：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.scaffolding.demo.utils;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.text.ParseException;</span><br><span class="line"><span class="keyword">import</span> java.text.SimpleDateFormat;</span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.Calendar;</span><br><span class="line"><span class="keyword">import</span> java.util.Date;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span>: Xuxu</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span>: 2020-06-30 19:36</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DateUtil</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> ParseException </span>&#123;</span><br><span class="line">        <span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">        String beginTime = <span class="string">&quot;2019-02-01&quot;</span>;</span><br><span class="line">        String endTime = <span class="string">&quot;2019-02-04&quot;</span>;</span><br><span class="line">        <span class="comment">// 测试天</span></span><br><span class="line">        List&lt;String&gt; daysStr = findDaysStr(beginTime, endTime);</span><br><span class="line">        System.out.println(<span class="string">&quot;所有天：&quot;</span> + daysStr);</span><br><span class="line">        <span class="comment">// 测试月</span></span><br><span class="line">        List&lt;String&gt; monthsStr = findMonthsStr(beginTime, endTime);</span><br><span class="line">        System.out.println(<span class="string">&quot;所有月：&quot;</span> + monthsStr);</span><br><span class="line">        <span class="comment">// 测试年</span></span><br><span class="line">        List&lt;String&gt; yearsStr = findYearsStr(beginTime, endTime);</span><br><span class="line">        System.out.println(<span class="string">&quot;所有年：&quot;</span> + yearsStr);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 计算两个日期之间包含的所有天</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> beginTime</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> endTime</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> List&lt;String&gt; <span class="title">findDaysStr</span><span class="params">(String beginTime, String endTime)</span> </span>&#123;</span><br><span class="line">        SimpleDateFormat sdf = <span class="keyword">new</span> SimpleDateFormat(<span class="string">&quot;yyyy-MM-dd&quot;</span>);</span><br><span class="line">        Date dBegin = <span class="keyword">null</span>;</span><br><span class="line">        Date dEnd = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            dBegin = sdf.parse(beginTime);</span><br><span class="line">            dEnd = sdf.parse(endTime);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (ParseException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        List&lt;String&gt; daysStrList = <span class="keyword">new</span> ArrayList&lt;String&gt;();</span><br><span class="line">        daysStrList.add(sdf.format(dBegin));</span><br><span class="line">        Calendar calBegin = Calendar.getInstance();</span><br><span class="line">        calBegin.setTime(dBegin);</span><br><span class="line">        Calendar calEnd = Calendar.getInstance();</span><br><span class="line">        calEnd.setTime(dEnd);</span><br><span class="line">        <span class="keyword">while</span> (dEnd.after(calBegin.getTime())) &#123;</span><br><span class="line">            calBegin.add(Calendar.DAY_OF_MONTH, <span class="number">1</span>);</span><br><span class="line">            String dayStr = sdf.format(calBegin.getTime());</span><br><span class="line">            daysStrList.add(dayStr);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> daysStrList;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 计算两个日期之间包含的所有月份</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> beginTime</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> endTime</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> ParseException</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> List&lt;String&gt; <span class="title">findMonthsStr</span><span class="params">(String beginTime, String endTime)</span> <span class="keyword">throws</span> ParseException </span>&#123;</span><br><span class="line">        List&lt;String&gt; monthsStrList = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">        <span class="comment">//格式化为年月</span></span><br><span class="line">        SimpleDateFormat sdf = <span class="keyword">new</span> SimpleDateFormat(<span class="string">&quot;yyyy-MM&quot;</span>);</span><br><span class="line"></span><br><span class="line">        Calendar min = Calendar.getInstance();</span><br><span class="line">        Calendar max = Calendar.getInstance();</span><br><span class="line"></span><br><span class="line">        min.setTime(sdf.parse(beginTime));</span><br><span class="line">        min.set(min.get(Calendar.YEAR), min.get(Calendar.MONTH), <span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">        max.setTime(sdf.parse(endTime));</span><br><span class="line">        max.set(max.get(Calendar.YEAR), max.get(Calendar.MONTH), <span class="number">2</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span> (min.before(max)) &#123;</span><br><span class="line">            monthsStrList.add(sdf.format(min.getTime()));</span><br><span class="line">            min.add(Calendar.MONTH, <span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> monthsStrList;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 计算两个日期之间包含的所有年份</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> beginTime</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> endTime</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> List&lt;String&gt; <span class="title">findYearsStr</span><span class="params">(String beginTime, String endTime)</span> </span>&#123;</span><br><span class="line">        List&lt;String&gt; yearsStrList = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">        beginTime = beginTime.substring(<span class="number">0</span>, <span class="number">4</span>);</span><br><span class="line">        endTime = endTime.substring(<span class="number">0</span>, <span class="number">4</span>);</span><br><span class="line">        <span class="keyword">if</span> (beginTime.equals(endTime)) &#123;</span><br><span class="line">            yearsStrList.add(beginTime);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            yearsStrList.add(beginTime);</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= Integer.parseInt(endTime) - Integer.parseInt(beginTime); i++) &#123;</span><br><span class="line">                yearsStrList.add(String.valueOf(Integer.parseInt(beginTime) + i));</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> yearsStrList;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
          <category> 工具类 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> 工具类 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Vue 使用 XMLHttpRequest 导出 excel</title>
      <link href="posts/34469844.html"/>
      <url>posts/34469844.html</url>
      
        <content type="html"><![CDATA[<p>相关代码：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">const formData = new FormData()</span><br><span class="line">const xhr = new XMLHttpRequest()</span><br><span class="line">xhr.open(<span class="string">&#x27;post&#x27;</span>, <span class="string">&#x27;http://localhost:8080/api&#x27;</span>) // url填写后台的接口地址，如果是post，在formData append参数即可</span><br><span class="line">xhr.setRequestHeader(<span class="string">&#x27;X-Token&#x27;</span>, getToken())</span><br><span class="line">xhr.responseType = <span class="string">&#x27;blob&#x27;</span></span><br><span class="line">xhr.onload = <span class="keyword">function</span>(e) &#123;</span><br><span class="line"><span class="keyword">if</span> (this.status === 200) &#123;</span><br><span class="line">  const blob = this.response</span><br><span class="line">  const filename = <span class="string">&#x27;合同.xlsx&#x27;</span> // 这里的名字，可以按后端给的接口固定表单设置一下名字，如（费用单.xlsx,合同.doc等等）</span><br><span class="line">  console.log(this.response)</span><br><span class="line">  <span class="keyword">if</span> (window.navigator.msSaveOrOpenBlob) &#123;</span><br><span class="line">    navigator.msSaveBlob(blob, filename)</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    const a = document.createElement(<span class="string">&#x27;a&#x27;</span>)</span><br><span class="line">    const url = URL.createObjectURL(blob)</span><br><span class="line">    a.href = url</span><br><span class="line">    a.download = filename</span><br><span class="line">    document.body.appendChild(a)</span><br><span class="line">    a.click()</span><br><span class="line">    window.URL.revokeObjectURL(url)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">xhr.send(formData)</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Vue </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Vue </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Vue v-for list数据循环 每3或者（n）个一组</title>
      <link href="posts/4fc8b649.html"/>
      <url>posts/4fc8b649.html</url>
      
        <content type="html"><![CDATA[<p>template 代码：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;el-carousel-item v-for=<span class="string">&quot;(item,index) in listTemp&quot;</span> :key=<span class="string">&quot;index&quot;</span>&gt;</span><br><span class="line">  &lt;div style=<span class="string">&quot;margin-left: 17%;margin-right: 10%;margin-top: 20px;&quot;</span>&gt;</span><br><span class="line">    &lt;div v-for=<span class="string">&quot;o in item&quot;</span> :key=<span class="string">&quot;o&quot;</span> style=<span class="string">&quot;display:inline;padding: 0.6rem&quot;</span>&gt;</span><br><span class="line">      &lt;el-card :body-style=<span class="string">&quot;&#123; padding: &#x27;0px&#x27; &#125;&quot;</span> style=<span class="string">&quot;width: 20%;max-height: 200px&quot;</span> @click.native=<span class="string">&quot;showDrawer(o)&quot;</span>&gt;</span><br><span class="line">        &lt;img :src=<span class="string">&quot;o.imgPath&quot;</span> class=<span class="string">&quot;image&quot;</span>&gt;</span><br><span class="line">        &lt;div style=<span class="string">&quot;padding: 10px;font-size:14px;display: flex;justify-content: space-between&quot;</span>&gt;</span><br><span class="line">          &lt;span&gt;&#123;&#123; o.eventdate &#125;&#125;&lt;/span&gt;</span><br><span class="line">          &lt;span&gt;&#123;&#123; o.position &#125;&#125;&lt;/span&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">      &lt;/el-card&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/el-carousel-item&gt;</span><br></pre></td></tr></table></figure><p>computed 代码：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">computed: &#123;</span><br><span class="line">    <span class="function"><span class="title">listTemp</span></span>() &#123;</span><br><span class="line">      <span class="built_in">let</span> index = 0</span><br><span class="line">      const count = 4</span><br><span class="line">      const arrTemp = []</span><br><span class="line">      const experts = this.alarmImgList</span><br><span class="line">      <span class="keyword">for</span> (<span class="built_in">let</span> i = 0; i &lt; this.alarmImgList.length; i++) &#123;</span><br><span class="line">        index = parseInt(i / count)</span><br><span class="line">        <span class="keyword">if</span> (arrTemp.length &lt;= index) &#123;</span><br><span class="line">          arrTemp.push([])</span><br><span class="line">        &#125;</span><br><span class="line">        arrTemp[index].push(experts[i])</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="built_in">return</span> arrTemp</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Vue </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Vue </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Vue获取指定日期的那一周的开始、结束日期（从周日~周六）</title>
      <link href="posts/faf888d5.html"/>
      <url>posts/faf888d5.html</url>
      
        <content type="html"><![CDATA[<p>需求：给定一个日期，如： 2020-07-06，获取该日期所在的这一周的开始时间、结束时间（按周日~周六算）</p><p>代码如下：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 获取指定日期的那一周的开始、结束日期</span></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">getWeekStartAndEnd</span>(<span class="params">val</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> now</span><br><span class="line">  <span class="keyword">if</span> (val) &#123;</span><br><span class="line">    now = <span class="keyword">new</span> <span class="built_in">Date</span>(val)</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    now = <span class="keyword">new</span> <span class="built_in">Date</span>()</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">const</span> nowDayOfWeek = now.getDay() <span class="comment">// 本周的第几天</span></span><br><span class="line">  <span class="keyword">const</span> nowDay = now.getDate() <span class="comment">// 当前日</span></span><br><span class="line">  <span class="keyword">const</span> nowMonth = now.getMonth() <span class="comment">// 当前月</span></span><br><span class="line">  <span class="keyword">const</span> nowYear = now.getFullYear() <span class="comment">// 当前年</span></span><br><span class="line">  <span class="keyword">const</span> weekStart = getWeekStartDate(nowYear, nowMonth, nowDay, nowDayOfWeek)</span><br><span class="line">  <span class="keyword">const</span> weekEnd = getWeekEndDate(nowYear, nowMonth, nowDay, nowDayOfWeek)</span><br><span class="line">  <span class="built_in">console</span>.log(weekStart + <span class="string">&#x27;,&#x27;</span> + weekEnd)</span><br><span class="line">  <span class="keyword">return</span> weekStart + <span class="string">&#x27;,&#x27;</span> + weekEnd</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 获得某一周的开始日期</span></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">getWeekStartDate</span>(<span class="params">nowYear, nowMonth, nowDay, nowDayOfWeek</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> weekStartDate = <span class="keyword">new</span> <span class="built_in">Date</span>(nowYear, nowMonth, nowDay - nowDayOfWeek)</span><br><span class="line">  <span class="keyword">return</span> formatDate(weekStartDate)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 获得某一周的结束日期</span></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">getWeekEndDate</span>(<span class="params">nowYear, nowMonth, nowDay, nowDayOfWeek</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> weekEndDate = <span class="keyword">new</span> <span class="built_in">Date</span>(nowYear, nowMonth, nowDay + (<span class="number">6</span> - nowDayOfWeek))</span><br><span class="line">  <span class="keyword">return</span> formatDate(weekEndDate)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 日期格式化</span></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">formatDate</span>(<span class="params">date</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> myYear = date.getFullYear()</span><br><span class="line">  <span class="keyword">var</span> myMonth = date.getMonth() + <span class="number">1</span></span><br><span class="line">  <span class="keyword">var</span> myWeekday = date.getDate()</span><br><span class="line">  <span class="keyword">if</span> (myMonth &lt; <span class="number">10</span>) &#123;</span><br><span class="line">    myMonth = <span class="string">&#x27;0&#x27;</span> + myMonth</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">if</span> (myWeekday &lt; <span class="number">10</span>) &#123;</span><br><span class="line">    myWeekday = <span class="string">&#x27;0&#x27;</span> + myWeekday</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> myYear + <span class="string">&#x27;-&#x27;</span> + myMonth + <span class="string">&#x27;-&#x27;</span> + myWeekday</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Vue </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Vue </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Vue兼容ie下载网络图片</title>
      <link href="posts/ef31a0a3.html"/>
      <url>posts/ef31a0a3.html</url>
      
        <content type="html"><![CDATA[<p>最近在做 vue 项目中需要将图片下载到本地，而且要兼容 ie ，这就让人很头大，终于功夫不负有心人，解决了此问题，在此记录一下，希望可以帮助到其他人 ✌️。</p><p>以下为 js 代码：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">    downloadByBlob(imageUrl, name) &#123;</span><br><span class="line">      const image = new Image()</span><br><span class="line">      // 解决跨域问题</span><br><span class="line">      image.setAttribute(<span class="string">&#x27;crossOrigin&#x27;</span>, <span class="string">&#x27;anonymous&#x27;</span>)</span><br><span class="line">      image.src = imageUrl</span><br><span class="line">    </span><br><span class="line">      image.onload = () =&gt; &#123;</span><br><span class="line">        const canvas = document.createElement(<span class="string">&#x27;canvas&#x27;</span>)</span><br><span class="line">        canvas.width = image.width</span><br><span class="line">        canvas.height = image.height</span><br><span class="line">        const context = canvas.getContext(<span class="string">&#x27;2d&#x27;</span>)</span><br><span class="line">        context.drawImage(image, 0, 0, image.width, image.height)</span><br><span class="line">    </span><br><span class="line">        const quality = 0.8</span><br><span class="line">        // 这里的dataUrl就是base64类型</span><br><span class="line">        const dataUrl = canvas.toDataURL(<span class="string">&#x27;image/jpeg&#x27;</span>, quality)// 使用toDataUrl将图片转换成jpeg的格式,不要把图片压缩成png，因为压缩成png后base64的字符串可能比不转换前的长！</span><br><span class="line">    </span><br><span class="line">        const arr = dataUrl.split(<span class="string">&#x27;,&#x27;</span>)</span><br><span class="line">        const mime = arr[0].match(/:(.*?);/)[1]</span><br><span class="line">        const bStr = atob(arr[1])</span><br><span class="line">        <span class="built_in">let</span> n = bStr.length</span><br><span class="line">        const u8arr = new Uint8Array(n)</span><br><span class="line">        <span class="keyword">while</span> (n--) &#123;</span><br><span class="line">          u8arr[n] = bStr.charCodeAt(n)</span><br><span class="line">        &#125;</span><br><span class="line">        const blob_ = new Blob([u8arr], &#123; <span class="built_in">type</span>: mime &#125;)</span><br><span class="line">    </span><br><span class="line">        <span class="keyword">if</span> (this.myBrowser() === <span class="string">&#x27;IE&#x27;</span>) &#123;</span><br><span class="line">          const url = &#123;</span><br><span class="line">            name: name,</span><br><span class="line">            src: blob_</span><br><span class="line">          &#125;</span><br><span class="line">          // filename文件名包括扩展名，下载路径为浏览器默认路径</span><br><span class="line">          navigator.msSaveBlob(url.src, url.name)</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">          const save_link = document.createElementNS(<span class="string">&#x27;http://www.w3.org/1999/xhtml&#x27;</span>, <span class="string">&#x27;a&#x27;</span>)</span><br><span class="line">          save_link.href = dataUrl</span><br><span class="line">          save_link.download = name</span><br><span class="line">          const event = document.createEvent(<span class="string">&#x27;MouseEvents&#x27;</span>)</span><br><span class="line">          event.initMouseEvent(<span class="string">&#x27;click&#x27;</span>, <span class="literal">true</span>, <span class="literal">false</span>, window, 0, 0, 0, 0, 0, <span class="literal">false</span>, <span class="literal">false</span>, <span class="literal">false</span>, <span class="literal">false</span>, 0, null)</span><br><span class="line">          save_link.dispatchEvent(event)</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="function"><span class="title">myBrowser</span></span>() &#123;</span><br><span class="line">      const userAgent = window.navigator.userAgent // 取得浏览器的userAgent字符串</span><br><span class="line">      const isOpera = userAgent.indexOf(<span class="string">&#x27;Opera&#x27;</span>) &gt; -1 // 判断是否Opera浏览器</span><br><span class="line">      const isIE = userAgent.indexOf(<span class="string">&#x27;NET&#x27;</span>) &gt; -1 &amp;&amp; userAgent.indexOf(<span class="string">&#x27;rv&#x27;</span>) &gt; -1 // 判断是否IE浏览器</span><br><span class="line">      const isEdge = userAgent.indexOf(<span class="string">&#x27;Edge&#x27;</span>) &gt; -1 // 判断是否IE的Edge浏览器</span><br><span class="line">      const isFF = userAgent.indexOf(<span class="string">&#x27;Firefox&#x27;</span>) &gt; -1 // 判断是否Firefox浏览器</span><br><span class="line">      const isSafari = userAgent.indexOf(<span class="string">&#x27;Safari&#x27;</span>) &gt; -1 &amp;&amp; userAgent.indexOf(<span class="string">&#x27;Chrome&#x27;</span>) === -1 // 判断是否Safari浏览器</span><br><span class="line">      const isChrome = userAgent.indexOf(<span class="string">&#x27;Chrome&#x27;</span>) &gt; -1 &amp;&amp; userAgent.indexOf(<span class="string">&#x27;Safari&#x27;</span>) &gt; -1 // 判断Chrome浏览器</span><br><span class="line">    </span><br><span class="line">      <span class="keyword">if</span> (isIE) &#123;</span><br><span class="line">        <span class="built_in">return</span> <span class="string">&#x27;IE&#x27;</span></span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">if</span> (isOpera) &#123;</span><br><span class="line">        <span class="built_in">return</span> <span class="string">&#x27;Opera&#x27;</span></span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">if</span> (isEdge) &#123;</span><br><span class="line">        <span class="built_in">return</span> <span class="string">&#x27;Edge&#x27;</span></span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">if</span> (isFF) &#123;</span><br><span class="line">        <span class="built_in">return</span> <span class="string">&#x27;FF&#x27;</span></span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">if</span> (isSafari) &#123;</span><br><span class="line">        <span class="built_in">return</span> <span class="string">&#x27;Safari&#x27;</span></span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">if</span> (isChrome) &#123;</span><br><span class="line">        <span class="built_in">return</span> <span class="string">&#x27;Chrome&#x27;</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Vue </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Vue </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>事务的四个特性以及事务的隔离级别</title>
      <link href="posts/fe5c5e4f.html"/>
      <url>posts/fe5c5e4f.html</url>
      
        <content type="html"><![CDATA[<h3 id="🎵-什么是事务">🎵 什么是事务</h3><p>事务是指是程序中一系列严密的逻辑操作，而且所有操作必须全部成功完成，否则在每个操作中所作的所有更改都会被撤消。可以简单理解为：就是把多件事情当做一件事情来处理，好比大家同在一条船上，要活一起活，要完一起完 。</p><h3 id="🔥-为什么需要事务">🔥 为什么需要事务</h3><p>事务是为解决 <code>数据安全</code> 操作提出的，事务控制实际上就是控制数据的安全访问。</p><div class="note"><p>primary,<code>Example</code>：银行转帐业务，账户A要将自己账户上的1000元转到B账户下面，A账户余额首先要减去1000元，然后B账户要增加1000元。假如在中间网络出现了问题，A账户减去1000元已经结束，B因为网络中断而操作失败，那么整个业务失败，必须做出控制，要求A账户转帐业务撤销。这才能保证业务的正确性，完成这个操作就需要事务，将A账户资金减少和B账户资金增加放到同一个事务里，要么全部执行成功，要么全部撤销，这样就保证了数据的安全性。</p></div><h3 id="🎉-事物的四个特性（ACID）">🎉 事物的四个特性（ACID）</h3><ol><li><code>原子性（Atomicity）</code>：操作这些指令时，要么全部执行成功，要么全部不执行。只要其中一个指令执行失败，所有的指令都执行失败，数据进行回滚，回到执行指令前的数据状态。</li><li><code>一致性（Consistency）</code>：事务的执行使数据从一个状态转换为另一个状态，但是对于整个数据的完整性保持稳定。<div class="note primary" style="margin-bottom: 0px;"><code>Example</code>：拿转账来说，假设用户A和用户B两者的钱加起来一共是20000，那么不管A和B之间如何转账，转几次账，事务结束后两个用户的钱相加起来应该还得是20000，这就是事务的一致性。</div></li><li><code>隔离性（Isolation）</code>：隔离性是当多个用户并发访问数据库时，比如操作同一张表时，数据库为每一个用户开启的事务，不能被其他事务的操作所干扰，多个并发事务之间要相互隔离。</li><li><code>持久性（Durability）</code>：当事务正确完成后，它对于数据的改变是永久性的。<div class="note primary" style="margin-bottom: 0px;"><code>Example</code>：比如我们在使用JDBC操作数据库时，在提交事务方法后，提示用户事务操作完成，当我们程序执行完成直到看到提示后，就可以认定事务以及正确提交，即使这时候数据库出现了问题，也必须要将我们的事务完全执行完成，否则就会造成我们看到提示事务处理完毕，但是数据库因为故障而没有执行事务的重大错误。</div></li></ol><h3 id="🎃-并发事务导致的问题">🎃 并发事务导致的问题</h3><p>在许多事务处理同一个数据时，如果没有采取有效的隔离机制，那么并发处理数据时，会带来一些严重的问题。</p><ol><li><code>第一类丢失更新</code>：撤销一个事务时，把其他事务已提交的更新数据覆盖。<div class="note primary" style="margin-bottom: 0px;"><code>Example</code>：小明到银行存钱，他的账户里原来的余额为100元，现在打算存入100元。在他存钱的过程中，银行年费扣了5元，余额只剩95元。突然他又想着这100元要用来请女朋友看电影吃饭，不打算存了。在他撤回存钱操作后，余额依然为他存钱之前的100元。所以那5块钱到底扣了谁的？</div></li><li><code>脏读（针对未提交数据）</code>：脏读是指在一个事务处理过程中读取了另一个未提交事务中的数据。<div class="note primary" style="margin-bottom: 0px;"><code>Example</code>：小明的银行卡余额中有100元，现在他准备点一份外卖，需要付款15元，但是这个时候，他的女朋友逛街看中了一件衣服95元，她也正在使用小明的银行卡进行付款。于是小明在付款的时候，程序后台只读取到他的余额只有5块钱了，不够付款去点外卖了，所以系统拒绝了他的交易，并告知余额不足。但是小明的女朋友最后因为密码不记得，无法进行交易。小明非常郁闷，明明银行卡中还有100元，怎么会余额不足呢？</div></li><li><code>幻读也叫虚读（针对增删操作）</code>：一个事务执行两次查询，第二次结果集包含了第一次中没有或者已经被删除的数据，造成了两次的结果不一致，只因另一个事务在这两次查询中进行插入或删除数据造成的。幻读是事务非独立执行的时候产生的一种现象。<div class="note primary" style="margin-bottom: 0px;"><code>Example</code>：事务T1对一个表中所有行的某个数据项做了从“1”改为“2”的操作，这时事务T2又对这个表中插入了一行该数据项为“1”的数据，并且提交给数据库。而操作事务T1的用户再次查看刚刚修改的数据时，发现还有一行没有被修改，其实是因为这个数据是从事务T2添加的，这就好像产生了幻觉一样，所以称之为幻读。</div></li><li><code>不可重复读（针对修改操作）</code>：一个事务两次读取同一行数据，结果得到不同状态的结果。是因为正好另一个事务更新了该数据，造成结果不同。<div class="note primary" style="margin-bottom: 0px;"><code>Example</code>：例如小明到银行进行查询自己的银行卡余额为100万，但是就在这个时候他女朋友从该银行卡取走50万，此时余额变为50万，小明再一次查询余额变成了50万，小明心态炸了（哈哈哈），这对于小明而言两次结果不一致就是不可重复读。</div></li><li><code>第二类丢失更新</code>：是不可重复读的情况，如果两个事务都读取同一行，然后两个都进行写操作，并提交，第一个事务所做的改变就会丢失。<div class="note primary" style="margin-bottom: 0px;"><code>Example</code>：小明和女朋友一起去逛街。女朋友看中了一支口红，小明大方的掏出了自己的银行卡，告诉女朋友：亲爱的，随便刷，随便买，我坐着等你。然后小明就坐在商城座椅上玩手机，等着女朋友。这个时候，程序员的聊天群里有人推荐了一本书，小明一看，哎呀，真是本好书，还是限量发行呢，我一定更要买到。于是小明赶紧找到购买渠道，进行付款操作。而同时，小明的女朋友也在不亦乐乎的买买买，他们同时进行了一笔交易操作，但是这个时候银行系统出了问题，当他们都付款成功后，却发现，银行只扣了小明的买书钱，却没有扣去女朋友此时交易的钱。哈哈哈，小明真是太开心了！</div></li></ol><h3 id="🎧-数据库事务的隔离级别">🎧 数据库事务的隔离级别</h3><p>为了应对上面并发情况下出现的问题，事务的隔离级别就产生了。当事务的隔离级别越高的时候，上面的问题就会越少，但是性能消耗也会越大。所以在实际生产过程中，要根据需求去确定隔离级别。事务隔离级别由低到高分别为 Read uncommitted 、Read committed 、Repeatable read 、Serializable 。</p><ol><li><code>Read uncommitted（读未提交）</code>：读未提交，即能够读取到没有被提交的数据，所以很明显这个级别的隔离机制无法解决脏读、不可重复读、幻读中的任何一种。</li><li><code>Read committed（读已提交）</code>：已提交，即能够读到那些已经提交的数据，能够防止脏读，但是无法解决不可重复读和幻读的问题。</li><li><code>Repeatable read（可重复读）</code>：重复读取，即在数据读出来之后加锁，类似“select * from xxx for update”，明确数据读取出来就是为了更新用的，所以要加一把锁，防止别人修改它。Repeatable read 的意思也类似，读取了一条数据，这个事务不结束，别的事务就不可以改这条记录，这样就解决了脏读、不可重复读的问题，但是幻读的问题还是无法解决。</li><li><code>Serializable（序列化）</code>：串行化，最高的事务隔离级别，不管多少事务，挨个运行完一个事务的所有子事务之后才可以执行另外一个事务里面的所有子事务，这样就解决了脏读、不可重复读和幻读的问题了。但是这种事务隔离级别效率低下，比较耗数据库性能，一般不使用。</li></ol><h3 id="🔔-提示">🔔 提示</h3><ol><li>大多数数据库默认的事务隔离级别是 Read committed（读提交），比如 Sql Server、Oracle。Mysql 的默认隔离级别是 Repeatable read（重复读）。</li><li><code>隔离级别的设置只对当前链接有效</code>。对于使用 MySQL 命令窗口而言，一个窗口就相当于一个链接，当前窗口设置的隔离级别只对当前窗口中的事务有效；对于 JDBC 操作数据库来说，一个 Connection 对象相当于一个链接，而对于 Connection 对象设置的隔离级别只对该 Connection 对象有效，与其他链接 Connection 对象无关。</li><li>设置数据库的隔离级别一定要是在开启事务之前。</li></ol>]]></content>
      
      
      <categories>
          
          <category> MySql </category>
          
          <category> 事务 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 事务 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Vue 获取 url 上的参数</title>
      <link href="posts/41567ba6.html"/>
      <url>posts/41567ba6.html</url>
      
        <content type="html"><![CDATA[<p>经常我们在项目中需要获取 url 上参数进行使用，所以今天为大家奉上工具类 💜</p><p>代码：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * 获取url上的参数</span><br><span class="line"> * @param &#123;string&#125; url</span><br><span class="line"> * @returns &#123;Object&#125;</span><br><span class="line"> */</span><br><span class="line"><span class="built_in">export</span> <span class="keyword">function</span> getQueryObject(url) &#123;</span><br><span class="line">  url = url == null ? window.location.href : url</span><br><span class="line">  const search = url.substring(url.lastIndexOf(<span class="string">&#x27;?&#x27;</span>) + 1)</span><br><span class="line">  const obj = &#123;&#125;</span><br><span class="line">  const reg = /([^?&amp;=]+)=([^?&amp;=]*)/g</span><br><span class="line">  search.replace(reg, (rs, <span class="variable">$1</span>, <span class="variable">$2</span>) =&gt; &#123;</span><br><span class="line">    const name = decodeURIComponent(<span class="variable">$1</span>)</span><br><span class="line">    <span class="built_in">let</span> val = decodeURIComponent(<span class="variable">$2</span>)</span><br><span class="line">    val = String(val)</span><br><span class="line">    obj[name] = val</span><br><span class="line">    <span class="built_in">return</span> rs</span><br><span class="line">  &#125;)</span><br><span class="line">  <span class="built_in">return</span> obj</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>需要的小伙伴自取吧 ✌️</p>]]></content>
      
      
      <categories>
          
          <category> Vue </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 工具类 </tag>
            
            <tag> Vue </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SpringBoot 使用 Allatori 进行代码混淆</title>
      <link href="posts/7fabafee.html"/>
      <url>posts/7fabafee.html</url>
      
        <content type="html"><![CDATA[<h2 id="🌞-Allatori介绍">🌞 Allatori介绍</h2><p>Allatori是一个 Java 混淆器，它属于第二代混淆器，因此它能够全方位地保护你的知识产权。 Allatori具有以下几种保护方式：命名混淆，流混淆，调试信息混淆，字符串混淆，以及水印技术。对于教育和非商业项目来说这个混淆器是免费的。支持war和jar文件格式，并且允许对需要混淆代码的应用程序添加有效日期。 有项目需要对代码进行保护，比较初级的方案就是对代码进行混淆，打包之后的文件进行反编译后，就可以看到效果。此外，使用Allatori打的包体积也会小一点。</p><a href=https://github.com/Lovnx/confusion target='_blank' class='LinkCard'><style type=text/css>.LinkCard,.LinkCard:hover{text-decoration:none;border:none!important;color:inherit!important}.LinkCard{position:relative;display:block;margin:5px auto;width:330px;box-sizing:border-box;border-radius:12px;max-width:100%;overflow:hidden;color:inherit;text-decoration:none}.ztext{word-break:break-word;line-height:1.6}.LinkCard-backdrop{position:absolute;top:0;left:0;right:0;bottom:0;background-repeat:no-repeat;-webkit-filter:blur(20px);filter:blur(20px);background-size:cover;background-position:center}.LinkCard,.LinkCard:hover{text-decoration:none;border:none!important;color:inherit!important}.LinkCard-content{position:relative;display:flex;align-items:center;justify-content:space-between;padding:12px;border-radius:inherit;background-color:rgba(246,246,246,0.88)}.LinkCard-text{overflow:hidden;width:260px;}.LinkCard-title{white-space: nowrap;display:-webkit-box;-webkit-line-clamp:2;overflow:hidden;text-overflow:ellipsis;max-height:calc(16px * 1.25 * 2);font-size:16px;font-weight:500;line-height:1.25;color:#1a1a1a}@media(max-width: 767px){.LinkCard-title{font-size:13px;}}.LinkCard-meta{display:flex;margin-top:4px;font-size:14px;line-height:20px;color:#999;white-space:nowrap}.LinkCard-imageCell{margin-left:28px;border-radius:30px;width:70px;}.LinkCard-image{background-image:url('https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/linkcard/spider-man.png');background-size: 100% 100%;display:block;width:65px;height:65px;border-radius:inherit;margin-bottom: 0 !important;}</style><span class=LinkCard-backdrop style=background-image:url(https://zhstatic.zhihu.com/assets/zhihu/editor/zhihu-card-default.svg)></span><span class=LinkCard-content><span class=LinkCard-text><span class=LinkCard-title>GitHub地址</span><span class=LinkCard-meta><span style=display:inline-flex;align-items:center><svg class='Zi Zi--InsertLink' fill=currentColor viewBox='0 0 24 24' width=17 height=17><path d='M6.77 17.23c-.905-.904-.94-2.333-.08-3.193l3.059-3.06-1.192-1.19-3.059 3.058c-1.489 1.489-1.427 3.954.138 5.519s4.03 1.627 5.519.138l3.059-3.059-1.192-1.192-3.059 3.06c-.86.86-2.289.824-3.193-.08zm3.016-8.673l1.192 1.192 3.059-3.06c.86-.86 2.289-.824 3.193.08.905.905.94 2.334.08 3.194l-3.059 3.06 1.192 1.19 3.059-3.058c1.489-1.489 1.427-3.954-.138-5.519s-4.03-1.627-5.519-.138L9.786 8.557zm-1.023 6.68c.33.33.863.343 1.177.029l5.34-5.34c.314-.314.3-.846-.03-1.176-.33-.33-.862-.344-1.176-.03l-5.34 5.34c-.314.314-.3.846.03 1.177z' fill-rule=evenodd></path></svg></span><span style='margin-top: -0.1rem;'>https://github.com/Lovnx/confusion</span></span></span><span class='LinkCard-imageCell'><div class='LinkCard-image'></div></span></span></a><h2 id="🌞-使用原因">🌞 使用原因</h2><p>在很多企业中，代码管理是非常重要的，每个企业都有自己的私有机制，生产出一好的产品，又不想让别人知道自己的技术是如何实现的，就会让搞编程的人，或者是安全师对代码进行保护，这里就是运用Allatori技术对class文件中的代码进行混淆，继而使得其他人即便获取到程序，反编译程序也是徒劳无功、无功而返，这就保证了自己代码的专利性。</p><h2 id="🌞-配置步骤">🌞 配置步骤</h2><h3 id="🎉-项目目录结构">🎉 项目目录结构</h3><p><img src="https://s1.ax1x.com/2020/04/29/JTuUWn.png" class="lazyload placeholder" data-srcset="https://s1.ax1x.com/2020/04/29/JTuUWn.png" srcset="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/site-img/img-loading.gif" alt="项目目录结构"></p><h3 id="🎉-准备资源">🎉 准备资源</h3><p>下载 <code>allatori.jar</code> 和 <code>allatori-annotations.jar</code> ，下载地址：<a href="http://www.allatori.com/">http://www.allatori.com/</a>，将下载好的文件放到上面项目目录的 <code>lib</code> 下。</p><h3 id="🎉-创建allatori-xml文件">🎉 创建allatori.xml文件</h3><p>在创建的文件中放入一下内容：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">&lt;config&gt;</span><br><span class="line">    &lt;input&gt;</span><br><span class="line">        &lt;!-- <span class="keyword">in</span>中是待混淆的war包，out是混淆后的war包 --&gt;</span><br><span class="line">        &lt;jar <span class="keyword">in</span>=<span class="string">&quot;AIReminder-0.0.1-SNAPSHOT.war&quot;</span> out=<span class="string">&quot;AIReminder-0.0.1-SNAPSHOT-obfuscated.war&quot;</span>/&gt;</span><br><span class="line">    &lt;/input&gt;</span><br><span class="line">    &lt;ignore-classes&gt;</span><br><span class="line">        &lt;!-- 配置了启动相关类不被混淆，保证springboot可以正常启动 --&gt;</span><br><span class="line">        &lt;!-- 以下请根据自己项目的实际需求进行配置 --&gt;</span><br><span class="line">        &lt;class template=<span class="string">&quot;class com.scaffolding.demo.sys.controller.UploadFileController&quot;</span> /&gt;</span><br><span class="line">        &lt;class template=<span class="string">&quot;class *model*&quot;</span> /&gt;</span><br><span class="line">        &lt;class template=<span class="string">&quot;class *service*&quot;</span> /&gt;</span><br><span class="line">        &lt;class template=<span class="string">&quot;class *utils*&quot;</span> /&gt;</span><br><span class="line">        &lt;class template=<span class="string">&quot;class *config*&quot;</span> /&gt;</span><br><span class="line">    &lt;/ignore-classes&gt;</span><br><span class="line">    &lt;keep-names&gt;</span><br><span class="line">        &lt;class access=<span class="string">&quot;protected+&quot;</span>&gt;</span><br><span class="line">            &lt;field access=<span class="string">&quot;protected+&quot;</span>/&gt;</span><br><span class="line">            &lt;method access=<span class="string">&quot;protected+&quot;</span>/&gt;</span><br><span class="line">        &lt;/class&gt;</span><br><span class="line">    &lt;/keep-names&gt;</span><br><span class="line">    &lt;property name=<span class="string">&quot;log-file&quot;</span> value=<span class="string">&quot;log.xml&quot;</span>/&gt;</span><br><span class="line">&lt;/config&gt;</span><br></pre></td></tr></table></figure><p>还有很多配置可以参考官方文档：<a href="http://www.allatori.com/doc.html">官网文档</a></p><h3 id="🎉-修改pom-xml文件">🎉 修改pom.xml文件</h3><details green><summary> 查看pom.xml代码 </summary>              <div class='content'>              <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line">&lt;build&gt;</span><br><span class="line">    &lt;plugins&gt;</span><br><span class="line">        &lt;plugin&gt;</span><br><span class="line">            &lt;!-- springboot打包插件 --&gt;</span><br><span class="line">            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br><span class="line">            &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;</span><br><span class="line">        &lt;/plugin&gt;</span><br><span class="line">        &lt;plugin&gt;</span><br><span class="line">            &lt;!-- resouces拷贝文件插件 --&gt;</span><br><span class="line">            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;</span><br><span class="line">            &lt;artifactId&gt;maven-resources-plugin&lt;/artifactId&gt;</span><br><span class="line">            &lt;version&gt;2.6&lt;/version&gt;</span><br><span class="line">            &lt;executions&gt;</span><br><span class="line">                &lt;!-- 执行这个插件的时候执行申明的所有phase --&gt;</span><br><span class="line">                &lt;execution&gt;</span><br><span class="line">                    &lt;id&gt;copy-and-filter-allatori-config&lt;/id&gt;</span><br><span class="line">                    &lt;phase&gt;package&lt;/phase&gt;</span><br><span class="line">                    &lt;goals&gt;</span><br><span class="line">                        &lt;goal&gt;copy-resources&lt;/goal&gt;</span><br><span class="line">                    &lt;/goals&gt;</span><br><span class="line">                    &lt;configuration&gt;</span><br><span class="line">                        &lt;!-- 这个地方需要注意拷贝的文件位置需要是target目录，target目录是最终打jar包存放的位置 --&gt;</span><br><span class="line">                        &lt;outputDirectory&gt;<span class="variable">$&#123;basedir&#125;</span>/target&lt;/outputDirectory&gt;</span><br><span class="line">                        &lt;resources&gt;</span><br><span class="line">                            &lt;resource&gt;</span><br><span class="line">                                &lt;!-- 这个地方的文件目录需要注意，网上很多目录都是<span class="variable">$&#123;basedir&#125;</span>/allatori这个，所以才会需要手动拷贝allatori.xml文件到target目录下，有了这个mvn会自动帮我们拷贝了 --&gt;</span><br><span class="line">                                &lt;directory&gt;src/main/resources&lt;/directory&gt;</span><br><span class="line">                                &lt;includes&gt;</span><br><span class="line">                                    &lt;!-- 配置文件文件名 --&gt;</span><br><span class="line">                                    &lt;include&gt;allatori.xml&lt;/include&gt;</span><br><span class="line">                                &lt;/includes&gt;</span><br><span class="line">                                &lt;filtering&gt;<span class="literal">true</span>&lt;/filtering&gt;</span><br><span class="line">                            &lt;/resource&gt;</span><br><span class="line">                        &lt;/resources&gt;</span><br><span class="line">                    &lt;/configuration&gt;</span><br><span class="line">                &lt;/execution&gt;</span><br><span class="line">            &lt;/executions&gt;</span><br><span class="line">        &lt;/plugin&gt;</span><br><span class="line">        &lt;plugin&gt;</span><br><span class="line">            &lt;!-- 代码混淆打包插件 --&gt;</span><br><span class="line">            &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;</span><br><span class="line">            &lt;artifactId&gt;exec-maven-plugin&lt;/artifactId&gt;</span><br><span class="line">            &lt;version&gt;1.2.1&lt;/version&gt;</span><br><span class="line">            &lt;executions&gt;</span><br><span class="line">                &lt;execution&gt;</span><br><span class="line">                    &lt;id&gt;run-allatori&lt;/id&gt;</span><br><span class="line">                    &lt;phase&gt;package&lt;/phase&gt;</span><br><span class="line">                    &lt;goals&gt;</span><br><span class="line">                        &lt;goal&gt;<span class="built_in">exec</span>&lt;/goal&gt;</span><br><span class="line">                    &lt;/goals&gt;</span><br><span class="line">                &lt;/execution&gt;</span><br><span class="line">            &lt;/executions&gt;</span><br><span class="line">            &lt;configuration&gt;</span><br><span class="line">                &lt;executable&gt;java&lt;/executable&gt;</span><br><span class="line">                &lt;arguments&gt;</span><br><span class="line">                    &lt;argument&gt;-Xms128m&lt;/argument&gt;</span><br><span class="line">                    &lt;argument&gt;-Xmx512m&lt;/argument&gt;</span><br><span class="line">                    &lt;argument&gt;-jar&lt;/argument&gt;</span><br><span class="line">                    &lt;!-- 指定引用的allatori的jar包位置，这里把jar包放在了根目录下的lib目录里 --&gt;</span><br><span class="line">                    &lt;argument&gt;<span class="variable">$&#123;basedir&#125;</span>/lib/allatori.jar&lt;/argument&gt;</span><br><span class="line">                    &lt;!-- 指定代码混淆时的配置文件，因为是混淆指定的是jar包，jar包位置在target下,所以我们的allatori.xml也需要拷贝到该目录下 --&gt;</span><br><span class="line">                    &lt;argument&gt;<span class="variable">$&#123;basedir&#125;</span>/target/allatori.xml&lt;/argument&gt;</span><br><span class="line">                &lt;/arguments&gt;</span><br><span class="line">            &lt;/configuration&gt;</span><br><span class="line">        &lt;/plugin&gt;</span><br><span class="line">    &lt;/plugins&gt;</span><br><span class="line">&lt;/build&gt;</span><br></pre></td></tr></table></figure>              </div>            </details><h3 id="🎉-打包">🎉 打包</h3><ol><li>在控制台中执行 <code>mvn clean</code></li><li>再执行 <code>mvn package -DskipTests</code></li><li>执行成功以后，在项目的target目录下会生成你想要的war包</li></ol><p><img src="https://s1.ax1x.com/2020/04/29/JTGMbq.png" class="lazyload placeholder" data-srcset="https://s1.ax1x.com/2020/04/29/JTGMbq.png" srcset="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/site-img/img-loading.gif" alt=""></p><p>打包好的war包放到 tomcat 下就可以直接部署啦！</p><p>如果在部署过程中报错，看一下错误信息，可能是某个类或者方法不能做混淆，就需要在 <code>allatori.xml</code> 中配置相关类不被混淆。</p>]]></content>
      
      
      <categories>
          
          <category> SpringBoot </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SpringBoot </tag>
            
            <tag> Allatori </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hexo+Next7.8.0 引入 Folding 容器</title>
      <link href="posts/d0bc4f5d.html"/>
      <url>posts/d0bc4f5d.html</url>
      
        <content type="html"><![CDATA[<p>偶然间看到了html5的  <code>&lt;summary&gt;</code> 标签，可以将内容展开折叠，感觉很棒，就将其封装到 Next 主题中使用。</p><p>本文介绍的文件路径及方法都是基于 <code>Next7.8.0</code> 版本实现的，小伙伴采用且考虑兼容性。</p><h2 id="🌞-使用方法">🌞 使用方法</h2><div class="tabs" id="folding介绍"><ul class="nav-tabs"><li class="tab active"><a class="#folding介绍-1">语法格式</a></li><li class="tab"><a class="#folding介绍-2">参数列表</a></li><li class="tab"><a class="#folding介绍-3">示例写法</a></li><li class="tab"><a class="#folding介绍-4">示例效果</a></li></ul><div class="tab-content"><div class="tab-pane active" id="folding介绍-1"><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;% folding 参数（可选）, 标题 %&#125;</span><br><span class="line"></span><br><span class="line">![](https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/resume/resumeBg.jpg)</span><br><span class="line"></span><br><span class="line">&#123;% endfolding %&#125;</span><br></pre></td></tr></table></figure></div><div class="tab-pane" id="folding介绍-2"><p>参数位置可以填写颜色和状态，多个参数用空格隔开。</p><p><span style="font-weight: bold;color: #2196f3;">颜色</span></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">blue, cyan, green, yellow, red</span><br></pre></td></tr></table></figure><p><span style="font-weight: bold;color: #2196f3;">状态</span></p><p>状态填写 open 代表默认打开。</p></div><div class="tab-pane" id="folding介绍-3"><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">&#123;% folding 查看图片测试 %&#125;</span><br><span class="line"></span><br><span class="line">![](https:&#x2F;&#x2F;cdn.jsdelivr.net&#x2F;gh&#x2F;XuxuGood&#x2F;cdn@master&#x2F;blogImages&#x2F;resume&#x2F;resumeBg.jpg)</span><br><span class="line"></span><br><span class="line">&#123;% endfolding %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% folding cyan open, 查看默认打开的折叠框 %&#125;</span><br><span class="line"></span><br><span class="line">这是一个默认打开的折叠框。</span><br><span class="line"></span><br><span class="line">&#123;% endfolding %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% folding green, 查看代码测试 %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% endfolding %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% folding yellow, 查看列表测试 %&#125;</span><br><span class="line"></span><br><span class="line">- haha</span><br><span class="line">- hehe</span><br><span class="line"></span><br><span class="line">&#123;% endfolding %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% folding red, 查看嵌套测试 %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% folding blue, 查看嵌套测试2 %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% folding 查看嵌套测试3 %&#125;</span><br><span class="line"></span><br><span class="line">hahaha</span><br><span class="line"></span><br><span class="line">&#123;% endfolding %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% endfolding %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% endfolding %&#125;</span><br></pre></td></tr></table></figure></div><div class="tab-pane" id="folding介绍-4"><details ><summary> 查看图片测试 </summary>              <div class='content'>              <p><img src="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/resume/resumeBg.jpg" class="lazyload placeholder" data-srcset="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/resume/resumeBg.jpg" srcset="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/site-img/img-loading.gif" alt=""></p>              </div>            </details><details cyan open><summary> 查看默认打开的折叠框 </summary>              <div class='content'>              <p>这是一个默认打开的折叠框。</p>              </div>            </details><details green><summary> 查看代码测试 </summary>              <div class='content'>              <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">查看代码测试</span><br></pre></td></tr></table></figure>              </div>            </details><details yellow><summary> 查看列表测试 </summary>              <div class='content'>              <ul><li>haha</li><li>hehe</li></ul>              </div>            </details><details red><summary> 查看嵌套测试 </summary>              <div class='content'>              <details blue><summary> 查看嵌套测试2 </summary>              <div class='content'>              <details ><summary> 查看嵌套测试3 </summary>              <div class='content'>              <p>吼吼 ✌️</p>              </div>            </details>              </div>            </details>              </div>            </details></div></div></div><h2 id="🌞-配置">🌞 配置</h2><h3 id="🎉-引入js">🎉 引入js</h3><p>在  <code>\next\scripts\tags</code> 目录下新建文件 <code>folding.js</code>，并添加以下内容：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&#x27;use strict&#x27;</span>;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * Usage:</span><br><span class="line"> * &#123;% folding [args], title %&#125;</span><br><span class="line"> * content</span><br><span class="line"> * &#123;% endfolding %&#125;</span><br><span class="line"> *</span><br><span class="line"> * args:</span><br><span class="line"> *   - color: blue, cyan, green, yellow, red</span><br><span class="line"> *   - status: open <span class="comment"># means open by default</span></span><br><span class="line"> *</span><br><span class="line"> * example:</span><br><span class="line"> * &#123;% folding cyan open, view the default folding box %&#125;</span><br><span class="line"> * This is a folding box that opens by default</span><br><span class="line"> * &#123;% endfolding %&#125;</span><br><span class="line"> */</span><br><span class="line"><span class="keyword">function</span> postFolding(args, content) &#123;</span><br><span class="line">  args = args.join(<span class="string">&#x27; &#x27;</span>).split(<span class="string">&#x27;,&#x27;</span>);</span><br><span class="line">  <span class="built_in">let</span> style = <span class="string">&#x27;&#x27;</span></span><br><span class="line">  <span class="built_in">let</span> title = <span class="string">&#x27;&#x27;</span></span><br><span class="line">  <span class="keyword">if</span> (args.length &gt; 1) &#123;</span><br><span class="line">    style = args[0].trim()</span><br><span class="line">    title = args[1].trim()</span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (args.length &gt; 0) &#123;</span><br><span class="line">    title = args[0].trim()</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">if</span> (style != undefined) &#123;</span><br><span class="line">    <span class="built_in">return</span> `&lt;details <span class="variable">$&#123;style&#125;</span>&gt;&lt;summary&gt; <span class="variable">$&#123;hexo.render.renderSync(&#123;text: title, engine: &#x27;markdown&#x27;&#125;</span>).split(<span class="string">&#x27;\n&#x27;</span>).join(<span class="string">&#x27;&#x27;</span>)&#125; &lt;/summary&gt;</span><br><span class="line">              &lt;div class=<span class="string">&#x27;content&#x27;</span>&gt;</span><br><span class="line">              <span class="variable">$&#123;hexo.render.renderSync(&#123;text: content, engine: &#x27;markdown&#x27;&#125;</span>).split(<span class="string">&#x27;\n&#x27;</span>).join(<span class="string">&#x27;&#x27;</span>)&#125;</span><br><span class="line">              &lt;/div&gt;</span><br><span class="line">            &lt;/details&gt;`;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="built_in">return</span> `&lt;details&gt;&lt;summary&gt; <span class="variable">$&#123;hexo.render.renderSync(&#123;text: title, engine: &#x27;markdown&#x27;&#125;</span>).split(<span class="string">&#x27;\n&#x27;</span>).join(<span class="string">&#x27;&#x27;</span>)&#125; &lt;/summary&gt;</span><br><span class="line">              &lt;div class=<span class="string">&#x27;content&#x27;</span>&gt;</span><br><span class="line">              <span class="variable">$&#123;hexo.render.renderSync(&#123;text: content, engine: &#x27;markdown&#x27;&#125;</span>).split(<span class="string">&#x27;\n&#x27;</span>).join(<span class="string">&#x27;&#x27;</span>)&#125;</span><br><span class="line">              &lt;/div&gt;</span><br><span class="line">            &lt;/details&gt;`;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">hexo.extend.tag.register(<span class="string">&#x27;folding&#x27;</span>, postFolding, &#123;ends: <span class="literal">true</span>&#125;);</span><br></pre></td></tr></table></figure><h3 id="🎉-引入css">🎉 引入css</h3><p>在 <code>\next\source\css\_common\scaffolding\tags</code> 目录下新建文件 <code>folding.styl</code>,并添加以下内容：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br></pre></td><td class="code"><pre><span class="line">// gap</span><br><span class="line"><span class="variable">$fd</span>-gap = 16px // base gap</span><br><span class="line"><span class="variable">$fd</span>-gap-paragraph = 1rem // block spacing</span><br><span class="line"><span class="variable">$fd</span>-gap-row = .5rem // line spacing</span><br><span class="line"><span class="variable">$fd</span>-gap-card = <span class="variable">$fd</span>-gap</span><br><span class="line">// border radius</span><br><span class="line"><span class="variable">$fd</span>-border-codeblock = 4px</span><br><span class="line">// common</span><br><span class="line"><span class="variable">$fd</span>-color-card = white</span><br><span class="line"><span class="variable">$fd</span>-color-block =  <span class="comment">#f6f6f6</span></span><br><span class="line">// font size</span><br><span class="line"><span class="variable">$fd</span>-fontsize-meta = .875rem   // 14px</span><br><span class="line"><span class="variable">$fd</span>-fontsize-list = .9375rem // 15px</span><br><span class="line">//color</span><br><span class="line"><span class="variable">$fd</span>-color-p = <span class="comment">#555</span></span><br><span class="line"><span class="variable">$fd</span>-color-md-blue = <span class="comment">#e8f4fd</span></span><br><span class="line"><span class="variable">$fd</span>-color-md-blue1 = rgba(33,150,243,0.3)</span><br><span class="line"></span><br><span class="line"><span class="variable">$fd</span>-color-mac-cyan = <span class="comment">#e8fafe</span></span><br><span class="line"><span class="variable">$fd</span>-color-mac-cyan1 = rgba(27,205,252,0.3)</span><br><span class="line"><span class="variable">$fd</span>-color-mac-green = <span class="comment">#ebf9ed</span></span><br><span class="line"><span class="variable">$fd</span>-color-mac-green1 =rgba(61,197,80,.3)</span><br><span class="line"><span class="variable">$fd</span>-color-mac-yellow = <span class="comment">#fff8e9</span></span><br><span class="line"><span class="variable">$fd</span>-color-mac-yellow1 = rgba(255,189,43,0.3)</span><br><span class="line"><span class="variable">$fd</span>-color-mac-red = <span class="comment">#feefee</span></span><br><span class="line"><span class="variable">$fd</span>-color-mac-red1 = rgba(254,95,88,0.3)</span><br><span class="line">// transition time</span><br><span class="line"><span class="variable">$fd</span>-time = 0.28s</span><br><span class="line"></span><br><span class="line">details</span><br><span class="line">  display: block</span><br><span class="line">  padding: <span class="variable">$fd</span>-gap</span><br><span class="line">  margin: <span class="variable">$fd</span>-gap-row 0</span><br><span class="line">  border-radius: <span class="variable">$fd</span>-border-codeblock</span><br><span class="line">  background: <span class="variable">$fd</span>-color-card</span><br><span class="line">  font-size: <span class="variable">$fd</span>-fontsize-list</span><br><span class="line">  transition: all <span class="variable">$fd</span>-time ease</span><br><span class="line">  -moz-transition: all <span class="variable">$fd</span>-time ease</span><br><span class="line">  -webkit-transition: all <span class="variable">$fd</span>-time ease</span><br><span class="line">  -o-transition: all <span class="variable">$fd</span>-time ease</span><br><span class="line"></span><br><span class="line">  summary</span><br><span class="line">    cursor: pointer;</span><br><span class="line">    padding: <span class="variable">$fd</span>-gap</span><br><span class="line">    outline:none;</span><br><span class="line">    margin: 0 - <span class="variable">$fd</span>-gap</span><br><span class="line">    border-radius: <span class="variable">$fd</span>-border-codeblock</span><br><span class="line">    color: alpha(<span class="variable">$fd</span>-color-p, .7)</span><br><span class="line">    font-size: <span class="variable">$fd</span>-fontsize-meta</span><br><span class="line">    font-weight: bold</span><br><span class="line">    position: relative</span><br><span class="line">    line-height: normal</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &gt;p, h1, h2, h3, h4, h5, h6</span><br><span class="line">      display: inline !important</span><br><span class="line">      border-bottom: none !important</span><br><span class="line">      cursor: pointer;</span><br><span class="line"></span><br><span class="line">    &amp;:hover</span><br><span class="line">      color: <span class="variable">$fd</span>-color-p</span><br><span class="line"></span><br><span class="line">      &amp;:after</span><br><span class="line">        position: absolute</span><br><span class="line">        content: <span class="string">&#x27;+&#x27;</span></span><br><span class="line">        text-align: center</span><br><span class="line">        top: 50%</span><br><span class="line">        transform: translateY(-50%)</span><br><span class="line">        right: <span class="variable">$fd</span>-gap</span><br><span class="line"></span><br><span class="line">  border: 1px solid <span class="variable">$fd</span>-color-block</span><br><span class="line"></span><br><span class="line">  &gt; summary</span><br><span class="line">    background: <span class="variable">$fd</span>-color-block</span><br><span class="line"></span><br><span class="line">  &amp;[blue]</span><br><span class="line">    border-color: <span class="variable">$fd</span>-color-md-blue</span><br><span class="line"></span><br><span class="line">    &gt; summary</span><br><span class="line">      background:<span class="variable">$fd</span>-color-md-blue</span><br><span class="line"></span><br><span class="line">  &amp;[cyan]</span><br><span class="line">    border-color:<span class="variable">$fd</span>-color-mac-cyan</span><br><span class="line"></span><br><span class="line">    &gt; summary</span><br><span class="line">      background:<span class="variable">$fd</span>-color-mac-cyan</span><br><span class="line"></span><br><span class="line">  &amp;[green]</span><br><span class="line">    border-color:<span class="variable">$fd</span>-color-mac-green</span><br><span class="line"></span><br><span class="line">    &gt; summary</span><br><span class="line">      background:<span class="variable">$fd</span>-color-mac-green</span><br><span class="line"></span><br><span class="line">  &amp;[yellow]</span><br><span class="line">    border-color:<span class="variable">$fd</span>-color-mac-yellow</span><br><span class="line"></span><br><span class="line">    &gt; summary</span><br><span class="line">      background:<span class="variable">$fd</span>-color-mac-yellow</span><br><span class="line"></span><br><span class="line">  &amp;[red]</span><br><span class="line">    border-color:<span class="variable">$fd</span>-color-mac-red</span><br><span class="line"></span><br><span class="line">    &gt; summary</span><br><span class="line">      background:<span class="variable">$fd</span>-color-mac-red</span><br><span class="line"></span><br><span class="line">details[open]</span><br><span class="line">  border-color: alpha(<span class="variable">$fd</span>-color-p, .2)</span><br><span class="line"></span><br><span class="line">  &gt; summary</span><br><span class="line">    border-bottom: 1px solid alpha(<span class="variable">$fd</span>-color-p, .2)</span><br><span class="line">    border-bottom-left-radius: 0</span><br><span class="line">    border-bottom-right-radius: 0</span><br><span class="line"></span><br><span class="line">  &amp;[blue]</span><br><span class="line">    border-color: alpha(<span class="variable">$fd</span>-color-md-blue1, .3)</span><br><span class="line"></span><br><span class="line">    &gt; summary</span><br><span class="line">      border-bottom-color: alpha(<span class="variable">$fd</span>-color-md-blue1, .3)</span><br><span class="line"></span><br><span class="line">  &amp;[cyan]</span><br><span class="line">    border-color: alpha(<span class="variable">$fd</span>-color-mac-cyan1, .3)</span><br><span class="line"></span><br><span class="line">    &gt; summary</span><br><span class="line">      border-bottom-color: alpha(<span class="variable">$fd</span>-color-mac-cyan1, .3)</span><br><span class="line"></span><br><span class="line">  &amp;[green]</span><br><span class="line">    border-color: alpha(<span class="variable">$fd</span>-color-mac-green1, .3)</span><br><span class="line"></span><br><span class="line">    &gt; summary</span><br><span class="line">      border-bottom-color: alpha(<span class="variable">$fd</span>-color-mac-green1, .3)</span><br><span class="line"></span><br><span class="line">  &amp;[yellow]</span><br><span class="line">    border-color: alpha(<span class="variable">$fd</span>-color-mac-yellow1, .3)</span><br><span class="line"></span><br><span class="line">    &gt; summary</span><br><span class="line">      border-bottom-color: alpha(<span class="variable">$fd</span>-color-mac-yellow1, .3)</span><br><span class="line"></span><br><span class="line">  &amp;[red]</span><br><span class="line">    border-color: alpha(<span class="variable">$fd</span>-color-mac-red1, .3)</span><br><span class="line"></span><br><span class="line">    &gt; summary</span><br><span class="line">      border-bottom-color: alpha(<span class="variable">$fd</span>-color-mac-red1, .3)</span><br><span class="line"></span><br><span class="line">  &gt; summary</span><br><span class="line">    color: <span class="variable">$fd</span>-color-p</span><br><span class="line">    margin-bottom: 0</span><br><span class="line"></span><br><span class="line">    &amp;:hover</span><br><span class="line">      &amp;:after</span><br><span class="line">        content: <span class="string">&#x27;-&#x27;</span></span><br><span class="line"></span><br><span class="line">  &gt; div.content</span><br><span class="line">    padding: <span class="variable">$fd</span>-gap</span><br><span class="line">    margin: 0 - <span class="variable">$fd</span>-gap</span><br><span class="line">    margin-top: 0</span><br><span class="line"></span><br><span class="line">    p &gt; a:hover</span><br><span class="line">      text-decoration: underline</span><br><span class="line"></span><br><span class="line">    &gt;</span><br><span class="line">    p, .tabs, ul, ol, .highlight, .note, .fancybox, details</span><br><span class="line">      &amp;:first-child</span><br><span class="line">        margin-top: 0</span><br><span class="line"></span><br><span class="line">      &amp;:last-child</span><br><span class="line">        margin-bottom: 0</span><br></pre></td></tr></table></figure><p>最后在目录 <code>\next\source\css\_common\scaffolding\tags</code> 下有一个文件 <code>tags.styl</code>，添加以下内容：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">@import &#39;folding&#39;;</span><br></pre></td></tr></table></figure><p>配上完以上内容，素质三连 <code>hexo clean &amp;&amp; hexo g &amp;&amp; hexo s</code> 就可以在 Markdown 中使用啦！</p>]]></content>
      
      
      <categories>
          
          <category> Hexo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Hexo </tag>
            
            <tag> Folding容器 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CentOS搭建Gitlab的详细教程</title>
      <link href="posts/a460b91e.html"/>
      <url>posts/a460b91e.html</url>
      
        <content type="html"><![CDATA[<p>记录一次CentOS搭建gitlab服务器的经历。</p><h2 id="🌞-前期准备">🌞 前期准备</h2><ol><li>服务器：CentOS7</li><li>安装文件：<a href="https://packages.gitlab.com/gitlab/gitlab-ce/packages/el/7/gitlab-ce-12.6.3-ce.0.el7.x86_64.rpm">gitlab-ce-12.6.3-ce.0.el7.x86_64.rpm</a></li></ol><h2 id="🌞-安装gitlab">🌞 安装gitlab</h2><p>介绍一下两种安装方式 yum安装、rmp安装（个人喜欢第二种方式，有时候yum下载的有点慢）。</p><h3 id="🎉-yum安装">🎉 yum安装</h3><p>这里直接参考<a href="https://about.gitlab.com/install/#centos-7">官网</a>安装教程</p><p><img src="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/article/abbrlink-a460b91e/gitlab%E5%AE%89%E8%A3%85%E6%95%99%E7%A8%8B.png" class="lazyload placeholder" data-srcset="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/article/abbrlink-a460b91e/gitlab%E5%AE%89%E8%A3%85%E6%95%99%E7%A8%8B.png" srcset="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/site-img/img-loading.gif" alt="gitlab安装教程"></p><p>打开linux系统终端，首先安装gitlab必须的ssh，以及在系统防火墙中打开HTTP、HTTPS和SSH访问。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">sudo yum install -y curl policycoreutils-python openssh-server</span><br><span class="line">sudo systemctl enable sshd</span><br><span class="line">sudo systemctl start sshd</span><br><span class="line">sudo firewall-cmd --permanent --add-service&#x3D;http</span><br><span class="line">sudo firewall-cmd --permanent --add-service&#x3D;https</span><br><span class="line">sudo systemctl reload firewalld</span><br></pre></td></tr></table></figure><p>然后是安装发送邮件功能的postfix</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo yum install postfix</span><br><span class="line">sudo systemctl enable postfix</span><br><span class="line">sudo systemctl start postfix</span><br></pre></td></tr></table></figure><p>添加gitlab的包仓库（ee改成ce）</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl https:&#x2F;&#x2F;packages.gitlab.com&#x2F;install&#x2F;repositories&#x2F;gitlab&#x2F;gitlab-ce&#x2F;script.rpm.sh | sudo bash</span><br></pre></td></tr></table></figure><p>安装gitlab（EXTERNAL_URL指的是你的gitlab访问地址，这里改为http://+你的linux系统ip）</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo EXTERNAL_URL&#x3D;&quot;https:&#x2F;&#x2F;gitlab.example.com&quot; yum install -y gitlab-ce</span><br></pre></td></tr></table></figure><h3 id="🎉-rpm安装">🎉 rpm安装</h3><p>使用官网的安装方式下载很慢（亲测网上的阿里站点，清华站点也不是很快），这里教大家直接下载rmp安装包手动安装。</p><p>首先去<a href="https://packages.gitlab.com/gitlab/gitlab-ce/">官网安装包仓库</a>下载我们所需的安装包版本</p><p><img src="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/article/abbrlink-a460b91e/%E5%AE%98%E7%BD%91%E5%AE%89%E8%A3%85%E5%8C%85%E4%BB%93%E5%BA%93.png" class="lazyload placeholder" data-srcset="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/article/abbrlink-a460b91e/%E5%AE%98%E7%BD%91%E5%AE%89%E8%A3%85%E5%8C%85%E4%BB%93%E5%BA%93.png" srcset="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/site-img/img-loading.gif" alt="官网安装包仓库"></p><p>下载完成之后将文件拷贝至你的linux服务器，同样需要配置ssh、防火墙、postfix，</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F;安装gitlab必须的ssh，以及在系统防火墙中打开HTTP、HTTPS和SSH访问。</span><br><span class="line">sudo yum install -y curl policycoreutils-python openssh-server</span><br><span class="line">sudo systemctl enable sshd</span><br><span class="line">sudo systemctl start sshd</span><br><span class="line">sudo firewall-cmd --permanent --add-service&#x3D;http</span><br><span class="line">sudo firewall-cmd --permanent --add-service&#x3D;https</span><br><span class="line">sudo systemctl reload firewalld</span><br><span class="line">&#x2F;&#x2F;安装发送邮件功能的postfix</span><br><span class="line">sudo yum install postfix</span><br><span class="line">sudo systemctl enable postfix</span><br><span class="line">sudo systemctl start postfix</span><br></pre></td></tr></table></figure><p>然后cd进入你的安装包路径进行安装</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F;安装 example.rpm 包并在安装过程中显示正在安装的文件信息及安装进度</span><br><span class="line">rpm -ivh example.rpm </span><br></pre></td></tr></table></figure><p>出现下图即为安装成功</p><p><img src="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/article/abbrlink-a460b91e/%E5%AE%89%E8%A3%85%E6%88%90%E5%8A%9F%E5%9B%BE.png" class="lazyload placeholder" data-srcset="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/article/abbrlink-a460b91e/%E5%AE%89%E8%A3%85%E6%88%90%E5%8A%9F%E5%9B%BE.png" srcset="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/site-img/img-loading.gif" alt="安装成功图"></p><p>这种方式需要我们手动进入配置文件中修改访问地址</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo vim &#x2F;etc&#x2F;gitlab&#x2F;gitlab.rb</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F;修改文件中external_url &#39;http:&#x2F;&#x2F;你linux的ip&#39;</span><br></pre></td></tr></table></figure><p>并且我们还需要修改默认的gitlab clone地址，要不每次都得自己修改</p><p><img src="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/article/abbrlink-a460b91e/gitlab%E4%BB%93%E5%BA%93.png" class="lazyload placeholder" data-srcset="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/article/abbrlink-a460b91e/gitlab%E4%BB%93%E5%BA%93.png" srcset="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/site-img/img-loading.gif" alt="gitlab仓库"></p><p>修改文件配置</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo vim &#x2F;opt&#x2F;gitlab&#x2F;embedded&#x2F;service&#x2F;gitlab-rails&#x2F;config&#x2F;gitlab.yml</span><br></pre></td></tr></table></figure><p>将图片上标红处的Host替换成你的域名或ip</p><p><img src="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/article/abbrlink-a460b91e/%E6%9B%BF%E6%8D%A2IP.png" class="lazyload placeholder" data-srcset="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/article/abbrlink-a460b91e/%E6%9B%BF%E6%8D%A2IP.png" srcset="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/site-img/img-loading.gif" alt="替换IP"></p><h2 id="🌞-访问">🌞 访问</h2><p>重置并启动GitLab，执行以下命令</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">gitlab-ctl reconfigure</span><br><span class="line"></span><br><span class="line">gitlab-ctl restart</span><br></pre></td></tr></table></figure><p>提示  &quot;ok: run:&quot;表示启动成功</p><p><img src="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/article/abbrlink-a460b91e/run.png" class="lazyload placeholder" data-srcset="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/article/abbrlink-a460b91e/run.png" srcset="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/site-img/img-loading.gif" alt="run"></p><p>然后浏览器上输入你的访问地址（第一次访问会让你输入新密码，用户名默认为root）</p><p><img src="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/article/abbrlink-a460b91e/gitlab%E7%99%BB%E5%BD%95%E9%A1%B5.png" class="lazyload placeholder" data-srcset="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/article/abbrlink-a460b91e/gitlab%E7%99%BB%E5%BD%95%E9%A1%B5.png" srcset="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/site-img/img-loading.gif" alt="gitlab登录页"></p><h2 id="🌞-安装过程中遇到的问题">🌞 安装过程中遇到的问题</h2><ol><li><p>在浏览器中访问GitLab出现502错误：<br>原因：内存不足。<br>解决办法：检查系统的虚拟内存是否随机启动了，如果系统无虚拟内存，则增加虚拟内存，再重新启动系统。</p></li><li><p>8080端口冲突：<br>原因：由于unicorn默认使用的是 <code>8080</code> 端口。<br>解决办法：打开 <code>/etc/gitlab/gitlab.rb</code> ，打开 <code># unicorn['port'] = 8080</code> 的注释，将 <code>8080</code> 修改为 <code>9999</code> ，保存后运行 <code>sudo gitlab-ctl reconfigure</code> 即可。</p></li></ol><p>以上为CentOS搭建Gitlab的全部教程，如有不对欢迎指出。</p>]]></content>
      
      
      <categories>
          
          <category> Gitlab </category>
          
      </categories>
      
      
        <tags>
            
            <tag> CentOS </tag>
            
            <tag> Gitlab </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Spring Boot 通用解决 LocalDateTime 转为字符串后中间含“T”</title>
      <link href="posts/45c03634.html"/>
      <url>posts/45c03634.html</url>
      
        <content type="html"><![CDATA[<p>通用解决LocalDateTime转为字符串后中间含“T”的问题 ✌️</p><p>本文参考自：<a href="https://juejin.im/post/5ceb4f156fb9a07f06554b63">https://juejin.im/post/5ceb4f156fb9a07f06554b63</a></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">package com.scaffolding.base.config;</span><br><span class="line"></span><br><span class="line">import com.fasterxml.jackson.datatype.jsr310.ser.LocalDateTimeSerializer;</span><br><span class="line">import org.springframework.boot.autoconfigure.jackson.Jackson2ObjectMapperBuilderCustomizer;</span><br><span class="line">import org.springframework.context.annotation.Bean;</span><br><span class="line">import org.springframework.context.annotation.Configuration;</span><br><span class="line"></span><br><span class="line">import java.time.LocalDateTime;</span><br><span class="line">import java.time.format.DateTimeFormatter;</span><br><span class="line"></span><br><span class="line">&#x2F;**</span><br><span class="line"> * 解决 LocalDateTime 中间含 T 的问题</span><br><span class="line"> *</span><br><span class="line"> * @author xuxu</span><br><span class="line"> *&#x2F;</span><br><span class="line">@Configuration</span><br><span class="line">public class LocalDateTimeSerializerConfig &#123;</span><br><span class="line"></span><br><span class="line">    @Bean</span><br><span class="line">    public LocalDateTimeSerializer localDateTimeDeserializer() &#123;</span><br><span class="line">        return new LocalDateTimeSerializer(DateTimeFormatter.ofPattern(&quot;yyyy-MM-dd HH:mm:ss&quot;));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Bean</span><br><span class="line">    public Jackson2ObjectMapperBuilderCustomizer jackson2ObjectMapperBuilderCustomizer() &#123;</span><br><span class="line">        return builder -&gt; builder.serializerByType(LocalDateTime.class, localDateTimeDeserializer());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> SpringBoot </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SpringBoot </tag>
            
            <tag> LocalDateTime </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hexo中使用emoji表情</title>
      <link href="posts/9b280ea3.html"/>
      <url>posts/9b280ea3.html</url>
      
        <content type="html"><![CDATA[<p>Hexo 开启欢乐的 emoji 之旅 💛</p><p>Hexo 默认的 markdown 渲染引擎不支持将 Github emoji 渲染到静态的 html 页面中，我们换一个支持 emoji 的引擎，再增加一个 emoji 插件即可.</p><h2 id="🌞-安装">🌞 安装</h2><p>命令行如下：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">npm un hexo-renderer-marked --save</span><br><span class="line">npm i hexo-renderer-markdown-it --save</span><br><span class="line">npm install markdown-it-emoji --save</span><br></pre></td></tr></table></figure><p>Tips：据说 <a href="https://github.com/hexojs/hexo-renderer-markdown-it">hexo-renderer-markdown-it</a> 的速度要比 Hexo 原装插件要快，而且功能更多</p><h2 id="🌞-配置">🌞 配置</h2><p>完成插件安装后还需要修改 Hexo 站点配置文件 <code>_config.yml</code>（不是主题配置哦）</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## markdown 渲染引擎配置，默认是hexo-renderer-marked，这个插件渲染速度更快，且有新特性</span></span><br><span class="line">markdown:</span><br><span class="line">  render:</span><br><span class="line">    html: <span class="literal">true</span></span><br><span class="line">    xhtmlOut: <span class="literal">false</span></span><br><span class="line">    breaks: <span class="literal">true</span></span><br><span class="line">    linkify: <span class="literal">true</span></span><br><span class="line">    typographer: <span class="literal">true</span></span><br><span class="line">    quotes: <span class="string">&#x27;“”‘’&#x27;</span></span><br><span class="line">  plugins:</span><br><span class="line">    - markdown-it-footnote</span><br><span class="line">    - markdown-it-sup</span><br><span class="line">    - markdown-it-sub</span><br><span class="line">    - markdown-it-abbr</span><br><span class="line">    - markdown-it-emoji</span><br><span class="line">  anchors:</span><br><span class="line">    level: 2</span><br><span class="line">    collisionSuffix: <span class="string">&#x27;v&#x27;</span></span><br><span class="line">    permalink: <span class="literal">true</span></span><br><span class="line">    permalinkClass: header-anchor</span><br><span class="line">    permalinkSymbol: ¶</span><br></pre></td></tr></table></figure><p>这里需要注意 <code>render:</code> 下的 <code>html:</code> 配置项，它的作用是控制 <code>Markdown</code> 渲染引擎是否转义文档中出现的 <code>html</code> 标签，默认为 <code>false</code> ，这里要设置为 <code>true</code>，否则回导致 <code>&lt;!--more--&gt;</code> 渲染失败。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">html: <span class="literal">true</span> <span class="comment"># 不转义 HTML 内容，即允许 HTML</span></span><br><span class="line">    <span class="comment">## OR</span></span><br><span class="line">html: <span class="literal">false</span> <span class="comment"># 转义 HTML，&lt; &gt; 尖括号会被转义成 &amp;lt; &amp;gt;等</span></span><br></pre></td></tr></table></figure><p><code>plugins:</code> 中的最后一项 <code>- markdown-it-emoji</code> 是手动添加的，官方 Github Wiki 中给出的配置不包含这一项，其他配置参照的 Github Wiki 中的默认配置，hexo-renderer-markdown-it 提供的其他新特性还没有一一尝试，暂时只想用它的 emoji 功能。✌️</p><h2 id="🌞-使用方法">🌞 使用方法</h2><p>输入对应的emoji编码就行了<br>例如：输入笑脸对应的 emoji 编码 <code>:smile:</code> 就可以得到 😄</p><h2 id="🌞-emoji编码合集">🌞 emoji编码合集</h2><p>People</p><table><thead><tr><th style="text-align:left">😐 <code>:neutral_face:</code></th><th style="text-align:left">😄 <code>:smile:</code></th><th style="text-align:left">😆 <code>:laughing:</code></th></tr></thead><tbody><tr><td style="text-align:left">😊 <code>:blush:</code></td><td style="text-align:left">😃 <code>:smiley:</code></td><td style="text-align:left">☺️ <code>:relaxed:</code></td></tr><tr><td style="text-align:left">😏 <code>:smirk:</code></td><td style="text-align:left">😍 <code>:heart_eyes:</code></td><td style="text-align:left">😘 <code>:kissing_heart:</code></td></tr><tr><td style="text-align:left">😚 <code>:kissing_closed_eyes:</code></td><td style="text-align:left">😳 <code>:flushed:</code></td><td style="text-align:left">😌 <code>:relieved:</code></td></tr><tr><td style="text-align:left">😆 <code>:satisfied:</code></td><td style="text-align:left">😁 <code>:grin:</code></td><td style="text-align:left">😉 <code>:wink:</code></td></tr><tr><td style="text-align:left">😜 <code>:stuck_out_tongue_winking_eye:</code></td><td style="text-align:left">😝 <code>:stuck_out_tongue_closed_eyes:</code></td><td style="text-align:left">😀 <code>:grinning:</code></td></tr><tr><td style="text-align:left">😗 <code>:kissing:</code></td><td style="text-align:left">😙 <code>:kissing_smiling_eyes:</code></td><td style="text-align:left">😛 <code>:stuck_out_tongue:</code></td></tr><tr><td style="text-align:left">😴 <code>:sleeping:</code></td><td style="text-align:left">😟 <code>:worried:</code></td><td style="text-align:left">😦 <code>:frowning:</code></td></tr><tr><td style="text-align:left">😧 <code>:anguished:</code></td><td style="text-align:left">😮 <code>:open_mouth:</code></td><td style="text-align:left">😬 <code>:grimacing:</code></td></tr><tr><td style="text-align:left">😕 <code>:confused:</code></td><td style="text-align:left">😯 <code>:hushed:</code></td><td style="text-align:left">😑 <code>:expressionless:</code></td></tr><tr><td style="text-align:left">😒 <code>:unamused:</code></td><td style="text-align:left">😅 <code>:sweat_smile:</code></td><td style="text-align:left">😓 <code>:sweat:</code></td></tr><tr><td style="text-align:left">😥 <code>:disappointed_relieved:</code></td><td style="text-align:left">😩 <code>:weary:</code></td><td style="text-align:left">😔 <code>:pensive:</code></td></tr><tr><td style="text-align:left">😞 <code>:disappointed:</code></td><td style="text-align:left">😖 <code>:confounded:</code></td><td style="text-align:left">😨 <code>:fearful:</code></td></tr><tr><td style="text-align:left">😰 <code>:cold_sweat:</code></td><td style="text-align:left">😣 <code>:persevere:</code></td><td style="text-align:left">😢 <code>:cry:</code></td></tr><tr><td style="text-align:left">😭 <code>:sob:</code></td><td style="text-align:left">😂 <code>:joy:</code></td><td style="text-align:left">😲 <code>:astonished:</code></td></tr><tr><td style="text-align:left">😱 <code>:scream:</code></td><td style="text-align:left">💭 <code>:thought_balloon:</code></td><td style="text-align:left">😫 <code>:tired_face:</code></td></tr><tr><td style="text-align:left">😠 <code>:angry:</code></td><td style="text-align:left">😡 <code>:rage:</code></td><td style="text-align:left">😤 <code>:triumph:</code></td></tr><tr><td style="text-align:left">😪 <code>:sleepy:</code></td><td style="text-align:left">😋 <code>:yum:</code></td><td style="text-align:left">😷 <code>:mask:</code></td></tr><tr><td style="text-align:left">😎 <code>:sunglasses:</code></td><td style="text-align:left">😵 <code>:dizzy_face:</code></td><td style="text-align:left">👿 <code>:imp:</code></td></tr><tr><td style="text-align:left">😈 <code>:smiling_imp:</code></td><td style="text-align:left">💬 <code>:speech_balloon:</code></td><td style="text-align:left">😶 <code>:no_mouth:</code></td></tr><tr><td style="text-align:left">😇 <code>:innocent:</code></td><td style="text-align:left">👽 <code>:alien:</code></td><td style="text-align:left">💛 <code>:yellow_heart:</code></td></tr><tr><td style="text-align:left">💙 <code>:blue_heart:</code></td><td style="text-align:left">💜 <code>:purple_heart:</code></td><td style="text-align:left">❤️ <code>:heart:</code></td></tr><tr><td style="text-align:left">💚 <code>:green_heart:</code></td><td style="text-align:left">💔 <code>:broken_heart:</code></td><td style="text-align:left">💓 <code>:heartbeat:</code></td></tr><tr><td style="text-align:left">💗 <code>:heartpulse:</code></td><td style="text-align:left">💕 <code>:two_hearts:</code></td><td style="text-align:left">💞 <code>:revolving_hearts:</code></td></tr><tr><td style="text-align:left">💘 <code>:cupid:</code></td><td style="text-align:left">💖 <code>:sparkling_heart:</code></td><td style="text-align:left">✨ <code>:sparkles:</code></td></tr><tr><td style="text-align:left">⭐️ <code>:star:</code></td><td style="text-align:left">🌟 <code>:star2:</code></td><td style="text-align:left">💫 <code>:dizzy:</code></td></tr><tr><td style="text-align:left">💥 <code>:boom:</code></td><td style="text-align:left">💥 <code>:collision:</code></td><td style="text-align:left">💢 <code>:anger:</code></td></tr><tr><td style="text-align:left">❗️ <code>:exclamation:</code></td><td style="text-align:left">❓ <code>:question:</code></td><td style="text-align:left">❕ <code>:grey_exclamation:</code></td></tr><tr><td style="text-align:left">❔ <code>:grey_question:</code></td><td style="text-align:left">💤 <code>:zzz:</code></td><td style="text-align:left">💨 <code>:dash:</code></td></tr><tr><td style="text-align:left">💦 <code>:sweat_drops:</code></td><td style="text-align:left">🎶 <code>:notes:</code></td><td style="text-align:left">🎵 <code>:musical_note:</code></td></tr><tr><td style="text-align:left">🔥 <code>:fire:</code></td><td style="text-align:left">💩 <code>:hankey:</code></td><td style="text-align:left">💩 <code>:poop:</code></td></tr><tr><td style="text-align:left">💩 <code>:shit:</code></td><td style="text-align:left">👍 <code>:+1:</code></td><td style="text-align:left">👍 <code>:thumbsup:</code></td></tr><tr><td style="text-align:left">👎 <code>:-1:</code></td><td style="text-align:left">👎 <code>:thumbsdown:</code></td><td style="text-align:left">👌 <code>:ok_hand:</code></td></tr><tr><td style="text-align:left">👊 <code>:punch:</code></td><td style="text-align:left">👊 <code>:facepunch:</code></td><td style="text-align:left">✊ <code>:fist:</code></td></tr><tr><td style="text-align:left">✌️ <code>:v:</code></td><td style="text-align:left">👋 <code>:wave:</code></td><td style="text-align:left">✋ <code>:hand:</code></td></tr><tr><td style="text-align:left">✋ <code>:raised_hand:</code></td><td style="text-align:left">👐 <code>:open_hands:</code></td><td style="text-align:left">☝️ <code>:point_up:</code></td></tr><tr><td style="text-align:left">👇 <code>:point_down:</code></td><td style="text-align:left">👈 <code>:point_left:</code></td><td style="text-align:left">👉 <code>:point_right:</code></td></tr><tr><td style="text-align:left">🙌 <code>:raised_hands:</code></td><td style="text-align:left">🙏 <code>:pray:</code></td><td style="text-align:left">👆 <code>:point_up_2:</code></td></tr><tr><td style="text-align:left">👏 <code>:clap:</code></td><td style="text-align:left">💪 <code>:muscle:</code></td><td style="text-align:left">🤘 <code>:metal:</code></td></tr><tr><td style="text-align:left">🖕 <code>:fu:</code></td><td style="text-align:left">🚶 <code>:walking:</code></td><td style="text-align:left">🏃 <code>:runner:</code></td></tr><tr><td style="text-align:left">🏃 <code>:running:</code></td><td style="text-align:left">👫 <code>:couple:</code></td><td style="text-align:left">👪 <code>:family:</code></td></tr><tr><td style="text-align:left">👬 <code>:two_men_holding_hands:</code></td><td style="text-align:left">👭 <code>:two_women_holding_hands:</code></td><td style="text-align:left">💃 <code>:dancer:</code></td></tr><tr><td style="text-align:left">👯 <code>:dancers:</code></td><td style="text-align:left">🙆 <code>:ok_woman:</code></td><td style="text-align:left">🙅 <code>:no_good:</code></td></tr><tr><td style="text-align:left">💁 <code>:information_desk_person:</code></td><td style="text-align:left">🙋 <code>:raising_hand:</code></td><td style="text-align:left">👰 <code>:bride_with_veil:</code></td></tr><tr><td style="text-align:left">🙎 <code>:person_with_pouting_face:</code></td><td style="text-align:left">🙍 <code>:person_frowning:</code></td><td style="text-align:left">🙇 <code>:bow:</code></td></tr><tr><td style="text-align:left">:couplekiss: <code>:couplekiss:</code></td><td style="text-align:left">💑 <code>:couple_with_heart:</code></td><td style="text-align:left">💆 <code>:massage:</code></td></tr><tr><td style="text-align:left">💇 <code>:haircut:</code></td><td style="text-align:left">💅 <code>:nail_care:</code></td><td style="text-align:left">👦 <code>:boy:</code></td></tr><tr><td style="text-align:left">👧 <code>:girl:</code></td><td style="text-align:left">👩 <code>:woman:</code></td><td style="text-align:left">👨 <code>:man:</code></td></tr><tr><td style="text-align:left">👶 <code>:baby:</code></td><td style="text-align:left">👵 <code>:older_woman:</code></td><td style="text-align:left">👴 <code>:older_man:</code></td></tr><tr><td style="text-align:left">👱 <code>:person_with_blond_hair:</code></td><td style="text-align:left">👲 <code>:man_with_gua_pi_mao:</code></td><td style="text-align:left">👳 <code>:man_with_turban:</code></td></tr><tr><td style="text-align:left">👷 <code>:construction_worker:</code></td><td style="text-align:left">👮 <code>:cop:</code></td><td style="text-align:left">👼 <code>:angel:</code></td></tr><tr><td style="text-align:left">👸 <code>:princess:</code></td><td style="text-align:left">😺 <code>:smiley_cat:</code></td><td style="text-align:left">😸 <code>:smile_cat:</code></td></tr><tr><td style="text-align:left">😻 <code>:heart_eyes_cat:</code></td><td style="text-align:left">😽 <code>:kissing_cat:</code></td><td style="text-align:left">😼 <code>:smirk_cat:</code></td></tr><tr><td style="text-align:left">🙀 <code>:scream_cat:</code></td><td style="text-align:left">😿 <code>:crying_cat_face:</code></td><td style="text-align:left">😹 <code>:joy_cat:</code></td></tr><tr><td style="text-align:left">😾 <code>:pouting_cat:</code></td><td style="text-align:left">👹 <code>:japanese_ogre:</code></td><td style="text-align:left">👺 <code>:japanese_goblin:</code></td></tr><tr><td style="text-align:left">🙈 <code>:see_no_evil:</code></td><td style="text-align:left">🙉 <code>:hear_no_evil:</code></td><td style="text-align:left">🙊 <code>:speak_no_evil:</code></td></tr><tr><td style="text-align:left">💂 <code>:guardsman:</code></td><td style="text-align:left">💀 <code>:skull:</code></td><td style="text-align:left">🐾 <code>:feet:</code></td></tr><tr><td style="text-align:left">👄 <code>:lips:</code></td><td style="text-align:left">💋 <code>:kiss:</code></td><td style="text-align:left">💧 <code>:droplet:</code></td></tr><tr><td style="text-align:left">👂 <code>:ear:</code></td><td style="text-align:left">👀 <code>:eyes:</code></td><td style="text-align:left">👃 <code>:nose:</code></td></tr><tr><td style="text-align:left">👅 <code>:tongue:</code></td><td style="text-align:left">💌 <code>:love_letter:</code></td><td style="text-align:left">👤 <code>:bust_in_silhouette:</code></td></tr><tr><td style="text-align:left">👥 <code>:busts_in_silhouette:</code></td><td style="text-align:left"></td><td style="text-align:left"></td></tr></tbody></table><p>Nature</p><table><thead><tr><th style="text-align:left">☀️ <code>:sunny:</code></th><th style="text-align:left">☔️ <code>:umbrella:</code></th><th style="text-align:left">☁️ <code>:cloud:</code></th></tr></thead><tbody><tr><td style="text-align:left">❄️ <code>:snowflake:</code></td><td style="text-align:left">⛄️ <code>:snowman:</code></td><td style="text-align:left">⚡️ <code>:zap:</code></td></tr><tr><td style="text-align:left">🌀 <code>:cyclone:</code></td><td style="text-align:left">🌁 <code>:foggy:</code></td><td style="text-align:left">🌊 <code>:ocean:</code></td></tr><tr><td style="text-align:left">🐱 <code>:cat:</code></td><td style="text-align:left">🐶 <code>:dog:</code></td><td style="text-align:left">🐭 <code>:mouse:</code></td></tr><tr><td style="text-align:left">🐹 <code>:hamster:</code></td><td style="text-align:left">🐰 <code>:rabbit:</code></td><td style="text-align:left">🐺 <code>:wolf:</code></td></tr><tr><td style="text-align:left">🐸 <code>:frog:</code></td><td style="text-align:left">🐯 <code>:tiger:</code></td><td style="text-align:left">🐨 <code>:koala:</code></td></tr><tr><td style="text-align:left">🐻 <code>:bear:</code></td><td style="text-align:left">🐷 <code>:pig:</code></td><td style="text-align:left">🐽 <code>:pig_nose:</code></td></tr><tr><td style="text-align:left">🐮 <code>:cow:</code></td><td style="text-align:left">🐗 <code>:boar:</code></td><td style="text-align:left">🐵 <code>:monkey_face:</code></td></tr><tr><td style="text-align:left">🐒 <code>:monkey:</code></td><td style="text-align:left">🐴 <code>:horse:</code></td><td style="text-align:left">🐎 <code>:racehorse:</code></td></tr><tr><td style="text-align:left">🐫 <code>:camel:</code></td><td style="text-align:left">🐑 <code>:sheep:</code></td><td style="text-align:left">🐘 <code>:elephant:</code></td></tr><tr><td style="text-align:left">🐼 <code>:panda_face:</code></td><td style="text-align:left">🐍 <code>:snake:</code></td><td style="text-align:left">🐦 <code>:bird:</code></td></tr><tr><td style="text-align:left">🐤 <code>:baby_chick:</code></td><td style="text-align:left">🐥 <code>:hatched_chick:</code></td><td style="text-align:left">🐣 <code>:hatching_chick:</code></td></tr><tr><td style="text-align:left">🐔 <code>:chicken:</code></td><td style="text-align:left">🐧 <code>:penguin:</code></td><td style="text-align:left">🐢 <code>:turtle:</code></td></tr><tr><td style="text-align:left">🐛 <code>:bug:</code></td><td style="text-align:left">🐝 <code>:honeybee:</code></td><td style="text-align:left">🐜 <code>:ant:</code></td></tr><tr><td style="text-align:left">🐞 <code>:beetle:</code></td><td style="text-align:left">🐌 <code>:snail:</code></td><td style="text-align:left">🐙 <code>:octopus:</code></td></tr><tr><td style="text-align:left">🐠 <code>:tropical_fish:</code></td><td style="text-align:left">🐟 <code>:fish:</code></td><td style="text-align:left">🐳 <code>:whale:</code></td></tr><tr><td style="text-align:left">🐋 <code>:whale2:</code></td><td style="text-align:left">🐬 <code>:dolphin:</code></td><td style="text-align:left">🐄 <code>:cow2:</code></td></tr><tr><td style="text-align:left">🐏 <code>:ram:</code></td><td style="text-align:left">🐀 <code>:rat:</code></td><td style="text-align:left">🐃 <code>:water_buffalo:</code></td></tr><tr><td style="text-align:left">🐅 <code>:tiger2:</code></td><td style="text-align:left">🐇 <code>:rabbit2:</code></td><td style="text-align:left">🐉 <code>:dragon:</code></td></tr><tr><td style="text-align:left">🐐 <code>:goat:</code></td><td style="text-align:left">🐓 <code>:rooster:</code></td><td style="text-align:left">🐕 <code>:dog2:</code></td></tr><tr><td style="text-align:left">🐖 <code>:pig2:</code></td><td style="text-align:left">🐁 <code>:mouse2:</code></td><td style="text-align:left">🐂 <code>:ox:</code></td></tr><tr><td style="text-align:left">🐲 <code>:dragon_face:</code></td><td style="text-align:left">🐡 <code>:blowfish:</code></td><td style="text-align:left">🐊 <code>:crocodile:</code></td></tr><tr><td style="text-align:left">🐪 <code>:dromedary_camel:</code></td><td style="text-align:left">🐆 <code>:leopard:</code></td><td style="text-align:left">🐈 <code>:cat2:</code></td></tr><tr><td style="text-align:left">🐩 <code>:poodle:</code></td><td style="text-align:left">🐾 <code>:paw_prints:</code></td><td style="text-align:left">💐 <code>:bouquet:</code></td></tr><tr><td style="text-align:left">🌸 <code>:cherry_blossom:</code></td><td style="text-align:left">🌷 <code>:tulip:</code></td><td style="text-align:left">🍀 <code>:four_leaf_clover:</code></td></tr><tr><td style="text-align:left">🌹 <code>:rose:</code></td><td style="text-align:left">🌻 <code>:sunflower:</code></td><td style="text-align:left">🌺 <code>:hibiscus:</code></td></tr><tr><td style="text-align:left">🍁 <code>:maple_leaf:</code></td><td style="text-align:left">🍃 <code>:leaves:</code></td><td style="text-align:left">🍂 <code>:fallen_leaf:</code></td></tr><tr><td style="text-align:left">🌿 <code>:herb:</code></td><td style="text-align:left">🍄 <code>:mushroom:</code></td><td style="text-align:left">🌵 <code>:cactus:</code></td></tr><tr><td style="text-align:left">🌴 <code>:palm_tree:</code></td><td style="text-align:left">🌲 <code>:evergreen_tree:</code></td><td style="text-align:left">🌳 <code>:deciduous_tree:</code></td></tr><tr><td style="text-align:left">🌰 <code>:chestnut:</code></td><td style="text-align:left">🌱 <code>:seedling:</code></td><td style="text-align:left">🌼 <code>:blossom:</code></td></tr><tr><td style="text-align:left">🌾 <code>:ear_of_rice:</code></td><td style="text-align:left">🐚 <code>:shell:</code></td><td style="text-align:left">🌐 <code>:globe_with_meridians:</code></td></tr><tr><td style="text-align:left">🌞 <code>:sun_with_face:</code></td><td style="text-align:left">🌝 <code>:full_moon_with_face:</code></td><td style="text-align:left">🌚 <code>:new_moon_with_face:</code></td></tr><tr><td style="text-align:left">🌑 <code>:new_moon:</code></td><td style="text-align:left">🌒 <code>:waxing_crescent_moon:</code></td><td style="text-align:left">🌓 <code>:first_quarter_moon:</code></td></tr><tr><td style="text-align:left">🌔 <code>:waxing_gibbous_moon:</code></td><td style="text-align:left">🌕 <code>:full_moon:</code></td><td style="text-align:left">🌖 <code>:waning_gibbous_moon:</code></td></tr><tr><td style="text-align:left">🌗 <code>:last_quarter_moon:</code></td><td style="text-align:left">🌘 <code>:waning_crescent_moon:</code></td><td style="text-align:left">🌜 <code>:last_quarter_moon_with_face:</code></td></tr><tr><td style="text-align:left">🌛 <code>:first_quarter_moon_with_face:</code></td><td style="text-align:left">🌔 <code>:moon:</code></td><td style="text-align:left">🌍 <code>:earth_africa:</code></td></tr><tr><td style="text-align:left">🌎 <code>:earth_americas:</code></td><td style="text-align:left">🌏 <code>:earth_asia:</code></td><td style="text-align:left">🌋 <code>:volcano:</code></td></tr><tr><td style="text-align:left">🌌 <code>:milky_way:</code></td><td style="text-align:left">⛅️ <code>:partly_sunny:</code></td><td style="text-align:left"></td></tr></tbody></table><p>Objects</p><table><thead><tr><th style="text-align:left">🎍 <code>:bamboo:</code></th><th style="text-align:left">💝 <code>:gift_heart:</code></th><th style="text-align:left">🎎 <code>:dolls:</code></th></tr></thead><tbody><tr><td style="text-align:left">🎒 <code>:school_satchel:</code></td><td style="text-align:left">🎓 <code>:mortar_board:</code></td><td style="text-align:left">🎏 <code>:flags:</code></td></tr><tr><td style="text-align:left">🎆 <code>:fireworks:</code></td><td style="text-align:left">🎇 <code>:sparkler:</code></td><td style="text-align:left">🎐 <code>:wind_chime:</code></td></tr><tr><td style="text-align:left">🎑 <code>:rice_scene:</code></td><td style="text-align:left">🎃 <code>:jack_o_lantern:</code></td><td style="text-align:left">👻 <code>:ghost:</code></td></tr><tr><td style="text-align:left">🎅 <code>:santa:</code></td><td style="text-align:left">🎄 <code>:christmas_tree:</code></td><td style="text-align:left">🎁 <code>:gift:</code></td></tr><tr><td style="text-align:left">🔔 <code>:bell:</code></td><td style="text-align:left">🔕 <code>:no_bell:</code></td><td style="text-align:left">🎋 <code>:tanabata_tree:</code></td></tr><tr><td style="text-align:left">🎉 <code>:tada:</code></td><td style="text-align:left">🎊 <code>:confetti_ball:</code></td><td style="text-align:left">🎈 <code>:balloon:</code></td></tr><tr><td style="text-align:left">🔮 <code>:crystal_ball:</code></td><td style="text-align:left">💿 <code>:cd:</code></td><td style="text-align:left">📀 <code>:dvd:</code></td></tr><tr><td style="text-align:left">💾 <code>:floppy_disk:</code></td><td style="text-align:left">📷 <code>:camera:</code></td><td style="text-align:left">📹 <code>:video_camera:</code></td></tr><tr><td style="text-align:left">🎥 <code>:movie_camera:</code></td><td style="text-align:left">💻 <code>:computer:</code></td><td style="text-align:left">📺 <code>:tv:</code></td></tr><tr><td style="text-align:left">📱 <code>:iphone:</code></td><td style="text-align:left">☎️ <code>:phone:</code></td><td style="text-align:left">☎️ <code>:telephone:</code></td></tr><tr><td style="text-align:left">📞 <code>:telephone_receiver:</code></td><td style="text-align:left">📟 <code>:pager:</code></td><td style="text-align:left">📠 <code>:fax:</code></td></tr><tr><td style="text-align:left">💽 <code>:minidisc:</code></td><td style="text-align:left">📼 <code>:vhs:</code></td><td style="text-align:left">🔉 <code>:sound:</code></td></tr><tr><td style="text-align:left">🔈 <code>:speaker:</code></td><td style="text-align:left">🔇 <code>:mute:</code></td><td style="text-align:left">📢 <code>:loudspeaker:</code></td></tr><tr><td style="text-align:left">📣 <code>:mega:</code></td><td style="text-align:left">⌛️ <code>:hourglass:</code></td><td style="text-align:left">⏳ <code>:hourglass_flowing_sand:</code></td></tr><tr><td style="text-align:left">⏰ <code>:alarm_clock:</code></td><td style="text-align:left">⌚️ <code>:watch:</code></td><td style="text-align:left">📻 <code>:radio:</code></td></tr><tr><td style="text-align:left">📡 <code>:satellite:</code></td><td style="text-align:left">➿ <code>:loop:</code></td><td style="text-align:left">🔍 <code>:mag:</code></td></tr><tr><td style="text-align:left">🔎 <code>:mag_right:</code></td><td style="text-align:left">🔓 <code>:unlock:</code></td><td style="text-align:left">🔒 <code>:lock:</code></td></tr><tr><td style="text-align:left">🔏 <code>:lock_with_ink_pen:</code></td><td style="text-align:left">🔐 <code>:closed_lock_with_key:</code></td><td style="text-align:left">🔑 <code>:key:</code></td></tr><tr><td style="text-align:left">💡 <code>:bulb:</code></td><td style="text-align:left">🔦 <code>:flashlight:</code></td><td style="text-align:left">🔆 <code>:high_brightness:</code></td></tr><tr><td style="text-align:left">🔅 <code>:low_brightness:</code></td><td style="text-align:left">🔌 <code>:electric_plug:</code></td><td style="text-align:left">🔋 <code>:battery:</code></td></tr><tr><td style="text-align:left">📲 <code>:calling:</code></td><td style="text-align:left">✉️ <code>:email:</code></td><td style="text-align:left">📫 <code>:mailbox:</code></td></tr><tr><td style="text-align:left">📮 <code>:postbox:</code></td><td style="text-align:left">🛀 <code>:bath:</code></td><td style="text-align:left">🛁 <code>:bathtub:</code></td></tr><tr><td style="text-align:left">🚿 <code>:shower:</code></td><td style="text-align:left">🚽 <code>:toilet:</code></td><td style="text-align:left">🔧 <code>:wrench:</code></td></tr><tr><td style="text-align:left">🔩 <code>:nut_and_bolt:</code></td><td style="text-align:left">🔨 <code>:hammer:</code></td><td style="text-align:left">💺 <code>:seat:</code></td></tr><tr><td style="text-align:left">💰 <code>:moneybag:</code></td><td style="text-align:left">💴 <code>:yen:</code></td><td style="text-align:left">💵 <code>:dollar:</code></td></tr><tr><td style="text-align:left">💷 <code>:pound:</code></td><td style="text-align:left">💶 <code>:euro:</code></td><td style="text-align:left">💳 <code>:credit_card:</code></td></tr><tr><td style="text-align:left">💸 <code>:money_with_wings:</code></td><td style="text-align:left">📧 <code>:e-mail:</code></td><td style="text-align:left">📥 <code>:inbox_tray:</code></td></tr><tr><td style="text-align:left">📤 <code>:outbox_tray:</code></td><td style="text-align:left">✉️ <code>:envelope:</code></td><td style="text-align:left">📨 <code>:incoming_envelope:</code></td></tr><tr><td style="text-align:left">📯 <code>:postal_horn:</code></td><td style="text-align:left">📪 <code>:mailbox_closed:</code></td><td style="text-align:left">📬 <code>:mailbox_with_mail:</code></td></tr><tr><td style="text-align:left">📭 <code>:mailbox_with_no_mail:</code></td><td style="text-align:left">🚪 <code>:door:</code></td><td style="text-align:left">🚬 <code>:smoking:</code></td></tr><tr><td style="text-align:left">💣 <code>:bomb:</code></td><td style="text-align:left">🔫 <code>:gun:</code></td><td style="text-align:left">🔪 <code>:hocho:</code></td></tr><tr><td style="text-align:left">💊 <code>:pill:</code></td><td style="text-align:left">💉 <code>:syringe:</code></td><td style="text-align:left">📄 <code>:page_facing_up:</code></td></tr><tr><td style="text-align:left">📃 <code>:page_with_curl:</code></td><td style="text-align:left">📑 <code>:bookmark_tabs:</code></td><td style="text-align:left">📊 <code>:bar_chart:</code></td></tr><tr><td style="text-align:left">📈 <code>:chart_with_upwards_trend:</code></td><td style="text-align:left">📉 <code>:chart_with_downwards_trend:</code></td><td style="text-align:left">📜 <code>:scroll:</code></td></tr><tr><td style="text-align:left">📋 <code>:clipboard:</code></td><td style="text-align:left">📆 <code>:calendar:</code></td><td style="text-align:left">📅 <code>:date:</code></td></tr><tr><td style="text-align:left">📇 <code>:card_index:</code></td><td style="text-align:left">📁 <code>:file_folder:</code></td><td style="text-align:left">📂 <code>:open_file_folder:</code></td></tr><tr><td style="text-align:left">✂️ <code>:scissors:</code></td><td style="text-align:left">📌 <code>:pushpin:</code></td><td style="text-align:left">📎 <code>:paperclip:</code></td></tr><tr><td style="text-align:left">✒️ <code>:black_nib:</code></td><td style="text-align:left">✏️ <code>:pencil2:</code></td><td style="text-align:left">📏 <code>:straight_ruler:</code></td></tr><tr><td style="text-align:left">📐 <code>:triangular_ruler:</code></td><td style="text-align:left">📕 <code>:closed_book:</code></td><td style="text-align:left">📗 <code>:green_book:</code></td></tr><tr><td style="text-align:left">📘 <code>:blue_book:</code></td><td style="text-align:left">📙 <code>:orange_book:</code></td><td style="text-align:left">📓 <code>:notebook:</code></td></tr><tr><td style="text-align:left">📔 <code>:notebook_with_decorative_cover:</code></td><td style="text-align:left">📒 <code>:ledger:</code></td><td style="text-align:left">📚 <code>:books:</code></td></tr><tr><td style="text-align:left">🔖 <code>:bookmark:</code></td><td style="text-align:left">📛 <code>:name_badge:</code></td><td style="text-align:left">🔬 <code>:microscope:</code></td></tr><tr><td style="text-align:left">🔭 <code>:telescope:</code></td><td style="text-align:left">📰 <code>:newspaper:</code></td><td style="text-align:left">🏈 <code>:football:</code></td></tr><tr><td style="text-align:left">🏀 <code>:basketball:</code></td><td style="text-align:left">⚽️ <code>:soccer:</code></td><td style="text-align:left">⚾️ <code>:baseball:</code></td></tr><tr><td style="text-align:left">🎾 <code>:tennis:</code></td><td style="text-align:left">🎱 <code>:8ball:</code></td><td style="text-align:left">🏉 <code>:rugby_football:</code></td></tr><tr><td style="text-align:left">🎳 <code>:bowling:</code></td><td style="text-align:left">⛳️ <code>:golf:</code></td><td style="text-align:left">🚵 <code>:mountain_bicyclist:</code></td></tr><tr><td style="text-align:left">🚴 <code>:bicyclist:</code></td><td style="text-align:left">🏇 <code>:horse_racing:</code></td><td style="text-align:left">🏂 <code>:snowboarder:</code></td></tr><tr><td style="text-align:left">🏊 <code>:swimmer:</code></td><td style="text-align:left">🏄 <code>:surfer:</code></td><td style="text-align:left">🎿 <code>:ski:</code></td></tr><tr><td style="text-align:left">♠️ <code>:spades:</code></td><td style="text-align:left">♥️ <code>:hearts:</code></td><td style="text-align:left">♣️ <code>:clubs:</code></td></tr><tr><td style="text-align:left">♦️ <code>:diamonds:</code></td><td style="text-align:left">💎 <code>:gem:</code></td><td style="text-align:left">💍 <code>:ring:</code></td></tr><tr><td style="text-align:left">🏆 <code>:trophy:</code></td><td style="text-align:left">🎼 <code>:musical_score:</code></td><td style="text-align:left">🎹 <code>:musical_keyboard:</code></td></tr><tr><td style="text-align:left">🎻 <code>:violin:</code></td><td style="text-align:left">👾 <code>:space_invader:</code></td><td style="text-align:left">🎮 <code>:video_game:</code></td></tr><tr><td style="text-align:left">🃏 <code>:black_joker:</code></td><td style="text-align:left">🎴 <code>:flower_playing_cards:</code></td><td style="text-align:left">🎲 <code>:game_die:</code></td></tr><tr><td style="text-align:left">🎯 <code>:dart:</code></td><td style="text-align:left">🀄️ <code>:mahjong:</code></td><td style="text-align:left">🎬 <code>:clapper:</code></td></tr><tr><td style="text-align:left">📝 <code>:memo:</code></td><td style="text-align:left">📝 <code>:pencil:</code></td><td style="text-align:left">📖 <code>:book:</code></td></tr><tr><td style="text-align:left">🎨 <code>:art:</code></td><td style="text-align:left">🎤 <code>:microphone:</code></td><td style="text-align:left">🎧 <code>:headphones:</code></td></tr><tr><td style="text-align:left">🎺 <code>:trumpet:</code></td><td style="text-align:left">🎷 <code>:saxophone:</code></td><td style="text-align:left">🎸 <code>:guitar:</code></td></tr><tr><td style="text-align:left">👞 <code>:shoe:</code></td><td style="text-align:left">👡 <code>:sandal:</code></td><td style="text-align:left">👠 <code>:high_heel:</code></td></tr><tr><td style="text-align:left">💄 <code>:lipstick:</code></td><td style="text-align:left">👢 <code>:boot:</code></td><td style="text-align:left">👕 <code>:shirt:</code></td></tr><tr><td style="text-align:left">👕 <code>:tshirt:</code></td><td style="text-align:left">👔 <code>:necktie:</code></td><td style="text-align:left">👚 <code>:womans_clothes:</code></td></tr><tr><td style="text-align:left">👗 <code>:dress:</code></td><td style="text-align:left">🎽 <code>:running_shirt_with_sash:</code></td><td style="text-align:left">👖 <code>:jeans:</code></td></tr><tr><td style="text-align:left">👘 <code>:kimono:</code></td><td style="text-align:left">👙 <code>:bikini:</code></td><td style="text-align:left">🎀 <code>:ribbon:</code></td></tr><tr><td style="text-align:left">🎩 <code>:tophat:</code></td><td style="text-align:left">👑 <code>:crown:</code></td><td style="text-align:left">👒 <code>:womans_hat:</code></td></tr><tr><td style="text-align:left">👞 <code>:mans_shoe:</code></td><td style="text-align:left">🌂 <code>:closed_umbrella:</code></td><td style="text-align:left">💼 <code>:briefcase:</code></td></tr><tr><td style="text-align:left">👜 <code>:handbag:</code></td><td style="text-align:left">👝 <code>:pouch:</code></td><td style="text-align:left">👛 <code>:purse:</code></td></tr><tr><td style="text-align:left">👓 <code>:eyeglasses:</code></td><td style="text-align:left">🎣 <code>:fishing_pole_and_fish:</code></td><td style="text-align:left">☕️ <code>:coffee:</code></td></tr><tr><td style="text-align:left">🍵 <code>:tea:</code></td><td style="text-align:left">🍶 <code>:sake:</code></td><td style="text-align:left">🍼 <code>:baby_bottle:</code></td></tr><tr><td style="text-align:left">🍺 <code>:beer:</code></td><td style="text-align:left">🍻 <code>:beers:</code></td><td style="text-align:left">🍸 <code>:cocktail:</code></td></tr><tr><td style="text-align:left">🍹 <code>:tropical_drink:</code></td><td style="text-align:left">🍷 <code>:wine_glass:</code></td><td style="text-align:left">🍴 <code>:fork_and_knife:</code></td></tr><tr><td style="text-align:left">🍕 <code>:pizza:</code></td><td style="text-align:left">🍔 <code>:hamburger:</code></td><td style="text-align:left">🍟 <code>:fries:</code></td></tr><tr><td style="text-align:left">🍗 <code>:poultry_leg:</code></td><td style="text-align:left">🍖 <code>:meat_on_bone:</code></td><td style="text-align:left">🍝 <code>:spaghetti:</code></td></tr><tr><td style="text-align:left">🍛 <code>:curry:</code></td><td style="text-align:left">🍤 <code>:fried_shrimp:</code></td><td style="text-align:left">🍱 <code>:bento:</code></td></tr><tr><td style="text-align:left">🍣 <code>:sushi:</code></td><td style="text-align:left">🍥 <code>:fish_cake:</code></td><td style="text-align:left">🍙 <code>:rice_ball:</code></td></tr><tr><td style="text-align:left">🍘 <code>:rice_cracker:</code></td><td style="text-align:left">🍚 <code>:rice:</code></td><td style="text-align:left">🍜 <code>:ramen:</code></td></tr><tr><td style="text-align:left">🍲 <code>:stew:</code></td><td style="text-align:left">🍢 <code>:oden:</code></td><td style="text-align:left">🍡 <code>:dango:</code></td></tr><tr><td style="text-align:left">🥚 <code>:egg:</code></td><td style="text-align:left">🍞 <code>:bread:</code></td><td style="text-align:left">🍩 <code>:doughnut:</code></td></tr><tr><td style="text-align:left">🍮 <code>:custard:</code></td><td style="text-align:left">🍦 <code>:icecream:</code></td><td style="text-align:left">🍨 <code>:ice_cream:</code></td></tr><tr><td style="text-align:left">🍧 <code>:shaved_ice:</code></td><td style="text-align:left">🎂 <code>:birthday:</code></td><td style="text-align:left">🍰 <code>:cake:</code></td></tr><tr><td style="text-align:left">🍪 <code>:cookie:</code></td><td style="text-align:left">🍫 <code>:chocolate_bar:</code></td><td style="text-align:left">🍬 <code>:candy:</code></td></tr><tr><td style="text-align:left">🍭 <code>:lollipop:</code></td><td style="text-align:left">🍯 <code>:honey_pot:</code></td><td style="text-align:left">🍎 <code>:apple:</code></td></tr><tr><td style="text-align:left">🍏 <code>:green_apple:</code></td><td style="text-align:left">🍊 <code>:tangerine:</code></td><td style="text-align:left">🍋 <code>:lemon:</code></td></tr><tr><td style="text-align:left">🍒 <code>:cherries:</code></td><td style="text-align:left">🍇 <code>:grapes:</code></td><td style="text-align:left">🍉 <code>:watermelon:</code></td></tr><tr><td style="text-align:left">🍓 <code>:strawberry:</code></td><td style="text-align:left">🍑 <code>:peach:</code></td><td style="text-align:left">🍈 <code>:melon:</code></td></tr><tr><td style="text-align:left">🍌 <code>:banana:</code></td><td style="text-align:left">🍐 <code>:pear:</code></td><td style="text-align:left">🍍 <code>:pineapple:</code></td></tr><tr><td style="text-align:left">🍠 <code>:sweet_potato:</code></td><td style="text-align:left">🍆 <code>:eggplant:</code></td><td style="text-align:left">🍅 <code>:tomato:</code></td></tr><tr><td style="text-align:left">🌽 <code>:corn:</code></td><td style="text-align:left"></td><td style="text-align:left"></td></tr></tbody></table><p>Places</p><table><thead><tr><th style="text-align:left">🏠 <code>:house:</code></th><th style="text-align:left">🏡 <code>:house_with_garden:</code></th><th style="text-align:left">🏫 <code>:school:</code></th></tr></thead><tbody><tr><td style="text-align:left">🏢 <code>:office:</code></td><td style="text-align:left">🏣 <code>:post_office:</code></td><td style="text-align:left">🏥 <code>:hospital:</code></td></tr><tr><td style="text-align:left">🏦 <code>:bank:</code></td><td style="text-align:left">🏪 <code>:convenience_store:</code></td><td style="text-align:left">🏩 <code>:love_hotel:</code></td></tr><tr><td style="text-align:left">🏨 <code>:hotel:</code></td><td style="text-align:left">💒 <code>:wedding:</code></td><td style="text-align:left">⛪️ <code>:church:</code></td></tr><tr><td style="text-align:left">🏬 <code>:department_store:</code></td><td style="text-align:left">🏤 <code>:european_post_office:</code></td><td style="text-align:left">🌇 <code>:city_sunrise:</code></td></tr><tr><td style="text-align:left">🌆 <code>:city_sunset:</code></td><td style="text-align:left">🏯 <code>:japanese_castle:</code></td><td style="text-align:left">🏰 <code>:european_castle:</code></td></tr><tr><td style="text-align:left">⛺️ <code>:tent:</code></td><td style="text-align:left">🏭 <code>:factory:</code></td><td style="text-align:left">🗼 <code>:tokyo_tower:</code></td></tr><tr><td style="text-align:left">🗾 <code>:japan:</code></td><td style="text-align:left">🗻 <code>:mount_fuji:</code></td><td style="text-align:left">🌄 <code>:sunrise_over_mountains:</code></td></tr><tr><td style="text-align:left">🌅 <code>:sunrise:</code></td><td style="text-align:left">🌠 <code>:stars:</code></td><td style="text-align:left">🗽 <code>:statue_of_liberty:</code></td></tr><tr><td style="text-align:left">🌉 <code>:bridge_at_night:</code></td><td style="text-align:left">🎠 <code>:carousel_horse:</code></td><td style="text-align:left">🌈 <code>:rainbow:</code></td></tr><tr><td style="text-align:left">🎡 <code>:ferris_wheel:</code></td><td style="text-align:left">⛲️ <code>:fountain:</code></td><td style="text-align:left">🎢 <code>:roller_coaster:</code></td></tr><tr><td style="text-align:left">🚢 <code>:ship:</code></td><td style="text-align:left">🚤 <code>:speedboat:</code></td><td style="text-align:left">⛵️ <code>:boat:</code></td></tr><tr><td style="text-align:left">⛵️ <code>:sailboat:</code></td><td style="text-align:left">🚣 <code>:rowboat:</code></td><td style="text-align:left">⚓️ <code>:anchor:</code></td></tr><tr><td style="text-align:left">🚀 <code>:rocket:</code></td><td style="text-align:left">✈️ <code>:airplane:</code></td><td style="text-align:left">🚁 <code>:helicopter:</code></td></tr><tr><td style="text-align:left">🚂 <code>:steam_locomotive:</code></td><td style="text-align:left">🚊 <code>:tram:</code></td><td style="text-align:left">🚞 <code>:mountain_railway:</code></td></tr><tr><td style="text-align:left">🚲 <code>:bike:</code></td><td style="text-align:left">🚡 <code>:aerial_tramway:</code></td><td style="text-align:left">🚟 <code>:suspension_railway:</code></td></tr><tr><td style="text-align:left">🚠 <code>:mountain_cableway:</code></td><td style="text-align:left">🚜 <code>:tractor:</code></td><td style="text-align:left">🚙 <code>:blue_car:</code></td></tr><tr><td style="text-align:left">🚘 <code>:oncoming_automobile:</code></td><td style="text-align:left">🚗 <code>:car:</code></td><td style="text-align:left">🚗 <code>:red_car:</code></td></tr><tr><td style="text-align:left">🚕 <code>:taxi:</code></td><td style="text-align:left">🚖 <code>:oncoming_taxi:</code></td><td style="text-align:left">🚛 <code>:articulated_lorry:</code></td></tr><tr><td style="text-align:left">🚌 <code>:bus:</code></td><td style="text-align:left">🚍 <code>:oncoming_bus:</code></td><td style="text-align:left">🚨 <code>:rotating_light:</code></td></tr><tr><td style="text-align:left">🚓 <code>:police_car:</code></td><td style="text-align:left">🚔 <code>:oncoming_police_car:</code></td><td style="text-align:left">🚒 <code>:fire_engine:</code></td></tr><tr><td style="text-align:left">🚑 <code>:ambulance:</code></td><td style="text-align:left">🚐 <code>:minibus:</code></td><td style="text-align:left">🚚 <code>:truck:</code></td></tr><tr><td style="text-align:left">🚋 <code>:train:</code></td><td style="text-align:left">🚉 <code>:station:</code></td><td style="text-align:left">🚆 <code>:train2:</code></td></tr><tr><td style="text-align:left">🚅 <code>:bullettrain_front:</code></td><td style="text-align:left">🚄 <code>:bullettrain_side:</code></td><td style="text-align:left">🚈 <code>:light_rail:</code></td></tr><tr><td style="text-align:left">🚝 <code>:monorail:</code></td><td style="text-align:left">🚃 <code>:railway_car:</code></td><td style="text-align:left">🚎 <code>:trolleybus:</code></td></tr><tr><td style="text-align:left">🎫 <code>:ticket:</code></td><td style="text-align:left">⛽️ <code>:fuelpump:</code></td><td style="text-align:left">🚦 <code>:vertical_traffic_light:</code></td></tr><tr><td style="text-align:left">🚥 <code>:traffic_light:</code></td><td style="text-align:left">⚠️ <code>:warning:</code></td><td style="text-align:left">🚧 <code>:construction:</code></td></tr><tr><td style="text-align:left">🔰 <code>:beginner:</code></td><td style="text-align:left">🏧 <code>:atm:</code></td><td style="text-align:left">🎰 <code>:slot_machine:</code></td></tr><tr><td style="text-align:left">🚏 <code>:busstop:</code></td><td style="text-align:left">💈 <code>:barber:</code></td><td style="text-align:left">♨️ <code>:hotsprings:</code></td></tr><tr><td style="text-align:left">🏁 <code>:checkered_flag:</code></td><td style="text-align:left">🎌 <code>:crossed_flags:</code></td><td style="text-align:left">🏮 <code>:izakaya_lantern:</code></td></tr><tr><td style="text-align:left">🗿 <code>:moyai:</code></td><td style="text-align:left">🎪 <code>:circus_tent:</code></td><td style="text-align:left">🎭 <code>:performing_arts:</code></td></tr><tr><td style="text-align:left">📍 <code>:round_pushpin:</code></td><td style="text-align:left">🚩 <code>:triangular_flag_on_post:</code></td><td style="text-align:left"></td></tr></tbody></table><p>Symbols</p><table><thead><tr><th style="text-align:left">1️⃣ <code>:one:</code></th><th style="text-align:left">2️⃣ <code>:two:</code></th><th style="text-align:left">3️⃣ <code>:three:</code></th></tr></thead><tbody><tr><td style="text-align:left">4️⃣ <code>:four:</code></td><td style="text-align:left">5️⃣ <code>:five:</code></td><td style="text-align:left">6️⃣ <code>:six:</code></td></tr><tr><td style="text-align:left">7️⃣ <code>:seven:</code></td><td style="text-align:left">8️⃣ <code>:eight:</code></td><td style="text-align:left">9️⃣ <code>:nine:</code></td></tr><tr><td style="text-align:left">🔟 <code>:keycap_ten:</code></td><td style="text-align:left">🔢 <code>:1234:</code></td><td style="text-align:left">0️⃣ <code>:zero:</code></td></tr><tr><td style="text-align:left">#️⃣ <code>:hash:</code></td><td style="text-align:left">🔣 <code>:symbols:</code></td><td style="text-align:left">◀️ <code>:arrow_backward:</code></td></tr><tr><td style="text-align:left">⬇️ <code>:arrow_down:</code></td><td style="text-align:left">▶️ <code>:arrow_forward:</code></td><td style="text-align:left">⬅️ <code>:arrow_left:</code></td></tr><tr><td style="text-align:left">🔠 <code>:capital_abcd:</code></td><td style="text-align:left">🔡 <code>:abcd:</code></td><td style="text-align:left">🔤 <code>:abc:</code></td></tr><tr><td style="text-align:left">↙️ <code>:arrow_lower_left:</code></td><td style="text-align:left">↘️ <code>:arrow_lower_right:</code></td><td style="text-align:left">➡️ <code>:arrow_right:</code></td></tr><tr><td style="text-align:left">⬆️ <code>:arrow_up:</code></td><td style="text-align:left">↖️ <code>:arrow_upper_left:</code></td><td style="text-align:left">↗️ <code>:arrow_upper_right:</code></td></tr><tr><td style="text-align:left">⏬ <code>:arrow_double_down:</code></td><td style="text-align:left">⏫ <code>:arrow_double_up:</code></td><td style="text-align:left">🔽 <code>:arrow_down_small:</code></td></tr><tr><td style="text-align:left">⤵️ <code>:arrow_heading_down:</code></td><td style="text-align:left">⤴️ <code>:arrow_heading_up:</code></td><td style="text-align:left">↩️ <code>:leftwards_arrow_with_hook:</code></td></tr><tr><td style="text-align:left">↪️ <code>:arrow_right_hook:</code></td><td style="text-align:left">↔️ <code>:left_right_arrow:</code></td><td style="text-align:left">↕️ <code>:arrow_up_down:</code></td></tr><tr><td style="text-align:left">🔼 <code>:arrow_up_small:</code></td><td style="text-align:left">🔃 <code>:arrows_clockwise:</code></td><td style="text-align:left">🔄 <code>:arrows_counterclockwise:</code></td></tr><tr><td style="text-align:left">⏪ <code>:rewind:</code></td><td style="text-align:left">⏩ <code>:fast_forward:</code></td><td style="text-align:left">ℹ️ <code>:information_source:</code></td></tr><tr><td style="text-align:left">🆗 <code>:ok:</code></td><td style="text-align:left">🔀 <code>:twisted_rightwards_arrows:</code></td><td style="text-align:left">🔁 <code>:repeat:</code></td></tr><tr><td style="text-align:left">🔂 <code>:repeat_one:</code></td><td style="text-align:left">🆕 <code>:new:</code></td><td style="text-align:left">🔝 <code>:top:</code></td></tr><tr><td style="text-align:left">🆙 <code>:up:</code></td><td style="text-align:left">🆒 <code>:cool:</code></td><td style="text-align:left">🆓 <code>:free:</code></td></tr><tr><td style="text-align:left">🆖 <code>:ng:</code></td><td style="text-align:left">🎦 <code>:cinema:</code></td><td style="text-align:left">🈁 <code>:koko:</code></td></tr><tr><td style="text-align:left">📶 <code>:signal_strength:</code></td><td style="text-align:left"></td><td style="text-align:left"></td></tr><tr><td style="text-align:left">🈂️ <code>:sa:</code></td><td style="text-align:left">🚻 <code>:restroom:</code></td><td style="text-align:left">🚹 <code>:mens:</code></td></tr><tr><td style="text-align:left">🚺 <code>:womens:</code></td><td style="text-align:left">🚼 <code>:baby_symbol:</code></td><td style="text-align:left">🚭 <code>:no_smoking:</code></td></tr><tr><td style="text-align:left">🅿️ <code>:parking:</code></td><td style="text-align:left">♿️ <code>:wheelchair:</code></td><td style="text-align:left">🚇 <code>:metro:</code></td></tr><tr><td style="text-align:left">🛄 <code>:baggage_claim:</code></td><td style="text-align:left">🉑 <code>:accept:</code></td><td style="text-align:left">🚾 <code>:wc:</code></td></tr><tr><td style="text-align:left">🚰 <code>:potable_water:</code></td><td style="text-align:left">🚮 <code>:put_litter_in_its_place:</code></td><td style="text-align:left">㊙️ <code>:secret:</code></td></tr><tr><td style="text-align:left">㊗️ <code>:congratulations:</code></td><td style="text-align:left">Ⓜ️ <code>:m:</code></td><td style="text-align:left">🛂 <code>:passport_control:</code></td></tr><tr><td style="text-align:left">🛅 <code>:left_luggage:</code></td><td style="text-align:left">🛃 <code>:customs:</code></td><td style="text-align:left">🉐 <code>:ideograph_advantage:</code></td></tr><tr><td style="text-align:left">🆑 <code>:cl:</code></td><td style="text-align:left">🆘 <code>:sos:</code></td><td style="text-align:left">🆔 <code>:id:</code></td></tr><tr><td style="text-align:left">🚫 <code>:no_entry_sign:</code></td><td style="text-align:left">🔞 <code>:underage:</code></td><td style="text-align:left">📵 <code>:no_mobile_phones:</code></td></tr><tr><td style="text-align:left">🚯 <code>:do_not_litter:</code></td><td style="text-align:left">🚱 <code>:non-potable_water:</code></td><td style="text-align:left">🚳 <code>:no_bicycles:</code></td></tr><tr><td style="text-align:left">🚷 <code>:no_pedestrians:</code></td><td style="text-align:left">🚸 <code>:children_crossing:</code></td><td style="text-align:left">⛔️ <code>:no_entry:</code></td></tr><tr><td style="text-align:left">✳️ <code>:eight_spoked_asterisk:</code></td><td style="text-align:left">✴️ <code>:eight_pointed_black_star:</code></td><td style="text-align:left">💟 <code>:heart_decoration:</code></td></tr><tr><td style="text-align:left">🆚 <code>:vs:</code></td><td style="text-align:left">📳 <code>:vibration_mode:</code></td><td style="text-align:left">📴 <code>:mobile_phone_off:</code></td></tr><tr><td style="text-align:left">💹 <code>:chart:</code></td><td style="text-align:left">💱 <code>:currency_exchange:</code></td><td style="text-align:left">♈️ <code>:aries:</code></td></tr><tr><td style="text-align:left">♉️ <code>:taurus:</code></td><td style="text-align:left">♊️ <code>:gemini:</code></td><td style="text-align:left">♋️ <code>:cancer:</code></td></tr><tr><td style="text-align:left">♌️ <code>:leo:</code></td><td style="text-align:left">♍️ <code>:virgo:</code></td><td style="text-align:left">♎️ <code>:libra:</code></td></tr><tr><td style="text-align:left">♏️ <code>:scorpius:</code></td><td style="text-align:left">♐️ <code>:sagittarius:</code></td><td style="text-align:left">♑️ <code>:capricorn:</code></td></tr><tr><td style="text-align:left">♒️ <code>:aquarius:</code></td><td style="text-align:left">♓️ <code>:pisces:</code></td><td style="text-align:left">⛎ <code>:ophiuchus:</code></td></tr><tr><td style="text-align:left">🔯 <code>:six_pointed_star:</code></td><td style="text-align:left">❎ <code>:negative_squared_cross_mark:</code></td><td style="text-align:left">🅰️ <code>:a:</code></td></tr><tr><td style="text-align:left">🅱️ <code>:b:</code></td><td style="text-align:left">🆎 <code>:ab:</code></td><td style="text-align:left">🅾️ <code>:o2:</code></td></tr><tr><td style="text-align:left">💠 <code>:diamond_shape_with_a_dot_inside:</code></td><td style="text-align:left">♻️ <code>:recycle:</code></td><td style="text-align:left">🔚 <code>:end:</code></td></tr><tr><td style="text-align:left">🔛 <code>:on:</code></td><td style="text-align:left">🔜 <code>:soon:</code></td><td style="text-align:left">🕐 <code>:clock1:</code></td></tr><tr><td style="text-align:left">🕜 <code>:clock130:</code></td><td style="text-align:left">🕙 <code>:clock10:</code></td><td style="text-align:left">🕥 <code>:clock1030:</code></td></tr><tr><td style="text-align:left">🕚 <code>:clock11:</code></td><td style="text-align:left">🕦 <code>:clock1130:</code></td><td style="text-align:left">🕛 <code>:clock12:</code></td></tr><tr><td style="text-align:left">🕧 <code>:clock1230:</code></td><td style="text-align:left">🕑 <code>:clock2:</code></td><td style="text-align:left">🕝 <code>:clock230:</code></td></tr><tr><td style="text-align:left">🕒 <code>:clock3:</code></td><td style="text-align:left">🕞 <code>:clock330:</code></td><td style="text-align:left">🕓 <code>:clock4:</code></td></tr><tr><td style="text-align:left">🕟 <code>:clock430:</code></td><td style="text-align:left">🕔 <code>:clock5:</code></td><td style="text-align:left">🕠 <code>:clock530:</code></td></tr><tr><td style="text-align:left">🕕 <code>:clock6:</code></td><td style="text-align:left">🕡 <code>:clock630:</code></td><td style="text-align:left">🕖 <code>:clock7:</code></td></tr><tr><td style="text-align:left">🕢 <code>:clock730:</code></td><td style="text-align:left">🕗 <code>:clock8:</code></td><td style="text-align:left">🕣 <code>:clock830:</code></td></tr><tr><td style="text-align:left">🕘 <code>:clock9:</code></td><td style="text-align:left">🕤 <code>:clock930:</code></td><td style="text-align:left">💲 <code>:heavy_dollar_sign:</code></td></tr><tr><td style="text-align:left">©️ <code>:copyright:</code></td><td style="text-align:left">®️ <code>:registered:</code></td><td style="text-align:left">™️ <code>:tm:</code></td></tr><tr><td style="text-align:left">❌ <code>:x:</code></td><td style="text-align:left">❗️ <code>:heavy_exclamation_mark:</code></td><td style="text-align:left">‼️ <code>:bangbang:</code></td></tr><tr><td style="text-align:left">⁉️ <code>:interrobang:</code></td><td style="text-align:left">⭕️ <code>:o:</code></td><td style="text-align:left">✖️ <code>:heavy_multiplication_x:</code></td></tr><tr><td style="text-align:left">➕ <code>:heavy_plus_sign:</code></td><td style="text-align:left">➖ <code>:heavy_minus_sign:</code></td><td style="text-align:left">➗ <code>:heavy_division_sign:</code></td></tr><tr><td style="text-align:left">💮 <code>:white_flower:</code></td><td style="text-align:left">💯 <code>:100:</code></td><td style="text-align:left">✔️ <code>:heavy_check_mark:</code></td></tr><tr><td style="text-align:left">☑️ <code>:ballot_box_with_check:</code></td><td style="text-align:left">🔘 <code>:radio_button:</code></td><td style="text-align:left">🔗 <code>:link:</code></td></tr><tr><td style="text-align:left">➰ <code>:curly_loop:</code></td><td style="text-align:left">〰️ <code>:wavy_dash:</code></td><td style="text-align:left">〽️ <code>:part_alternation_mark:</code></td></tr><tr><td style="text-align:left">🔱 <code>:trident:</code></td><td style="text-align:left">🔻 <code>:small_red_triangle_down:</code></td><td style="text-align:left">🔺 <code>:small_red_triangle:</code></td></tr><tr><td style="text-align:left">✅ <code>:white_check_mark:</code></td><td style="text-align:left">🔲 <code>:black_square_button:</code></td><td style="text-align:left">🔳 <code>:white_square_button:</code></td></tr><tr><td style="text-align:left">⚫️ <code>:black_circle:</code></td><td style="text-align:left">⚪️ <code>:white_circle:</code></td><td style="text-align:left">🔴 <code>:red_circle:</code></td></tr><tr><td style="text-align:left">🔵 <code>:large_blue_circle:</code></td><td style="text-align:left">🔷 <code>:large_blue_diamond:</code></td><td style="text-align:left">🔶 <code>:large_orange_diamond:</code></td></tr><tr><td style="text-align:left">🔹 <code>:small_blue_diamond:</code></td><td style="text-align:left">🔸 <code>:small_orange_diamond:</code></td><td style="text-align:left"></td></tr></tbody></table>]]></content>
      
      
      <categories>
          
          <category> Hexo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Hexo </tag>
            
            <tag> Emoji </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>FFmpeg + nginx-http-flv-module + flv.js 实现视频流播放</title>
      <link href="posts/358f95d9.html"/>
      <url>posts/358f95d9.html</url>
      
        <content type="html"><![CDATA[<p>最近项目组接了一个视频流项目，项目的主要核心是将网络摄像头RTSP视频流在WEB端实时播放，经过两天的调查和爬坑，终于实现了视频流的播放。</p><p>接下来为大家讲讲 linux 系统下搭建 <a href="https://github.com/winshining/nginx-http-flv-module/blob/master/README.CN.md">nginx-http-flv-module</a> 的全部过程。</p><h2 id="🌞-前期准备">🌞 前期准备</h2><ol><li>下载VLC（用于测试视频流是否可以播放）：<a href="https://www.videolan.org/">https://www.videolan.org/</a></li><li>下载nginx包：<a href="https://nginx.org/download/nginx-1.16.1.tar.gz">https://nginx.org/download/nginx-1.16.1.tar.gz</a></li><li>下载nginx-http-flv-module 模块包：<a href="https://github.com/winshining/nginx-http-flv-module">https://github.com/winshining/nginx-http-flv-module</a></li><li>下载FFmpeg：<a href="http://www.ffmpeg.org/releases/ffmpeg-4.2.2.tar.bz2">http://www.ffmpeg.org/releases/ffmpeg-4.2.2.tar.bz2</a></li><li>下载yasm（安装FFmpeg可能会报错，所以需要安装yasm）：<a href="http://www.tortall.net/projects/yasm/releases/yasm-1.3.0.tar.gz">http://www.tortall.net/projects/yasm/releases/yasm-1.3.0.tar.gz</a></li><li>下载x264（视频转码需要用到）：<a href="https://git.videolan.org/git/x264.git">https://git.videolan.org/git/x264.git</a></li><li>下载nasm（x264编译时需要安装nasm）：<a href="https://www.nasm.us/pub/nasm/releasebuilds/2.14.02/nasm-2.14.02.tar.bz2">https://www.nasm.us/pub/nasm/releasebuilds/2.14.02/nasm-2.14.02.tar.bz2</a></li></ol><p>下载完以后将所有的文件上传到 <code>/usr/local</code> 文件夹下面</p><p>附：</p><a href=https://pan.baidu.com/s/1gn_D5I-rJTG39YFElow4lw target='_blank' class='LinkCard'><style type=text/css>.LinkCard,.LinkCard:hover{text-decoration:none;border:none!important;color:inherit!important}.LinkCard{position:relative;display:block;margin:5px auto;width:330px;box-sizing:border-box;border-radius:12px;max-width:100%;overflow:hidden;color:inherit;text-decoration:none}.ztext{word-break:break-word;line-height:1.6}.LinkCard-backdrop{position:absolute;top:0;left:0;right:0;bottom:0;background-repeat:no-repeat;-webkit-filter:blur(20px);filter:blur(20px);background-size:cover;background-position:center}.LinkCard,.LinkCard:hover{text-decoration:none;border:none!important;color:inherit!important}.LinkCard-content{position:relative;display:flex;align-items:center;justify-content:space-between;padding:12px;border-radius:inherit;background-color:rgba(246,246,246,0.88)}.LinkCard-text{overflow:hidden;width:260px;}.LinkCard-title{white-space: nowrap;display:-webkit-box;-webkit-line-clamp:2;overflow:hidden;text-overflow:ellipsis;max-height:calc(16px * 1.25 * 2);font-size:16px;font-weight:500;line-height:1.25;color:#1a1a1a}@media(max-width: 767px){.LinkCard-title{font-size:13px;}}.LinkCard-meta{display:flex;margin-top:4px;font-size:14px;line-height:20px;color:#999;white-space:nowrap}.LinkCard-imageCell{margin-left:28px;border-radius:30px;width:70px;}.LinkCard-image{background-image:url('https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/linkcard/spider-man.png');background-size: 100% 100%;display:block;width:65px;height:65px;border-radius:inherit;margin-bottom: 0 !important;}</style><span class=LinkCard-backdrop style=background-image:url(https://zhstatic.zhihu.com/assets/zhihu/editor/zhihu-card-default.svg)></span><span class=LinkCard-content><span class=LinkCard-text><span class=LinkCard-title>以上百度资源链接</span><span class=LinkCard-meta><span style=display:inline-flex;align-items:center><svg class='Zi Zi--InsertLink' fill=currentColor viewBox='0 0 24 24' width=17 height=17><path d='M6.77 17.23c-.905-.904-.94-2.333-.08-3.193l3.059-3.06-1.192-1.19-3.059 3.058c-1.489 1.489-1.427 3.954.138 5.519s4.03 1.627 5.519.138l3.059-3.059-1.192-1.192-3.059 3.06c-.86.86-2.289.824-3.193-.08zm3.016-8.673l1.192 1.192 3.059-3.06c.86-.86 2.289-.824 3.193.08.905.905.94 2.334.08 3.194l-3.059 3.06 1.192 1.19 3.059-3.058c1.489-1.489 1.427-3.954-.138-5.519s-4.03-1.627-5.519-.138L9.786 8.557zm-1.023 6.68c.33.33.863.343 1.177.029l5.34-5.34c.314-.314.3-.846-.03-1.176-.33-.33-.862-.344-1.176-.03l-5.34 5.34c-.314.314-.3.846.03 1.177z' fill-rule=evenodd></path></svg></span><span style='margin-top: -0.1rem;'>https://pan.baidu.com/s/1gn_D5I-rJTG39YFElow4lw</span></span></span><span class='LinkCard-imageCell'><div class='LinkCard-image'></div></span></span></a><p>提取码：ueic</p><h2 id="🌞-搭建环境">🌞 搭建环境</h2><h3 id="🎉-安装nginx">🎉 安装nginx</h3><p>在 /user/local 下创建 nginx 文件夹</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mkdir /usr/local/nginx</span><br></pre></td></tr></table></figure><p>安装依赖项</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">yum -y install unzip</span><br><span class="line">yum -y install gcc-c++ </span><br><span class="line">yum -y install pcre pcre-devel  </span><br><span class="line">yum -y install zlib zlib-devel </span><br><span class="line">yum -y install openssl openssl-devel</span><br></pre></td></tr></table></figure><p>将 /user/local 下面的 nginx-http-flv-module-master.zip 解压到 /usr/local/nginx 下面</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cd /usr/local</span><br><span class="line">unzip nginx-http-flv-module-master.zip  //解压文件</span><br><span class="line">cp -r /usr/local/nginx-http-flv-module-master /usr/local/nginx/nginx-http-flv-module  //解压文件复制到/usr/local/nginx 目录下</span><br></pre></td></tr></table></figure><p>将 nginx-http-flv-module 模板添加到 nginx 中，生成 make 文件并安装 nginx</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">cd /usr/local</span><br><span class="line">tar -zxvf nginx-1.16.1.tar.gz</span><br><span class="line">cd nginx-1.16.1/</span><br><span class="line">./configure --prefix=/usr/local/nginx  --add-module=/usr/local/nginx/nginx-http-flv-module</span><br><span class="line">make &amp;&amp; make install</span><br><span class="line">ln -s /usr/local/nginx/sbin/nginx /usr/local/bin/  //配置nginx为全局变量</span><br><span class="line">nginx -v  //查看nginx是否安装成功</span><br></pre></td></tr></table></figure><p>修改配置文件</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br></pre></td><td class="code"><pre><span class="line">cd /usr/local/nginx/conf</span><br><span class="line">vi nginx.conf</span><br><span class="line"></span><br><span class="line">worker_processes  1; #Nginx开启1个子进程，子进程个数最好跟CPU的核心数一样</span><br><span class="line"><span class="meta">#</span><span class="bash">worker_processes  auto; <span class="comment">#from versions 1.3.8 and 1.2.5</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">worker_cpu_affinity  0001 0010 0100 1000; <span class="comment">#CPU的mask，子进程使用它来绑定CPU核心，避免进程切换造成性能损失</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash">worker_cpu_affinity  auto; <span class="comment">#from version 1.9.10</span></span></span><br><span class="line"></span><br><span class="line">error_log logs/error.log error; #错误日志位置和日志级别，如果使用默认编译选项，位置为/usr/local/nginx/logs/error.log，error表示只打印错误日志</span><br><span class="line"></span><br><span class="line">events &#123;</span><br><span class="line">    worker_connections  4096; #Nginx处理的最大连接数</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">http &#123;</span><br><span class="line">    include             mime.types;</span><br><span class="line">    default_type    application/octet-stream;</span><br><span class="line">    sendfile            on;</span><br><span class="line">    keepalive_timeout  65;</span><br><span class="line"></span><br><span class="line">    server &#123;</span><br><span class="line">        listen       80; #Nginx监听的HTTP请求端口</span><br><span class="line">        server_name  localhost;</span><br><span class="line">        location / &#123;</span><br><span class="line">            root    html; #HTTP请求URL映射到服务器的位置</span><br><span class="line">            index  index.html index.htm; #HTTP请求优先请求的文件</span><br><span class="line">        &#125; </span><br><span class="line"></span><br><span class="line">        location /live &#123;</span><br><span class="line">            flv_live on; #当HTTP请求以/live结尾，匹配这儿，这个选项表示开启了flv直播播放功能</span><br><span class="line">            chunked_transfer_encoding  on; #HTTP协议开启Transfer-Encoding: chunked;方式回复</span><br><span class="line"></span><br><span class="line">            add_header &#x27;Access-Control-Allow-Origin&#x27; &#x27;*&#x27;; #添加额外的HTTP头</span><br><span class="line">            add_header &#x27;Access-Control-Allow-Credentials&#x27; &#x27;true&#x27;; #添加额外的HTTP头</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        location /stat &#123;</span><br><span class="line">            rtmp_stat all;</span><br><span class="line">            rtmp_stat_stylesheet stat.xsl;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        location /stat.xsl &#123;</span><br><span class="line">            root  /usr/local/nginx/module/nginx-http-flv-module;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        location /control &#123;</span><br><span class="line">            rtmp_control all;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        error_page   500 502 503 504  /50x.html; #如果遇到这些HTTP请求错误，Nginx返回50x.html的内容</span><br><span class="line">        location = /50x.html &#123;</span><br><span class="line">            root   html;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">rtmp_auto_push on; #因为Nginx可能开启多个子进程，这个选项表示推流时，媒体流会发布到多个子进程</span><br><span class="line">rtmp_auto_push_reconnect 1s;</span><br><span class="line">rtmp_socket_dir /tmp; #多个子进程情况下，推流时，最开始只有一个子进程在竞争中接收到数据，然后它再relay给其他子进程，他们之间通过unix domain socket传输数据，这个选项表示unix</span><br><span class="line"></span><br><span class="line">rtmp &#123;</span><br><span class="line">    out_queue                4096;</span><br><span class="line">    out_cork                   8;</span><br><span class="line">    max_streams            128; #Nginx能接受的最大的推流数</span><br><span class="line">    timeout                    15s;</span><br><span class="line">    drop_idle_publisher 15s;</span><br><span class="line"></span><br><span class="line">    log_interval 5s; </span><br><span class="line">    log_size     1m; </span><br><span class="line"></span><br><span class="line">    server &#123;</span><br><span class="line">        listen 1935; #Nginx监听的RTMP推流/拉流端口，可以省略，默认监听1935</span><br><span class="line">        server_name 127.0.0.1;</span><br><span class="line"></span><br><span class="line">        application myapp &#123;</span><br><span class="line">            live on; #当推流时，RTMP路径中的APP（RTMP中一个概念）匹配myapp时，开启直播</span><br><span class="line">            record off; #不记录视频</span><br><span class="line">            gop_cache on;  #开启GOP（Group of Picture）缓存，播放器解码时，收到一个完整的GOP才会开始播放，这个是减少播放延迟的选项</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>测试nginx是否好用</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">nginx -t //检查nginx</span><br><span class="line">nginx //启动</span><br><span class="line">ps -ef | grep nginx //查看nginx进程</span><br><span class="line">浏览器输入地址是否可以访问成功</span><br></pre></td></tr></table></figure><h3 id="🎉-安装FFmpeg">🎉 安装FFmpeg</h3><p>安装前期准备下载的nasm</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">cd /usr/local</span><br><span class="line">tar -jxvf nasm-2.14.02.tar.bz2  //如果解压不了的话安装一下bzip2（ yum install -y bzip2 ）</span><br><span class="line">cd nasm-2.14.02/</span><br><span class="line">./configure</span><br><span class="line">make &amp;&amp; make install</span><br></pre></td></tr></table></figure><p>安装前期准备下载的yasm</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">cd /usr/local</span><br><span class="line">tar -zxvf yasm-1.3.0.tar.gz</span><br><span class="line">cd yasm-1.3.0/</span><br><span class="line">./configure</span><br><span class="line">make &amp;&amp; make install</span><br></pre></td></tr></table></figure><p>安装x264（RTSP视频流转码时需要x264）</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cd /usr/local/x264</span><br><span class="line">./configure --enable-static --enable-shared</span><br><span class="line">make &amp;&amp; make install</span><br></pre></td></tr></table></figure><p>安装FFmpeg</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">cd /usr/local</span><br><span class="line">tar -jxvf ffmpeg-4.2.2.tar.bz2</span><br><span class="line">cd ffmpeg-4.2.2/</span><br><span class="line">./configure --prefix=/usr/local/ffmpeg  --enable-gpl --enable-libx264</span><br><span class="line">make &amp;&amp; make install  （FFmpeg编译时间比较长）</span><br><span class="line">ln -s /usr/local/ffmpeg/bin/ffmpeg /usr/local/bin  //配置ffmpeg全局环境变量</span><br><span class="line">ffmpeg -version  //查看ffmpeg是否安装成功</span><br></pre></td></tr></table></figure><p>直接运行FFmpeg可能报如下错误（重点）</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">ffmpeg: error while loading shared libraries: libx264.so.157: cannot open shared object file: No such file or directory</span><br><span class="line">解决：</span><br><span class="line">vi /etc/ld.so.conf</span><br><span class="line">添加libx264.so文件位置</span><br><span class="line">我的是在：/usr/local/lib/ 加入到 ld.so.conf</span><br><span class="line">重载配置:ldconfig</span><br></pre></td></tr></table></figure><h2 id="🌞-推流">🌞 推流</h2><p>推流命令：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ffmpeg -re -rtsp_transport tcp -i &quot;rtsp://admin:Biao456813@192.168.153.194:554/h264/ch1/main/av_stream&quot; -f flv -vcodec libx264 -vprofile baseline -acodec aac -tune zerolatency -preset ultrafast -ar 44100 -strict -2 -ac 1 -f flv -s 1280x720 -q 10 &quot;rtmp://192.168.153.204:1935/myapp/home&quot;</span><br></pre></td></tr></table></figure><p>FFmpeg 命令详解：</p><a href=https://www.cnblogs.com/AllenChou/p/7048528.html target='_blank' class='LinkCard'><style type=text/css>.LinkCard,.LinkCard:hover{text-decoration:none;border:none!important;color:inherit!important}.LinkCard{position:relative;display:block;margin:5px auto;width:330px;box-sizing:border-box;border-radius:12px;max-width:100%;overflow:hidden;color:inherit;text-decoration:none}.ztext{word-break:break-word;line-height:1.6}.LinkCard-backdrop{position:absolute;top:0;left:0;right:0;bottom:0;background-repeat:no-repeat;-webkit-filter:blur(20px);filter:blur(20px);background-size:cover;background-position:center}.LinkCard,.LinkCard:hover{text-decoration:none;border:none!important;color:inherit!important}.LinkCard-content{position:relative;display:flex;align-items:center;justify-content:space-between;padding:12px;border-radius:inherit;background-color:rgba(246,246,246,0.88)}.LinkCard-text{overflow:hidden;width:260px;}.LinkCard-title{white-space: nowrap;display:-webkit-box;-webkit-line-clamp:2;overflow:hidden;text-overflow:ellipsis;max-height:calc(16px * 1.25 * 2);font-size:16px;font-weight:500;line-height:1.25;color:#1a1a1a}@media(max-width: 767px){.LinkCard-title{font-size:13px;}}.LinkCard-meta{display:flex;margin-top:4px;font-size:14px;line-height:20px;color:#999;white-space:nowrap}.LinkCard-imageCell{margin-left:28px;border-radius:30px;width:70px;}.LinkCard-image{background-image:url('https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/linkcard/spider-man.png');background-size: 100% 100%;display:block;width:65px;height:65px;border-radius:inherit;margin-bottom: 0 !important;}</style><span class=LinkCard-backdrop style=background-image:url(https://zhstatic.zhihu.com/assets/zhihu/editor/zhihu-card-default.svg)></span><span class=LinkCard-content><span class=LinkCard-text><span class=LinkCard-title>FFmpeg命令详解</span><span class=LinkCard-meta><span style=display:inline-flex;align-items:center><svg class='Zi Zi--InsertLink' fill=currentColor viewBox='0 0 24 24' width=17 height=17><path d='M6.77 17.23c-.905-.904-.94-2.333-.08-3.193l3.059-3.06-1.192-1.19-3.059 3.058c-1.489 1.489-1.427 3.954.138 5.519s4.03 1.627 5.519.138l3.059-3.059-1.192-1.192-3.059 3.06c-.86.86-2.289.824-3.193-.08zm3.016-8.673l1.192 1.192 3.059-3.06c.86-.86 2.289-.824 3.193.08.905.905.94 2.334.08 3.194l-3.059 3.06 1.192 1.19 3.059-3.058c1.489-1.489 1.427-3.954-.138-5.519s-4.03-1.627-5.519-.138L9.786 8.557zm-1.023 6.68c.33.33.863.343 1.177.029l5.34-5.34c.314-.314.3-.846-.03-1.176-.33-.33-.862-.344-1.176-.03l-5.34 5.34c-.314.314-.3.846.03 1.177z' fill-rule=evenodd></path></svg></span><span style='margin-top: -0.1rem;'>https://www.cnblogs.com/AllenChou/p/7048528.html</span></span></span><span class='LinkCard-imageCell'><div class='LinkCard-image'></div></span></span></a><p>x264 命令详解：</p><a href=https://blog.csdn.net/ww506772362/article/details/41445481 target='_blank' class='LinkCard'><style type=text/css>.LinkCard,.LinkCard:hover{text-decoration:none;border:none!important;color:inherit!important}.LinkCard{position:relative;display:block;margin:5px auto;width:330px;box-sizing:border-box;border-radius:12px;max-width:100%;overflow:hidden;color:inherit;text-decoration:none}.ztext{word-break:break-word;line-height:1.6}.LinkCard-backdrop{position:absolute;top:0;left:0;right:0;bottom:0;background-repeat:no-repeat;-webkit-filter:blur(20px);filter:blur(20px);background-size:cover;background-position:center}.LinkCard,.LinkCard:hover{text-decoration:none;border:none!important;color:inherit!important}.LinkCard-content{position:relative;display:flex;align-items:center;justify-content:space-between;padding:12px;border-radius:inherit;background-color:rgba(246,246,246,0.88)}.LinkCard-text{overflow:hidden;width:260px;}.LinkCard-title{white-space: nowrap;display:-webkit-box;-webkit-line-clamp:2;overflow:hidden;text-overflow:ellipsis;max-height:calc(16px * 1.25 * 2);font-size:16px;font-weight:500;line-height:1.25;color:#1a1a1a}@media(max-width: 767px){.LinkCard-title{font-size:13px;}}.LinkCard-meta{display:flex;margin-top:4px;font-size:14px;line-height:20px;color:#999;white-space:nowrap}.LinkCard-imageCell{margin-left:28px;border-radius:30px;width:70px;}.LinkCard-image{background-image:url('https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/linkcard/spider-man.png');background-size: 100% 100%;display:block;width:65px;height:65px;border-radius:inherit;margin-bottom: 0 !important;}</style><span class=LinkCard-backdrop style=background-image:url(https://zhstatic.zhihu.com/assets/zhihu/editor/zhihu-card-default.svg)></span><span class=LinkCard-content><span class=LinkCard-text><span class=LinkCard-title>x264 命令详解</span><span class=LinkCard-meta><span style=display:inline-flex;align-items:center><svg class='Zi Zi--InsertLink' fill=currentColor viewBox='0 0 24 24' width=17 height=17><path d='M6.77 17.23c-.905-.904-.94-2.333-.08-3.193l3.059-3.06-1.192-1.19-3.059 3.058c-1.489 1.489-1.427 3.954.138 5.519s4.03 1.627 5.519.138l3.059-3.059-1.192-1.192-3.059 3.06c-.86.86-2.289.824-3.193-.08zm3.016-8.673l1.192 1.192 3.059-3.06c.86-.86 2.289-.824 3.193.08.905.905.94 2.334.08 3.194l-3.059 3.06 1.192 1.19 3.059-3.058c1.489-1.489 1.427-3.954-.138-5.519s-4.03-1.627-5.519-.138L9.786 8.557zm-1.023 6.68c.33.33.863.343 1.177.029l5.34-5.34c.314-.314.3-.846-.03-1.176-.33-.33-.862-.344-1.176-.03l-5.34 5.34c-.314.314-.3.846.03 1.177z' fill-rule=evenodd></path></svg></span><span style='margin-top: -0.1rem;'>https://blog.csdn.net/ww506772362/article/details/41445481</span></span></span><span class='LinkCard-imageCell'><div class='LinkCard-image'></div></span></span></a><h2 id="🌞-拉流播放（flv-js）">🌞 拉流播放（flv.js）</h2><a href=https://pan.baidu.com/s/1DA9lhVDy9rJZkU52BuHffw target='_blank' class='LinkCard'><style type=text/css>.LinkCard,.LinkCard:hover{text-decoration:none;border:none!important;color:inherit!important}.LinkCard{position:relative;display:block;margin:5px auto;width:330px;box-sizing:border-box;border-radius:12px;max-width:100%;overflow:hidden;color:inherit;text-decoration:none}.ztext{word-break:break-word;line-height:1.6}.LinkCard-backdrop{position:absolute;top:0;left:0;right:0;bottom:0;background-repeat:no-repeat;-webkit-filter:blur(20px);filter:blur(20px);background-size:cover;background-position:center}.LinkCard,.LinkCard:hover{text-decoration:none;border:none!important;color:inherit!important}.LinkCard-content{position:relative;display:flex;align-items:center;justify-content:space-between;padding:12px;border-radius:inherit;background-color:rgba(246,246,246,0.88)}.LinkCard-text{overflow:hidden;width:260px;}.LinkCard-title{white-space: nowrap;display:-webkit-box;-webkit-line-clamp:2;overflow:hidden;text-overflow:ellipsis;max-height:calc(16px * 1.25 * 2);font-size:16px;font-weight:500;line-height:1.25;color:#1a1a1a}@media(max-width: 767px){.LinkCard-title{font-size:13px;}}.LinkCard-meta{display:flex;margin-top:4px;font-size:14px;line-height:20px;color:#999;white-space:nowrap}.LinkCard-imageCell{margin-left:28px;border-radius:30px;width:70px;}.LinkCard-image{background-image:url('https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/linkcard/spider-man.png');background-size: 100% 100%;display:block;width:65px;height:65px;border-radius:inherit;margin-bottom: 0 !important;}</style><span class=LinkCard-backdrop style=background-image:url(https://zhstatic.zhihu.com/assets/zhihu/editor/zhihu-card-default.svg)></span><span class=LinkCard-content><span class=LinkCard-text><span class=LinkCard-title>flv.js百度资源链接</span><span class=LinkCard-meta><span style=display:inline-flex;align-items:center><svg class='Zi Zi--InsertLink' fill=currentColor viewBox='0 0 24 24' width=17 height=17><path d='M6.77 17.23c-.905-.904-.94-2.333-.08-3.193l3.059-3.06-1.192-1.19-3.059 3.058c-1.489 1.489-1.427 3.954.138 5.519s4.03 1.627 5.519.138l3.059-3.059-1.192-1.192-3.059 3.06c-.86.86-2.289.824-3.193-.08zm3.016-8.673l1.192 1.192 3.059-3.06c.86-.86 2.289-.824 3.193.08.905.905.94 2.334.08 3.194l-3.059 3.06 1.192 1.19 3.059-3.058c1.489-1.489 1.427-3.954-.138-5.519s-4.03-1.627-5.519-.138L9.786 8.557zm-1.023 6.68c.33.33.863.343 1.177.029l5.34-5.34c.314-.314.3-.846-.03-1.176-.33-.33-.862-.344-1.176-.03l-5.34 5.34c-.314.314-.3.846.03 1.177z' fill-rule=evenodd></path></svg></span><span style='margin-top: -0.1rem;'>https://pan.baidu.com/s/1DA9lhVDy9rJZkU52BuHffw</span></span></span><span class='LinkCard-imageCell'><div class='LinkCard-image'></div></span></span></a><p>提取码：47w1</p><p>Html代码：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">content</span>=<span class="string">&quot;text/html; charset=utf-8&quot;</span> <span class="attr">http-equiv</span>=<span class="string">&quot;Content-Type&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">title</span>&gt;</span>flv.js demo<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="css">    <span class="selector-class">.mainContainer</span> &#123;</span></span><br><span class="line">      display: block;</span><br><span class="line">      width: 1024px;</span><br><span class="line">      margin-left: auto;</span><br><span class="line">      margin-right: auto;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">    <span class="selector-class">.urlInput</span> &#123;</span></span><br><span class="line">      display: block;</span><br><span class="line">      width: 100%;</span><br><span class="line">      margin-left: auto;</span><br><span class="line">      margin-right: auto;</span><br><span class="line">      margin-top: 8px;</span><br><span class="line">      margin-bottom: 8px;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">    <span class="selector-class">.centeredVideo</span> &#123;</span></span><br><span class="line">      display: block;</span><br><span class="line">      width: 100%;</span><br><span class="line">      height: 576px;</span><br><span class="line">      margin-left: auto;</span><br><span class="line">      margin-right: auto;</span><br><span class="line">      margin-bottom: auto;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">    <span class="selector-class">.controls</span> &#123;</span></span><br><span class="line">      display: block;</span><br><span class="line">      width: 100%;</span><br><span class="line">      text-align: center;</span><br><span class="line">      margin-left: auto;</span><br><span class="line">      margin-right: auto;</span><br><span class="line">    &#125;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">&quot;mainContainer&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">video</span> <span class="attr">name</span>=<span class="string">&quot;videoElement&quot;</span> <span class="attr">id</span>=<span class="string">&quot;videoElement&quot;</span> <span class="attr">class</span>=<span class="string">&quot;centeredVideo&quot;</span> <span class="attr">controls</span> <span class="attr">muted</span> <span class="attr">autoplay</span> <span class="attr">width</span>=<span class="string">&quot;1024&quot;</span> <span class="attr">height</span>=<span class="string">&quot;576&quot;</span>&gt;</span></span><br><span class="line">      Your browser is too old which doesn&#x27;t support HTML5 video.</span><br><span class="line">    <span class="tag">&lt;/<span class="name">video</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;flv.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="javascript">    <span class="function"><span class="keyword">function</span> <span class="title">start</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">      <span class="keyword">if</span> (flvjs.isSupported()) &#123;</span></span><br><span class="line"><span class="javascript">        <span class="keyword">var</span> videoElement = <span class="built_in">document</span>.getElementById(<span class="string">&#x27;videoElement&#x27;</span>);</span></span><br><span class="line"><span class="javascript">        <span class="keyword">var</span> flvPlayer = flvjs.createPlayer(&#123;</span></span><br><span class="line"><span class="javascript">          type: <span class="string">&#x27;flv&#x27;</span>,</span></span><br><span class="line"><span class="javascript">          url: <span class="string">&#x27;http://192.168.153.204/live?port=1935&amp;app=myapp&amp;stream=home&#x27;</span></span></span><br><span class="line">        &#125;);</span><br><span class="line">        flvPlayer.attachMediaElement(videoElement);</span><br><span class="line">        flvPlayer.load();</span><br><span class="line">        flvPlayer.play();</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="javascript">    <span class="built_in">document</span>.addEventListener(<span class="string">&#x27;DOMContentLoaded&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span></span><br><span class="line">      start();</span><br><span class="line">    &#125;);</span><br><span class="line">  <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><p>以上为 linux 下搭建视频流服务器的全部过程，如有不正，欢迎指出。</p>]]></content>
      
      
      <categories>
          
          <category> 流媒体服务 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> nginx-http-flv-module </tag>
            
            <tag> 视频流播放 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Vue axios 刷新 Jwt</title>
      <link href="posts/fc31ea3.html"/>
      <url>posts/fc31ea3.html</url>
      
        <content type="html"><![CDATA[<p>最近做项目，一个需求就是Jwt token的失效的时候，如果用户还在操作，那么希望无感刷新token，让用户的操作不受影响。</p><p>两种核心思路：</p><ol><li><p>前端发起ajax请求 =&gt; 后端发现jwt已经过期,返回50014状态码 =&gt; 前端拦截响应数据,并发起刷新token的请求 =&gt; 拿到最新的jwt和refresh,保存到本地 =&gt; 拿到最新的jwt去进行刚刚未请求成功的接口 =&gt; 获取到刚刚请求的结果,覆盖第一次请求失败(状态码为50014)的响应数据 =&gt; 返回第二次请求的结果.</p></li><li><p>前端发起ajax请求 =&gt; 后端发现jwt已经过期,返回50014状态码 =&gt; 前端拦截响应数据,并发起刷新token的请求 =&gt; 后端返回了10007的状态码(这个时候代表refreshJwt也过期了,需要进行重新登录了) =&gt; 真正的过期了,需要跳转到登录界面.</p></li></ol><h2 id="新建一个refreshJwt-js文件">新建一个refreshJwt.js文件</h2><p>代码如下：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">import &#123; getRefreshToken, setRefreshToken, setToken &#125; from <span class="string">&#x27;./auth&#x27;</span></span><br><span class="line">import axios from <span class="string">&#x27;axios&#x27;</span></span><br><span class="line">import store from <span class="string">&#x27;../store&#x27;</span></span><br><span class="line">import &#123; MessageBox &#125; from <span class="string">&#x27;element-ui&#x27;</span></span><br><span class="line">import i18n from <span class="string">&#x27;@/lang&#x27;</span></span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * 刷新JWT设计思路：</span><br><span class="line"> *</span><br><span class="line"> * 第一种情况: 前端发起ajax请求 =&gt; 后端发现jwt已经过期,返回50014状态码 =&gt; 前端拦截响应数据,并发起刷新token的请求 =&gt; 拿到最新的jwt和refresh,保存到本地 =&gt; 拿到最新的jwt去进行刚刚未请求成功的接口 =&gt; 获取到刚刚请求的结果,覆盖第一次请求失败(状态码为50014)的响应数据 =&gt; 返回第二次请求的结果.</span><br><span class="line"> * 第一种情况: 前端发起ajax请求 =&gt; 后端发现jwt已经过期,返回50014状态码 =&gt; 前端拦截响应数据,并发起刷新token的请求 =&gt; 后端返回了10007的状态码(这个时候代表refreshJwt也过期了,需要进行重新登录了) =&gt; 真正的过期了,需要跳转到登录界面.</span><br><span class="line"> * @returns &#123;Promise&lt;void&gt;&#125;</span><br><span class="line"> */</span><br><span class="line"><span class="built_in">export</span> default async() =&gt; &#123;</span><br><span class="line">  // process.env.BASE_API是项目环境API</span><br><span class="line">  const url = process.env.BASE_API + <span class="string">&#x27;/refreshJwt/&#x27;</span> + getRefreshToken()</span><br><span class="line">  await axios.post(url).<span class="keyword">then</span>(res =&gt; &#123;</span><br><span class="line">    <span class="keyword">if</span> (res.data.code === 10007) &#123;</span><br><span class="line">      // 身份过期，请重新登录</span><br><span class="line">      MessageBox.confirm(</span><br><span class="line">        <span class="string">&#x27;Token失效,你已被登出，可以取消继续留在该页面，或者重新登录&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;确定登出&#x27;</span>,</span><br><span class="line">        &#123;</span><br><span class="line">          confirmButtonText: <span class="string">&#x27;重新登陆&#x27;</span>,</span><br><span class="line">          cancelButtonText: <span class="string">&#x27;取消&#x27;</span>,</span><br><span class="line">          <span class="built_in">type</span>: <span class="string">&#x27;warning&#x27;</span></span><br><span class="line">        &#125;</span><br><span class="line">      ).<span class="keyword">then</span>(() =&gt; &#123;</span><br><span class="line">        store.dispatch(<span class="string">&#x27;FedLogOut&#x27;</span>).<span class="keyword">then</span>(() =&gt; &#123;</span><br><span class="line">          location.reload() // 为了重新实例化vue-router对象 避免bug</span><br><span class="line">        &#125;)</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      // 设置token</span><br><span class="line">      setToken(res.data.data.token)</span><br><span class="line">      store.commit(<span class="string">&#x27;SET_TOKEN&#x27;</span>, res.data.data.token)</span><br><span class="line"></span><br><span class="line">      // 设置refreshToken</span><br><span class="line">      setRefreshToken(res.data.data.refreshToken)</span><br><span class="line">      store.commit(<span class="string">&#x27;SET_REFRESH_TOKEN&#x27;</span>, res.data.data.refreshToken)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;).catch(error =&gt; &#123;</span><br><span class="line">    console.log(error)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="配置拦截器">配置拦截器</h2><p>代码如下：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br></pre></td><td class="code"><pre><span class="line">import axios from <span class="string">&#x27;axios&#x27;</span></span><br><span class="line">import i18n from <span class="string">&#x27;@/lang&#x27;</span></span><br><span class="line">import &#123; Message, MessageBox &#125; from <span class="string">&#x27;element-ui&#x27;</span></span><br><span class="line">import store from <span class="string">&#x27;../store&#x27;</span></span><br><span class="line">import &#123; getToken, getRefreshToken &#125; from <span class="string">&#x27;./auth&#x27;</span></span><br><span class="line">import refreshJwt from <span class="string">&#x27;./refreshJwt&#x27;</span></span><br><span class="line"><span class="built_in">let</span> isLock = <span class="literal">true</span></span><br><span class="line"></span><br><span class="line">// 创建axios实例</span><br><span class="line">const service = axios.create(&#123;</span><br><span class="line">  baseURL: process.env.BASE_API, // api 的 base_url</span><br><span class="line">  timeout: 50000, // 请求超时时间,</span><br><span class="line">  headers: &#123;</span><br><span class="line">    <span class="string">&#x27;Content-Type&#x27;</span>: <span class="string">&#x27;application/json;charset=utf-8&#x27;</span></span><br><span class="line">  &#125;</span><br><span class="line">  // withCredentials : <span class="literal">true</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * 通用请求拦截配置</span><br><span class="line"> * @param &#123;*&#125; config</span><br><span class="line"> */</span><br><span class="line">const axiosConf = (config) =&gt; &#123;</span><br><span class="line">  <span class="keyword">if</span> (store.getters.token) &#123;</span><br><span class="line">    config.headers[<span class="string">&#x27;X-Token&#x27;</span>] = getToken() // 让每个请求携带自定义token 请根据实际情况自行修改</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="built_in">return</span> config</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// request 拦截器</span><br><span class="line">service.interceptors.request.use(axiosConf, error =&gt; &#123;</span><br><span class="line">  console.log(error)</span><br><span class="line">  <span class="built_in">return</span> Promise.reject(error)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">// response 拦截器</span><br><span class="line">service.interceptors.response.use(</span><br><span class="line">  async response =&gt; &#123;</span><br><span class="line">    /**</span><br><span class="line">     * code为非0是抛错 可结合自己业务进行修改</span><br><span class="line">     */</span><br><span class="line">    <span class="built_in">let</span> data = &#123;&#125;</span><br><span class="line">    const res = response.data</span><br><span class="line">    const code = Number(res.code)</span><br><span class="line">    <span class="keyword">if</span> (code !== 0) &#123;</span><br><span class="line">      // 50014:Token 过期了;</span><br><span class="line">      <span class="keyword">if</span> (code === 50014) &#123;</span><br><span class="line">        <span class="keyword">if</span> ((getRefreshToken() !== <span class="string">&#x27;undefined&#x27;</span> &amp;&amp; getRefreshToken()) &amp;&amp; isLock) &#123;</span><br><span class="line">          // 异步刷新JWT</span><br><span class="line">          await refreshJwt()</span><br><span class="line">          // 这里防止并发的时候造成死循环,所以要加锁</span><br><span class="line">          isLock = <span class="literal">false</span></span><br><span class="line">          // 刷新完成,继续之前的请求</span><br><span class="line">          response.config.headers[<span class="string">&#x27;X-Token&#x27;</span>] = getToken()</span><br><span class="line">          const result = await axios.request(axiosConf(response.config))</span><br><span class="line">          <span class="keyword">if</span> (result) &#123;</span><br><span class="line">            data = result.data</span><br><span class="line">            isLock = <span class="literal">true</span></span><br><span class="line">          &#125;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123; // 身份过期，请重新登录</span><br><span class="line">          MessageBox.confirm(</span><br><span class="line">             <span class="string">&#x27;Token失效,你已被登出，可以取消继续留在该页面，或者重新登录&#x27;</span>,</span><br><span class="line">             <span class="string">&#x27;确定登出&#x27;</span>,</span><br><span class="line">             &#123;</span><br><span class="line">              confirmButtonText: <span class="string">&#x27;重新登陆&#x27;</span>,</span><br><span class="line">              cancelButtonText: <span class="string">&#x27;取消&#x27;</span>,</span><br><span class="line">              <span class="built_in">type</span>: <span class="string">&#x27;warning&#x27;</span></span><br><span class="line">             &#125;</span><br><span class="line">          ).<span class="keyword">then</span>(() =&gt; &#123;</span><br><span class="line">            store.dispatch(<span class="string">&#x27;FedLogOut&#x27;</span>).<span class="keyword">then</span>(() =&gt; &#123;</span><br><span class="line">              location.reload() // 为了重新实例化vue-router对象 避免bug</span><br><span class="line">            &#125;)</span><br><span class="line">          &#125;)</span><br><span class="line">        &#125;</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        // 消息提示</span><br><span class="line">        message(res.message)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      data = response.data</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">return</span> data</span><br><span class="line">  &#125;,</span><br><span class="line">  error =&gt; &#123;</span><br><span class="line">    console.log(<span class="string">&#x27;错误信息：&#x27;</span> + error)</span><br><span class="line">    message(<span class="string">&#x27;哎呀~ (ಥ﹏ಥ)网络又开小差了,请稍后刷新重试!&#x27;</span>)</span><br><span class="line">    <span class="built_in">return</span> Promise.reject(error)</span><br><span class="line">  &#125;</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * 消息提醒</span><br><span class="line"> * @param msg</span><br><span class="line"> */</span><br><span class="line"><span class="built_in">export</span> <span class="keyword">function</span> message(msg) &#123;</span><br><span class="line">  Message(&#123;</span><br><span class="line">    message: msg,</span><br><span class="line">    <span class="built_in">type</span>: <span class="string">&#x27;error&#x27;</span>,</span><br><span class="line">    showClose: <span class="literal">true</span>,</span><br><span class="line">    duration: 5 * 1000</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">export</span> default service</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>小生的刷新token思路如此，如阁下有更好的思路，方便分享，请留言哦。</p>]]></content>
      
      
      <categories>
          
          <category> Vue </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Vue </tag>
            
            <tag> Jwt </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>使用SpringBoot AOP 记录操作日志、异常日志</title>
      <link href="posts/4598d3ed.html"/>
      <url>posts/4598d3ed.html</url>
      
        <content type="html"><![CDATA[<p>平时我们在做项目时经常需要对一些重要功能操作记录日志，方便以后跟踪是谁在操作此功能；我们在操作某些功能时也有可能会发生异常，但是每次发生异常要定位原因我们都要到服务器去查询日志才能找到，而且也不能对发生的异常进行统计，从而改进我们的项目，要是能做个功能专门来记录操作日志和异常日志那就好了， 当然我们肯定有方法来做这件事情，而且也不会很难，我们可以在需要的方法中增加记录日志的代码，和在每个方法中增加记录异常的代码，最终把记录的日志存到数据库中。听起来好像很容易，但是我们做起来会发现，做这项工作很繁琐，而且都是在做一些重复性工作，还增加大量冗余代码，这种方式记录日志肯定是不可行的。</p><p>我们以前学过Spring 三大特性，IOC（控制反转），DI（依赖注入），AOP（面向切面），那其中AOP的主要功能就是将日志记录，性能统计，安全控制，事务处理，异常处理等代码从业务逻辑代码中划分出来。今天我们就来用SpringBoot Aop 来做日志记录，好了，废话说了一大堆还是上货吧。</p><h2 id="💥-创建日志记录表、异常日志表，表结构如下：">💥 创建日志记录表、异常日志表，表结构如下：</h2><p>异常日志表</p><p><img src="https://s2.ax1x.com/2020/02/25/3YajRx.png" class="lazyload placeholder" data-srcset="https://s2.ax1x.com/2020/02/25/3YajRx.png" srcset="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/site-img/img-loading.gif" alt="异常日志表"></p><p>操作日志表</p><p><img src="https://s2.ax1x.com/2020/02/25/3YdQoj.png" class="lazyload placeholder" data-srcset="https://s2.ax1x.com/2020/02/25/3YdQoj.png" srcset="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/site-img/img-loading.gif" alt="操作日志表"></p><h2 id="💥-添加Maven依赖">💥 添加Maven依赖</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- Spring Boot 面向切面AOP --&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;org.springframework&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;spring-aop&lt;/artifactId&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;org.aspectj&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;aspectjweaver&lt;/artifactId&gt;</span><br><span class="line">    &lt;version&gt;1.8.13&lt;/version&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure><h2 id="💥-创建操作日志注解类Log-java">💥 创建操作日志注解类Log.java</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.scaffolding.demo.annotation;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.lang.annotation.*;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 自定义操作日志注解</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span>: Xuxu</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span>: 2020-02-17 18:35项目日志</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"><span class="meta">@Target(ElementType.METHOD)</span> <span class="comment">//注解放置的目标位置,METHOD是可注解在方法级别上</span></span><br><span class="line"><span class="meta">@Retention(RetentionPolicy.RUNTIME)</span> <span class="comment">//注解在哪个阶段执行</span></span><br><span class="line"><span class="meta">@Documented</span></span><br><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> Log &#123;</span><br><span class="line">    <span class="function">String <span class="title">operationModule</span><span class="params">()</span> <span class="keyword">default</span> &quot;&quot;</span>; <span class="comment">// 操作模块</span></span><br><span class="line"></span><br><span class="line">    <span class="function">String <span class="title">operationType</span><span class="params">()</span> <span class="keyword">default</span> &quot;&quot;</span>;   <span class="comment">// 操作类型</span></span><br><span class="line"></span><br><span class="line">    <span class="function">String <span class="title">operationDesc</span><span class="params">()</span> <span class="keyword">default</span> &quot;&quot;</span>;   <span class="comment">// 操作说明</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="💥-创建切面类记录操作日志和异常日志">💥 创建切面类记录操作日志和异常日志</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.scaffolding.demo.config;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.alibaba.fastjson.JSON;</span><br><span class="line"><span class="keyword">import</span> com.scaffolding.demo.annotation.Log;</span><br><span class="line"><span class="keyword">import</span> com.scaffolding.demo.common.BaseController;</span><br><span class="line"><span class="keyword">import</span> com.scaffolding.demo.sys.model.ExceptionLog;</span><br><span class="line"><span class="keyword">import</span> com.scaffolding.demo.sys.model.OperationLog;</span><br><span class="line"><span class="keyword">import</span> com.scaffolding.demo.sys.service.ExceptionLogService;</span><br><span class="line"><span class="keyword">import</span> com.scaffolding.demo.sys.service.OperationLogService;</span><br><span class="line"><span class="keyword">import</span> com.scaffolding.demo.sys.service.UserService;</span><br><span class="line"><span class="keyword">import</span> com.scaffolding.demo.utils.IPUtil;</span><br><span class="line"><span class="keyword">import</span> lombok.extern.slf4j.Slf4j;</span><br><span class="line"><span class="keyword">import</span> org.aspectj.lang.JoinPoint;</span><br><span class="line"><span class="keyword">import</span> org.aspectj.lang.annotation.AfterReturning;</span><br><span class="line"><span class="keyword">import</span> org.aspectj.lang.annotation.AfterThrowing;</span><br><span class="line"><span class="keyword">import</span> org.aspectj.lang.annotation.Aspect;</span><br><span class="line"><span class="keyword">import</span> org.aspectj.lang.annotation.Pointcut;</span><br><span class="line"><span class="keyword">import</span> org.aspectj.lang.reflect.MethodSignature;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Value;</span><br><span class="line"><span class="keyword">import</span> org.springframework.core.DefaultParameterNameDiscoverer;</span><br><span class="line"><span class="keyword">import</span> org.springframework.core.ParameterNameDiscoverer;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.context.request.RequestAttributes;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.context.request.RequestContextHolder;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.Method;</span><br><span class="line"><span class="keyword">import</span> java.time.LocalDateTime;</span><br><span class="line"><span class="keyword">import</span> java.util.HashMap;</span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"><span class="keyword">import</span> java.util.Objects;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 切面处理类，操作日志 异常日志记录处理</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span>: Xuxu</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span>: 2020-02-17 18:46</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="meta">@Aspect</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">OperationLogAspect</span> <span class="keyword">extends</span> <span class="title">BaseController</span> </span>&#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 操作版本号</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;app.version&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String version;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> OperationLogService operationLogService;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> ExceptionLogService exceptionLogService;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UserService userService;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 设置操作日志切入点 记录操作日志 在注解的位置切入代码</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Pointcut(&quot;@annotation(com.scaffolding.demo.annotation.Log)&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">operationLogPointCut</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 设置操作异常切入点记录异常日志 扫描所有controller包下操作</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Pointcut(&quot;execution(* com.scaffolding.demo.sys.controller..*.*(..))&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">operationExceptionLogPointCut</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 正常返回通知，拦截用户操作日志，连接点正常执行完成后执行， 如果连接点抛出异常，则不会执行</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> joinPoint 切入点</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> results   返回结果</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@AfterReturning(value = &quot;operationLogPointCut()&quot;, returning = &quot;results&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">saveOperationLog</span><span class="params">(JoinPoint joinPoint, Object results)</span> </span>&#123;</span><br><span class="line">        log.info(<span class="string">&quot;开始执行拦截用户操作日志&quot;</span>);</span><br><span class="line">        <span class="comment">// 获取RequestAttributes</span></span><br><span class="line">        RequestAttributes requestAttributes = RequestContextHolder.getRequestAttributes();</span><br><span class="line">        <span class="comment">// 从获取RequestAttributes中获取HttpServletRequest的信息</span></span><br><span class="line">        HttpServletRequest request = (HttpServletRequest) Objects.requireNonNull(requestAttributes)</span><br><span class="line">                .resolveReference(RequestAttributes.REFERENCE_REQUEST);</span><br><span class="line"></span><br><span class="line">        OperationLog operationLog = <span class="keyword">new</span> OperationLog();</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">// 从切面织入点处通过反射机制获取织入点处的方法</span></span><br><span class="line">            MethodSignature signature = (MethodSignature) joinPoint.getSignature();</span><br><span class="line">            <span class="comment">// 获取切入点所在的方法</span></span><br><span class="line">            Method method = signature.getMethod();</span><br><span class="line">            <span class="comment">// 获取操作</span></span><br><span class="line">            Log log = method.getAnnotation(Log.class);</span><br><span class="line">            <span class="keyword">if</span> (log != <span class="keyword">null</span>) &#123;</span><br><span class="line">                <span class="comment">// 操作模块</span></span><br><span class="line">                operationLog.setModule(log.operationModule());</span><br><span class="line">                <span class="comment">// 操作类型</span></span><br><span class="line">                operationLog.setType(log.operationType());</span><br><span class="line">                <span class="comment">// 操作描述</span></span><br><span class="line">                operationLog.setDescription(log.operationDesc());</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">// 获取请求的类名</span></span><br><span class="line">            String className = joinPoint.getTarget().getClass().getName();</span><br><span class="line">            <span class="comment">// 获取请求的方法名</span></span><br><span class="line">            String methodName = method.getName();</span><br><span class="line">            <span class="comment">// 请求方法</span></span><br><span class="line">            operationLog.setMethod(className + <span class="string">&quot;.&quot;</span> + methodName);</span><br><span class="line">            <span class="comment">// 请求的参数</span></span><br><span class="line">            Map&lt;String, Object&gt; rtnMap = convertMap(joinPoint, method);</span><br><span class="line">            <span class="comment">// 将参数所在的数组转换成json</span></span><br><span class="line">            String params = JSON.toJSONString(rtnMap);</span><br><span class="line">            <span class="comment">// 请求参数</span></span><br><span class="line">            operationLog.setRequestParam(params);</span><br><span class="line">            <span class="comment">// 返回结果</span></span><br><span class="line">            operationLog.setResponseParam(JSON.toJSONString(results));</span><br><span class="line">            <span class="comment">// 请求用户ID</span></span><br><span class="line">            operationLog.setUserId(getUserId());</span><br><span class="line">            <span class="comment">// 请求用户名称</span></span><br><span class="line">            operationLog.setUserName(userService.getById(getUserId()).getNickName());</span><br><span class="line">            <span class="comment">// 请求IP</span></span><br><span class="line">            operationLog.setIp(IPUtil.getRequestIpAddress(request));</span><br><span class="line">            <span class="comment">// 请求URI</span></span><br><span class="line">            operationLog.setUri(request.getRequestURI());</span><br><span class="line">            <span class="comment">// 创建时间</span></span><br><span class="line">            operationLog.setCreateTime(LocalDateTime.now());</span><br><span class="line">            <span class="comment">// 操作版本</span></span><br><span class="line">            operationLog.setVersion(version);</span><br><span class="line">            operationLogService.save(operationLog);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            log.error(<span class="string">&quot;拦截用户操作日志异常&quot;</span>);</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 异常返回通知，用于拦截异常日志信息 连接点抛出异常后执行</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> joinPoint 切入点</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> exception 异常信息</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@AfterThrowing(pointcut = &quot;operationExceptionLogPointCut()&quot;, throwing = &quot;exception&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">saveExceptionLog</span><span class="params">(JoinPoint joinPoint, Throwable exception)</span> </span>&#123;</span><br><span class="line">        log.info(<span class="string">&quot;开始拦截异常日志信息&quot;</span>);</span><br><span class="line">        <span class="comment">// 获取RequestAttributes</span></span><br><span class="line">        RequestAttributes requestAttributes = RequestContextHolder.getRequestAttributes();</span><br><span class="line">        <span class="comment">// 从获取RequestAttributes中获取HttpServletRequest的信息</span></span><br><span class="line">        HttpServletRequest request = (HttpServletRequest) Objects.requireNonNull(requestAttributes)</span><br><span class="line">                .resolveReference(RequestAttributes.REFERENCE_REQUEST);</span><br><span class="line"></span><br><span class="line">        ExceptionLog exceptionLog = <span class="keyword">new</span> ExceptionLog();</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">// 从切面织入点处通过反射机制获取织入点处的方法</span></span><br><span class="line">            MethodSignature signature = (MethodSignature) joinPoint.getSignature();</span><br><span class="line">            <span class="comment">// 获取切入点所在的方法</span></span><br><span class="line">            Method method = signature.getMethod();</span><br><span class="line">            <span class="comment">// 获取请求的类名</span></span><br><span class="line">            String className = joinPoint.getTarget().getClass().getName();</span><br><span class="line">            <span class="comment">// 获取请求的方法名</span></span><br><span class="line">            String methodName = method.getName();</span><br><span class="line">            <span class="comment">// 请求的参数</span></span><br><span class="line">            Map&lt;String, Object&gt; rtnMap = convertMap(joinPoint, method);</span><br><span class="line">            <span class="comment">// 将参数所在的数组转换成json</span></span><br><span class="line">            String params = JSON.toJSONString(rtnMap);</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 请求参数</span></span><br><span class="line">            exceptionLog.setRequestParam(params);</span><br><span class="line">            <span class="comment">// 请求方法名</span></span><br><span class="line">            exceptionLog.setMethod(className + <span class="string">&quot;.&quot;</span> + methodName);</span><br><span class="line">            <span class="comment">// 异常名称</span></span><br><span class="line">            exceptionLog.setName(exception.getClass().getName());</span><br><span class="line">            <span class="comment">// 异常信息</span></span><br><span class="line">            exceptionLog.setMessage(stackTraceToString(exception.getClass().getName(), exception.getMessage(), exception.getStackTrace()));</span><br><span class="line">            <span class="comment">// 操作员ID</span></span><br><span class="line">            exceptionLog.setUserId(getUserId());</span><br><span class="line">            <span class="comment">// 操作员名称</span></span><br><span class="line">            exceptionLog.setUserName(userService.getById(getUserId()).getNickName());</span><br><span class="line">            <span class="comment">// 操作URI</span></span><br><span class="line">            exceptionLog.setUri(request.getRequestURI());</span><br><span class="line">            <span class="comment">// 操作员IP</span></span><br><span class="line">            exceptionLog.setIp(IPUtil.getRequestIpAddress(request));</span><br><span class="line">            <span class="comment">// 操作版本号</span></span><br><span class="line">            exceptionLog.setVersion(version);</span><br><span class="line">            <span class="comment">// 发生异常时间</span></span><br><span class="line">            exceptionLog.setCreateTime(LocalDateTime.now());</span><br><span class="line"></span><br><span class="line">            exceptionLogService.save(exceptionLog);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            log.error(<span class="string">&quot;拦截异常日志信息发生异常&quot;</span>);</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 转换request 请求参数</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> joinPoint</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> method</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> Map&lt;String, Object&gt; <span class="title">convertMap</span><span class="params">(JoinPoint joinPoint, Method method)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// 参数值</span></span><br><span class="line">        Object[] args = joinPoint.getArgs();</span><br><span class="line">        ParameterNameDiscoverer parameterNameDiscoverer = <span class="keyword">new</span> DefaultParameterNameDiscoverer();</span><br><span class="line">        String[] parameterNames = parameterNameDiscoverer.getParameterNames(method);</span><br><span class="line">        Map&lt;String, Object&gt; paramMap = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; Objects.requireNonNull(parameterNames).length; i++) &#123;</span><br><span class="line">            paramMap.put(parameterNames[i], args[i].toString());</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> paramMap;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 转换异常信息为字符串</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> exceptionName    异常名称</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> exceptionMessage 异常信息</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> elements         堆栈信息</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> String <span class="title">stackTraceToString</span><span class="params">(String exceptionName, String exceptionMessage, StackTraceElement[] elements)</span> </span>&#123;</span><br><span class="line">        StringBuffer stringBuffer = <span class="keyword">new</span> StringBuffer();</span><br><span class="line">        <span class="keyword">for</span> (StackTraceElement stet : elements) &#123;</span><br><span class="line">            stringBuffer.append(stet + <span class="string">&quot;\n&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> exceptionName + <span class="string">&quot;:&quot;</span> + exceptionMessage + <span class="string">&quot;\n\t&quot;</span> + stringBuffer.toString();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>附上获取IP地址Util类：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.scaffolding.demo.utils;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.apache.commons.lang3.StringUtils;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> java.net.InetAddress;</span><br><span class="line"><span class="keyword">import</span> java.net.UnknownHostException;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span>: Xuxu</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span>: 2020-02-17 20:05</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">IPUtil</span> </span>&#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 获取请求IP</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> request</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">getRequestIpAddress</span><span class="params">(HttpServletRequest request)</span> </span>&#123;</span><br><span class="line">        String ipAddress = <span class="keyword">null</span>;</span><br><span class="line">        ipAddress = request.getHeader(<span class="string">&quot;X-Real_IP&quot;</span>);</span><br><span class="line">        <span class="keyword">if</span> (StringUtils.isEmpty(ipAddress) || StringUtils.isBlank(ipAddress) || <span class="string">&quot;unknown&quot;</span>.equalsIgnoreCase(ipAddress)) &#123;</span><br><span class="line">            ipAddress = request.getHeader(<span class="string">&quot;x-forwarded-for&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (StringUtils.isEmpty(ipAddress) || StringUtils.isBlank(ipAddress) || <span class="string">&quot;unknown&quot;</span>.equalsIgnoreCase(ipAddress)) &#123;</span><br><span class="line">            ipAddress = request.getHeader(<span class="string">&quot;Proxy-Client-IP&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (StringUtils.isEmpty(ipAddress) || StringUtils.isBlank(ipAddress) || <span class="string">&quot;unknown&quot;</span>.equalsIgnoreCase(ipAddress)) &#123;</span><br><span class="line">            ipAddress = request.getHeader(<span class="string">&quot;WL-Proxy-Client-IP&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (StringUtils.isEmpty(ipAddress) || StringUtils.isBlank(ipAddress) || <span class="string">&quot;unknown&quot;</span>.equalsIgnoreCase(ipAddress)) &#123;</span><br><span class="line">            ipAddress = request.getRemoteAddr();</span><br><span class="line">            <span class="keyword">if</span> (ipAddress.equals(<span class="string">&quot;127.0.0.1&quot;</span>)) &#123;</span><br><span class="line">                <span class="comment">// 根据网卡取本机配置的IP</span></span><br><span class="line">                InetAddress inet = <span class="keyword">null</span>;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    inet = InetAddress.getLocalHost();</span><br><span class="line">                &#125; <span class="keyword">catch</span> (UnknownHostException e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">                ipAddress = inet.getHostAddress();</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 对于通过多个代理的情况，第一个IP为客户端真实IP,多个IP按照&#x27;,&#x27;分割</span></span><br><span class="line">        <span class="keyword">if</span> (ipAddress != <span class="keyword">null</span> &amp;&amp; ipAddress.length() &gt; <span class="number">15</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (ipAddress.indexOf(<span class="string">&quot;,&quot;</span>) &gt; <span class="number">0</span>) &#123;</span><br><span class="line">                ipAddress = ipAddress.substring(<span class="number">0</span>, ipAddress.indexOf(<span class="string">&quot;,&quot;</span>));</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ipAddress;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="💥-在Controller层方法添加-Log注解">💥 在Controller层方法添加@Log注解</h2><p><img src="https://s2.ax1x.com/2020/02/25/3Y0Vr8.png" class="lazyload placeholder" data-srcset="https://s2.ax1x.com/2020/02/25/3Y0Vr8.png" srcset="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/site-img/img-loading.gif" alt="@Log注解"></p><h2 id="💥-操作日志、异常日志查询功能">💥 操作日志、异常日志查询功能</h2><p><img src="https://s2.ax1x.com/2020/02/25/3YBEWR.png" class="lazyload placeholder" data-srcset="https://s2.ax1x.com/2020/02/25/3YBEWR.png" srcset="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/site-img/img-loading.gif" alt="操作日志"></p><p><img src="https://s2.ax1x.com/2020/02/25/3YBpLT.png" class="lazyload placeholder" data-srcset="https://s2.ax1x.com/2020/02/25/3YBpLT.png" srcset="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/site-img/img-loading.gif" alt="异常日志"></p>]]></content>
      
      
      <categories>
          
          <category> SpringBoot </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SpringBoot </tag>
            
            <tag> AOP </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>vue项目中，js根据文件名后缀，判断文件图片、视频、文档、pdf等类型的方法</title>
      <link href="posts/dc877e7a.html"/>
      <url>posts/dc877e7a.html</url>
      
        <content type="html"><![CDATA[<p>vue项目中，在获得文件名信息，需要根据文件名的后缀来区分文件类型的方法如下：其中，文件后缀可自由拓展。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br></pre></td><td class="code"><pre><span class="line">// 根据文件名后缀区分 文件类型</span><br><span class="line"><span class="built_in">export</span> <span class="keyword">function</span> matchType(fileName) &#123;</span><br><span class="line">  // 后缀获取</span><br><span class="line">  <span class="built_in">let</span> suffix = <span class="string">&#x27;&#x27;</span></span><br><span class="line">  // 获取类型结果</span><br><span class="line">  <span class="built_in">let</span> result</span><br><span class="line">  try &#123;</span><br><span class="line">    const fileArr = fileName.split(<span class="string">&#x27;.&#x27;</span>)</span><br><span class="line">    suffix = fileArr[fileArr.length - 1]</span><br><span class="line">  &#125; catch (err) &#123;</span><br><span class="line">    suffix = <span class="string">&#x27;&#x27;</span></span><br><span class="line">  &#125;</span><br><span class="line">  // fileName无后缀返回 <span class="literal">false</span></span><br><span class="line">  <span class="keyword">if</span> (!suffix) &#123;</span><br><span class="line">    result = <span class="literal">false</span></span><br><span class="line">    <span class="built_in">return</span> result</span><br><span class="line">  &#125;</span><br><span class="line">  // 图片格式</span><br><span class="line">  const imgList = [<span class="string">&#x27;png&#x27;</span>, <span class="string">&#x27;jpg&#x27;</span>, <span class="string">&#x27;jpeg&#x27;</span>, <span class="string">&#x27;bmp&#x27;</span>, <span class="string">&#x27;gif&#x27;</span>, <span class="string">&#x27;svg&#x27;</span>, <span class="string">&#x27;icon&#x27;</span>, <span class="string">&#x27;ico&#x27;</span>]</span><br><span class="line">  // 进行图片匹配</span><br><span class="line">  result = imgList.some(<span class="keyword">function</span>(item) &#123;</span><br><span class="line">    <span class="built_in">return</span> item === suffix</span><br><span class="line">  &#125;)</span><br><span class="line">  <span class="keyword">if</span> (result) &#123;</span><br><span class="line">    result = <span class="string">&#x27;image&#x27;</span></span><br><span class="line">    <span class="built_in">return</span> result</span><br><span class="line">  &#125;</span><br><span class="line">  // 匹配txt</span><br><span class="line">  const txtList = [<span class="string">&#x27;txt&#x27;</span>]</span><br><span class="line">  result = txtList.some(<span class="keyword">function</span>(item) &#123;</span><br><span class="line">    <span class="built_in">return</span> item === suffix</span><br><span class="line">  &#125;)</span><br><span class="line">  <span class="keyword">if</span> (result) &#123;</span><br><span class="line">    result = <span class="string">&#x27;txt&#x27;</span></span><br><span class="line">    <span class="built_in">return</span> result</span><br><span class="line">  &#125;</span><br><span class="line">  // 匹配 excel</span><br><span class="line">  const excelList = [<span class="string">&#x27;xls&#x27;</span>, <span class="string">&#x27;xlsx&#x27;</span>]</span><br><span class="line">  result = excelList.some(<span class="keyword">function</span>(item) &#123;</span><br><span class="line">    <span class="built_in">return</span> item === suffix</span><br><span class="line">  &#125;)</span><br><span class="line">  <span class="keyword">if</span> (result) &#123;</span><br><span class="line">    result = <span class="string">&#x27;excel&#x27;</span></span><br><span class="line">    <span class="built_in">return</span> result</span><br><span class="line">  &#125;</span><br><span class="line">  // 匹配 word</span><br><span class="line">  const wordList = [<span class="string">&#x27;doc&#x27;</span>, <span class="string">&#x27;docx&#x27;</span>]</span><br><span class="line">  result = wordList.some(<span class="keyword">function</span>(item) &#123;</span><br><span class="line">    <span class="built_in">return</span> item === suffix</span><br><span class="line">  &#125;)</span><br><span class="line">  <span class="keyword">if</span> (result) &#123;</span><br><span class="line">    result = <span class="string">&#x27;word&#x27;</span></span><br><span class="line">    <span class="built_in">return</span> result</span><br><span class="line">  &#125;</span><br><span class="line">  // 匹配 pdf</span><br><span class="line">  const pdfList = [<span class="string">&#x27;pdf&#x27;</span>]</span><br><span class="line">  result = pdfList.some(<span class="keyword">function</span>(item) &#123;</span><br><span class="line">    <span class="built_in">return</span> item === suffix</span><br><span class="line">  &#125;)</span><br><span class="line">  <span class="keyword">if</span> (result) &#123;</span><br><span class="line">    result = <span class="string">&#x27;pdf&#x27;</span></span><br><span class="line">    <span class="built_in">return</span> result</span><br><span class="line">  &#125;</span><br><span class="line">  // 匹配 ppt</span><br><span class="line">  const pptList = [<span class="string">&#x27;ppt&#x27;</span>, <span class="string">&#x27;pptx&#x27;</span>]</span><br><span class="line">  result = pptList.some(<span class="keyword">function</span>(item) &#123;</span><br><span class="line">    <span class="built_in">return</span> item === suffix</span><br><span class="line">  &#125;)</span><br><span class="line">  <span class="keyword">if</span> (result) &#123;</span><br><span class="line">    result = <span class="string">&#x27;ppt&#x27;</span></span><br><span class="line">    <span class="built_in">return</span> result</span><br><span class="line">  &#125;</span><br><span class="line">  // 匹配 视频</span><br><span class="line">  const videoList = [<span class="string">&#x27;mp4&#x27;</span>, <span class="string">&#x27;m2v&#x27;</span>, <span class="string">&#x27;mkv&#x27;</span>]</span><br><span class="line">  result = videoList.some(<span class="keyword">function</span>(item) &#123;</span><br><span class="line">    <span class="built_in">return</span> item === suffix</span><br><span class="line">  &#125;)</span><br><span class="line">  <span class="keyword">if</span> (result) &#123;</span><br><span class="line">    result = <span class="string">&#x27;video&#x27;</span></span><br><span class="line">    <span class="built_in">return</span> result</span><br><span class="line">  &#125;</span><br><span class="line">  // 匹配 音频</span><br><span class="line">  const radioList = [<span class="string">&#x27;mp3&#x27;</span>, <span class="string">&#x27;wav&#x27;</span>, <span class="string">&#x27;wmv&#x27;</span>]</span><br><span class="line">  result = radioList.some(<span class="keyword">function</span>(item) &#123;</span><br><span class="line">    <span class="built_in">return</span> item === suffix</span><br><span class="line">  &#125;)</span><br><span class="line">  <span class="keyword">if</span> (result) &#123;</span><br><span class="line">    result = <span class="string">&#x27;radio&#x27;</span></span><br><span class="line">    <span class="built_in">return</span> result</span><br><span class="line">  &#125;</span><br><span class="line">  // 其他 文件类型</span><br><span class="line">  result = <span class="string">&#x27;other&#x27;</span></span><br><span class="line">  <span class="built_in">return</span> result</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>在项目中进行调用，只需要在需要使用的地方使用：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">this.matchType(<span class="string">&#x27;demo.png&#x27;</span>); // 返回的结果为 <span class="string">&#x27;image&#x27;</span></span><br></pre></td></tr></table></figure><p>根据返回结果可做对应操作。</p>]]></content>
      
      
      <categories>
          
          <category> Vue </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Vue </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>vue、react等单页应用在微信浏览器中修改标题</title>
      <link href="posts/a63fb3ae.html"/>
      <url>posts/a63fb3ae.html</url>
      
        <content type="html"><![CDATA[<p>由于单页应用是通过路由切换展示不同页面的，而不是真正的跳转链接，然后在IOS系统，微信浏览器中直接用修改title的值不会有效果，所以需要使用特殊方式来修改微信标题，一言不合就上代码：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line">* 微信浏览器中设置对应页面的标题</span><br><span class="line">* 解决：IOS微信浏览器中用document.title 设置标题无效</span><br><span class="line">* */</span><br><span class="line"><span class="built_in">export</span> const setTitle = (title) =&gt; &#123;</span><br><span class="line">   var body = document.getElementsByTagName(<span class="string">&#x27;body&#x27;</span>)[0];</span><br><span class="line">   document.title = title;</span><br><span class="line">   var iframe = document.createElement(<span class="string">&quot;iframe&quot;</span>);</span><br><span class="line">   iframe.setAttribute(<span class="string">&quot;src&quot;</span>, <span class="string">&quot;logo.png&quot;</span>);</span><br><span class="line">   iframe.setAttribute(<span class="string">&quot;style&quot;</span>, <span class="string">&quot;display:none&quot;</span>);</span><br><span class="line">   iframe.addEventListener(<span class="string">&#x27;load&#x27;</span>, <span class="function"><span class="title">function</span></span>() &#123;</span><br><span class="line">       setTimeout(<span class="function"><span class="title">function</span></span>() &#123;</span><br><span class="line">           try&#123;</span><br><span class="line">               iframe.removeEventListener(<span class="string">&#x27;load&#x27;</span>);</span><br><span class="line">           &#125;catch (err)&#123;&#125;</span><br><span class="line">           document.body.removeChild(iframe);</span><br><span class="line">       &#125;, 0);</span><br><span class="line">   &#125;);</span><br><span class="line">   document.body.appendChild(iframe);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Vue </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Vue </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Nginx配置</title>
      <link href="posts/5e773fb.html"/>
      <url>posts/5e773fb.html</url>
      
        <content type="html"><![CDATA[<div class="hbe hbe-container" id="hexo-blog-encrypt" data-wpm="抱歉, 这个密码看着不太对, 请再试试." data-whm="抱歉, 这个文章不能被校验, 不过您还是能看看解密后的内容.">  <script id="hbeData" type="hbeData" data-hmacdigest="ceaf6fa3afa529bf2882e84011de692c78095c2ab1a030dd59dd7fe177ab4d32">581792c016456f3a78fdfaf04ed300f11f8e386e1739f2a8a79bc67003c29791c874d36e3dcfe6ffcb46d52b7bc830ad82220e705609c1f5239f09bd72bde7f36da053df90f706cc173b48359f81e3fbf2055f3cfcbbc42f600d4b416971092f4b42974a94390324941fd9050f806e75562ed80f7601670244737637af8250916c24158af8fb7cbb1e069a34c72e2b7e40f94e898f635918699e6820ce6eace206ebaaaad5a99492d341fb9986765b251daf01d00bc981a9b69d8eca8ddcb957183721b62c945d0bd730acb229ddba5b6c10521ef3b6dffe5f65ac251e2c0ddfde7c36f30d916ccac2a003ea3a893ee6377fc15eea14d2c09d88074c9cb3c0706e7ff4caec5fd3bd0e289858a746601b88796f1caf42929299b0791bf1c7acc4d9a9b94434ef2759b048e87e9f13ce4180a1878e07d38e04eecb3b50fba2b1a4c5d71a226cfc1f6ee4de2301093b081e2dd38a8d14040440fffc17dea1911659ad1edf6c2d56b44dcb3f39a9905aec83a6127969037acdb7055a48b40296955893929cd50e4148c8cf227a0a50ef1b25c322b11b1a4b4764817ad70411e751ddcf31030bcb94af48db3b53e53250e9c81e236395135628c03594d0df1e6019c4b8087a919d68c035f9f43ae66dbf466822c0f1946ac02b81c2ae0a0e71038763c94d6bdef77a30a5174e0d4a99a8b0ae8cd7b003ab9e3d16936ca13ccafc14fe1ba93c0c20c23f936a188309de569a60a89c5914940811bf0a9f7f9582e06fe9e81d9d5c8f6bdd66cb3198d7c6f90bfe9ec6ade4dd40562da4170e0b74c236874e6cb92798e37b791aeb6f38e7504c381d7cbea6c4ad2d31b35fdd233b9136c114b78c440c966fb1481a93419637982d1272e3f0f900974d46ee3eae296ebe4008b8afee60428517be4fd96fa3c168e1ecfc2525ad7ca590c9202aab2fc307a5604739b94e2a00250d0752ce4657dc99c55b5d7676d37d50fa3af635dad5b1a799feb3ee6bbc3ddabbd78886da4b840dad4101226b3d6463ee097278267f86015d08bf868880af97252b76598c32916a2838d448ef7d055d4233011efbe3d1b986b37b69b4fd4276a6e98023e8a1d80d20386cfb626a61d59972737be5358300336e213e9b552ab4555aedf9ce588236dc141be3da82f861128584510d3a7b72aaf63aa369cfa63f9a5496d0670907fa464b855ef7234226e3995c8e6dbc3de245229d35c3b499b73372ab5c4b4c72ea47a609ebeb822b3a36a2941fb342e6048fac1a854156c210a3a54b89e838e1fc287b8098f92460a95fb3c683ed29b5bfc1f1d983a8be22c1317900b7d2db99945ad18ec3b78796e35ceaf7fcd9b96332cf4365485e37e2cdbcf8a016b9893a48f6b06e52fca6bac89e81ff606e3a37e8ee6afb2d6526a66ded654a5a0dcaa04799a28abf6b03156850038532c02675a63ffa1de6447631ea8ec8e611b29f2d6391ae95d3a5a262e2e3f2cd7cf9f67dd9bf4ca7313ec7db948ab14d7f92bd734dbdc7e4ac27b482d315a5b32352e2e51b4e09ec219dadc330157592fc61621a5e0cf9e4236e3e21c69ce7a7f55bf282acce749f809a84bddfc364590f4c123bf779e738fd3296557705c925016e3cdcc4e487bbfce3509cd34ea3d29de25b88c49d9851090f8058ea5cfa4658e964961627e5d0f5f9e86f10541377e8795040c521260ed21c68d19781abf88e50b8065a1831c66acca17bae5451dbb059d3b7b2d15fb711f58973467b06e51a87c42a2848788f353114f24047591f9eb6c43489de325b4ae42dbd1e44a7de0521cb57d91f9f09e2a2e65c4a5a7fbafc67f0fe267b51b76cdae69a477353a4e75298dd2f93b4fcf44d9c3cd368f7189723daba2a086f86e1af6ae79a0a0a4512cd360480ad5f7527d02db146a35998f5d6718e00c01e568cf4e1cc8985d2fb8341db61f7f14f52c3125d19ae0fa2da99dc3da077f00138b8e5b84f7ec9669f6e1f20636236b3375550283aa1603aff7012fafd25e64ee4dbf9ae6750f06b8b433ea9266f40660d6f317b9a10e004e74892187533f619584c743907cf34f89927c661e097823b51bbc972c5c38979245aa606dd7edf5cb20f8981c64b085f652060e42919255808a5c20b74233a041099fdf1837e50066e9d6dce374ac687ca3ac3e3cde53ace82858da0b20785bfc2b59363a3e1bdbf43528ecf02148adefbaab32deb488f34699218b828bbdf21586cc302282f8d29ca12e4eb77d4842c08a08531c45f9d7107f8fcdfdde4b2d6ef8b8922b7ace66bc0da066325fee7d890b98846355ae48b8c7371764ad12e09d2e9a0e02795b3c6db0432a6df31a49f97f0227f451e48b65fb2652c678d67983c4401511cbd94d8a2e6b85bb09b7f58ef50205ec13c7831f93e3d77268e1ca06da911cc14af9f54c7ebb7b9459ea4dfc3eb3bd22c8e0291d64ea6cfc73a13fbc8d9fdd992b8a26ee91723c5f2f195e2db7f18f5a82059f9a684aa8404310002e33b35379c73724d1d6c2e9b913b415efb3ac663712168b1b797ad67d5c9b9d483b7411932c2bf7fee4b8d5892908aa1a7ab7207838734cc4353d9dba76261c82fc90a66a46ec3c2707036281a692230d7ad32359703af5e71bdb4cb4b4eb507db184bd07695a9b1bdaa74c73a12da49f65336c49b983cdd0633babedce79d8f44146ce62879e5fd7d26c37fee3c5526e0bd4c6159b508946f0b1244852931ca17769e41faf66ed6488af9859bc162a84e9301324a789f7ea830169ca83f61e52db1932999bf04556761b8ba930303361e0bd8da0165a559fc994758d05adea21a5cced628931b8c1872444f2194ad36dc70299ac2d7773903daed7465ba3cf5b0d717a3c0fceea5d4af6796ea58609ab375cff4c865ecd0d88feda04e41f5ea930dae3e2d16d7e16f4f5a14fc716515f472ff5b26a5f763bb2e07168cc74cc6f5a276a0128e64b7a1dcbaf0172548f54927c035eb9549508c7c5d5c3d25fac20f56732838aebbce38a67a9b5abfe59d2b53f73a7b69e49fe4316972fe542dada834c8b5306ae6318f8eb7c9c6f8f8e64e4ba29dc83339eda3a06bd31a56b428e51493a26b54ac1e0aab22d300bf93bfcd2dcd243ff56485661c7ce879b658c3a2df2f0c5e8762b906d9ad61831ec2aa9ed6806a24c62f3a0f15ea52c634724947bdc9f04d75aaead852d67a5053917d31e641d48c8498b96c105d47ef1abb0bd15fbc58e5faf987b33ec3854c7a9b712435ef44f21d9586a24f14822b92ecc2e59cd60500a6c3e987a25391daa4aec6e76fb9480d34f321db404dc87127524985f57bad35ae53ba78f6c173c06fc02b333fed25538b6052fcb08e9b4825df965a7c01a032e155969373c61520a9a0a0b18ed547cb62688fd36eee43e5a07da2597a78cf5761e76d7bd2ca6594938f163a10c5cc2a3b034c9d0f2e3ab1238489d51a8eece7b7d463d2bcf995303dea3e0eac53db6848e46ccfc3b43666f85f437b0865585cf8ae987dce08559d0af43ecaa161c7d8907df464551b840b66cbe9033608b3a5bf118d47e4bbd1e1b59c8c280297b6e57acd70fbc72cacfc3152dc11ad8c98f1a0dcf24354a95b4afd3aa4986ea2abded950b21e8afc401badd52b85860f9e465885816fd32d336fbba0dbeaa4f3ce9147906b8f5478c9527c70e7dd39166ccd0589979359cca0c807649e61fe76ea2fb69ce92d07e8c92f6c52ab22526c16975a57c5a4d049c6c79207bc25133bad47b8c9b38e15a02b49283d939d664ea39263944619f0198aa4c3da84e8963e49dd62888d8389483110b9b98e2e961daa87a23188dc5d631fde819aa8f53ca3fcdc97d04d9e7a9a3e61731b3b55d7fa290918fa3691dc20ccc731aa59a6eadb22c3050670ace03beb91cb511ff07711f2ba99ffb908d794237426e25931af0c0f0e84e486bdbd92c7eb5e0c262c412e4cc316e02e00c122095dfe5eb9545af80852c8a69af8d2e1d61246aafa9e0272b4529887625446f8e94de7d361518e13bee3dcc293040ad9e8f50a27eb9e625353b2f7a3265baca0401caf94c5a05de40a65d1b3230e8ba065002d3ee9bbb726d3ae9aecc35afc48214955d984042b810ccac98e279bfd977d74687c34bcb0db8480cba237ef33306e768a081de2bc787615d3022006e1c8a592fd07ee4532cf6ffbefdc425d36f4493b0a236cc6c537e2069af7a9662cb111ef681e9bfc0c9a4570e22e20c142cc697334eb707db9e33828dbf41097b899bea608e3e2534adbb6cdca6a5e5927fa40f6b39efefa22c761dae6777daa22d72cd33d006a477e3f43cb794921ff2e358b152d9ae204a038123b81f46f4395cb47c2fedf96393a7ca57d8af24850b5465f76660034419f4c24b9be5851f579a3f903ebbf5dfe02286c8597a436b564f637f284c3aaa1138d677e7e51b07f01909c1843d4626f4488c166011bc8039b3600e84f36d6aae48f18f95426bda621cca6a3273432bdd6185943bd23e660ae882b03076c51e719b7905ef90c38328849390570d59168f0ea8454f189cf5b0f7fdb8354cb0ca911cccc48064548811bbf45644d255ebe316b82890932e05aefa96dad74f026679f757e6b1f4448ba377f9de6115f6c5737b38e72d9d8744be4c6ffb62093ada48797dda3532bb8920fe78083314eed90cc5420f87f63b18417f1c886710dd749b445af42c1cdeed4518305f01c5fb6d9660d9249ef581e489994c8b29bd8bbb5426d8b4eddd98cd4ec6655999a6eab7acdba71cda96dfefe79d160a1ef8b07953b944192fb28f7b857ad17b3a9e0601e2e435134bb3159c6433d0fe1d0420f858dc3d44b0028be6af1653ba01682ee59f2ab4f1b59f8b96fbb99f6062dde7af1579755c1e6b595f215ad033d8b9ba6d45b17baf412a8c8db508c3fff10720ca0ebf14156dfb7012d53b296050bc59401bd18b807bf3e348404884c6e676fc8e2b3236a37cc9788fc1f30ecbeeb83d0e4d3af16a7c23f53644534cec9198bc0312fb5aba84f81cde0fe188246866b255743d7986527ceafc62882f949a91c8756f981f00009abf9d0dde2ac1a58dff8a16da1e5be4bc3b4e080e326652f940d448c89837857b60dfc999b9a9668470222bc6962fa283ef3cb9bfe757c630f1131b32e4bface7edd4874ab421550accd221f007fb6d60c3b84130dacfe9cabbd714ff15888554086107931d938f2d461c538b54d15acb52b27706f691ada06f917da7d245f859203026af673d6c33f4baec1a381b62b053db13813fc6bb7abe91e1f6ce7f0c878a5b76a9662fd76052498cd2d9ec706298e761ad1a7b2e10b51e2250cc8760340d98231698fa3ac4abceab397c0116cc844404429b65da9997d9650609781b0deb8d5e54c62b2490a830b524d2b3d8098ec709c8521d0cf797adf6d6eabd20840140c22b381ebc54940f1929cc806045968cc654f6fe650a8d76e3279ccf794cf1af1b3aef3f733b0acaec9183a9ebc8642d4811a8b5c26e03a2d47ef8bb49eba307d1901a13946b9bab4cacc111bdb3c14b03febda71621b7d52014f9d1b6acb6631577dd7fe3666fc2249cc51f74a1636cc1986566c70f40ee0436e389c695bfe702b61f073a00cb5555789cb62543da9bd355721c922a57775fc295d9592d6c35bb7333c7598b724fd4dc5c62d75f97e5d46689d78c3d5519e923e8f2beb19338d210d7a26f57d78cf17bc3c10f7dcf23286a519b2e53cfb15838d7791d7c5d3090018deaf2e5e68759c8e2f4a9035cf02cf208368c56e1881b71165952ded3a6340c0e6431281e2cdf8f31d0f0e509e3d51e5e5497d45a2cca666bf8bf2e1e912fdc5eff856838200350bfe1fc82a21cd0eb9e3265b617f46bbd481b1c827b7e746b02ca06fac659e1c52f407c7a43fd45c313dfbd16d22fd6ee3d37c05a55f282eab6986e6779038ae2f43d2aaa00101054129033b236b146017954411a260971d0ffbb0a03200a80964ad01d0adaa74a5d050455a7df38780a74cbd7b9e940014d4de4ffa1bc5260317633c091213de53470d3a6c03d5a8350e06daf0aec2799c487d643d27bc86a6b3728c48901c501661d17ec6fcc2c66fa6c837326af8e4906e238946f5480409bc9010390a6679adc37d7204b873ca6d55db171d5bea6ba7f3e4536274694435bc9eda21d96b1082715b558acdc20e61767327e88d8e3d14e5d96026ee6857b82ad087a8799681a5294f90d7856f1c57a8c2fbb54566394fa52cf50b82b35255c461c790ddd0a065b2890552c73dbd9d7196db64ddb7be6e6fa010c57cbfbeab4e80fe0ff30b8a53f23fc3017fb8c96ca777c10cc0225e324ccdb77bdbfda47c4011364b47a9bf364bb9c39582cf42ecb83a325803814598412605ac4264f30a1c844b65c5b4e6c816aba75f79f0f63fc2b040a427ab303b71664db8aa79a80ea187400d5adc9c182da8769543b7336055b4c6690b1b00eb92bff2dc8cae5effaded94e10cc3e6ca7adf237c93632110e6c6bb19007065b6393d25258fc72a6041c89f59989a0e826715579542d346ab3a996abb45a02692e0411204ed8f577828a4674f685cf8b40ccd816f6906e9dc2c4414fdc83dfc8f95463f17fce534faad908ddfdb1670d9a9d98b3cb15ff228c0cb733711bc3042dd23c80991cd8d368d1b89d2b7f23ba771651fcf060d39b5da5702ec0aa4fca1004a894d7878ed81753fef148b935b7ea1d6b9a585c88b2531b272d8a2523299ea787227264a295eaef0ed359629689486e219f1a00d0f681cc0694a8fc0ab75de62f5b76c42bb878091e077d139bf74931cb571ce3e879a8e43c5a7b0aa065ffadc7037b2317765b14fac7bbaab90eeefc01cd455a5dc12d6b58e00ec59a5082041ac7ee759d87c1595936f6c100c6d20564715758690803944b9e436196974a48dcfffad450eb1f84193aae339ae4b0dcd9b43eb0f6c72772fbbbccf1a3f9a208f589aaa92eb605385c7b4805c77bbc301807c3750eb917cfd747f7e8c6d1322a0b634c531dcae70e9b1b58bdc881536f0827fc6a1ff36ec4b90f7916d3e69e07c2d322a3956b62f1dba0aa7d600846725355b12b9b07257277e1c1fb4e4fcbc36d5f06cf148ebb1c342a97a522b0b30307281cf890b98be7e4522e3b802dd8edab18e490a15ff4ae2ea5526cc10a695b77792acfafd6cb7ba570d8c9a59937b6442ecb5978b901bb89eba05cdcb3865b07fd3294b632d6443a3c6417916a925f971697a161227b876dc0c69333e5167fefc6f4ed945ecc6a7ca4b937ab4c1d14e3761cc8b1845ca7f0850138c84d30d80fa952476c06e12a45f0f084c4094447b869a576337db4d7d2447067fdbc78cfb13382f86718adc2d2bce378bd904aed71a89ce22e3241abd846f5b3573fae632ffe50ee7d9ad3eaa672ad2a3011e1c2178f8d4eb6b8309d150eb194353a5dfd0570802741fe96d2e432cb837a2aa54726f9568e52f8cd5709165ff943547a2414c838d93b57875af30ac9d348411c0cee59a45a3785f988ae691a0ea8174d16762c724653f4533a784ffe3f97105f256ca6f462bc88ca901a7fcf6271aafff69e431fab3d44aef47cb680037523c6ec5c8c527ffb10dea0fb823599540b692faaba9bdbe116645b63dabd10200d84b6ce63a9d170c07d01f24145f396765dc4987532e2155b746346d7b518f517276501983c0b1b9c7a363adac5fc266d1511ae2306a7d14c4d73557e303ea8700c9c933651a5341c79546cb7a03400a3cb56e7637cdc05db4a3c8d41c3a44ff20101fb5c29d59284261d138cf0d050cc53179be6f6bc808ea581f4d99b3c655f3ceed5a6bf44d86d0c02fabb9a6e608050ee5d056ec28ce2d6f4202c3caba6fccb5c0e5739a4f251a3b3a3b4163fea937962e0a9ceac7587ca40fcfc4f6b14f8b29f2f28bdab45d90722e72128e8d6647e70bf7428228df5078caf42ab0694107ac9e814aeadbc941b8732407a250598d3253c7983a81b029b07dbf35338039c38b444477ba3e7f9bbca2435574d65026339c7374a38f937f81438c51e6cd006df568c212ea2de9224577419222bdbf61cbe89348ac2a0e90bac1615c763826a38ac0b32f60075dc89e174cbfe9aac44ce6b8c95493a07ebd508050dee5e79c5e639f13787773d7de848c27e2aa950a2e7041754034e442a9e4f0f48b42cde6bc47a0ff1fad63d6c9effbd4c857a5565d57e02e1f7bf58c76dbefa129a319ec238694eaefcf3cdf6edea149fb9d3d6f6604d9ff5f41179e78900d46944e84c1e05418d8339de41b2b4a40bf3fc6e5782a7371427bbdcd110ddf44c1ac79d003d473d2e4002c4a36c1d03db88347d7d71d300a9955b43b41def00092f59a3ade22dfdeda4531a6b1d637934669f09d4a8581cb68341c679295337d32b63482a6adb832af458d1c3a8862103439173381894d8a9139688f7edbf00301cf2ec147b63e401af324e41082565bdfec766cc60ce503fb1f28f5aad001928822157d4814a79a531ee8be5f6493b667299d6499becf86d54e58352ae346133db7a00acbe4db6f8b93ce1826464390d2841fafa874048cc83a1bd775d7ceb27355f7a73dbc0f2a77f5c554e4719618ee9d528694619a1518df57db0d33a16f51e9761235f5b55dd8d958a619a6d523c9b5afe7863ce8b7d52a04940a4a193e192d980edb82a854808c033e61560eb0f912e376f04756f4ae913aa66128f73c4bf45c1e88611beae08783b7d314f381f0c4e293186b9a6e5ae047d76cb6016f18ffa6d227d8ac7f27c68caec5f581c4cd8627cf9b3726a270042ef1cb5c829f77771fd4f553d6cd311ac67870536ad13115509129772c1624cd2c4e27050fc92ed871f57f2d537a77e53d80c1410c6efd8e6b2a30535d5bd6fa5cb04af7359d23a6e8ffb1c6798d9b8288e41d62b63c8bde5e3f4d6a4f6e5e15694497d2f9c1a89f246d049025052c577b336fbb0fe441e06941c40317e70b3e6683ba757741d73e020baac602fe8027ea65063d98b3a021261a2d67766c35e4ae77ecdc0a5d6ca0e195ef4ee60307f4b786a03810ebcafc44f03d324e60db7a43e2ef0523051bcd817e439b1861f81f580c2cdffcc8e1b4e27a73fae64efa79d21bd601ddb827d3971d857bdd8e92d7fec15330cb244fb7b4c0f71761f076a96e097d54c292a168f2efff65265cdef3c88772f5b92bfa2d529e949496c48af55c0549c1d1ce722c35a223dca495be63164bd0ba861067319f637f6890dbc439247496ebe33c3ed76b2abc01c59d358e1a0305d90e91f75b4b6f34b1c7df16376207757bec11d8c5643ef304991ff9befe728f9350ccb02c58587e1ca47fcb561459c6b5f8911584ae971ac9d4cad8f24da58646d7141c500b9d3efe269a5a2d1f7a691ee4747f890834f97a87e986ff50cdd876b441538ad00c0cec3fbd21314ea58cb47c13878b5942e4a0b836b4fa5c8d1258de41a13094edea7f0f379d2a3524f2bd5ce8730bfa4f767e728e01f62f63c41aee2b8187c1cf043ce04789de994ecfb3e58fc195f0594385ae782360280160a43d3ce8d8cd561a002388c9b6922786f70c0eb8ee6f0dd148b133fa4524a7b752b349d5ab12234c3d58ce29888cb913d2afe4abe4959586263fcf916d7521c6313c9ee51a8611b144d37ce7f672bec2cc9d14b926cc161f216953781f61ab8a987f854238ceb8eadf1d726c4dcbbcb3a4a98f988cea0acbf143909d4f59158670b7115404cf7587240fd77d485f4325c57e1f79cd6a2687325ce510e743c3759a6eb1f8a232bf077e98573cb469aa13609326c0f6a059d0f91d73db741ae0b3d65f72a6ee2d743e75922bf8385d691e44f3b8ee56ce68bc5a92a453db1b86907507d5962e69307bd8e8c1f24e7f48d8276396b5f54335a13b8736a093580eb2e62c9d165723eab7b5e69cce5ca599b2faa5f14887558e21c7a17283ed97f655568d8991f07a3e01a83b668ca313ab0521f6130eebfd6dc0a452adabdec3f225da280ce1caaefccbb80eb5079174d0c58ae0a5e83bf2621cd6bf934715766fbcf1080daa44d6c0769b2ed88d91bd0200c759f873402f610db0edd645fa9320436ea9f9204c72e61e98b4ab3e7d00c743bb64d474c40ee2419987f0f4e20394acafbce1fd2b685ffd2dd53cd74f347826964d16391d487636fbd6997b9e356006e32f048483a0ae0db6b4fbfb13b53c24ba8e1aa35cee7c9ad3191b7bb030ff1af5c0de6258865d2edb2e5e8159197c5f241f5e2bc144627955e9c1571a981eea44e6e4a374d6a7841c1a04b8a0fb01ef0d92ff5506962d4da6c68d8482f27cceafe0ed94640ef18df6b4722a69a3780acbb82d6a8170285d3b603558f9e2572691f1a6f4a088572fcfa06e7d9a92a044cd70794dd55ca5609d743dff6525000808fb7546a24505efa825d788206e73a37318f5d55da8cf75aea13e8b6d3eee718f470af0469710aaa3d513de99de6c75957d1a6096597d0257b9b7c26dae3204caa35fb6a458774101913eb81ac4cc26c7f8e133093fab5caef6ca6972c469fef532afe7dc4a6cfcecc972037de10a86ce1b18b784c24c0e0a107ee1be3e27dc04db1471a4ce0e0317c010c134b0ca44122f6f7e1abf5fda05b0c4c9410ed0f0e9e31114969cc87d32c78b15c47afd68f245c6b15d0b9a25dd6083d27cf1cf37f721cb777c890bb5f96f30beb65f3e72b9b7a2349c8704c760d8bb0f8f4c5135ca246ced40a25ec8a70a8e6723fa8f49f00318ead36e8ec763ce478af1df90a14fcbd5e9edc22101737f67170749bb109524402a5f569efc913a14efce7630f4efa633b69dd25ab820c8aa055e2b373a917e56c20a327310930df5d80a17008cee9925bb8a1f63b8d346e687b1dfa5c503bc3d01baeda5d4222bb7d892cbc723c630ee0c43df14a1849a04590b5a2267443c78f5b3fc6abf5ab45ff42b81adfb9208fb901a0b1983daabea96e433bb577ba800dc1c4b158778f90a977531ba246ae463724ea0e759ff2dd0e5dceb30ed76f98d56cf1288533a7eb16fc597ccd3d6f12da0fad717844b456ed67627e0a811e06a1febe423467731f08af37fb584863da34d111f8f554ccd6dc5dc15dade68c618de25f30173ababc7521a19b1fcef285277495b2b4cee07bb0d0c625bb91c70cf9dc924fcc8ff90fc1a00912c24fcab8cf6ddc9256af759d322ef50544df587fa2d5d0bfaab558a3e8b9fa7d2362bc4a4f404e9e8a3932d757ec3aa7bdb147a2b90cc0cca16f2b2b07edd7a0a97e36a9c3a2d6bba515d0faa01c997bd6cd01b2b0aed933a650dc78f18de431fa120cb973f5e8ed3ef6e4abc7167c01371404939d563e5b1266739a92b3e41137fceff1db04d8c05f6959328778352f7d35d331a356b7b4252ee5342d0aea112573311fa4f739342c659d4c3db016b821ff3cc8880160d34beb90d2655630823b3c211dfeaffd770e8eceb3bfa32b4b581f61459e7d34c0ae23e247a7632e97634f7750da1f3d036baa75d3a39f08711b68daa0f8fa0faf06ee2337bee889f5e0eaee78e7ed61928c250cd533028b533ac5633daecfc6e0f1a80407baf136fff279141e15cde300370269d0f566720d46fa9ae0d11e269ceaee81afa3d1c1f3af64843e11d178d386dc4ee934613391840b57b20c949f6bfe19f8d27d5ff2fef8de21c5c02e6bc6803c76330a2374221c5d23a1a9106643eea799895702bf37e3cd060c2463b1ae927a2f0e5e7d301a2a7b1eee6c7d3c084bae4306d60d303bd86c52824588d515b0ef78b17f38032c88cbe6d8dacef416725a70df1f188939eb7a1260d7f07f38dd451790e393cd3e24aa6de9aa37cef3b1ed04b6eafec49b02a4a72de692235ef85aa502ec304f4ba4699192adb1e279e6fe5155e01c252e583be84a6bf7f4ff024dcdb318f62e9409c7f362dd4fda14817e7ec1f45fc1e23c3f92aa3d202927f5e03982c162b3535f628beaec1ac78789694c7a9670f2e51153a3e006e7087bfbd3f0edf9d8c5300809fb2b3511be45257eac69a4fe08c4e39cae32d0198a611402f3ecf1caacef172fd14e92926471d101a1080f665fa66b1ac36b8b7d1ce0bba2dbc873224f3fe5f5f1a0e87f0a31f0fdaab9949135f55727134e65147431c87cf13cc1d556afa59cf39420ef7ffa3722fe3cf5f9cd5f468fe952301140b3164d4eca5f8fba563da2fbacd0f4e132de673be468561f1f378be5b17d1d0f56567426589dfc1382933dc9e6d85c27651417b7d793dc748b3d294aeb9f1f4cae40f6bcf0b53d49420337622af56ff5973985a8859e98d0f79ccbf1a1b0de4f49305533c4acb8c57d9d611b6a79ebbd5912e696d20c890eb4d7bbcc5afb3f104f9412e4497b5611498450ccc138b59324f02bb9f43e2bfdd42784fdb00e06b23a11e1f366036e6866752dc5dd452cb30882b64b72b658afe4bcec39bb33e40b3e61aace4fcb1c634c3053c95f2e2e748cf7be80561889205db193b6a05a5225ea5185807709ffb61d729d106702b297761e1764d0bc89a271c56bddbbb28ba52e1a7e71ba0fd4c7c37d4fd472dae13694ff6475074823b025172313a1eb62849409e98e9ed31dcc52d947e55c339b67cc1e8ac702ac79af081b739bf6219a29b54ebb906f1518667cdc42e0edd973579e02b4ae05c08b482b25dd3f1336a97fb53eb3f318d11cdd83a3754e0f1245b63de28d530316f75f012add0c8b0817bba0b5c16502f91fd62a2d332c153c77387004bbd5eb0fd0372b0cc9a1f3890970d93e78637673788a31beefb06e74b3e7e6b270ebb977854a2934a9df15645bcd0329ba2e0a80eee319e01433c6c0241c0b591db2a24a5299114ec9ba5964f4926fe3cf272c8973838838e2a4a1d03195b61f35ed709804eef8a069f707d8679a294424ad73c83412608c0f74c66669e53c06474c35f90d1ccb61f358253cdbcec9befa8bd332e729f8b0c1d28e5f7c0ede10b6a56f40b5a9abaea256a53c82ddee5152291a3cfd69edae207a8d7e6bcad8d816c2af9315990ab59a38a3409e972e832cd0d9cc4132ed1de22aa325fb1c3ade0d62a4f272a235b8564947446d1f854953a1e4777681ff3acbeaf38eb81ff54041c3132e61283166bfe0d9929b9e484019b0adfa682a34ac99d30bb561d5a56cfdae9f15e91991462eb8687c05122234bcd82934a0d333e60819e32cbf202311b4594c19608a618ff4a8ccb05941a89dd5182b26ea3f1dabbb77ec50a060b48fc09fa98c020d4985f62989c31cf86a4d78977f9b81b1c8c0186e275ea01365d377f1301950a2924e9d944f2e7c7384e6a4b1d4ca227a8f91401837d1d990f113e8fe7324e3b97028616c375fd3951846c90a454ffb7727db6f9c8fb7f59706943174b7e251b16c4be0a3d2e9df07abd0c7ba17c4fda7552b802230fd283bbbd01863c3530c9fa799d897101c29c199d6383017f898320af4a62bc8d404595501ab3dfa10e5f3de8526f70e8e3a1642ad69749dc98e58f98cd55c144ade6f01b1ad2e7c7c8c0f21343d1586ee741d80ac2043c225aa4086cc90aea61bcdc378b89b540958a5a9b4f54cfaf6391b76b8e29e0883963f0afa9d2669022d7161ca4b8babf8e55345b3010d3fe7770aef84ac25ebfeb46470cbadef63b14042b6f16c58ee2696472e6f0b8aeb585adcc99ca6ccf26cb5b8ee84cd8f0c07fce29e2c025648a5cdce2ccec79135b20c36ba941b17603119a0fbc0bc7fef31ea13ea6101e066251cc83c4c96bff673813f9536abf038ecca75f19239e5150b85f541dd60db32c36dbc3a4f9f48afbb39f81640944f8d663d3a6d47fd20367384b2b1fd627c0debb4651e91251495c72511a1b0164c777cc0c9473d7244ce5685532ddc7410bde85a345363e54db0f44c85ae408268746093960eafcea4f3c75a01688513ac1cf42aa1097ee166cb06a622b63985725f867bbb4264560fe98e2973aeae800ab0a48e6694e41a38985254d34cfda2b59fda68bca263541a84d0a3b5bcc9da17106884e8a5bd21939006099c4752e732e709210b473e6da5492fa7484357079f43e5282663c7ff839702ab8aef8f1187ddce3ae193409dba1f4fb1cdf3fd7851131d716c099d7df21a1a0ea2d3ee95cd8ca453c88c74f9d34b39b46387a812b28c7cf9796ea9a6f004c224952a20f4c0e004bdbc318b58b83e5afe79bdf10df446f0bc9e80d0cda4b8301f15a17e2c017e56b83078129c5f30e301a807e85de9eaea8c4dde7d06f075cddd728197de8117e7aa99e7261ea77420bc5396609ee329b406c9f7c206eb16a08f042ef7e0f845139a9e84e28c434def10456f10d1bb78bdab5abeaa7c29a358011ed7bd63bd4238705ca5bc74f95c556ba068b027439dfbbb288930693315cc8b8853d9baf370c33f352667f00336ca2a9bae247c34a2d5990a6d341fd64876d9faf43acb3ff0ce0a1be960eb9d7f60a2ee89191edbd88225c84ec7576f32ee45013760a3bedc31ff410904215dbf35abb13305ffad974886d4d4cf194fc1d32f61d29e1eeea1380f413d352232ea40cb6e0d30bbf7f5bf026d64afaf38f148cb9bb1f7a60247d60a54cfcbf7b2e02175f5984fc46e966bdfaf3f8d914897c6c5f2a180a89b8a158db69102301417411b10eb2b80879ab24c2da26eac518f9e12d1cc620612be35ec9361010a4fc5b21e3c93e961376d26b8149d263917c0f37c24b0bf7006eb4fb6d5e542966f64803ed84adcf3cb5e41770c491700009029e47c839c28567724505b69795608338b56f9e5e758ad6e9ceb51fad0849c60f2b613bd686b64438d1ca4b9182d7fabc67b9f962071305191681bf88b7d7d603717f9e5fb1d8516f44639d1583fde80898ef62e9658d9d3b2c952e151c7625a9227a7e8424e89b4a03179c0e3bfb7c5953d5147935d6a7bd30915e4a9b72e39a97f6f71d445c18542c63016eb26a33917f44f254d1b4b6a8d65191b7f6f037351b8eb7c3e09a2e931871dd99b36428b23f89e4d7a7b50f9bfed442474d0edcc908483a8feea6666f58599d946f33aa743bf621d66f9eeb6fa4cf0534c0bfeb9dc757c94faf7ea363f9c163399a4ba1a5becc99b795865ad62abfea15b2958827ace4c3b83a582e70415274849d4d645a2fa3cbe4ee4eed4301eed168188c75f99ee7b7073fc7bc9d7b404a84a6afa1d84a3828b1cf503eea5d2d5c02787b8257144074393ce423055c20e6810344f3e7d8bd45f2f5d501989e7aedb6f897683cee911ecd0bdf16a8a81f33a9b79a5032095d8b08d44438db8193129461838b948f6731efd970d6bffb7bb4f0cd1fbdb0511403d26af4741026e1e951f4018dfe9958541d8d1cf63f4b819d8e6d40bb8a0c6b2993ba5e9037a1becd512520fe31b98ff6364ae986ed0e0a1435f75900c099a503aad7d12da3c06eb7d174d023c617b1fad63df370f564d7e93f7a803aee820e54ac51d52567c64771a005d1f5dd7634b8c95fa3e7f9d86070ae03b810d51a83c097273a724a982081b7f84d6c3eabbd10cfc1dd754d81763c631d0de39ee120948ceeb2b6ea558ed7b7f459afc4ec71d9d15b89481c82b29433b182d2b258425ae9cf4c7c83a7a9d8bd31aa4a92451ef84b7a3b1be44d745e6e32dab563a125ed37fcb69bd4e0a140947ae931fc2a06f2cce28728cb10e40d786e38286ee574a4f916f9fbc73a33d6957a4b9833dc795695aa972cb0685fb31048efd3fc0ff1d21badd7572e7e9260dff2b15e3933e96d247bec7b0b260040cd672d1d9602ee1ab5b10361d7c1f64a7060b7b9cbabaf122666a1a41bfc3ebd01384a5dd701d2452c5f0831aa9ba3c8be38d276fbb9e2882733f0a73c00ad7b1551f0b2d43356abaf2ab527752c415447ca797eab65ec89712cfa46be45da657fedbd9f9b84776df0ebed097887b52d757ddce500a6dc083768fbf6de6f92985f052beb8b889edaef2b325997c98fa5c49cd41622bb5ec3557d2c133cfbc52c31a7862b8c04183352371aa8acf2cdc61556abeb46c4c5104349a1ea263e0a52303b69a97407d87c62e467f69558479825dc53fbf5919df0d10ed1d52ec0975d98fcde4548dcf0cdbfbbf31d9a5f0d76cd797caceffd77555b5e8be0f9dfaef90b0a2c219c5457c7d514a503db1c3e8cf6a6ac399f39cad2239a05d0832994de88e24efe3c831ead1ff3d83604f441ff5382eb6f575a278b45fc2a5eef81d2afa7561d67a7191b9d50a629a40def917140cf8af7c72f6a410eb25ea5bb751d43a874ea429351a58696c8ab4b7fce95ecedab605d9058921276bbc9c44768e25e4df1c75295be6508f9d80052edf757f0e22204b4513a2200b9a47c42570eabc37671357207e20a90a32fbd0c6653e2a85bbd1c3516cab7371544c0c331bb6ce0cba67328ba61908ec7a09d266a1a66e140369c13628b66e8fdf56ee365e7a91a2e5485520e586ec5225d6dfc431873dd04b910fcc334e48e61ef5d4cac0804589b5f9cbb54ef7dfc4ba488b11812370bc9f9f92fefe22013f4673b893adb7b6639941096323c915261785463cfff150008eee3018553c072c59ed5a5382ef59e69a9e4cdfbcfa91c283ff38d72e52cc37c4e9dc4107b31204653ee949f5458cd4e02acc698aa117d01acf355578ece226f15b3d15b35ddb304adf91e5ccca163aaef755a317e7cc7b73b1469b6c8e0fd14f0144585ff95a9eaa7c42214fc8691a69f2b45c86a218ec64885ae39675a789bddf4a124a3dda39ba31513a97d9a6d827f0369c6129c76823f3abca1a191a7604434296c4fbfbfcedcef9684d75ab37972369c7a1b8cbf135385d81bc4f317a2b4e8442a7d44800062a5daeed7c9fb1676003778a3bf2bbe0d36f445e8ff78db3291b21bfce53f0b1530fa8e21244a586e18ada74e82b84d416ae8a6357758e6027cc8505a8402db1f4ae004b3a632fa8a6a46f89598ba1a9c66b8d6e71c6ae92251ae4dad45b57a8e122eb837a425e6bc3c4b802f57950a10ee2d5d9f38edda59bf2ff208e8ec55317c4b2c49e53f7293bf9fbbc377f82175411b121d2fa8f3eff6c6c5f005f3e41262497138a1e99d1cd032c56f8fbe3b7c980ecb208c3ab4d1b445254c5e2d110f09c27385df02bef538fd7fb19bd2f0d918f8f8660166a3f83250b3bcec86f5ad4905900aff5b079e5b8fd7f6c02555fd87218b12ceb7d26d3a9872c95b6fed0126bcd54302da69bcebd62e5ef1174ab4ed90e62c25faebd6cf8837f66e42a181c2f2b9946ee2095b8ddfc957a50f361ae10f35d8b22406074f10873f5734b48b34a900cdc7bd672e02b71643a835587f17fab98bceee69f651bb2f455e77edab6985696821da45195e3e4156ff48fcd170201cd6dcac101bd1330f1e2faf196f440f1b3abf6b8c42b0c3b3f451f95acb9a945817598b321136473168388262d45518ac5780a27f864834437213bf742a57af5f1ab3e3b5cab7cd35c0264288e1225a2d49a74fdfdea7f6c1616ffdd5f878eaeec8b0583f65c0368e43ab4f5dcf160d795627e5bf8e94aecd9c4fa7751212cf33a8e4d33c2c0d7d6126717b6a3d37e4cad0b90bf45667288413dc469568711909bad34b2c043c7fedc269de12f2f0d0d075e4c0b27e46c45bfa305686f955d1f536d24fdd67affc2cea06481f81e56654b2955727363fdf51664394efb8dace19c1a4190ecb63ba7798462cb906e07228a5c3b66b1ba4933da6033da76eb73dca7e2cef90d5d708d7a49357fee2c1b8afac7cd667e2bd441edace551d1caeff2f503de0d04cf578069eea54a096326f0bd16cb580c875544012d9e2519e75b55aa73d5a0518e665e9a671d05abf8cc393887f4175a1c07c83a62584a11556e0d31a20a7d23029b02ef1a49a9d5df8be061d70b41403d3cb8c84720412d0e4399958307f3dbe2b796415d747ee967c82dcd951f1d373ab10ac32dc2f95f46149ff5127e30ebcac39873f422929b7c3d6d9a2087ad4757b65ca13c407fb7beb103a99cd3516c03217ac720cdd0137e61f1f83f6e1ebe4cf9dc08232dd2756c44fb5a834d47399699669270b8ddae68a20442e6dfbba8d718d28214335736c51442daf6b87f8b460966c18a9e23de80fca7311fcd4d68978fdbadb11b4a0e4049de0b133b9bda07a3d46eb7f63a96fcb418ae18f78b0a2d5a7a507505a0280f628de7ec7d8abe24cdcbcc9e32d4f8ab9b7ce6103382ebf6c0514635d74b2cb43895d76092efd12adce0334b8efd43193fa43981aec42472a0dc3ad47bf07f46405966cd048dc329d34b511f1ae37ccf940d958d36c14daeea3e530363853f5c776e571a54420d1e3e56e55f1d0ebf0d28eee73698dbe35eca963175ef379d313bac45b1c20bee8ddc97a1ba53633f3bfd2830a94104fabe6de7ded213a10cf9a7c1b774f7376eb729e719f95c587fddcaa22e21f1c2e2f6ce6139180ec844017f92c6577508ad411a8b30c2698765d5a195c7c0b61001ee336c61853c547330f90f570fc1b59335f0fc45cd639513b78517ccb7e9cec609f32836afb3ba91bab6ff6ab7efe28dcb4ef321de96e89332e266577a92e2f3d191d34c876d27698ef76f9e555d418918134b2d39640e0d245cde7cbd561d8e3215454eeac5181bf0aba0b5a8ee842f30565881e699069f9da67cf1ec46076c646ba2f42f114af2207265f40c5f4c7e001372f4f25168ffda1a026011ce921480685456065abfe7ff97168252ef27299359add507d5c8676c2b2972d51838d643721ea01d7df627b15bcac5eb4212f5026f645dfd48f0223d478b7045279271e7afdc48719f9bda251c5cfaea197cffe1958b0aa85b9a56276e96583978144bdc752a8e5ec5eb3bab40614627f52d2302becc17d9648</script>  <div class="hbe hbe-content">    <div class="hbe hbe-input hbe-input-default">      <input class="hbe hbe-input-field hbe-input-field-default" type="password" id="hbePass">      <label class="hbe hbe-input-label hbe-input-label-default" for="hbePass">        <span class="hbe hbe-input-label-content hbe-input-label-content-default">Hey, password is required here.</span>      </label>    </div>  </div></div><script src="/lib/hbe.js"></script><link href="/css/hbe.style.css" rel="stylesheet" type="text/css">]]></content>
      
      
      <categories>
          
          <category> Nginx </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Nginx </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Vue 日期格式化</title>
      <link href="posts/c9b4cff2.html"/>
      <url>posts/c9b4cff2.html</url>
      
        <content type="html"><![CDATA[<h2 id="函数封装（将该函数封装成一个文件，或者加入自己项目的函数库）">函数封装（将该函数封装成一个文件，或者加入自己项目的函数库）</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">// 这个函数网上随处可见，我也是应用了别人的。</span><br><span class="line"><span class="built_in">export</span> <span class="keyword">function</span> formatDate(date, fmt) &#123;</span><br><span class="line">  <span class="keyword">if</span> (/(y+)/.<span class="built_in">test</span>(fmt)) &#123;</span><br><span class="line">    fmt = fmt.replace(RegExp.<span class="variable">$1</span>, (date.getFullYear() + <span class="string">&#x27;&#x27;</span>).substr(4 - RegExp.<span class="variable">$1</span>.length))</span><br><span class="line">  &#125;</span><br><span class="line">  const o = &#123;</span><br><span class="line">    <span class="string">&#x27;M+&#x27;</span>: date.getMonth() + 1,</span><br><span class="line">    <span class="string">&#x27;d+&#x27;</span>: date.getDate(),</span><br><span class="line">    <span class="string">&#x27;h+&#x27;</span>: date.getHours(),</span><br><span class="line">    <span class="string">&#x27;m+&#x27;</span>: date.getMinutes(),</span><br><span class="line">    <span class="string">&#x27;s+&#x27;</span>: date.getSeconds()</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">for</span> (const k <span class="keyword">in</span> o) &#123;</span><br><span class="line">    <span class="keyword">if</span> (new RegExp(`(<span class="variable">$&#123;k&#125;</span>)`).<span class="built_in">test</span>(fmt)) &#123;</span><br><span class="line">      const str = o[k] + <span class="string">&#x27;&#x27;</span></span><br><span class="line">      fmt = fmt.replace(RegExp.<span class="variable">$1</span>, (RegExp.<span class="variable">$1</span>.length === 1) ? str : padLeftZero(str))</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="built_in">return</span> fmt</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> padLeftZero(str) &#123;</span><br><span class="line">  <span class="built_in">return</span> (<span class="string">&#x27;00&#x27;</span> + str).substr(str.length)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="文件引入（注意：由于是函数，故名字要和函数的名字一致）">文件引入（注意：由于是函数，故名字要和函数的名字一致）</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">import &#123; formatDate &#125; from <span class="string">&#x27;@/common/commonUtil.js&#x27;</span></span><br></pre></td></tr></table></figure><h2 id="添加到过滤器中">添加到过滤器中</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">filters: &#123;</span><br><span class="line">    formatDate(time) &#123;</span><br><span class="line">    var date = new Date(time);</span><br><span class="line">    <span class="built_in">return</span> formatDate(date, <span class="string">&#x27;yyyy-MM-dd hh:mm:ss&#x27;</span>);</span><br><span class="line">   &#125;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure><h2 id="使用场景一：-在HTML中使用">使用场景一： 在HTML中使用</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">// item.createDate是后台数据~~</span><br><span class="line">&lt;div class=<span class="string">&quot;time&quot;</span>&gt;&#123;&#123;item.createDate | formatDate&#125;&#125;&lt;/div&gt;</span><br></pre></td></tr></table></figure><h2 id="使用场景二：-在提交时候使用">使用场景二： 在提交时候使用</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">let</span> nowDate = formatDate(new Date(), <span class="string">&#x27;yyyy-MM-dd hh:mm:ss&#x27;</span>)</span><br></pre></td></tr></table></figure><h2 id="使用场景三：-在绑定属性中使用">使用场景三： 在绑定属性中使用</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;mt-cell title=<span class="string">&quot;开始时间&quot;</span> :value=<span class="string">&quot;startDate | formatDate&quot;</span>&gt;&lt;/mt-cell&gt;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Vue </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 工具类 </tag>
            
            <tag> Vue </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>异常：java.security.InvalidKeyException:Illegal key size</title>
      <link href="posts/2b56997e.html"/>
      <url>posts/2b56997e.html</url>
      
        <content type="html"><![CDATA[<p>今天在做接口测试的时候遇到个异常：</p><p><strong>java.security.InvalidKeyException: Illegal key size</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">KeyGenerator kgen &#x3D; KeyGenerator.getInstance(&quot;aes&quot;);</span><br><span class="line">&#x2F;&#x2F;此处解决mac，linux报错</span><br><span class="line">SecureRandom random &#x3D; SecureRandom.getInstance(&quot;SHA1PRNG&quot;);</span><br><span class="line">random.setSeed(key.getBytes());    &#x2F;&#x2F;mac笔记本当代码运行到这一行时就报错了。爆出上面的异常</span><br><span class="line">kgen.init(type.value, random);</span><br><span class="line">SecretKey secretKey &#x3D; kgen.generateKey();</span><br></pre></td></tr></table></figure><p>感到一脸懵逼，还好网络是万能的，百度一下，简单对比一下，就找到了解决方案。然后测试之后发现也是没有问题的。</p><p>异常原因：如果密钥大于128, 会抛出java.security.InvalidKeyException: Illegal key size 异常. 因为密钥长度是受限制的, java运行时环境读到的是受限的policy文件. 文件位于${java_home}/jre/lib/security, 这种限制是因为美国对软件出口的控制.</p><p>解决方案：去官方下载JCE无限制权限策略文件。</p><p>JDK5的下载地址: <a href="http://www.oracle.com/technetwork/java/javasebusiness/downloads/java-archive-downloads-java-plat-419418.html#jce_policy-1.5.0-oth-JPR">http://www.oracle.com/technetwork/java/javasebusiness/downloads/java-archive-downloads-java-plat-419418.html#jce_policy-1.5.0-oth-JPR</a></p><p>JDK6的下载地址: <a href="http://www.oracle.com/technetwork/java/javase/downloads/jce-6-download-429243.html">http://www.oracle.com/technetwork/java/javase/downloads/jce-6-download-429243.html</a></p><p>JDK7的下载地址: <a href="http://www.oracle.com/technetwork/java/javase/downloads/jce-7-download-432124.html">http://www.oracle.com/technetwork/java/javase/downloads/jce-7-download-432124.html</a></p><p>JDK8的下载地址: <a href="http://www.oracle.com/technetwork/java/javase/downloads/jce8-download-2133166.html">http://www.oracle.com/technetwork/java/javase/downloads/jce8-download-2133166.html</a></p><p>下载后解压，可以看到local_policy.jar和US_export_policy.jar以及readme.txt</p><p>如果安装了JRE，将两个jar文件放到%JRE_HOME%\lib\security目录下覆盖原来的文件</p><p>如果安装了JDK，还要将两个jar文件也放到%JDK_HOME%\jre\lib\security目录下覆盖原来文件。</p><p>然后DuangDuangDuangDuang，就ok了。</p>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
          <category> BUG </category>
          
      </categories>
      
      
        <tags>
            
            <tag> BUG </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Element UI DatePicker 禁用当前日之前的时间</title>
      <link href="posts/69ab28bb.html"/>
      <url>posts/69ab28bb.html</url>
      
        <content type="html"><![CDATA[<p>这篇文章主要介绍了 vue element-ui el-date-picker 禁用当日之前时间,文中给大家提供了代码段和截图，非常不错，具有一定的参考借鉴价值，需要的朋友可以参考下。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;el-date-picker</span><br><span class="line">  v-model=<span class="string">&quot;timingDay&quot;</span></span><br><span class="line">  :picker-options=<span class="string">&quot;expireTimeOption&quot;</span></span><br><span class="line">  format=<span class="string">&quot;yyyy-MM-dd&quot;</span></span><br><span class="line">  <span class="built_in">type</span>=<span class="string">&quot;date&quot;</span></span><br><span class="line">  value-format=<span class="string">&quot;yyyy-MM-dd&quot;</span></span><br><span class="line">  placeholder=<span class="string">&quot;选择时间&quot;</span>/&gt;</span><br></pre></td></tr></table></figure><p>其中 <code>:picker-options=&quot;expireTimeOption&quot;</code> 便是限制选择时间的属性，在data中可以这样写</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">data：&#123;</span><br><span class="line"> <span class="built_in">return</span>&#123;</span><br><span class="line">   timingDay: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">   expireTimeOption: &#123;</span><br><span class="line">      disabledDate(date) &#123;</span><br><span class="line">        <span class="built_in">return</span> date.getTime() &lt; Date.now() - 8.64e7</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>这样便实现了禁用当日之前时间</p><p><img src="https://s2.ax1x.com/2020/01/06/lsZEd0.png" class="lazyload placeholder" data-srcset="https://s2.ax1x.com/2020/01/06/lsZEd0.png" srcset="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/site-img/img-loading.gif" alt="datepicker"></p><p>以上所述是小编给大家介绍的vue element-ui el-date-picker限制选择时间为当天之前的代码，希望对大家有所帮助，如果大家有任何疑问请给我留言，小编会及时回复大家的。</p>]]></content>
      
      
      <categories>
          
          <category> Vue </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Vue </tag>
            
            <tag> el-date-picker </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Vue中Axios的封装与使用</title>
      <link href="posts/4394a738.html"/>
      <url>posts/4394a738.html</url>
      
        <content type="html"><![CDATA[<h2 id="Axios是什么，为什么要统一封装？">Axios是什么，为什么要统一封装？</h2><p>axios 是一个基于 promise 的 http 库，可运行在浏览器端和 node.js 中。他有很多优秀的特性，例如统一进行拦截请求和响应、取消请求、转换 json 、客户端防御 XSRF 等。所以在日常开发中可以直接推荐我们使用 axios 库。如果还对 axios 不了解的，可以移步 <a href="http://www.axios-js.com/docs/">axios文档</a>。回归正题，我们所要的说的 axios 的封装和 api 接口的统一管理，其实主要目的就是在帮助我们简化代码和利于后期的更新维护。</p><h2 id="安装">安装</h2><p>使用 npm：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm install axios</span><br></pre></td></tr></table></figure><p>使用 bower：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ bower install axios</span><br></pre></td></tr></table></figure><p>使用 cdn：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;script src=<span class="string">&quot;https://unpkg.com/axios/dist/axios.min.js&quot;</span>&gt;&lt;/script&gt;</span><br></pre></td></tr></table></figure><h2 id="统一封装Axios拦截器">统一封装Axios拦截器</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br></pre></td><td class="code"><pre><span class="line">import axios from <span class="string">&#x27;axios&#x27;</span>  // 引入axios</span><br><span class="line">import &#123; Message, MessageBox &#125; from <span class="string">&#x27;element-ui&#x27;</span>  // 这里我是使用elementUI的组件来给提示</span><br><span class="line">import store from <span class="string">&#x27;../store&#x27;</span>  //引入Vuex的Store</span><br><span class="line">import &#123; getToken &#125; from <span class="string">&#x27;@/utils/auth&#x27;</span>  //一个获取cookie中token的工具类</span><br><span class="line">import Cookies from <span class="string">&#x27;js-cookie&#x27;</span>  //引入cookie</span><br><span class="line"></span><br><span class="line">// 创建axios实例，在这里可以设置请求的默认配置</span><br><span class="line">const service = axios.create(&#123;</span><br><span class="line">  baseURL: process.env.BASE_API, //根据自己配置的反向代理去设置不同环境的baeUrl</span><br><span class="line">  timeout: 50000, // 请求超时时间,</span><br><span class="line">  headers: &#123;</span><br><span class="line">    <span class="string">&#x27;Content-Type&#x27;</span>: <span class="string">&#x27;application/json;charset=utf-8&#x27;</span></span><br><span class="line">  &#125;</span><br><span class="line">  // withCredentials : <span class="literal">true</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">// request 拦截器(言外之意就是在发起请求前做什么)</span><br><span class="line">service.interceptors.request.use(</span><br><span class="line">  config =&gt; &#123;</span><br><span class="line">    <span class="keyword">if</span> (store.getters.token) &#123;</span><br><span class="line">      config.headers[<span class="string">&#x27;X-Token&#x27;</span>] = getToken() // 让每个请求携带自定义token 请根据实际情况自行修改</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">return</span> config</span><br><span class="line">  &#125;,</span><br><span class="line">  error =&gt; &#123;</span><br><span class="line">    // 对请求错误做些什么</span><br><span class="line">    console.log(error) // <span class="keyword">for</span> debug</span><br><span class="line">    <span class="built_in">return</span> Promise.reject(error)</span><br><span class="line">  &#125;</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">// response 拦截器</span><br><span class="line">service.interceptors.response.use(</span><br><span class="line">  response =&gt; &#123;</span><br><span class="line">    /**</span><br><span class="line">     * code为非0是抛错 可结合自己业务进行修改</span><br><span class="line">     */</span><br><span class="line">    <span class="built_in">let</span> message</span><br><span class="line">    <span class="built_in">let</span> title</span><br><span class="line">    <span class="built_in">let</span> confirmButtonText</span><br><span class="line">    <span class="built_in">let</span> cancelButtonText</span><br><span class="line">    const res = response.data</span><br><span class="line">    <span class="keyword">if</span> (res.code !== 0) &#123;</span><br><span class="line">      Message(&#123;</span><br><span class="line">        message: res.message,</span><br><span class="line">        <span class="built_in">type</span>: <span class="string">&#x27;error&#x27;</span>,</span><br><span class="line">        duration: 5 * 1000</span><br><span class="line">      &#125;)</span><br><span class="line">      // 50008:非法的token; 50012:其他客户端登录了;  50014:Token 过期了;</span><br><span class="line">      <span class="keyword">if</span> (res.code === 50008 || res.code === 50012 || res.code === <span class="string">&#x27;50014&#x27;</span> || res.code === <span class="string">&#x27;333&#x27;</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (Cookies.get(<span class="string">&#x27;language&#x27;</span>) === <span class="string">&#x27;zh&#x27;</span>) &#123;</span><br><span class="line">          message = <span class="string">&#x27;登录超时，请重新登录!&#x27;</span></span><br><span class="line">          title = <span class="string">&#x27;确定登出&#x27;</span></span><br><span class="line">          confirmButtonText = <span class="string">&#x27;重新登录&#x27;</span></span><br><span class="line">          cancelButtonText = <span class="string">&#x27;取消&#x27;</span></span><br><span class="line">        &#125;</span><br><span class="line">        MessageBox.confirm(</span><br><span class="line">          message,</span><br><span class="line">          title,</span><br><span class="line">          &#123;</span><br><span class="line">            confirmButtonText: confirmButtonText,</span><br><span class="line">            cancelButtonText: cancelButtonText,</span><br><span class="line">            <span class="built_in">type</span>: <span class="string">&#x27;warning&#x27;</span>,</span><br><span class="line">            showCancelButton: <span class="literal">false</span></span><br><span class="line">          &#125;</span><br><span class="line">        ).<span class="keyword">then</span>(() =&gt; &#123;</span><br><span class="line">          store.dispatch(<span class="string">&#x27;FedLogOut&#x27;</span>).<span class="keyword">then</span>(() =&gt; &#123;</span><br><span class="line">            location.reload() // 为了重新实例化vue-router对象 避免bug</span><br><span class="line">          &#125;)</span><br><span class="line">        &#125;).catch(() =&gt; &#123;</span><br><span class="line">          store.dispatch(<span class="string">&#x27;FedLogOut&#x27;</span>).<span class="keyword">then</span>(() =&gt; &#123;</span><br><span class="line">            location.reload() // 为了重新实例化vue-router对象 避免bug</span><br><span class="line">          &#125;)</span><br><span class="line">        &#125;)</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="built_in">return</span> Promise.reject(new Error(res.message || <span class="string">&#x27;Error&#x27;</span>))</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      console.log(response)</span><br><span class="line">      <span class="built_in">return</span> response.data</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  error =&gt; &#123;</span><br><span class="line">    console.log(<span class="string">&#x27;err&#x27;</span> + error) // <span class="keyword">for</span> debug</span><br><span class="line">    Message(&#123;</span><br><span class="line">      message: error.message,</span><br><span class="line">      <span class="built_in">type</span>: <span class="string">&#x27;error&#x27;</span>,</span><br><span class="line">      duration: 5 * 1000</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">    <span class="built_in">return</span> Promise.reject(error)</span><br><span class="line">  &#125;</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="built_in">export</span> default service</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="统一进行接口api管理">统一进行接口api管理</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">// 每个模块都应该有自己的接口文件去统一管理api</span><br><span class="line">import request from <span class="string">&#x27;@/utils/request&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">export</span> <span class="keyword">function</span> login(data) &#123;</span><br><span class="line">  <span class="built_in">return</span> request(&#123;</span><br><span class="line">    url: <span class="string">&#x27;/login&#x27;</span>,</span><br><span class="line">    method: <span class="string">&#x27;post&#x27;</span>,</span><br><span class="line">    data: data</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="页面上的使用">页面上的使用</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">import &#123; login &#125; from <span class="string">&#x27;@/api/login&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">export</span> default &#123;</span><br><span class="line">  name: <span class="string">&#x27;login&#x27;</span>,</span><br><span class="line">  <span class="function"><span class="title">data</span></span> () &#123;</span><br><span class="line">    <span class="built_in">return</span> &#123;&#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="function"><span class="title">mounted</span></span> () &#123;</span><br><span class="line">    <span class="built_in">let</span> params = &#123; userName: <span class="string">&#x27;admin&#x27;</span>, password: <span class="string">&#x27;123456&#x27;</span>&#125;</span><br><span class="line">    login(params).<span class="keyword">then</span>(res =&gt; &#123;</span><br><span class="line">      console.log(res, <span class="string">&#x27;这是响应的结果&#x27;</span>)</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="我的项目目录结构">我的项目目录结构</h2><p><img src="https://s2.ax1x.com/2019/12/04/QQXpGV.png" class="lazyload placeholder" data-srcset="https://s2.ax1x.com/2019/12/04/QQXpGV.png" srcset="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/site-img/img-loading.gif" alt="目录结构"></p><h2 id="总结">总结</h2><p>以上就是这篇文章的全部内容了，希望本文的内容对大家的学习或者工作具有一定的参考学习价值，如果有疑问大家可以留言交流，谢谢大家的支持。</p>]]></content>
      
      
      <categories>
          
          <category> Vue </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Vue </tag>
            
            <tag> Axios </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>为Hexo添加RSS订阅</title>
      <link href="posts/19c94341.html"/>
      <url>posts/19c94341.html</url>
      
        <content type="html"><![CDATA[<h2 id="配置">配置</h2><p>首先添加功能插件，在 hexo 项目根目录下执行该命令</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-generator-feed --save</span><br></pre></td></tr></table></figure><p>然后在 hexo 根目录下的 <code>_config.yml</code> 文件中添加配置</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#订阅RSS</span></span><br><span class="line">feed:</span><br><span class="line">  <span class="built_in">type</span>: atom</span><br><span class="line">  path: atom.xml</span><br><span class="line">  <span class="built_in">limit</span>: <span class="literal">false</span></span><br></pre></td></tr></table></figure><p>配置含义：</p><ol><li><code>type</code>: RSS的类型(atom/rss2)</li><li><code>path</code>: 文件路径，默认是 atom.xml/rss2.xml</li><li><code>limit</code>: 展示文章的数量,使用 0 或则 false 代表展示全部</li><li><code>hub</code>: URL of the PubSubHubbub hubs (如果使用不到可以为空)</li><li><code>content</code>: （可选）设置 <code>true</code> 可以在 RSS 文件中包含文章全部内容，默认：<code>false</code></li><li><code>content_limit</code>: （可选）摘要中使用的帖子内容的默认长度。 仅在内容设置为false且未显示自定义帖子描述时才使用。</li><li><code>content_limit_delim</code>: （可选）如果content_limit用于缩短post内容，则仅在此分隔符的最后一次出现时进行剪切，然后才达到字符限制。默认不使用。</li><li><code>icon</code>: （可选）自定义订阅图标，默认设置为主配置中指定的图标。</li><li><code>order_by</code>: 订阅内容的顺序。 (默认: -date)</li></ol><p>然后在 theme 目录下的 _config.yml 文件中添加配置</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rss: /atom.xml</span><br></pre></td></tr></table></figure><p>随后重新生成博客静态文件</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo clean &amp;&amp; hexo g</span><br></pre></td></tr></table></figure><p>在 <code>public</code> 文件夹中就会生成 <code>atom.xml</code> 文件，部署后直接在根目录中访问该文件即可</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://hasaik.com/atom.xml</span><br></pre></td></tr></table></figure><h2 id="订阅">订阅</h2><p>下面以我博客为例子</p><p>订阅地址为：<a href="https://hasaik.com/atom.xml">https://hasaik.com/atom.xml</a>（PS：订阅地址改为自己的博客）</p><p><img src="https://s2.ax1x.com/2019/11/29/QAuHOO.png" class="lazyload placeholder" data-srcset="https://s2.ax1x.com/2019/11/29/QAuHOO.png" srcset="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/site-img/img-loading.gif" alt="新建订阅"></p><p><img src="https://s2.ax1x.com/2019/11/29/QAKg3t.png" class="lazyload placeholder" data-srcset="https://s2.ax1x.com/2019/11/29/QAKg3t.png" srcset="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/site-img/img-loading.gif" alt="订阅成功"></p><p><img src="https://s2.ax1x.com/2019/11/29/QAKqg0.png" class="lazyload placeholder" data-srcset="https://s2.ax1x.com/2019/11/29/QAKqg0.png" srcset="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/site-img/img-loading.gif" alt="查看邮箱中的博文"></p><p>以上就是关于博客 RSS 订阅的全部介绍，如果您喜欢我发布的文章，亦可订阅<a href="https://mailchi.mp/3ca18a2a9749/xuxuy">小站</a>，小站将第一时间为您奉上新发布的文章。</p>]]></content>
      
      
      <categories>
          
          <category> Hexo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Hexo </tag>
            
            <tag> Rss </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SpringBoot两种打包方式</title>
      <link href="posts/b4831a5e.html"/>
      <url>posts/b4831a5e.html</url>
      
        <content type="html"><![CDATA[<p>相信所有人都喜欢简洁的打包方式，不需要去敲命令来执行打包，所以今天介绍两种常用的打包方式。</p><h2 id="Maven插件打包">Maven插件打包</h2><p>在项目 <code>pom.xml</code> 文件中 build 标签的代码为朋友们奉上，其中的注意的点都有注释</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line">&lt;build&gt;</span><br><span class="line">    &lt;!--打包项目名（根据自己项目定）--&gt;</span><br><span class="line">    &lt;finalName&gt;contests&lt;/finalName&gt;</span><br><span class="line">    &lt;plugins&gt;</span><br><span class="line">        &lt;!-- 设置jdk版本为1.8 --&gt;</span><br><span class="line">        &lt;plugin&gt;</span><br><span class="line">            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;</span><br><span class="line">            &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;</span><br><span class="line">            &lt;configuration&gt;</span><br><span class="line">                &lt;<span class="built_in">source</span>&gt;1.8&lt;/<span class="built_in">source</span>&gt;</span><br><span class="line">                &lt;target&gt;1.8&lt;/target&gt;</span><br><span class="line">                &lt;compilerArguments&gt;</span><br><span class="line">                    &lt;!--如果是在Windows下面开发，<span class="variable">$&#123;java.home&#125;</span>/lib/rt.jar ; <span class="variable">$&#123;java.home，这里中间是；号隔开，Linux中则是：号隔开，这是个很坑的地方我提一下。--&gt;</span></span><br><span class="line"><span class="variable">                    &lt;bootclasspath&gt;<span class="variable">$&#123;java.home&#125;</span>/lib/rt.jar;<span class="variable">$&#123;java.home&#125;</span>/lib/jce.jar&lt;/bootclasspath&gt;</span></span><br><span class="line"><span class="variable">                &lt;/compilerArguments&gt;</span></span><br><span class="line"><span class="variable">            &lt;/configuration&gt;</span></span><br><span class="line"><span class="variable">        &lt;/plugin&gt;</span></span><br><span class="line"><span class="variable">        &lt;plugin&gt;</span></span><br><span class="line"><span class="variable">            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span></span><br><span class="line"><span class="variable">            &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;</span></span><br><span class="line"><span class="variable">            &lt;configuration&gt;</span></span><br><span class="line"><span class="variable">                &lt;fork&gt;true&lt;/fork&gt; &lt;!-- 如果没有该配置，devtools不会生效 --&gt;</span></span><br><span class="line"><span class="variable">                &lt;outputDirectory&gt;<span class="variable">$&#123;project.build.directory&#125;</span>/<span class="variable">$&#123;project.name&#125;</span>&lt;/outputDirectory&gt;</span></span><br><span class="line"><span class="variable">                &lt;addResources&gt;false&lt;/addResources&gt;</span></span><br><span class="line"><span class="variable">                &lt;includeSystemScope&gt;true&lt;/includeSystemScope&gt;</span></span><br><span class="line"><span class="variable">            &lt;/configuration&gt;</span></span><br><span class="line"><span class="variable">        &lt;/plugin&gt;</span></span><br><span class="line"><span class="variable"></span></span><br><span class="line"><span class="variable">        &lt;plugin&gt;</span></span><br><span class="line"><span class="variable">            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;</span></span><br><span class="line"><span class="variable">            &lt;artifactId&gt;maven-resources-plugin&lt;/artifactId&gt;</span></span><br><span class="line"><span class="variable">            &lt;executions&gt;</span></span><br><span class="line"><span class="variable">                &lt;execution&gt;</span></span><br><span class="line"><span class="variable">                    &lt;id&gt;copy-resources&lt;/id&gt;</span></span><br><span class="line"><span class="variable">                    &lt;phase&gt;package&lt;/phase&gt;</span></span><br><span class="line"><span class="variable">                    &lt;goals&gt;</span></span><br><span class="line"><span class="variable">                        &lt;goal&gt;copy-resources&lt;/goal&gt;</span></span><br><span class="line"><span class="variable">                    &lt;/goals&gt;</span></span><br><span class="line"><span class="variable">                    &lt;configuration&gt;</span></span><br><span class="line"><span class="variable">                        &lt;encoding&gt;UTF-8&lt;/encoding&gt;</span></span><br><span class="line"><span class="variable">                        &lt;outputDirectory&gt;</span></span><br><span class="line"><span class="variable">                            <span class="variable">$&#123;project.build.directory&#125;</span>/<span class="variable">$&#123;project.name&#125;</span></span></span><br><span class="line"><span class="variable">                        &lt;/outputDirectory&gt;   &lt;!-- 表示把配置文件拷到和jar包同一个路径下 --&gt;</span></span><br><span class="line"><span class="variable">                        &lt;resources&gt;</span></span><br><span class="line"><span class="variable">                            &lt;resource&gt;</span></span><br><span class="line"><span class="variable">                                &lt;directory&gt;src/main/resources/&lt;/directory&gt;</span></span><br><span class="line"><span class="variable">                            &lt;/resource&gt;</span></span><br><span class="line"><span class="variable">                        &lt;/resources&gt;</span></span><br><span class="line"><span class="variable">                    &lt;/configuration&gt;</span></span><br><span class="line"><span class="variable">                &lt;/execution&gt;</span></span><br><span class="line"><span class="variable">                &lt;execution&gt;</span></span><br><span class="line"><span class="variable">                    &lt;id&gt;copy-resources-classes&lt;/id&gt;</span></span><br><span class="line"><span class="variable">                    &lt;phase&gt;package&lt;/phase&gt;</span></span><br><span class="line"><span class="variable">                    &lt;goals&gt;</span></span><br><span class="line"><span class="variable">                        &lt;goal&gt;copy-resources&lt;/goal&gt;</span></span><br><span class="line"><span class="variable">                    &lt;/goals&gt;</span></span><br><span class="line"><span class="variable">                    &lt;configuration&gt;</span></span><br><span class="line"><span class="variable">                        &lt;encoding&gt;UTF-8&lt;/encoding&gt;</span></span><br><span class="line"><span class="variable">                        &lt;outputDirectory&gt;</span></span><br><span class="line"><span class="variable">                            <span class="variable">$&#123;project.build.directory&#125;</span>/classes</span></span><br><span class="line"><span class="variable">                        &lt;/outputDirectory&gt;   &lt;!-- 表示把配置文件拷到和jar包同一个路径下 --&gt;</span></span><br><span class="line"><span class="variable">                        &lt;resources&gt;</span></span><br><span class="line"><span class="variable">                            &lt;resource&gt;</span></span><br><span class="line"><span class="variable">                                &lt;directory&gt;src/main/resources/&lt;/directory&gt;</span></span><br><span class="line"><span class="variable">                            &lt;/resource&gt;</span></span><br><span class="line"><span class="variable">                        &lt;/resources&gt;</span></span><br><span class="line"><span class="variable">                    &lt;/configuration&gt;</span></span><br><span class="line"><span class="variable">                &lt;/execution&gt;</span></span><br><span class="line"><span class="variable">            &lt;/executions&gt;</span></span><br><span class="line"><span class="variable">        &lt;/plugin&gt;</span></span><br><span class="line"><span class="variable">    &lt;/plugins&gt;</span></span><br><span class="line"><span class="variable">&lt;/build&gt;</span></span><br></pre></td></tr></table></figure><p>在 <code>pom.xml</code> 中有一个这样的地方：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;properties&gt;</span><br><span class="line">    &lt;java.version&gt;1.8&lt;/java.version&gt;</span><br><span class="line">    &lt;!-- maven打包跳过测试阶段（有的数据库连接的是本地的，不是服务器的，打包过程会出现连接数据库失败的错误，设置跳过测试阶段就解决了，不影响发布） --&gt;</span><br><span class="line">    &lt;skipTests&gt;<span class="literal">true</span>&lt;/skipTests&gt;</span><br><span class="line">&lt;/properties&gt;</span><br></pre></td></tr></table></figure><p>在 <code>pom.xml</code> 中 <code>&lt;packaging&gt;war&lt;/packaging&gt;</code> 是选择打包的类型（war，jar）</p><p>配置好 <code>pom.xml</code> 之后，一定要是 Jdk1.8 ，在IDEA的右上角，有个 Maven Project。</p><p><img src="https://s2.ax1x.com/2019/11/29/Qk8gWd.png" class="lazyload placeholder" data-srcset="https://s2.ax1x.com/2019/11/29/Qk8gWd.png" srcset="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/site-img/img-loading.gif" alt="maven打包"></p><p>先点Clean，然后点package然后项目目录多了个target文件夹，里面就生成了你要的jar包了，现在就可以去部署在服务器啦。</p><p><img src="https://s2.ax1x.com/2019/11/29/Qk8LSs.png" class="lazyload placeholder" data-srcset="https://s2.ax1x.com/2019/11/29/Qk8LSs.png" srcset="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/site-img/img-loading.gif" alt="target文件"></p><h2 id="IDEA自带打包">IDEA自带打包</h2><p>先在你项目的启动类中加入以下代码：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * springboot打包发布到tomcat需要</span><br><span class="line"> *</span><br><span class="line"> * @param application</span><br><span class="line"> * @<span class="built_in">return</span></span><br><span class="line"> */</span><br><span class="line">@Override</span><br><span class="line">protected SpringApplicationBuilder configure(SpringApplicationBuilder application) &#123;</span><br><span class="line">    <span class="built_in">return</span> application.sources(DemoApplication.class);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>接下来快捷键 Ctrl+Alt+Shift+S 同时按会出现下图页面</p><p><img src="https://s2.ax1x.com/2019/11/29/QkG2AU.png" class="lazyload placeholder" data-srcset="https://s2.ax1x.com/2019/11/29/QkG2AU.png" srcset="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/site-img/img-loading.gif" alt="idea自带打包"></p><p>点击 + 号！！！然后选择如图所示的 Empty</p><p><img src="https://s2.ax1x.com/2019/11/29/QkGqAO.png" class="lazyload placeholder" data-srcset="https://s2.ax1x.com/2019/11/29/QkGqAO.png" srcset="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/site-img/img-loading.gif" alt="idea"></p><p>出现如下界面</p><p><img src="https://s2.ax1x.com/2019/11/29/QkJG8J.png" class="lazyload placeholder" data-srcset="https://s2.ax1x.com/2019/11/29/QkJG8J.png" srcset="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/site-img/img-loading.gif" alt="idea"></p><p>设置完成后点击 OK。</p><p>接下来执行 Bulid ，选择你新建的打包方式名执行就 OK 啦。</p><p><img src="https://s2.ax1x.com/2019/11/29/QkJfVf.png" class="lazyload placeholder" data-srcset="https://s2.ax1x.com/2019/11/29/QkJfVf.png" srcset="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/site-img/img-loading.gif" alt="打包"></p><p><img src="https://s2.ax1x.com/2019/11/29/QkYis1.png" class="lazyload placeholder" data-srcset="https://s2.ax1x.com/2019/11/29/QkYis1.png" srcset="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/site-img/img-loading.gif" alt="idea打包"></p><p>以上就是介绍的两种打包方式，自行选择使用。</p>]]></content>
      
      
      <categories>
          
          <category> SpringBoot </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SpringBoot </tag>
            
            <tag> SpringBoot打包 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>本站已开通订阅功能</title>
      <link href="posts/dd9d9f86.html"/>
      <url>posts/dd9d9f86.html</url>
      
        <content type="html"><![CDATA[<p>小站新开通订阅功能，欢迎大家体验。</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">                   .::::.</span><br><span class="line">                 .::::::::.</span><br><span class="line">                :::::::::::</span><br><span class="line">             ..:::::::::::&#x27;</span><br><span class="line">          &#x27;::::::::::::&#x27;</span><br><span class="line">            .::::::::::</span><br><span class="line">       &#x27;::::::::::::::..</span><br><span class="line">            ..::::::::::::.</span><br><span class="line">          ``::::::::::::::::</span><br><span class="line">           ::::``:::::::::&#x27;        .:::.</span><br><span class="line">          ::::&#x27;   &#x27;:::::&#x27;       .::::::::.</span><br><span class="line">        .::::&#x27;      ::::     .:::::::&#x27;::::.</span><br><span class="line">       .:::&#x27;       :::::  .:::::::::&#x27; &#x27;:::::.</span><br><span class="line">      .::&#x27;        :::::.:::::::::&#x27;      &#x27;:::::.</span><br><span class="line">     .::&#x27;         ::::::::::::::&#x27;         ``::::.</span><br><span class="line"> ...:::           ::::::::::::&#x27;              ``::.</span><br><span class="line">````&#x27;:.          &#x27;:::::::::&#x27;                  ::::..</span><br><span class="line">                   &#x27;.:::::&#x27;                    &#x27;:&#x27;````..</span><br></pre></td></tr></table></figure><p>订阅地址：</p><a href=https://mailchi.mp/3ca18a2a9749/xuxuy target='_blank' class='LinkCard'><style type=text/css>.LinkCard,.LinkCard:hover{text-decoration:none;border:none!important;color:inherit!important}.LinkCard{position:relative;display:block;margin:5px auto;width:330px;box-sizing:border-box;border-radius:12px;max-width:100%;overflow:hidden;color:inherit;text-decoration:none}.ztext{word-break:break-word;line-height:1.6}.LinkCard-backdrop{position:absolute;top:0;left:0;right:0;bottom:0;background-repeat:no-repeat;-webkit-filter:blur(20px);filter:blur(20px);background-size:cover;background-position:center}.LinkCard,.LinkCard:hover{text-decoration:none;border:none!important;color:inherit!important}.LinkCard-content{position:relative;display:flex;align-items:center;justify-content:space-between;padding:12px;border-radius:inherit;background-color:rgba(246,246,246,0.88)}.LinkCard-text{overflow:hidden;width:260px;}.LinkCard-title{white-space: nowrap;display:-webkit-box;-webkit-line-clamp:2;overflow:hidden;text-overflow:ellipsis;max-height:calc(16px * 1.25 * 2);font-size:16px;font-weight:500;line-height:1.25;color:#1a1a1a}@media(max-width: 767px){.LinkCard-title{font-size:13px;}}.LinkCard-meta{display:flex;margin-top:4px;font-size:14px;line-height:20px;color:#999;white-space:nowrap}.LinkCard-imageCell{margin-left:28px;border-radius:30px;width:70px;}.LinkCard-image{background-image:url('https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/linkcard/spider-man.png');background-size: 100% 100%;display:block;width:65px;height:65px;border-radius:inherit;margin-bottom: 0 !important;}</style><span class=LinkCard-backdrop style=background-image:url(https://zhstatic.zhihu.com/assets/zhihu/editor/zhihu-card-default.svg)></span><span class=LinkCard-content><span class=LinkCard-text><span class=LinkCard-title>订阅地址</span><span class=LinkCard-meta><span style=display:inline-flex;align-items:center><svg class='Zi Zi--InsertLink' fill=currentColor viewBox='0 0 24 24' width=17 height=17><path d='M6.77 17.23c-.905-.904-.94-2.333-.08-3.193l3.059-3.06-1.192-1.19-3.059 3.058c-1.489 1.489-1.427 3.954.138 5.519s4.03 1.627 5.519.138l3.059-3.059-1.192-1.192-3.059 3.06c-.86.86-2.289.824-3.193-.08zm3.016-8.673l1.192 1.192 3.059-3.06c.86-.86 2.289-.824 3.193.08.905.905.94 2.334.08 3.194l-3.059 3.06 1.192 1.19 3.059-3.058c1.489-1.489 1.427-3.954-.138-5.519s-4.03-1.627-5.519-.138L9.786 8.557zm-1.023 6.68c.33.33.863.343 1.177.029l5.34-5.34c.314-.314.3-.846-.03-1.176-.33-.33-.862-.344-1.176-.03l-5.34 5.34c-.314.314-.3.846.03 1.177z' fill-rule=evenodd></path></svg></span><span style='margin-top: -0.1rem;'>https://mailchi.mp/3ca18a2a9749/xuxuy</span></span></span><span class='LinkCard-imageCell'><div class='LinkCard-image'></div></span></span></a><p>佛祖保佑永无BUG 神兽护体 代码注释(各种版本)：</p><a href=https://blog.csdn.net/vbirdbest/article/details/78995793 target='_blank' class='LinkCard'><style type=text/css>.LinkCard,.LinkCard:hover{text-decoration:none;border:none!important;color:inherit!important}.LinkCard{position:relative;display:block;margin:5px auto;width:330px;box-sizing:border-box;border-radius:12px;max-width:100%;overflow:hidden;color:inherit;text-decoration:none}.ztext{word-break:break-word;line-height:1.6}.LinkCard-backdrop{position:absolute;top:0;left:0;right:0;bottom:0;background-repeat:no-repeat;-webkit-filter:blur(20px);filter:blur(20px);background-size:cover;background-position:center}.LinkCard,.LinkCard:hover{text-decoration:none;border:none!important;color:inherit!important}.LinkCard-content{position:relative;display:flex;align-items:center;justify-content:space-between;padding:12px;border-radius:inherit;background-color:rgba(246,246,246,0.88)}.LinkCard-text{overflow:hidden;width:260px;}.LinkCard-title{white-space: nowrap;display:-webkit-box;-webkit-line-clamp:2;overflow:hidden;text-overflow:ellipsis;max-height:calc(16px * 1.25 * 2);font-size:16px;font-weight:500;line-height:1.25;color:#1a1a1a}@media(max-width: 767px){.LinkCard-title{font-size:13px;}}.LinkCard-meta{display:flex;margin-top:4px;font-size:14px;line-height:20px;color:#999;white-space:nowrap}.LinkCard-imageCell{margin-left:28px;border-radius:30px;width:70px;}.LinkCard-image{background-image:url('https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/linkcard/spider-man.png');background-size: 100% 100%;display:block;width:65px;height:65px;border-radius:inherit;margin-bottom: 0 !important;}</style><span class=LinkCard-backdrop style=background-image:url(https://zhstatic.zhihu.com/assets/zhihu/editor/zhihu-card-default.svg)></span><span class=LinkCard-content><span class=LinkCard-text><span class=LinkCard-title>佛祖保佑、永无BUG</span><span class=LinkCard-meta><span style=display:inline-flex;align-items:center><svg class='Zi Zi--InsertLink' fill=currentColor viewBox='0 0 24 24' width=17 height=17><path d='M6.77 17.23c-.905-.904-.94-2.333-.08-3.193l3.059-3.06-1.192-1.19-3.059 3.058c-1.489 1.489-1.427 3.954.138 5.519s4.03 1.627 5.519.138l3.059-3.059-1.192-1.192-3.059 3.06c-.86.86-2.289.824-3.193-.08zm3.016-8.673l1.192 1.192 3.059-3.06c.86-.86 2.289-.824 3.193.08.905.905.94 2.334.08 3.194l-3.059 3.06 1.192 1.19 3.059-3.058c1.489-1.489 1.427-3.954-.138-5.519s-4.03-1.627-5.519-.138L9.786 8.557zm-1.023 6.68c.33.33.863.343 1.177.029l5.34-5.34c.314-.314.3-.846-.03-1.176-.33-.33-.862-.344-1.176-.03l-5.34 5.34c-.314.314-.3.846.03 1.177z' fill-rule=evenodd></path></svg></span><span style='margin-top: -0.1rem;'>https://blog.csdn.net/vbirdbest/article/details/78995793</span></span></span><span class='LinkCard-imageCell'><div class='LinkCard-image'></div></span></span></a>]]></content>
      
      
      <categories>
          
          <category> Hexo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Hexo </tag>
            
            <tag> 邮件订阅 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hexo优化之lazyload图片懒加载</title>
      <link href="posts/61913369.html"/>
      <url>posts/61913369.html</url>
      
        <content type="html"><![CDATA[<h2 id="前言">前言</h2><p>Hexo 博客虽然功能很强大，但也越来越繁重了，访问速度上有了一些问题，这里我也考虑了许多，例如加 cdn，将国外的资源引用改为国内镜像等方式。今天又想到如果一个页面的图片很多，那么如何来提高博客的访问速度呢？</p><p>经过一番寻找之后，找到一个方案，就是懒加载，通俗点讲就是当你翻到图片的时候再加载那张图片，而不是以下将本页面的所有图片都加载完。</p><h2 id="配置">配置</h2><p>在你的 Hexo 目录下，执行以下命令：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-lazyload-image --save</span><br></pre></td></tr></table></figure><p>然后在你的 Hexo 目录的配置文件 <code>_config.yml</code> 中添加配置:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">lazyload:</span><br><span class="line">  <span class="built_in">enable</span>: <span class="literal">true</span></span><br><span class="line">  onlypost: <span class="literal">false</span></span><br><span class="line">  loadingImg: /images/loading.gif</span><br></pre></td></tr></table></figure><h2 id="注意">注意</h2><ol><li>onlypost：是否仅文章中的图片做懒加载，如果为 false，则主题中的其他图片，也会做懒加载，如头像，logo 等任何图片。</li><li>loadingImg：图片未加载时的代替图，不填写使用默认加载图片，如果需要自定义，添填入 loading 图片地址，如果是本地图片，不要忘记把图片添加到你的主题目录下。 Next 主题需将图片放到 <code>\themes\next\source\images</code> 目录下，然后引用时：<code>loadingImg: /images/图片文件名</code></li></ol><h2 id="福利">福利</h2><p>送上两个gif加载中动图</p><span class='btn regular'><a class="button" href='https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/site-img/loading3.gif' title='点击下载动图1'><i class='fas fa-download'></i>点击下载动图1</a></span><span class='btn regular'><a class="button" href='https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/site-img/loading4.gif' title='点击下载动图2'><i class='fas fa-download'></i>点击下载动图2</a></span>]]></content>
      
      
      <categories>
          
          <category> Hexo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Hexo </tag>
            
            <tag> lazyload </tag>
            
            <tag> 图片 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Java base64加密解密</title>
      <link href="posts/c4782247.html"/>
      <url>posts/c4782247.html</url>
      
        <content type="html"><![CDATA[<h2 id="为什么要使用Base64">为什么要使用Base64</h2><p>Base 64主要用途不是加密，而是把一些二进制数转成普通字符，方便在网络上传输。 由于一些二进制字符在传输协议中属于控制字符，不能直接传送，所以需要转换一下才可以。由于某些系统中只能使用ASCII字符，Base64就是用来将非ASCII字符的数据转换成ASCII字符的一种方法，Base64特别适合在http，mime协议下快速传输数据。比如网络中图片的传输。</p><p>Base64并非安全领域下的加密解密算法。虽然经常遇到所谓的base64的加密解密。但base64只能算是一个编码算法，对数据内容进行编码来适合传输。虽然base64编码过后原文也变成不能看到的字符格式，但是方式初级又简单。</p><h2 id="Base64原理">Base64原理</h2><p>Base64编码方法，要求把每三个8Bit的字节转换为四个6Bit的字节，其中，转换之后的这四个字节中每6个有效bit为是有效数据，空余的那两个 bit用0补上成为一个字节。因此Base64所造成数据冗余不是很严重，Base64是当今比较流行的编码方法，因为它编起来速度快而且简单。</p><p>举个例子，有三个字节的原始数据：aaaaaabb　bbbbccccc　ccdddddd（这里每个字母表示一个bit位）</p><p>那么编码之后会变成：00aaaaaa　00bbbbbb　00cccccc　00dddddd</p><p>所以可以看出base64编码简单，虽然编码后不是明文，看不出原文，但是解码也很简单。</p><h2 id="实现方式">实现方式</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.scaffolding.demo.utils;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.nio.charset.StandardCharsets;</span><br><span class="line"><span class="keyword">import</span> java.util.Base64;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span>: Xuxu</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span>: 2019-11-19 11:49</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Base64Util</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 加密</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">asBase64</span><span class="params">(String str)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> Base64.getEncoder().encodeToString(str.getBytes(StandardCharsets.UTF_8));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 解密</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">asString</span><span class="params">(String base64)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> String(Base64.getDecoder().decode(base64), StandardCharsets.UTF_8);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        String str = <span class="string">&quot;123456&quot;</span>;</span><br><span class="line">        <span class="comment">//加密</span></span><br><span class="line">        System.out.println(Base64Util.asBase64(str));</span><br><span class="line">        <span class="comment">//解密后</span></span><br><span class="line">        System.out.println(Base64Util.asString(Base64Util.asBase64(str)));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
          <category> 加密安全 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> Base64 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Java实现MD5加盐加密和MD5与SHA-1混合加盐加密两种方式</title>
      <link href="posts/a7df3b40.html"/>
      <url>posts/a7df3b40.html</url>
      
        <content type="html"><![CDATA[<p>现在一般的MD5加密在网上随随便便就能够解密，解密的网站有以下几个：</p><a href=http://pmd5.com/ target='_blank' class='LinkCard'><style type=text/css>.LinkCard,.LinkCard:hover{text-decoration:none;border:none!important;color:inherit!important}.LinkCard{position:relative;display:block;margin:5px auto;width:330px;box-sizing:border-box;border-radius:12px;max-width:100%;overflow:hidden;color:inherit;text-decoration:none}.ztext{word-break:break-word;line-height:1.6}.LinkCard-backdrop{position:absolute;top:0;left:0;right:0;bottom:0;background-repeat:no-repeat;-webkit-filter:blur(20px);filter:blur(20px);background-size:cover;background-position:center}.LinkCard,.LinkCard:hover{text-decoration:none;border:none!important;color:inherit!important}.LinkCard-content{position:relative;display:flex;align-items:center;justify-content:space-between;padding:12px;border-radius:inherit;background-color:rgba(246,246,246,0.88)}.LinkCard-text{overflow:hidden;width:260px;}.LinkCard-title{white-space: nowrap;display:-webkit-box;-webkit-line-clamp:2;overflow:hidden;text-overflow:ellipsis;max-height:calc(16px * 1.25 * 2);font-size:16px;font-weight:500;line-height:1.25;color:#1a1a1a}@media(max-width: 767px){.LinkCard-title{font-size:13px;}}.LinkCard-meta{display:flex;margin-top:4px;font-size:14px;line-height:20px;color:#999;white-space:nowrap}.LinkCard-imageCell{margin-left:28px;border-radius:30px;width:70px;}.LinkCard-image{background-image:url('https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/linkcard/spider-man.png');background-size: 100% 100%;display:block;width:65px;height:65px;border-radius:inherit;margin-bottom: 0 !important;}</style><span class=LinkCard-backdrop style=background-image:url(https://zhstatic.zhihu.com/assets/zhihu/editor/zhihu-card-default.svg)></span><span class=LinkCard-content><span class=LinkCard-text><span class=LinkCard-title>PMD5</span><span class=LinkCard-meta><span style=display:inline-flex;align-items:center><svg class='Zi Zi--InsertLink' fill=currentColor viewBox='0 0 24 24' width=17 height=17><path d='M6.77 17.23c-.905-.904-.94-2.333-.08-3.193l3.059-3.06-1.192-1.19-3.059 3.058c-1.489 1.489-1.427 3.954.138 5.519s4.03 1.627 5.519.138l3.059-3.059-1.192-1.192-3.059 3.06c-.86.86-2.289.824-3.193-.08zm3.016-8.673l1.192 1.192 3.059-3.06c.86-.86 2.289-.824 3.193.08.905.905.94 2.334.08 3.194l-3.059 3.06 1.192 1.19 3.059-3.058c1.489-1.489 1.427-3.954-.138-5.519s-4.03-1.627-5.519-.138L9.786 8.557zm-1.023 6.68c.33.33.863.343 1.177.029l5.34-5.34c.314-.314.3-.846-.03-1.176-.33-.33-.862-.344-1.176-.03l-5.34 5.34c-.314.314-.3.846.03 1.177z' fill-rule=evenodd></path></svg></span><span style='margin-top: -0.1rem;'>http://pmd5.com/</span></span></span><span class='LinkCard-imageCell'><div class='LinkCard-image'></div></span></span></a><a href=http://www.cmd5.com/ target='_blank' class='LinkCard'><style type=text/css>.LinkCard,.LinkCard:hover{text-decoration:none;border:none!important;color:inherit!important}.LinkCard{position:relative;display:block;margin:5px auto;width:330px;box-sizing:border-box;border-radius:12px;max-width:100%;overflow:hidden;color:inherit;text-decoration:none}.ztext{word-break:break-word;line-height:1.6}.LinkCard-backdrop{position:absolute;top:0;left:0;right:0;bottom:0;background-repeat:no-repeat;-webkit-filter:blur(20px);filter:blur(20px);background-size:cover;background-position:center}.LinkCard,.LinkCard:hover{text-decoration:none;border:none!important;color:inherit!important}.LinkCard-content{position:relative;display:flex;align-items:center;justify-content:space-between;padding:12px;border-radius:inherit;background-color:rgba(246,246,246,0.88)}.LinkCard-text{overflow:hidden;width:260px;}.LinkCard-title{white-space: nowrap;display:-webkit-box;-webkit-line-clamp:2;overflow:hidden;text-overflow:ellipsis;max-height:calc(16px * 1.25 * 2);font-size:16px;font-weight:500;line-height:1.25;color:#1a1a1a}@media(max-width: 767px){.LinkCard-title{font-size:13px;}}.LinkCard-meta{display:flex;margin-top:4px;font-size:14px;line-height:20px;color:#999;white-space:nowrap}.LinkCard-imageCell{margin-left:28px;border-radius:30px;width:70px;}.LinkCard-image{background-image:url('https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/linkcard/spider-man.png');background-size: 100% 100%;display:block;width:65px;height:65px;border-radius:inherit;margin-bottom: 0 !important;}</style><span class=LinkCard-backdrop style=background-image:url(https://zhstatic.zhihu.com/assets/zhihu/editor/zhihu-card-default.svg)></span><span class=LinkCard-content><span class=LinkCard-text><span class=LinkCard-title>CMD5</span><span class=LinkCard-meta><span style=display:inline-flex;align-items:center><svg class='Zi Zi--InsertLink' fill=currentColor viewBox='0 0 24 24' width=17 height=17><path d='M6.77 17.23c-.905-.904-.94-2.333-.08-3.193l3.059-3.06-1.192-1.19-3.059 3.058c-1.489 1.489-1.427 3.954.138 5.519s4.03 1.627 5.519.138l3.059-3.059-1.192-1.192-3.059 3.06c-.86.86-2.289.824-3.193-.08zm3.016-8.673l1.192 1.192 3.059-3.06c.86-.86 2.289-.824 3.193.08.905.905.94 2.334.08 3.194l-3.059 3.06 1.192 1.19 3.059-3.058c1.489-1.489 1.427-3.954-.138-5.519s-4.03-1.627-5.519-.138L9.786 8.557zm-1.023 6.68c.33.33.863.343 1.177.029l5.34-5.34c.314-.314.3-.846-.03-1.176-.33-.33-.862-.344-1.176-.03l-5.34 5.34c-.314.314-.3.846.03 1.177z' fill-rule=evenodd></path></svg></span><span style='margin-top: -0.1rem;'>http://www.cmd5.com/</span></span></span><span class='LinkCard-imageCell'><div class='LinkCard-image'></div></span></span></a><a href=http://tool.chinaz.com/tools/md5.aspx target='_blank' class='LinkCard'><style type=text/css>.LinkCard,.LinkCard:hover{text-decoration:none;border:none!important;color:inherit!important}.LinkCard{position:relative;display:block;margin:5px auto;width:330px;box-sizing:border-box;border-radius:12px;max-width:100%;overflow:hidden;color:inherit;text-decoration:none}.ztext{word-break:break-word;line-height:1.6}.LinkCard-backdrop{position:absolute;top:0;left:0;right:0;bottom:0;background-repeat:no-repeat;-webkit-filter:blur(20px);filter:blur(20px);background-size:cover;background-position:center}.LinkCard,.LinkCard:hover{text-decoration:none;border:none!important;color:inherit!important}.LinkCard-content{position:relative;display:flex;align-items:center;justify-content:space-between;padding:12px;border-radius:inherit;background-color:rgba(246,246,246,0.88)}.LinkCard-text{overflow:hidden;width:260px;}.LinkCard-title{white-space: nowrap;display:-webkit-box;-webkit-line-clamp:2;overflow:hidden;text-overflow:ellipsis;max-height:calc(16px * 1.25 * 2);font-size:16px;font-weight:500;line-height:1.25;color:#1a1a1a}@media(max-width: 767px){.LinkCard-title{font-size:13px;}}.LinkCard-meta{display:flex;margin-top:4px;font-size:14px;line-height:20px;color:#999;white-space:nowrap}.LinkCard-imageCell{margin-left:28px;border-radius:30px;width:70px;}.LinkCard-image{background-image:url('https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/linkcard/spider-man.png');background-size: 100% 100%;display:block;width:65px;height:65px;border-radius:inherit;margin-bottom: 0 !important;}</style><span class=LinkCard-backdrop style=background-image:url(https://zhstatic.zhihu.com/assets/zhihu/editor/zhihu-card-default.svg)></span><span class=LinkCard-content><span class=LinkCard-text><span class=LinkCard-title>站长工具</span><span class=LinkCard-meta><span style=display:inline-flex;align-items:center><svg class='Zi Zi--InsertLink' fill=currentColor viewBox='0 0 24 24' width=17 height=17><path d='M6.77 17.23c-.905-.904-.94-2.333-.08-3.193l3.059-3.06-1.192-1.19-3.059 3.058c-1.489 1.489-1.427 3.954.138 5.519s4.03 1.627 5.519.138l3.059-3.059-1.192-1.192-3.059 3.06c-.86.86-2.289.824-3.193-.08zm3.016-8.673l1.192 1.192 3.059-3.06c.86-.86 2.289-.824 3.193.08.905.905.94 2.334.08 3.194l-3.059 3.06 1.192 1.19 3.059-3.058c1.489-1.489 1.427-3.954-.138-5.519s-4.03-1.627-5.519-.138L9.786 8.557zm-1.023 6.68c.33.33.863.343 1.177.029l5.34-5.34c.314-.314.3-.846-.03-1.176-.33-.33-.862-.344-1.176-.03l-5.34 5.34c-.314.314-.3.846.03 1.177z' fill-rule=evenodd></path></svg></span><span style='margin-top: -0.1rem;'>http://tool.chinaz.com/tools/md5.aspx</span></span></span><span class='LinkCard-imageCell'><div class='LinkCard-image'></div></span></span></a><p>好了介绍了这么多密码解密的网站，现在我们来介绍如何提高密码的安全性，来防止上面的网站轻松破解我们的密码。</p><h2 id="MD5加盐加密">MD5加盐加密</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.scaffolding.demo.utils;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.security.MessageDigest;</span><br><span class="line"><span class="keyword">import</span> java.util.Random;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span>: Xuxu</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span>: 2019-11-18 11:20</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MD5Util</span> </span>&#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * byte[]字节数组 转换成 十六进制字符串</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> arr 要转换的byte[]字节数组</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> String 返回十六进制字符串</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> String <span class="title">hex</span><span class="params">(<span class="keyword">byte</span>[] arr)</span> </span>&#123;</span><br><span class="line">        StringBuffer sb = <span class="keyword">new</span> StringBuffer();</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; arr.length; ++i) &#123;</span><br><span class="line">            sb.append(Integer.toHexString((arr[i] &amp; <span class="number">0xFF</span>) | <span class="number">0x100</span>).substring(<span class="number">1</span>, <span class="number">3</span>));</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> sb.toString();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * MD5加密,并把结果由字节数组转换成十六进制字符串</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> str 要加密的内容</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> String 返回加密后的十六进制字符串</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> String <span class="title">md5Hex</span><span class="params">(String str)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            MessageDigest md = MessageDigest.getInstance(<span class="string">&quot;MD5&quot;</span>);</span><br><span class="line">            <span class="keyword">byte</span>[] digest = md.digest(str.getBytes());</span><br><span class="line">            <span class="keyword">return</span> hex(digest);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            System.out.println(e.toString());</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 生成含有随机盐的密码</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> password 要加密的密码</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> String 含有随机盐的密码</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">getSaltMD5</span><span class="params">(String password)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// 生成一个16位的随机数</span></span><br><span class="line">        Random random = <span class="keyword">new</span> Random();</span><br><span class="line">        StringBuilder sBuilder = <span class="keyword">new</span> StringBuilder(<span class="number">16</span>);</span><br><span class="line">        sBuilder.append(random.nextInt(<span class="number">99999999</span>)).append(random.nextInt(<span class="number">99999999</span>));</span><br><span class="line">        <span class="keyword">int</span> len = sBuilder.length();</span><br><span class="line">        <span class="keyword">if</span> (len &lt; <span class="number">16</span>) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">16</span> - len; i++) &#123;</span><br><span class="line">                sBuilder.append(<span class="string">&quot;0&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 生成最终的加密盐</span></span><br><span class="line">        String salt = sBuilder.toString();</span><br><span class="line">        password = md5Hex(password + salt);</span><br><span class="line">        <span class="keyword">char</span>[] cs = <span class="keyword">new</span> <span class="keyword">char</span>[<span class="number">48</span>];</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">48</span>; i += <span class="number">3</span>) &#123;</span><br><span class="line">            cs[i] = password.charAt(i / <span class="number">3</span> * <span class="number">2</span>);</span><br><span class="line">            <span class="keyword">char</span> c = salt.charAt(i / <span class="number">3</span>);</span><br><span class="line">            cs[i + <span class="number">1</span>] = c;</span><br><span class="line">            cs[i + <span class="number">2</span>] = password.charAt(i / <span class="number">3</span> * <span class="number">2</span> + <span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> String.valueOf(cs);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 验证加盐后是否和原密码一致</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> password 原密码</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> password 加密之后的密码</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> boolean true表示和原密码一致   false表示和原密码不一致</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">boolean</span> <span class="title">getSaltverifyMD5</span><span class="params">(String password, String md5str)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">char</span>[] cs1 = <span class="keyword">new</span> <span class="keyword">char</span>[<span class="number">32</span>];</span><br><span class="line">        <span class="keyword">char</span>[] cs2 = <span class="keyword">new</span> <span class="keyword">char</span>[<span class="number">16</span>];</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">48</span>; i += <span class="number">3</span>) &#123;</span><br><span class="line">            cs1[i / <span class="number">3</span> * <span class="number">2</span>] = md5str.charAt(i);</span><br><span class="line">            cs1[i / <span class="number">3</span> * <span class="number">2</span> + <span class="number">1</span>] = md5str.charAt(i + <span class="number">2</span>);</span><br><span class="line">            cs2[i / <span class="number">3</span>] = md5str.charAt(i + <span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        String Salt = <span class="keyword">new</span> String(cs2);</span><br><span class="line">        <span class="keyword">return</span> md5Hex(password + Salt).equals(String.valueOf(cs1));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// 原密码</span></span><br><span class="line">        String plaintext = <span class="string">&quot;123456&quot;</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 获取加盐后的MD5值</span></span><br><span class="line">        String ciphertext = MD5Util.getSaltMD5(plaintext);</span><br><span class="line">        System.out.println(<span class="string">&quot;加盐后MD5：&quot;</span> + ciphertext);</span><br><span class="line">        System.out.println(<span class="string">&quot;是否是同一字符串:&quot;</span> + MD5Util.getSaltverifyMD5(plaintext, ciphertext));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>输出结果为：</p><p>加盐后MD5：e9a97f49db0f20911ab1d815624b33e75a3236e76040f509</p><p>是否是同一字符串：true</p><p>这时，我们可以把加盐后的 加密密码 拿到 MD5加密网上去验证是否能够解密（这里我只列举其中一个网站进行验证，你们也可以自行拿去各个MD5加密网站上去验证）</p><p><img src="https://s2.ax1x.com/2019/11/19/Mgdtjs.png" class="lazyload placeholder" data-srcset="https://s2.ax1x.com/2019/11/19/Mgdtjs.png" srcset="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/site-img/img-loading.gif" alt="md5"></p><p>我们可以看到，MD5加密网站已经无法破解我们加密的密码了，所以MD5加盐加密的密码相对来说还是比较安全的。</p><h2 id="MD5和SHA-1混合加盐加密">MD5和SHA-1混合加盐加密</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.scaffolding.demo.utils;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.UnsupportedEncodingException;</span><br><span class="line"><span class="keyword">import</span> java.security.MessageDigest;</span><br><span class="line"><span class="keyword">import</span> java.security.NoSuchAlgorithmException;</span><br><span class="line"><span class="keyword">import</span> java.util.Random;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span>: Xuxu</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span>: 2019-11-18 13:15</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MD5Utils</span> </span>&#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * md5和sha-1混合加密</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> inputText 要加密的内容</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> String md5和sha-1混合加密之后的密码</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">md5AndSha</span><span class="params">(String inputText)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> sha(md5(inputText));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * md5加密</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> inputText 要加密的内容</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> String  md5加密之后的密码</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">md5</span><span class="params">(String inputText)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> encrypt(inputText, <span class="string">&quot;md5&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * sha-1加密</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> inputText 要加密的内容</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> sha-1加密之后的密码</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">sha</span><span class="params">(String inputText)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> encrypt(inputText, <span class="string">&quot;sha-1&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * md5或者sha-1加密</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> inputText     要加密的内容</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> algorithmName 加密算法名称：md5或者sha-1，不区分大小写</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> String  md5或者sha-1加密之后的结果</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> String <span class="title">encrypt</span><span class="params">(String inputText, String algorithmName)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (inputText == <span class="keyword">null</span> || <span class="string">&quot;&quot;</span>.equals(inputText.trim())) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> IllegalArgumentException(<span class="string">&quot;请输入要加密的内容&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (algorithmName == <span class="keyword">null</span> || <span class="string">&quot;&quot;</span>.equals(algorithmName.trim())) &#123;</span><br><span class="line">            algorithmName = <span class="string">&quot;md5&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        String encryptText = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            MessageDigest m = MessageDigest.getInstance(algorithmName);</span><br><span class="line">            m.update(inputText.getBytes(<span class="string">&quot;UTF8&quot;</span>));</span><br><span class="line">            <span class="keyword">byte</span> s[] = m.digest();</span><br><span class="line">            <span class="keyword">return</span> hex(s);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (NoSuchAlgorithmException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (UnsupportedEncodingException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> encryptText;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * byte[]字节数组 转换成 十六进制字符串</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> arr 要转换的byte[]字节数组</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> String 返回十六进制字符串</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> String <span class="title">hex</span><span class="params">(<span class="keyword">byte</span>[] arr)</span> </span>&#123;</span><br><span class="line">        StringBuffer sb = <span class="keyword">new</span> StringBuffer();</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; arr.length; ++i) &#123;</span><br><span class="line">            sb.append(Integer.toHexString((arr[i] &amp; <span class="number">0xFF</span>) | <span class="number">0x100</span>).substring(<span class="number">1</span>, <span class="number">3</span>));</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> sb.toString();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 生成含有随机盐的密码</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> password 要加密的密码</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> String 含有随机盐的密码</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">getSaltMd5AndSha</span><span class="params">(String password)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// 生成一个16位的随机数</span></span><br><span class="line">        Random random = <span class="keyword">new</span> Random();</span><br><span class="line">        StringBuilder sBuilder = <span class="keyword">new</span> StringBuilder(<span class="number">16</span>);</span><br><span class="line">        sBuilder.append(random.nextInt(<span class="number">99999999</span>)).append(random.nextInt(<span class="number">99999999</span>));</span><br><span class="line">        <span class="keyword">int</span> len = sBuilder.length();</span><br><span class="line">        <span class="keyword">if</span> (len &lt; <span class="number">16</span>) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">16</span> - len; i++) &#123;</span><br><span class="line">                sBuilder.append(<span class="string">&quot;0&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 生成最终的加密盐</span></span><br><span class="line">        String salt = sBuilder.toString();</span><br><span class="line">        password = md5AndSha(password + salt);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">char</span>[] cs = <span class="keyword">new</span> <span class="keyword">char</span>[<span class="number">48</span>];</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">48</span>; i += <span class="number">3</span>) &#123;</span><br><span class="line">            cs[i] = password.charAt(i / <span class="number">3</span> * <span class="number">2</span>);</span><br><span class="line">            <span class="keyword">char</span> c = salt.charAt(i / <span class="number">3</span>);</span><br><span class="line">            cs[i + <span class="number">1</span>] = c;</span><br><span class="line">            cs[i + <span class="number">2</span>] = password.charAt(i / <span class="number">3</span> * <span class="number">2</span> + <span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> String.valueOf(cs);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 验证加盐后是否和原密码一致</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> password 原密码</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> password 加密之后的密码</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> boolean true表示和原密码一致   false表示和原密码不一致</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">boolean</span> <span class="title">getSaltverifyMd5AndSha</span><span class="params">(String password, String md5str)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">char</span>[] cs1 = <span class="keyword">new</span> <span class="keyword">char</span>[<span class="number">32</span>];</span><br><span class="line">        <span class="keyword">char</span>[] cs2 = <span class="keyword">new</span> <span class="keyword">char</span>[<span class="number">16</span>];</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">48</span>; i += <span class="number">3</span>) &#123;</span><br><span class="line">            cs1[i / <span class="number">3</span> * <span class="number">2</span>] = md5str.charAt(i);</span><br><span class="line">            cs1[i / <span class="number">3</span> * <span class="number">2</span> + <span class="number">1</span>] = md5str.charAt(i + <span class="number">2</span>);</span><br><span class="line">            cs2[i / <span class="number">3</span>] = md5str.charAt(i + <span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        String salt = <span class="keyword">new</span> String(cs2);</span><br><span class="line">        String encrypPassword = md5AndSha(password + salt);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 加密密码去掉最后8位数</span></span><br><span class="line">        encrypPassword = encrypPassword.substring(<span class="number">0</span>, encrypPassword.length() - <span class="number">8</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> encrypPassword.equals(String.valueOf(cs1));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// 原密码</span></span><br><span class="line">        String plaintext = <span class="string">&quot;123456&quot;</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 获取加盐后的MD5值</span></span><br><span class="line">        String ciphertext = MD5Utils.getSaltMd5AndSha(plaintext);</span><br><span class="line">        System.out.println(<span class="string">&quot;加盐后MD5：&quot;</span> + ciphertext);</span><br><span class="line">        System.out.println(<span class="string">&quot;是否是同一字符串:&quot;</span> + MD5Utils.getSaltverifyMd5AndSha(plaintext, ciphertext));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>眼睛比较明亮的朋友，可能会发现 MD5 和 SHA-1 混合加盐加密 与 MD5 加盐加密 的 getSaltverifyMD5(String password, String md5str) 方法有些不同，是的，MD5和SHA-1混合加盐加密 的 getSaltverifyMD5(String password, String md5str) 多了下面这一行代码：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 加密密码去掉最后8位数</span></span><br><span class="line">encrypPassword = encrypPassword.substring(<span class="number">0</span> , encrypPassword.length() - <span class="number">8</span>);</span><br></pre></td></tr></table></figure><p>就会有人问了，为什么要去掉加密密码的最后8位数，而MD5加盐加密却不要？其实这是有原因的</p><p>我们可以看到密码为 123456 经过 MD5、MD5和SHA-1 混合加密的结果：</p><p>  MD5 ：e10adc3949ba59abbe56e057f20f883e （32位数）</p><p>  MD5和SHA-1 ：10470c3b4b1fed12c3baac014be15fac67c6e815  （40位数）</p><p>发现有什么不同了没？两种加密之后的密码长度是不是 不一样了 经过MD5加密之后的密码长度为32，而MD5和SHA-1的为40</p><p>而我们在 getSaltMd5AndSha （与getSaltMD5代码相同，只是方法名称不一样）中定义的</p><p>盐长度为 16位数（即 StringBuilder sBuilder = new StringBuilder(16) ;）</p><p>加盐加密后的密码长度为 48位数 (即  char[] cs = new char[48]; )</p><p>加盐加密后的密码长度 =  盐长度 + MD5加密的密码长度 (即  48 = 16 + 32 )</p><p>长度刚刚等于48位数，所以char[] cs 刚好可以把 密码和盐全部都存储起来，可是MD5和SHA-1 加密的密码长度为40，即</p><p>48 &lt; 40 + 16，还会有八位数不能够存储到char[] cs 中, 这也就意味着 char[] cs 只能够存储 MD5和SHA-1 加密密码的前32位数 和 16位数的盐，MD5和SHA-1 加密密码的最后八位会丢失，而在验证加盐后是否和原密码一致的getSaltverifyMd5AndSha(String password, String md5str)方法中，我们定义的 char[] cs1 = new char[32];（即去掉盐之后的MD5和SHA-1 加密密码）只有32位数，而MD5和SHA-1 加密密码实际位数有40位数，那么在进行encrypPassword.equals(String.valueOf(cs1) ) 时，就会返回false，即原密码与加密密码验证不一致。</p><p>所以要解决这个问题，就是把MD5和SHA-1 加密的密码结果 去掉最后8位数，再进行比较，这样就可以验证原密码是否与加密密码一致了。</p>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
          <category> 加密安全 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> MD5 </tag>
            
            <tag> SHA-1 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>使用增强版valine</title>
      <link href="posts/bf9eba42.html"/>
      <url>posts/bf9eba42.html</url>
      
        <content type="html"><![CDATA[<p>云淡风轻在很早之前就开发了一款极简的<a href="https://ioliu.cn/2017/add-valine-comments-to-your-blog/">valine评论系统</a>，由于现在Disqus被墙，使用起来步骤太复杂，所以现在大多数个人博客还是以valine为主。但是原生的valine功能过于单调，后来有不少大佬在基于原作者的基础上增强了valine的功能，我想推荐的一款就是 <a href="https://deserts.io/">Deserts</a> 增强的valine，<a href="https://deserts.io/diy-a-comment-system/">作者介绍文档</a>并没有针对hexo博客做出适配，所以我记录一下我在hexo博客中做出的修改。</p><p>相比于原生valine，作者做出了以下增强功能：</p><ol><li>支持博主标记显示</li><li>必须填写昵称和邮箱才能评论（反垃圾评论的作用）</li><li>支持PJAX主题</li><li>可以自定义表情包，评论样式修改，点赞功能（新版中被作者去掉了。。。）</li><li>评论表情包</li><li>支持Disqus数据迁移到valine</li><li>隐私保护：敏感字段限制读取，如E-mail、用户信息（使用的浏览器等）、IP</li><li>头像显示、样式美化</li><li>完善的邮件通知</li><li>基于Akimmet的垃圾评论自动标注和过滤</li><li>通知邮件补发</li><li>……</li></ol><p><a href="https://desertsp.github.io/Valine/">评论在线预览</a>，具体介绍可以参考作者<a href="https://deserts.io/diy-a-comment-system/">原文博客</a></p><p>为了适配hexo博客，可以做如下修改：</p><ol><li><p>先<a href="https://site-1258928558.cos.ap-guangzhou.myqcloud.com/js/Valine.min.js">下载</a>作者给出的 <code>Valine.min.js</code> 文件，放到 <code>hexo/themes/next/source/js/src</code> 下，或者你的其它托管路径下</p></li><li><p>然后修改代码如下：</p></li></ol><p>文件位置：hexo/themes/next/layout/_third-party/comments/valine.swig</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">&#123;% <span class="keyword">if</span> theme.valine.enable and theme.valine.appid and theme.valine.appkey %&#125;</span><br><span class="line">  &lt;script src=<span class="string">&quot;//cdn1.lncld.net/static/js/3.0.4/av-min.js&quot;</span>&gt;&lt;/script&gt;</span><br><span class="line">  &lt;script src=<span class="string">&quot;/js/src/Valine.min.js&quot;</span>&gt;&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">  &lt;!--&lt;script src=<span class="string">&quot;//unpkg.com/valine/dist/Valine.min.js&quot;</span>&gt;&lt;/script&gt;--&gt;</span><br><span class="line">  &lt;!-- https://deserts.io/diy-a-comment-system/ --&gt;</span><br><span class="line">  &lt;script <span class="built_in">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><br><span class="line">    new Valine(&#123;</span><br><span class="line">        lang: <span class="string">&#x27;zh-cn&#x27;</span>,</span><br><span class="line">        admin_email: <span class="string">&#x27;22476705@qq.com&#x27;</span>, //博主邮箱</span><br><span class="line">        el: <span class="string">&#x27;#comments&#x27;</span> ,</span><br><span class="line">        appId: <span class="string">&#x27;&#123;&#123; theme.valine.appid &#125;&#125;&#x27;</span>,</span><br><span class="line">        appKey: <span class="string">&#x27;&#123;&#123; theme.valine.appkey &#125;&#125;&#x27;</span>,</span><br><span class="line">        emoticon_url: <span class="string">&#x27;https://cloud.panjunwen.com/alu&#x27;</span>,</span><br><span class="line">        emoticon_list: [<span class="string">&quot;吐.png&quot;</span>,<span class="string">&quot;喷血.png&quot;</span>,<span class="string">&quot;狂汗.png&quot;</span>,<span class="string">&quot;不说话.png&quot;</span>,<span class="string">&quot;汗.png&quot;</span>,<span class="string">&quot;坐等.png&quot;</span>,<span class="string">&quot;献花.png&quot;</span>,<span class="string">&quot;不高兴.png&quot;</span>,<span class="string">&quot;中刀.png&quot;</span>,<span class="string">&quot;害羞.png&quot;</span>,<span class="string">&quot;皱眉.png&quot;</span>,<span class="string">&quot;小眼睛.png&quot;</span>,<span class="string">&quot;中指.png&quot;</span>,<span class="string">&quot;尴尬.png&quot;</span>,<span class="string">&quot;瞅你.png&quot;</span>,<span class="string">&quot;想一想.png&quot;</span>,<span class="string">&quot;中枪.png&quot;</span>,<span class="string">&quot;得意.png&quot;</span>,<span class="string">&quot;肿包.png&quot;</span>,<span class="string">&quot;扇耳光.png&quot;</span>,<span class="string">&quot;亲亲.png&quot;</span>,<span class="string">&quot;惊喜.png&quot;</span>,<span class="string">&quot;脸红.png&quot;</span>,<span class="string">&quot;无所谓.png&quot;</span>,<span class="string">&quot;便便.png&quot;</span>,<span class="string">&quot;愤怒.png&quot;</span>,<span class="string">&quot;蜡烛.png&quot;</span>,<span class="string">&quot;献黄瓜.png&quot;</span>,<span class="string">&quot;内伤.png&quot;</span>,<span class="string">&quot;投降.png&quot;</span>,<span class="string">&quot;观察.png&quot;</span>,<span class="string">&quot;看不见.png&quot;</span>,<span class="string">&quot;击掌.png&quot;</span>,<span class="string">&quot;抠鼻.png&quot;</span>,<span class="string">&quot;邪恶.png&quot;</span>,<span class="string">&quot;看热闹.png&quot;</span>,<span class="string">&quot;口水.png&quot;</span>,<span class="string">&quot;抽烟.png&quot;</span>,<span class="string">&quot;锁眉.png&quot;</span>,<span class="string">&quot;装大款.png&quot;</span>,<span class="string">&quot;吐舌.png&quot;</span>,<span class="string">&quot;无奈.png&quot;</span>,<span class="string">&quot;长草.png&quot;</span>,<span class="string">&quot;赞一个.png&quot;</span>,<span class="string">&quot;呲牙.png&quot;</span>,<span class="string">&quot;无语.png&quot;</span>,<span class="string">&quot;阴暗.png&quot;</span>,<span class="string">&quot;不出所料.png&quot;</span>,<span class="string">&quot;咽气.png&quot;</span>,<span class="string">&quot;期待.png&quot;</span>,<span class="string">&quot;高兴.png&quot;</span>,<span class="string">&quot;吐血倒地.png&quot;</span>,<span class="string">&quot;哭泣.png&quot;</span>,<span class="string">&quot;欢呼.png&quot;</span>,<span class="string">&quot;黑线.png&quot;</span>,<span class="string">&quot;喜极而泣.png&quot;</span>,<span class="string">&quot;喷水.png&quot;</span>,<span class="string">&quot;深思.png&quot;</span>,<span class="string">&quot;鼓掌.png&quot;</span>,<span class="string">&quot;暗地观察.png&quot;</span>],</span><br><span class="line">        placeholder: <span class="string">&#x27;&#123;&#123; theme.valine.placeholder &#125;&#125;&#x27;</span>,</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  &lt;!--点击邮件中的链接跳转至相应评论--&gt;</span><br><span class="line">  <span class="keyword">if</span>(window.location.hash)&#123;</span><br><span class="line">      var checkExist = setInterval(<span class="function"><span class="title">function</span></span>() &#123;</span><br><span class="line">         <span class="keyword">if</span> ($(window.location.hash).length) &#123;</span><br><span class="line">            $(<span class="string">&#x27;html, body&#x27;</span>).animate(&#123;scrollTop: $(window.location.hash).offset().top-90&#125;, 1000);</span><br><span class="line">            clearInterval(checkExist);</span><br><span class="line">         &#125;</span><br><span class="line">      &#125;, 100);</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">  &lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&#123;% endif %&#125;</span><br></pre></td></tr></table></figure><p>这样就可以基本替代了，但是…但是还是存在不少BUG，比如，原生valine自带的首页元数据评论数量统计不见了，有人提出了issue，作者表示无意开发这个功能。</p><p>如果你懂一些css知识的话，评论样式依旧可以自己在 <code>cuntom.styl</code> 文件中修改。</p>]]></content>
      
      
      <categories>
          
          <category> Hexo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Hexo </tag>
            
            <tag> Valine </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hexo博客+Next主题归档页美化</title>
      <link href="posts/f68f129b.html"/>
      <url>posts/f68f129b.html</url>
      
        <content type="html"><![CDATA[<p>大家在使用hexo博客的Next主题的时候应该都觉得原来默认的归档页面很丑吧，最近也有小伙伴问我这个归档页面美化怎么弄的，今天就小小的总结一下。</p><a href=https://hasaik.com/archives/ target='_blank' class='LinkCard'><style type=text/css>.LinkCard,.LinkCard:hover{text-decoration:none;border:none!important;color:inherit!important}.LinkCard{position:relative;display:block;margin:5px auto;width:330px;box-sizing:border-box;border-radius:12px;max-width:100%;overflow:hidden;color:inherit;text-decoration:none}.ztext{word-break:break-word;line-height:1.6}.LinkCard-backdrop{position:absolute;top:0;left:0;right:0;bottom:0;background-repeat:no-repeat;-webkit-filter:blur(20px);filter:blur(20px);background-size:cover;background-position:center}.LinkCard,.LinkCard:hover{text-decoration:none;border:none!important;color:inherit!important}.LinkCard-content{position:relative;display:flex;align-items:center;justify-content:space-between;padding:12px;border-radius:inherit;background-color:rgba(246,246,246,0.88)}.LinkCard-text{overflow:hidden;width:260px;}.LinkCard-title{white-space: nowrap;display:-webkit-box;-webkit-line-clamp:2;overflow:hidden;text-overflow:ellipsis;max-height:calc(16px * 1.25 * 2);font-size:16px;font-weight:500;line-height:1.25;color:#1a1a1a}@media(max-width: 767px){.LinkCard-title{font-size:13px;}}.LinkCard-meta{display:flex;margin-top:4px;font-size:14px;line-height:20px;color:#999;white-space:nowrap}.LinkCard-imageCell{margin-left:28px;border-radius:30px;width:70px;}.LinkCard-image{background-image:url('https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/linkcard/spider-man.png');background-size: 100% 100%;display:block;width:65px;height:65px;border-radius:inherit;margin-bottom: 0 !important;}</style><span class=LinkCard-backdrop style=background-image:url(https://zhstatic.zhihu.com/assets/zhihu/editor/zhihu-card-default.svg)></span><span class=LinkCard-content><span class=LinkCard-text><span class=LinkCard-title>我的归档页面</span><span class=LinkCard-meta><span style=display:inline-flex;align-items:center><svg class='Zi Zi--InsertLink' fill=currentColor viewBox='0 0 24 24' width=17 height=17><path d='M6.77 17.23c-.905-.904-.94-2.333-.08-3.193l3.059-3.06-1.192-1.19-3.059 3.058c-1.489 1.489-1.427 3.954.138 5.519s4.03 1.627 5.519.138l3.059-3.059-1.192-1.192-3.059 3.06c-.86.86-2.289.824-3.193-.08zm3.016-8.673l1.192 1.192 3.059-3.06c.86-.86 2.289-.824 3.193.08.905.905.94 2.334.08 3.194l-3.059 3.06 1.192 1.19 3.059-3.058c1.489-1.489 1.427-3.954-.138-5.519s-4.03-1.627-5.519-.138L9.786 8.557zm-1.023 6.68c.33.33.863.343 1.177.029l5.34-5.34c.314-.314.3-.846-.03-1.176-.33-.33-.862-.344-1.176-.03l-5.34 5.34c-.314.314-.3.846.03 1.177z' fill-rule=evenodd></path></svg></span><span style='margin-top: -0.1rem;'>https://hasaik.com/archives/</span></span></span><span class='LinkCard-imageCell'><div class='LinkCard-image'></div></span></span></a><p>首先我们打开Next主题目录（注意这个美化样式只支持Next主题），然后找到 <code>next/layout/_macro/post-collapse.swig</code> 文件。</p><div class="note warning">注意：Next5和Next6主题下这个文件中内容可能会有点不太一样，需要找到对应内容对应一一修改。</div><p>以下基于Next5，其中原始内容如下，Next6主题下类似：</p><p>文件位置：/hexo/next/layout/_macro/post-collapse.swig</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">&#123;% macro render(post) %&#125;</span><br><span class="line"></span><br><span class="line"> &lt;article class=<span class="string">&quot;post post-type-&#123;&#123; post.type | default(&#x27;normal&#x27;) &#125;&#125;&quot;</span> itemscope itemtype=<span class="string">&quot;http://schema.org/Article&quot;</span>&gt;</span><br><span class="line">    &lt;header class=<span class="string">&quot;post-header&quot;</span>&gt;</span><br><span class="line"></span><br><span class="line">       &lt;&#123;% <span class="keyword">if</span> theme.seo %&#125;h3&#123;% <span class="keyword">else</span> %&#125;h2&#123;% endif %&#125; class=<span class="string">&quot;post-title&quot;</span>&gt;</span><br><span class="line">            &#123;% <span class="keyword">if</span> post.link %&#125;&#123;<span class="comment"># Link posts #&#125;</span></span><br><span class="line">            &lt;a class=<span class="string">&quot;post-title-link post-title-link-external&quot;</span> target=<span class="string">&quot;_blank&quot;</span> href=<span class="string">&quot;&#123;&#123; url_for(post.link) &#125;&#125;&quot;</span> itemprop=<span class="string">&quot;url&quot;</span>&gt;</span><br><span class="line">                &#123;&#123; post.title or post.link &#125;&#125;</span><br><span class="line">                &lt;i class=<span class="string">&quot;fa fa-external-link&quot;</span>&gt;&lt;/i&gt;</span><br><span class="line">            &lt;/a&gt;</span><br><span class="line">            &#123;% <span class="keyword">else</span> %&#125;</span><br><span class="line">            &lt;a class=<span class="string">&quot;post-title-link&quot;</span> href=<span class="string">&quot;&#123;&#123; url_for(post.path) &#125;&#125;&quot;</span> itemprop=<span class="string">&quot;url&quot;</span>&gt;</span><br><span class="line">                &#123;% <span class="keyword">if</span> post.type === <span class="string">&#x27;picture&#x27;</span> %&#125;</span><br><span class="line">                &#123;&#123; post.content &#125;&#125;</span><br><span class="line">                &#123;% <span class="keyword">else</span> %&#125;</span><br><span class="line">                &lt;span itemprop=<span class="string">&quot;name&quot;</span>&gt;&#123;&#123; post.title | default(__(<span class="string">&#x27;post.untitled&#x27;</span>)) &#125;&#125;&lt;/span&gt;</span><br><span class="line">                &#123;% endif %&#125;</span><br><span class="line">            &lt;/a&gt;</span><br><span class="line">            &#123;% endif %&#125;</span><br><span class="line">            &lt;/&#123;% <span class="keyword">if</span> theme.seo %&#125;h3&#123;% <span class="keyword">else</span> %&#125;h2&#123;% endif %&#125;&gt;</span><br><span class="line"></span><br><span class="line">        &lt;div class=<span class="string">&quot;post-meta&quot;</span>&gt;</span><br><span class="line">            &lt;time class=<span class="string">&quot;post-time&quot;</span> itemprop=<span class="string">&quot;dateCreated&quot;</span></span><br><span class="line">                  datetime=<span class="string">&quot;&#123;&#123; moment(post.date).format() &#125;&#125;&quot;</span></span><br><span class="line">                  content=<span class="string">&quot;&#123;&#123; date(post.date, config.date_format) &#125;&#125;&quot;</span> &gt;</span><br><span class="line">                &#123;&#123; date(post.date, <span class="string">&#x27;MM-DD&#x27;</span>) &#125;&#125;</span><br><span class="line">            &lt;/time&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line"></span><br><span class="line">    &lt;/header&gt;</span><br><span class="line">&lt;/article&gt;</span><br><span class="line"></span><br><span class="line">&#123;% endmacro %&#125;</span><br></pre></td></tr></table></figure><p>然后主要找 class 属性做修改，首先将 <code>post-meta</code> 代码块的内容上移到 <code>post-header</code> 下面，如下：</p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">&#123;% macro render(post) %&#125;</span><br><span class="line"></span><br><span class="line"> &lt;article class=&quot;post post-type-&#123;&#123; post.type | default(&#x27;normal&#x27;) &#125;&#125;&quot; itemscope itemtype=&quot;http://schema.org/Article&quot;&gt;</span><br><span class="line">    &lt;header class=&quot;post-header&quot;&gt;</span><br><span class="line">    </span><br><span class="line"><span class="addition">+       &lt;div class=&quot;post-meta&quot;&gt;</span></span><br><span class="line"><span class="addition">+            &lt;time class=&quot;post-time&quot; itemprop=&quot;dateCreated&quot;</span></span><br><span class="line"><span class="addition">+                  datetime=&quot;&#123;&#123; moment(post.date).format() &#125;&#125;&quot;</span></span><br><span class="line"><span class="addition">+                  content=&quot;&#123;&#123; date(post.date, config.date_format) &#125;&#125;&quot; &gt;</span></span><br><span class="line"><span class="addition">+                &#123;&#123; date(post.date, &#x27;MM-DD&#x27;) &#125;&#125;</span></span><br><span class="line"><span class="addition">+            &lt;/time&gt;</span></span><br><span class="line"><span class="addition">+        &lt;/div&gt;</span></span><br><span class="line"></span><br><span class="line">       &lt;&#123;% if theme.seo %&#125;h3&#123;% else %&#125;h2&#123;% endif %&#125; class=&quot;post-title&quot;&gt;</span><br><span class="line">            &#123;% if post.link %&#125;&#123;# Link posts #&#125;</span><br><span class="line">            &lt;a class=&quot;post-title-link post-title-link-external&quot; target=&quot;_blank&quot; href=&quot;&#123;&#123; url_for(post.link) &#125;&#125;&quot; itemprop=&quot;url&quot;&gt;</span><br><span class="line">                &#123;&#123; post.title or post.link &#125;&#125;</span><br><span class="line">                &lt;i class=&quot;fa fa-external-link&quot;&gt;&lt;/i&gt;</span><br><span class="line">            &lt;/a&gt;</span><br><span class="line">            &#123;% else %&#125;</span><br><span class="line">            &lt;a class=&quot;post-title-link&quot; href=&quot;&#123;&#123; url_for(post.path) &#125;&#125;&quot; itemprop=&quot;url&quot;&gt;</span><br><span class="line">                &#123;% if post.type <span class="comment">=== &#x27;picture&#x27; %&#125;</span></span><br><span class="line">                &#123;&#123; post.content &#125;&#125;</span><br><span class="line">                &#123;% else %&#125;</span><br><span class="line">                &lt;span itemprop=&quot;name&quot;&gt;&#123;&#123; post.title | default(__(&#x27;post.untitled&#x27;)) &#125;&#125;&lt;/span&gt;</span><br><span class="line">                &#123;% endif %&#125;</span><br><span class="line">            &lt;/a&gt;</span><br><span class="line">            &#123;% endif %&#125;</span><br><span class="line">            &lt;/&#123;% if theme.seo %&#125;h3&#123;% else %&#125;h2&#123;% endif %&#125;&gt;</span><br><span class="line">        </span><br><span class="line"><span class="deletion">-       &lt;div class=&quot;post-meta&quot;&gt;</span></span><br><span class="line"><span class="deletion">-            &lt;time class=&quot;post-time&quot; itemprop=&quot;dateCreated&quot;</span></span><br><span class="line"><span class="deletion">-                  datetime=&quot;&#123;&#123; moment(post.date).format() &#125;&#125;&quot;</span></span><br><span class="line"><span class="deletion">-                  content=&quot;&#123;&#123; date(post.date, config.date_format) &#125;&#125;&quot; &gt;</span></span><br><span class="line"><span class="deletion">-                &#123;&#123; date(post.date, &#x27;MM-DD&#x27;) &#125;&#125;</span></span><br><span class="line"><span class="deletion">-            &lt;/time&gt;</span></span><br><span class="line"><span class="deletion">-        &lt;/div&gt;</span></span><br><span class="line"></span><br><span class="line">    &lt;/header&gt;</span><br><span class="line">&lt;/article&gt;</span><br><span class="line"></span><br><span class="line">&#123;% endmacro %&#125;</span><br></pre></td></tr></table></figure><p>然后对照下面代码修改 class 属性，红色代码为原始代码，绿色代码为修改后的代码，实际上修改的地方只是在对应的 class 属性前面加上 <code>my-</code> 即可，比如原始是 <code>post-title-link</code> ，修改为 <code>my-post-title-link</code> 。注意以下只是原始代码和修改代码参考对比，不要直接复制！</p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">&#123;% macro render(post) %&#125;</span><br><span class="line"></span><br><span class="line"><span class="deletion">- &lt;article class=&quot;post post-type-&#123;&#123; post.type | default(&#x27;normal&#x27;) &#125;&#125;&quot; itemscope itemtype=&quot;http://schema.org/Article&quot;&gt;</span></span><br><span class="line"><span class="addition">+ &lt;article class=&quot;my-post post-type-&#123;&#123; post.type | default(&#x27;normal&#x27;) &#125;&#125;&quot; itemscope itemtype=&quot;http://schema.org/Article&quot;&gt;</span></span><br><span class="line"><span class="deletion">-    &lt;header class=&quot;post-header&quot;&gt;</span></span><br><span class="line"><span class="addition">+    &lt;header class=&quot;my-post-header&quot;&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="deletion">-       &lt;div class=&quot;post-meta&quot;&gt;</span></span><br><span class="line"><span class="addition">+       &lt;div class=&quot;my-post-meta&quot;&gt;</span></span><br><span class="line"><span class="deletion">-            &lt;time class=&quot;post-time&quot; itemprop=&quot;dateCreated&quot;</span></span><br><span class="line"><span class="addition">+            &lt;time class=&quot;my-post-time&quot; itemprop=&quot;dateCreated&quot;</span></span><br><span class="line">                  datetime=&quot;&#123;&#123; moment(post.date).format() &#125;&#125;&quot;</span><br><span class="line">                  content=&quot;&#123;&#123; date(post.date, config.date_format) &#125;&#125;&quot; &gt;</span><br><span class="line">                &#123;&#123; date(post.date, &#x27;MM-DD&#x27;) &#125;&#125;</span><br><span class="line">            &lt;/time&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line"></span><br><span class="line"><span class="deletion">-       &lt;&#123;% if theme.seo %&#125;h3&#123;% else %&#125;h2&#123;% endif %&#125; class=&quot;post-title&quot;&gt;</span></span><br><span class="line"><span class="addition">+       &lt;&#123;% if theme.seo %&#125;h3&#123;% else %&#125;h2&#123;% endif %&#125; class=&quot;my-post-title&quot;&gt;</span></span><br><span class="line">            &#123;% if post.link %&#125;&#123;# Link posts #&#125;</span><br><span class="line"><span class="deletion">-            &lt;a class=&quot;post-title-link post-title-link-external&quot; target=&quot;_blank&quot; href=&quot;&#123;&#123; url_for(post.link) &#125;&#125;&quot; itemprop=&quot;url&quot;&gt;</span></span><br><span class="line"><span class="addition">+            &lt;a class=&quot;my-post-title-link post-title-link-external&quot; target=&quot;_blank&quot; href=&quot;&#123;&#123; url_for(post.link) &#125;&#125;&quot; itemprop=&quot;url&quot;&gt;</span></span><br><span class="line">                &#123;&#123; post.title or post.link &#125;&#125;</span><br><span class="line">                &lt;i class=&quot;fa fa-external-link&quot;&gt;&lt;/i&gt;</span><br><span class="line">            &lt;/a&gt;</span><br><span class="line">            &#123;% else %&#125;</span><br><span class="line"><span class="deletion">-            &lt;a class=&quot;post-title-link&quot; href=&quot;&#123;&#123; url_for(post.path) &#125;&#125;&quot; itemprop=&quot;url&quot;&gt;</span></span><br><span class="line"><span class="addition">+            &lt;a class=&quot;my-post-title-link&quot; href=&quot;&#123;&#123; url_for(post.path) &#125;&#125;&quot; itemprop=&quot;url&quot;&gt;</span></span><br><span class="line">                &#123;% if post.type <span class="comment">=== &#x27;picture&#x27; %&#125;</span></span><br><span class="line">                &#123;&#123; post.content &#125;&#125;</span><br><span class="line">                &#123;% else %&#125;</span><br><span class="line">                &lt;span itemprop=&quot;name&quot;&gt;&#123;&#123; post.title | default(__(&#x27;post.untitled&#x27;)) &#125;&#125;&lt;/span&gt;</span><br><span class="line">                &#123;% endif %&#125;</span><br><span class="line">            &lt;/a&gt;</span><br><span class="line">            &#123;% endif %&#125;</span><br><span class="line">            &lt;/&#123;% if theme.seo %&#125;h3&#123;% else %&#125;h2&#123;% endif %&#125;&gt;</span><br><span class="line"></span><br><span class="line">    &lt;/header&gt;</span><br><span class="line">&lt;/article&gt;</span><br><span class="line"></span><br><span class="line">&#123;% endmacro %&#125;</span><br></pre></td></tr></table></figure><p>最后打开主题目录下的 <code>next/source/css/_custom/custom.styl</code> 文件，在文件末尾添加如下样式：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br></pre></td><td class="code"><pre><span class="line">/* 归档页样式 began */</span><br><span class="line">.page-archive .archive-page-counter &#123;</span><br><span class="line">  font-size: 18px;</span><br><span class="line">  background-color: <span class="comment">#49b1f5;</span></span><br><span class="line">  padding-left: 10px;</span><br><span class="line">  padding-right: 10px;</span><br><span class="line">  border-radius: 8px;</span><br><span class="line">  color: <span class="comment">#fff;</span></span><br><span class="line">  +<span class="function"><span class="title">mobile</span></span>() &#123;</span><br><span class="line">    font-size: 16px;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">.my-post-time&#123;</span><br><span class="line">  font-size: 11px;</span><br><span class="line">  position: absolute;</span><br><span class="line">  color: <span class="comment">#fff;</span></span><br><span class="line">  background-color: <span class="comment">#49b1f5;</span></span><br><span class="line">  border-radius: 5px;</span><br><span class="line">  padding-left: 5px;</span><br><span class="line">  padding-right: 5px;</span><br><span class="line">  margin-left: 15px;</span><br><span class="line">&#125;</span><br><span class="line">.mypost&#123;</span><br><span class="line">  position: relative;</span><br><span class="line">  margin-bottom: 1rem;</span><br><span class="line">  -webkit-transition: all .2s ease-in-out;</span><br><span class="line">  -moz-transition: all .2s ease-in-out;</span><br><span class="line">  -o-transition: all .2s ease-in-out;</span><br><span class="line">  -ms-transition: all .2s ease-in-out;</span><br><span class="line">  transition: all .2s ease-in-out;</span><br><span class="line">&#125;</span><br><span class="line">a.my-post-title-link:before&#123;</span><br><span class="line">  top: 10px;</span><br><span class="line">  width: 18px;</span><br><span class="line">  height: 18px;</span><br><span class="line">  content: <span class="string">&quot;📚&quot;</span>;</span><br><span class="line">  margin-right: 5px;</span><br><span class="line">  font: normal normal normal 14px/1 FontAwesome;</span><br><span class="line">  font-size: 15px;</span><br><span class="line">  line-height: 18px;</span><br><span class="line">&#125;</span><br><span class="line">.my-post:hover&#123;</span><br><span class="line">  transform: scale(1.1);</span><br><span class="line">  box-shadow: 10px 10px 15px 2px rgba(0,0,0,.12), 0 0 6px 0 rgba(104, 104, 105, 0.1);</span><br><span class="line">  border-radius: 30px;</span><br><span class="line">  width: 400px;</span><br><span class="line">  padding: 1px 10px;</span><br><span class="line">  margin-left: 25px;</span><br><span class="line">  font-size: 16px;</span><br><span class="line">  transition-duration: 0.15s;</span><br><span class="line">  +<span class="function"><span class="title">mobile</span></span>()&#123;</span><br><span class="line">    width: 260px;</span><br><span class="line">    margin-left: 18px;</span><br><span class="line">  &#125;</span><br><span class="line">  //display:flex;</span><br><span class="line">&#125;</span><br><span class="line">a.my-post-title-link&#123;</span><br><span class="line">  text-decoration: none;</span><br><span class="line">  font-size: 15px;</span><br><span class="line">  font-weight: 400;</span><br><span class="line">  +<span class="function"><span class="title">mobile</span></span>() &#123;</span><br><span class="line">    font-size: 14px;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">.my-post-title&#123;</span><br><span class="line">  display: block;</span><br><span class="line">  margin-left: 4.5rem;</span><br><span class="line">  color: <span class="comment">#4c4948;</span></span><br><span class="line">  text-decoration: none;</span><br><span class="line">  font-size: .8rem;</span><br><span class="line">  cursor: pointer;</span><br><span class="line">  +<span class="function"><span class="title">mobile</span></span>() &#123;</span><br><span class="line">    //margin-left: 4rem;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">.my-post-header&#123;</span><br><span class="line">  position: top;</span><br><span class="line">  margin-bottom: 1rem;</span><br><span class="line">  -webkit-transition: all .2s ease-in-out;</span><br><span class="line">  -moz-transition: all .2s ease-in-out;</span><br><span class="line">  -o-transition: all .2s ease-in-out;</span><br><span class="line">  -ms-transition: all .2s ease-in-out;</span><br><span class="line">  transition: all .2s ease-in-out;</span><br><span class="line">&#125;</span><br><span class="line">//.my-post-title-link&#123;</span><br><span class="line">//  font-size: 16px;</span><br><span class="line">//  font-weight: 500;</span><br><span class="line">//&#125;</span><br><span class="line">.my-post-meta&#123;</span><br><span class="line">  position: absolute;</span><br><span class="line">  color: <span class="comment">#99a9bf;</span></span><br><span class="line">  width: 80px;</span><br><span class="line">  color: <span class="comment">#114142;</span></span><br><span class="line">&#125;</span><br><span class="line">div.post-block.tag .collection-title h2 &#123;</span><br><span class="line">  border-width: 1px;</span><br><span class="line">  border-style: solid;</span><br><span class="line">  border-color: <span class="comment">#3f3f3f;</span></span><br><span class="line">  border-radius: 20px;</span><br><span class="line">  font-size: 22px;</span><br><span class="line">  background-color: <span class="comment">#b4e8fa;</span></span><br><span class="line">  padding: 2px 15px;</span><br><span class="line">  letter-spacing: 1.5px;</span><br><span class="line">  box-sizing: border-box;</span><br><span class="line">  color: <span class="comment">#3f3f3f;</span></span><br><span class="line">  display: inline-block;</span><br><span class="line">  margin: 10px 0 10px;</span><br><span class="line">  text-align: center;</span><br><span class="line">  +<span class="function"><span class="title">mobile</span></span>()&#123;</span><br><span class="line">    font-size: 18px;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">.category-list-link:hover&#123;</span><br><span class="line">  transform: scale(1.1);</span><br><span class="line">  box-shadow: 10px 10px 15px 2px rgba(0,0,0,.12), 0 0 6px 0 rgba(104, 104, 105, 0.1);</span><br><span class="line">  border-radius: 8px;</span><br><span class="line">  padding: 1px 1px;</span><br><span class="line">  margin-left: 5px;</span><br><span class="line">  font-size: 16px;</span><br><span class="line">  transition-duration: 0.15s;</span><br><span class="line">  //display:flex;</span><br><span class="line">&#125;</span><br><span class="line">/* 归档页样式 end */</span><br></pre></td></tr></table></figure><p>然后 <code>hexo clean &amp;&amp; hexo g &amp;&amp; hexo s</code> 就可以查看效果了！</p>]]></content>
      
      
      <categories>
          
          <category> Hexo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Hexo </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hexo博客Valine评论样式美化</title>
      <link href="posts/89ea6c8b.html"/>
      <url>posts/89ea6c8b.html</url>
      
        <content type="html"><![CDATA[<p>Valine 是一款比较轻量级的纯前端的评论系统，目前很多个人博客都在使用 Valine 评论系统，并且支持匿名留言。</p><a href=https://github.com/xCss/Valine target='_blank' class='LinkCard'><style type=text/css>.LinkCard,.LinkCard:hover{text-decoration:none;border:none!important;color:inherit!important}.LinkCard{position:relative;display:block;margin:5px auto;width:330px;box-sizing:border-box;border-radius:12px;max-width:100%;overflow:hidden;color:inherit;text-decoration:none}.ztext{word-break:break-word;line-height:1.6}.LinkCard-backdrop{position:absolute;top:0;left:0;right:0;bottom:0;background-repeat:no-repeat;-webkit-filter:blur(20px);filter:blur(20px);background-size:cover;background-position:center}.LinkCard,.LinkCard:hover{text-decoration:none;border:none!important;color:inherit!important}.LinkCard-content{position:relative;display:flex;align-items:center;justify-content:space-between;padding:12px;border-radius:inherit;background-color:rgba(246,246,246,0.88)}.LinkCard-text{overflow:hidden;width:260px;}.LinkCard-title{white-space: nowrap;display:-webkit-box;-webkit-line-clamp:2;overflow:hidden;text-overflow:ellipsis;max-height:calc(16px * 1.25 * 2);font-size:16px;font-weight:500;line-height:1.25;color:#1a1a1a}@media(max-width: 767px){.LinkCard-title{font-size:13px;}}.LinkCard-meta{display:flex;margin-top:4px;font-size:14px;line-height:20px;color:#999;white-space:nowrap}.LinkCard-imageCell{margin-left:28px;border-radius:30px;width:70px;}.LinkCard-image{background-image:url('https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/linkcard/spider-man.png');background-size: 100% 100%;display:block;width:65px;height:65px;border-radius:inherit;margin-bottom: 0 !important;}</style><span class=LinkCard-backdrop style=background-image:url(https://zhstatic.zhihu.com/assets/zhihu/editor/zhihu-card-default.svg)></span><span class=LinkCard-content><span class=LinkCard-text><span class=LinkCard-title>Valine的Github地址</span><span class=LinkCard-meta><span style=display:inline-flex;align-items:center><svg class='Zi Zi--InsertLink' fill=currentColor viewBox='0 0 24 24' width=17 height=17><path d='M6.77 17.23c-.905-.904-.94-2.333-.08-3.193l3.059-3.06-1.192-1.19-3.059 3.058c-1.489 1.489-1.427 3.954.138 5.519s4.03 1.627 5.519.138l3.059-3.059-1.192-1.192-3.059 3.06c-.86.86-2.289.824-3.193-.08zm3.016-8.673l1.192 1.192 3.059-3.06c.86-.86 2.289-.824 3.193.08.905.905.94 2.334.08 3.194l-3.059 3.06 1.192 1.19 3.059-3.058c1.489-1.489 1.427-3.954-.138-5.519s-4.03-1.627-5.519-.138L9.786 8.557zm-1.023 6.68c.33.33.863.343 1.177.029l5.34-5.34c.314-.314.3-.846-.03-1.176-.33-.33-.862-.344-1.176-.03l-5.34 5.34c-.314.314-.3.846.03 1.177z' fill-rule=evenodd></path></svg></span><span style='margin-top: -0.1rem;'>https://github.com/xCss/Valine</span></span></span><span class='LinkCard-imageCell'><div class='LinkCard-image'></div></span></span></a><p>我个人也是很喜欢这一款评论系统的，之前用过来必力、Gitalk 等评论系统，都觉得很难用，尤其是来必力，这款韩国人做的评论系统在国内使用很容易出现加载非常慢的情况，往往博客内容都加载完成评论系统还需要好久才加载完，在国内体验比较差吧。</p><p>那么 Valine 默认的样式其实比较素，当然不同人喜欢的风格都不一样，如果有喜欢我这种评论样式的，不妨留个言并且在文章末尾给个五星好评吧~</p><div class="note danger"><p>注意：本Valine美化目前只适应于 <code>valine1.3.4</code> 版本的，如果是其它版本的可能css样式会错乱。</p></div><p>具体更改 Valine 版本的话，主要是更改Valine的js版本，比如我的是next主题，那么就在主题目录下 <code>next\layout\_third-party\comments\valine.swig</code> 中找到引入 <code>valine.js</code> 的 <code>&lt;script&gt;&lt;/script&gt;</code> 语句，我是将 Valine 的 <code>1.3.4</code> 版本的 <code>js</code> 放到目录本地的，所以将引入 <code>js</code> 的语句改成了：<code>&lt;script src=&quot;/js/src/valine1.3.4.js&quot;&gt;&lt;/script&gt;</code></p><p>当然不同版本的next主题中 <code>valine.swig</code> 中内容也不同。</p><p>比如next6主题的 <code>valine.swig</code> 中代码是这样的：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;% <span class="built_in">set</span> valine_uri = <span class="string">&#x27;//unpkg.com/valine/dist/Valine.min.js&#x27;</span> %&#125;</span><br><span class="line">&#123;% <span class="keyword">if</span> theme.vendors.valine %&#125;</span><br><span class="line">  &#123;% <span class="built_in">set</span> valine_uri = theme.vendors.valine %&#125;</span><br><span class="line">&#123;% endif %&#125;</span><br><span class="line">&lt;script src=<span class="string">&quot;&#123;&#123; valine_uri &#125;&#125;&quot;</span>&gt;&lt;/script&gt;</span><br></pre></td></tr></table></figure><p>而next5主题的就在valine.swig开头，内容如下：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;% <span class="keyword">if</span> theme.valine.enable and theme.valine.appid and theme.valine.appkey %&#125;</span><br><span class="line">  &lt;script src=<span class="string">&quot;//cdn1.lncld.net/static/js/3.0.4/av-min.js&quot;</span>&gt;&lt;/script&gt;</span><br><span class="line">  &lt;script src=<span class="string">&quot;//unpkg.com/valine/dist/Valine.min.js&quot;</span>&gt;&lt;/script&gt;</span><br></pre></td></tr></table></figure><p>而url中 <code>//unpkg.com/valine/dist/Valine.min.js</code> 默认是引入最新的 <code>valine.js</code> 文件，所以不管是next5还是next6主题都是修改这个url地址，只要修改成 <code>valine1.3.4</code> 版本的js文件即可。</p><p>然后打开主题目录下 <code>next\source\css\_custom\custom.styl</code> ，在文件末尾添加如下代码：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br></pre></td><td class="code"><pre><span class="line">/*valine 评论系统样式*/</span><br><span class="line">div<span class="comment">#comments.comments.v&#123;</span></span><br><span class="line">  margin-top: 0px !important;</span><br><span class="line">  margin-left: 0px !important;</span><br><span class="line">  margin-right: 0px !important;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">div.vheader.item2&#123;</span><br><span class="line">  border-bottom: 1px solid <span class="comment">#5f5f5f;</span></span><br><span class="line">  height: 35px !important;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.v .vwrap .vheader.item2 .vinput&#123;</span><br><span class="line">  height: 30px !important;</span><br><span class="line">  border: 0px !important;</span><br><span class="line">  width: 25% !important;</span><br><span class="line">  margin: 0px !important;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">input.vnick.vinput&#123;</span><br><span class="line">  border-right: 2px solid <span class="comment">#a4d8fa !important;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">div.vcontrol&#123;</span><br><span class="line">  padding-top: 0px !important;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">div<span class="comment">#comments.comments.v&#123;</span></span><br><span class="line">  border: 0px;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">.v .vwrap&#123;</span><br><span class="line">  border: 2px solid black !important;</span><br><span class="line">  height: 250px !important;</span><br><span class="line">  border-radius: 6px !important;</span><br><span class="line">  overflow: visible !important;</span><br><span class="line">  counter-reset: avater;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.v .vwrap .vedit .vemojis&#123;</span><br><span class="line">  width: 600px !important;</span><br><span class="line">  background-color: <span class="comment">#fff !important;</span></span><br><span class="line">  border-radius: 5px !important;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.v .vwrap .vedit .vpreview &#123;</span><br><span class="line">  width: 600px !important;</span><br><span class="line">  background-color: <span class="comment">#fff !important;</span></span><br><span class="line">  border-radius: 5px !important;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.v .vbtn&#123;</span><br><span class="line">  background-color: <span class="comment">#971212 !important;</span></span><br><span class="line">  color: <span class="comment">#fff !important;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.v .vwrap .vedit .vctrl&#123;</span><br><span class="line">  text-align: left !important;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.v .vwrap .vedit .vctrl span&#123;</span><br><span class="line">  background-color: <span class="comment">#7f7f7f !important;</span></span><br><span class="line">  color: <span class="comment">#fff !important;</span></span><br><span class="line">  border-radius: 3px !important;</span><br><span class="line">  padding: 3px !important;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.v .vwrap .vedit .vctrl&#123;</span><br><span class="line">  padding: 0px !important;</span><br><span class="line">  margin: 0px !important;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.v .vlist .vcard .vquote .vcontent &#123;</span><br><span class="line">  font-size: 15px;</span><br><span class="line">  font-weight: 200;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">div.vedit&#123;</span><br><span class="line">  height: 120px;</span><br><span class="line">&#125;</span><br><span class="line">div.vcontrol&#123;</span><br><span class="line">margin-top: 30px;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.v .veditor&#123;</span><br><span class="line">  min-height: 70px !important;</span><br><span class="line">  height: 100px !important;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.v .vlist .vcard &#123;</span><br><span class="line">  border: 1px solid <span class="comment">#ccc !important;</span></span><br><span class="line">  padding-left: 14px !important;</span><br><span class="line">  padding-right: 14px !important;</span><br><span class="line">  margin-bottom: 20px !important;</span><br><span class="line">  border-radius: 10px !important;</span><br><span class="line">&#125;</span><br><span class="line">.v .vlist  .vquote .vcard&#123;</span><br><span class="line">  border: 0px !important;</span><br><span class="line">  margin-bottom: 0px !important;</span><br><span class="line">  border-radius: 0px !important;</span><br><span class="line">  padding: 0px !important;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.v .vlist .vcard .vhead .vsys&#123;</span><br><span class="line">  display:none !important;</span><br><span class="line">  background-color: <span class="comment">#fff !important;</span></span><br><span class="line">&#125;</span><br><span class="line">.v .vlist .vcard .vh .vmeta .vat&#123;</span><br><span class="line">  background-color: <span class="comment">#177714 !important;</span></span><br><span class="line">  color: <span class="comment">#fff !important;</span></span><br><span class="line">  border-radius: 3px !important;</span><br><span class="line">  padding-left: 10px !important;</span><br><span class="line">  padding-right: 10px !important;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.v .vlist .vcard .vimg&#123;</span><br><span class="line">  margin: 0 12px 0 0;</span><br><span class="line">  counter-increment: avater;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/*设置评论头像旋转*/</span><br><span class="line">.v .vlist .vcard .vimg:hover &#123;</span><br><span class="line">    -webkit-transform: rotate(360deg);</span><br><span class="line">    -moz-transform: rotate(360deg);</span><br><span class="line">    -ms-transform: rotate(360deg);</span><br><span class="line">    -transform: rotate(360deg);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.v .vlist .vcard .vquote&#123;</span><br><span class="line">  margin-left: 40px; </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.v .vlist .vcard .vquote&#123;</span><br><span class="line">  counter-reset: avaters;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.v .vlist .vcard .vquote .vimg&#123;</span><br><span class="line">  display: avaters !important;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.v .vlist .vcard .vquote  .vhead:before&#123;</span><br><span class="line">    display: block;</span><br><span class="line">    <span class="built_in">float</span>: left;</span><br><span class="line">    width: 38px;</span><br><span class="line">    height: 38px;</span><br><span class="line">    line-height: 38px;</span><br><span class="line">    margin: 0 12px 0 0;</span><br><span class="line">    color: <span class="comment">#fff;</span></span><br><span class="line">    font-size: 15px;</span><br><span class="line">    font-weight: bold;</span><br><span class="line">    font-style: normal;</span><br><span class="line">    background-color: <span class="comment">#2d4e41;</span></span><br><span class="line">    border: 3px solid <span class="comment">#60a1e5;</span></span><br><span class="line">    border-radius: 50%;</span><br><span class="line">    text-align: center;</span><br><span class="line"></span><br><span class="line">    /*content: counter(avater)<span class="string">&#x27;.&#x27;</span>counter(avaters);</span><br><span class="line">    counter-increment: avaters;*/</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.v .vlist .vcard p &#123;</span><br><span class="line">  top: -1.5em;</span><br><span class="line">  position: relative;</span><br><span class="line">  z-index: 1;</span><br><span class="line">  margin: <span class="built_in">unset</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.v .vlist .vcard .vquote a.at &#123;</span><br><span class="line">  font-size: 13px;</span><br><span class="line">  color: <span class="comment">#bea124;</span></span><br><span class="line">  text-decoration: none;</span><br><span class="line">  border: <span class="built_in">unset</span>;</span><br><span class="line">  position: relative;</span><br><span class="line">  top: -40px;</span><br><span class="line">&#125;</span><br><span class="line">.v .vlist .vcard .vquote .vcontent&#123;</span><br><span class="line">  font-size: 15px;</span><br><span class="line">  font-weight: 200;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.v .vlist .vcard .vcontent &#123;</span><br><span class="line">  margin-top: 58px !important;</span><br><span class="line">  font-size: 15px !important;</span><br><span class="line">  font-weight: 500 !important;</span><br><span class="line">  padding-top: 0 !important;</span><br><span class="line">  margin-bottom: <span class="built_in">unset</span> !important;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.v .vlist .vcard .vquote .vhead .vnick &#123;</span><br><span class="line">  color: <span class="comment">#5af !important;</span></span><br><span class="line">  font-weight: 300 !important;</span><br><span class="line">  font-size: 15px !important;</span><br><span class="line">&#125;</span><br><span class="line">.v .vlist .vcard .vhead .vnick &#123;</span><br><span class="line">  font-size: 18px !important;</span><br><span class="line">  font-weight: 500 !important;</span><br><span class="line">  color: <span class="comment">#5b6b68 !important;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.v .vlist .vcard&#123;</span><br><span class="line">  padding-top: 8px !important;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.v .vlist .vcard .vhead&#123;</span><br><span class="line">  <span class="built_in">float</span>: left !important;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.v .vlist .vcard .vh .vmeta&#123;</span><br><span class="line">  <span class="built_in">float</span>: right !important;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.v .vlist .vcard .vcontent.expand:after&#123;</span><br><span class="line">  content: <span class="string">&quot;点击查看全部&quot;</span> !important;</span><br><span class="line">  font-weight: 400 !important;</span><br><span class="line">&#125;</span><br><span class="line">/**/</span><br></pre></td></tr></table></figure><p>其中有需要自己修改的地方可以在浏览器中F12自行修改css样式即可。</p>]]></content>
      
      
      <categories>
          
          <category> Hexo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Hexo </tag>
            
            <tag> Valine </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hexo博客+Next主题鼠标点击特效</title>
      <link href="posts/9c9b482b.html"/>
      <url>posts/9c9b482b.html</url>
      
        <content type="html"><![CDATA[<div class="note primary">感觉鼠标点击出现效果也还不错哈，不妨在本站空白处点击一下看看效果~</div><h2 id="效果">效果</h2><p><img src="https://s2.ax1x.com/2019/11/15/MUqJgS.jpg" class="lazyload placeholder" data-srcset="https://s2.ax1x.com/2019/11/15/MUqJgS.jpg" srcset="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/site-img/img-loading.gif" alt="效果"></p><h2 id="配置">配置</h2><p>在主题 <code>_config.yml</code> 中添加动态配置项</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cursor_effect:</span><br><span class="line">  enabled: <span class="literal">true</span></span><br><span class="line">  <span class="built_in">type</span>: love  <span class="comment"># fireworks：礼花 | explosion：爆炸 | love：浮出爱心 | text：浮出文字</span></span><br></pre></td></tr></table></figure><h2 id="代码">代码</h2><p>文件位置：/themes/next/layout/_custom/custom.swig ，添加如下代码：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#123;% <span class="keyword">if</span> theme.cursor_effect %&#125;</span><br><span class="line">  &#123;% <span class="keyword">if</span> theme.cursor_effect.type == <span class="string">&quot;fireworks&quot;</span> %&#125;</span><br><span class="line">    &lt;script src=<span class="string">&quot;/js/cursor/fireworks.js&quot;</span>&gt;&lt;/script&gt;</span><br><span class="line">  &#123;% elseif theme.cursor_effect.type == <span class="string">&quot;explosion&quot;</span> %&#125;</span><br><span class="line">    &lt;canvas class=<span class="string">&quot;fireworks&quot;</span> style=<span class="string">&quot;position: fixed;left: 0;top: 0;z-index: 1; pointer-events: none;&quot;</span> &gt;&lt;/canvas&gt;</span><br><span class="line">    &lt;script src=<span class="string">&quot;//cdn.bootcss.com/animejs/2.2.0/anime.min.js&quot;</span>&gt;&lt;/script&gt;</span><br><span class="line">    &lt;script src=<span class="string">&quot;/js/cursor/explosion.min.js&quot;</span>&gt;&lt;/script&gt;</span><br><span class="line">  &#123;% elseif theme.cursor_effect.type == <span class="string">&quot;love&quot;</span> %&#125;</span><br><span class="line">    &lt;script src=<span class="string">&quot;/js/cursor/love.min.js&quot;</span>&gt;&lt;/script&gt;</span><br><span class="line">  &#123;% elseif theme.cursor_effect.type == <span class="string">&quot;text&quot;</span> %&#125;</span><br><span class="line">    &lt;script src=<span class="string">&quot;/js/cursor/text.js&quot;</span>&gt;&lt;/script&gt;</span><br><span class="line">  &#123;% endif %&#125;</span><br><span class="line">&#123;% endif %&#125;</span><br></pre></td></tr></table></figure><p>如果是第一次使用这个 <code>custom.swig</code> ，则需要在 /themes/next/layout/_layout.swig 中的 <code>&lt;/body&gt;</code> 结束之前引入</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% include <span class="string">&#x27;_custom/custom.swig&#x27;</span> %&#125;</span><br></pre></td></tr></table></figure><p>将以下4个 JS 文件复制到目录  /themes/next/source/js/cursor/ 下</p><div class="note default">fireworks.js</div><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br></pre></td><td class="code"><pre><span class="line">class Circle &#123;</span><br><span class="line">  constructor(&#123; origin, speed, color, angle, context &#125;) &#123;</span><br><span class="line">    this.origin = origin</span><br><span class="line">    this.position = &#123; ...this.origin &#125;</span><br><span class="line">    this.color = color</span><br><span class="line">    this.speed = speed</span><br><span class="line">    this.angle = angle</span><br><span class="line">    this.context = context</span><br><span class="line">    this.renderCount = 0</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="title">draw</span></span>() &#123;</span><br><span class="line">    this.context.fillStyle = this.color</span><br><span class="line">    this.context.beginPath()</span><br><span class="line">    this.context.arc(this.position.x, this.position.y, 2, 0, Math.PI * 2)</span><br><span class="line">    this.context.fill()</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="title">move</span></span>() &#123;</span><br><span class="line">    this.position.x = (Math.sin(this.angle) * this.speed) + this.position.x</span><br><span class="line">    this.position.y = (Math.cos(this.angle) * this.speed) + this.position.y + (this.renderCount * 0.3)</span><br><span class="line">    this.renderCount++</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">class Boom &#123;</span><br><span class="line">  constructor (&#123; origin, context, circleCount = 16, area &#125;) &#123;</span><br><span class="line">    this.origin = origin</span><br><span class="line">    this.context = context</span><br><span class="line">    this.circleCount = circleCount</span><br><span class="line">    this.area = area</span><br><span class="line">    this.stop = <span class="literal">false</span></span><br><span class="line">    this.circles = []</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  randomArray(range) &#123;</span><br><span class="line">    const length = range.length</span><br><span class="line">    const randomIndex = Math.floor(length * Math.random())</span><br><span class="line">    <span class="built_in">return</span> range[randomIndex]</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="title">randomColor</span></span>() &#123;</span><br><span class="line">    const range = [<span class="string">&#x27;8&#x27;</span>, <span class="string">&#x27;9&#x27;</span>, <span class="string">&#x27;A&#x27;</span>, <span class="string">&#x27;B&#x27;</span>, <span class="string">&#x27;C&#x27;</span>, <span class="string">&#x27;D&#x27;</span>, <span class="string">&#x27;E&#x27;</span>, <span class="string">&#x27;F&#x27;</span>]</span><br><span class="line">    <span class="built_in">return</span> <span class="string">&#x27;#&#x27;</span> + this.randomArray(range) + this.randomArray(range) + this.randomArray(range) + this.randomArray(range) + this.randomArray(range) + this.randomArray(range)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  randomRange(start, end) &#123;</span><br><span class="line">    <span class="built_in">return</span> (end - start) * Math.random() + start</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="title">init</span></span>() &#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="built_in">let</span> i = 0; i &lt; this.circleCount; i++) &#123;</span><br><span class="line">      const circle = new Circle(&#123;</span><br><span class="line">        context: this.context,</span><br><span class="line">        origin: this.origin,</span><br><span class="line">        color: this.randomColor(),</span><br><span class="line">        angle: this.randomRange(Math.PI - 1, Math.PI + 1),</span><br><span class="line">        speed: this.randomRange(1, 6)</span><br><span class="line">      &#125;)</span><br><span class="line">      this.circles.push(circle)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="title">move</span></span>() &#123;</span><br><span class="line">    this.circles.forEach((circle, index) =&gt; &#123;</span><br><span class="line">      <span class="keyword">if</span> (circle.position.x &gt; this.area.width || circle.position.y &gt; this.area.height) &#123;</span><br><span class="line">        <span class="built_in">return</span> this.circles.splice(index, 1)</span><br><span class="line">      &#125;</span><br><span class="line">      circle.move()</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="keyword">if</span> (this.circles.length == 0) &#123;</span><br><span class="line">      this.stop = <span class="literal">true</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="title">draw</span></span>() &#123;</span><br><span class="line">    this.circles.forEach(circle =&gt; circle.draw())</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">class CursorSpecialEffects &#123;</span><br><span class="line">  <span class="function"><span class="title">constructor</span></span>() &#123;</span><br><span class="line">    this.computerCanvas = document.createElement(<span class="string">&#x27;canvas&#x27;</span>)</span><br><span class="line">    this.renderCanvas = document.createElement(<span class="string">&#x27;canvas&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    this.computerContext = this.computerCanvas.getContext(<span class="string">&#x27;2d&#x27;</span>)</span><br><span class="line">    this.renderContext = this.renderCanvas.getContext(<span class="string">&#x27;2d&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    this.globalWidth = window.innerWidth</span><br><span class="line">    this.globalHeight = window.innerHeight</span><br><span class="line"></span><br><span class="line">    this.booms = []</span><br><span class="line">    this.running = <span class="literal">false</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  handleMouseDown(e) &#123;</span><br><span class="line">    const boom = new Boom(&#123;</span><br><span class="line">      origin: &#123; x: e.clientX, y: e.clientY &#125;,</span><br><span class="line">      context: this.computerContext,</span><br><span class="line">      area: &#123;</span><br><span class="line">        width: this.globalWidth,</span><br><span class="line">        height: this.globalHeight</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">    boom.init()</span><br><span class="line">    this.booms.push(boom)</span><br><span class="line">    this.running || this.run()</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="title">handlePageHide</span></span>() &#123;</span><br><span class="line">    this.booms = []</span><br><span class="line">    this.running = <span class="literal">false</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="title">init</span></span>() &#123;</span><br><span class="line">    const style = this.renderCanvas.style</span><br><span class="line">    style.position = <span class="string">&#x27;fixed&#x27;</span></span><br><span class="line">    style.top = style.left = 0</span><br><span class="line">    style.zIndex = <span class="string">&#x27;999999999999999999999999999999999999999999&#x27;</span></span><br><span class="line">    style.pointerEvents = <span class="string">&#x27;none&#x27;</span></span><br><span class="line"></span><br><span class="line">    style.width = this.renderCanvas.width = this.computerCanvas.width = this.globalWidth</span><br><span class="line">    style.height = this.renderCanvas.height = this.computerCanvas.height = this.globalHeight</span><br><span class="line"></span><br><span class="line">    document.body.append(this.renderCanvas)</span><br><span class="line"></span><br><span class="line">    window.addEventListener(<span class="string">&#x27;mousedown&#x27;</span>, this.handleMouseDown.bind(this))</span><br><span class="line">    window.addEventListener(<span class="string">&#x27;pagehide&#x27;</span>, this.handlePageHide.bind(this))</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="title">run</span></span>() &#123;</span><br><span class="line">    this.running = <span class="literal">true</span></span><br><span class="line">    <span class="keyword">if</span> (this.booms.length == 0) &#123;</span><br><span class="line">      <span class="built_in">return</span> this.running = <span class="literal">false</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    requestAnimationFrame(this.run.bind(this))</span><br><span class="line"></span><br><span class="line">    this.computerContext.clearRect(0, 0, this.globalWidth, this.globalHeight)</span><br><span class="line">    this.renderContext.clearRect(0, 0, this.globalWidth, this.globalHeight)</span><br><span class="line"></span><br><span class="line">    this.booms.forEach((boom, index) =&gt; &#123;</span><br><span class="line">      <span class="keyword">if</span> (boom.stop) &#123;</span><br><span class="line">        <span class="built_in">return</span> this.booms.splice(index, 1)</span><br><span class="line">      &#125;</span><br><span class="line">      boom.move()</span><br><span class="line">      boom.draw()</span><br><span class="line">    &#125;)</span><br><span class="line">    this.renderContext.drawImage(this.computerCanvas, 0, 0, this.globalWidth, this.globalHeight)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">const cursorSpecialEffects = new CursorSpecialEffects()</span><br><span class="line">cursorSpecialEffects.init()</span><br></pre></td></tr></table></figure><div class="note default">explosion.min.js</div><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;use strict&quot;</span>;<span class="keyword">function</span> updateCoords(e)&#123;pointerX=(e.clientX||e.touches[0].clientX)-canvasEl.getBoundingClientRect().left,pointerY=e.clientY||e.touches[0].clientY-canvasEl.getBoundingClientRect().top&#125;<span class="keyword">function</span> setParticuleDirection(e)&#123;var t=anime.random(0,360)*Math.PI/180,a=anime.random(50,180),n=[-1,1][anime.random(0,1)]*a;<span class="built_in">return</span>&#123;x:e.x+n*Math.cos(t),y:e.y+n*Math.sin(t)&#125;&#125;<span class="keyword">function</span> createParticule(e,t)&#123;var a=&#123;&#125;;<span class="built_in">return</span> a.x=e,a.y=t,a.color=colors[anime.random(0,colors.length-1)],a.radius=anime.random(16,32),a.endPos=setParticuleDirection(a),a.draw=<span class="function"><span class="title">function</span></span>()&#123;ctx.beginPath(),ctx.arc(a.x,a.y,a.radius,0,2*Math.PI,!0),ctx.fillStyle=a.color,ctx.fill()&#125;,a&#125;<span class="keyword">function</span> createCircle(e,t)&#123;var a=&#123;&#125;;<span class="built_in">return</span> a.x=e,a.y=t,a.color=<span class="string">&quot;#F00&quot;</span>,a.radius=0.1,a.alpha=0.5,a.lineWidth=6,a.draw=<span class="function"><span class="title">function</span></span>()&#123;ctx.globalAlpha=a.alpha,ctx.beginPath(),ctx.arc(a.x,a.y,a.radius,0,2*Math.PI,!0),ctx.lineWidth=a.lineWidth,ctx.strokeStyle=a.color,ctx.stroke(),ctx.globalAlpha=1&#125;,a&#125;<span class="keyword">function</span> renderParticule(e)&#123;<span class="keyword">for</span>(var t=0;t&lt;e.animatables.length;t++)&#123;e.animatables[t].target.draw()&#125;&#125;<span class="keyword">function</span> animateParticules(e,t)&#123;<span class="keyword">for</span>(var a=createCircle(e,t),n=[],i=0;i&lt;numberOfParticules;i++)&#123;n.push(createParticule(e,t))&#125;anime.timeline().add(&#123;targets:n,x:<span class="keyword">function</span>(e)&#123;<span class="built_in">return</span> e.endPos.x&#125;,y:<span class="keyword">function</span>(e)&#123;<span class="built_in">return</span> e.endPos.y&#125;,radius:0.1,duration:anime.random(1200,1800),easing:<span class="string">&quot;easeOutExpo&quot;</span>,update:renderParticule&#125;).add(&#123;targets:a,radius:anime.random(80,160),lineWidth:0,alpha:&#123;value:0,easing:<span class="string">&quot;linear&quot;</span>,duration:anime.random(600,800)&#125;,duration:anime.random(1200,1800),easing:<span class="string">&quot;easeOutExpo&quot;</span>,update:renderParticule,offset:0&#125;)&#125;<span class="keyword">function</span> debounce(e,t)&#123;var a;<span class="built_in">return</span> <span class="function"><span class="title">function</span></span>()&#123;var n=this,i=arguments;clearTimeout(a),a=setTimeout(<span class="function"><span class="title">function</span></span>()&#123;e.apply(n,i)&#125;,t)&#125;&#125;var canvasEl=document.querySelector(<span class="string">&quot;.fireworks&quot;</span>);<span class="keyword">if</span>(canvasEl)&#123;var ctx=canvasEl.getContext(<span class="string">&quot;2d&quot;</span>),numberOfParticules=30,pointerX=0,pointerY=0,tap=<span class="string">&quot;mousedown&quot;</span>,colors=[<span class="string">&quot;#FF1461&quot;</span>,<span class="string">&quot;#18FF92&quot;</span>,<span class="string">&quot;#5A87FF&quot;</span>,<span class="string">&quot;#FBF38C&quot;</span>],setCanvasSize=debounce(<span class="function"><span class="title">function</span></span>()&#123;canvasEl.width=2*window.innerWidth,canvasEl.height=2*window.innerHeight,canvasEl.style.width=window.innerWidth+<span class="string">&quot;px&quot;</span>,canvasEl.style.height=window.innerHeight+<span class="string">&quot;px&quot;</span>,canvasEl.getContext(<span class="string">&quot;2d&quot;</span>).scale(2,2)&#125;,500),render=anime(&#123;duration:1/0,update:<span class="function"><span class="title">function</span></span>()&#123;ctx.clearRect(0,0,canvasEl.width,canvasEl.height)&#125;&#125;);document.addEventListener(tap,<span class="keyword">function</span>(e)&#123;<span class="string">&quot;sidebar&quot;</span>!==e.target.id&amp;&amp;<span class="string">&quot;toggle-sidebar&quot;</span>!==e.target.id&amp;&amp;<span class="string">&quot;A&quot;</span>!==e.target.nodeName&amp;&amp;<span class="string">&quot;IMG&quot;</span>!==e.target.nodeName&amp;&amp;(render.play(),updateCoords(e),animateParticules(pointerX,pointerY))&#125;,!1),setCanvasSize(),window.addEventListener(<span class="string">&quot;resize&quot;</span>,setCanvasSize,!1)&#125;<span class="string">&quot;use strict&quot;</span>;<span class="keyword">function</span> updateCoords(e)&#123;pointerX=(e.clientX||e.touches[0].clientX)-canvasEl.getBoundingClientRect().left,pointerY=e.clientY||e.touches[0].clientY-canvasEl.getBoundingClientRect().top&#125;<span class="keyword">function</span> setParticuleDirection(e)&#123;var t=anime.random(0,360)*Math.PI/180,a=anime.random(50,180),n=[-1,1][anime.random(0,1)]*a;<span class="built_in">return</span>&#123;x:e.x+n*Math.cos(t),y:e.y+n*Math.sin(t)&#125;&#125;<span class="keyword">function</span> createParticule(e,t)&#123;var a=&#123;&#125;;<span class="built_in">return</span> a.x=e,a.y=t,a.color=colors[anime.random(0,colors.length-1)],a.radius=anime.random(16,32),a.endPos=setParticuleDirection(a),a.draw=<span class="function"><span class="title">function</span></span>()&#123;ctx.beginPath(),ctx.arc(a.x,a.y,a.radius,0,2*Math.PI,!0),ctx.fillStyle=a.color,ctx.fill()&#125;,a&#125;<span class="keyword">function</span> createCircle(e,t)&#123;var a=&#123;&#125;;<span class="built_in">return</span> a.x=e,a.y=t,a.color=<span class="string">&quot;#F00&quot;</span>,a.radius=0.1,a.alpha=0.5,a.lineWidth=6,a.draw=<span class="function"><span class="title">function</span></span>()&#123;ctx.globalAlpha=a.alpha,ctx.beginPath(),ctx.arc(a.x,a.y,a.radius,0,2*Math.PI,!0),ctx.lineWidth=a.lineWidth,ctx.strokeStyle=a.color,ctx.stroke(),ctx.globalAlpha=1&#125;,a&#125;<span class="keyword">function</span> renderParticule(e)&#123;<span class="keyword">for</span>(var t=0;t&lt;e.animatables.length;t++)&#123;e.animatables[t].target.draw()&#125;&#125;<span class="keyword">function</span> animateParticules(e,t)&#123;<span class="keyword">for</span>(var a=createCircle(e,t),n=[],i=0;i&lt;numberOfParticules;i++)&#123;n.push(createParticule(e,t))&#125;anime.timeline().add(&#123;targets:n,x:<span class="keyword">function</span>(e)&#123;<span class="built_in">return</span> e.endPos.x&#125;,y:<span class="keyword">function</span>(e)&#123;<span class="built_in">return</span> e.endPos.y&#125;,radius:0.1,duration:anime.random(1200,1800),easing:<span class="string">&quot;easeOutExpo&quot;</span>,update:renderParticule&#125;).add(&#123;targets:a,radius:anime.random(80,160),lineWidth:0,alpha:&#123;value:0,easing:<span class="string">&quot;linear&quot;</span>,duration:anime.random(600,800)&#125;,duration:anime.random(1200,1800),easing:<span class="string">&quot;easeOutExpo&quot;</span>,update:renderParticule,offset:0&#125;)&#125;<span class="keyword">function</span> debounce(e,t)&#123;var a;<span class="built_in">return</span> <span class="function"><span class="title">function</span></span>()&#123;var n=this,i=arguments;clearTimeout(a),a=setTimeout(<span class="function"><span class="title">function</span></span>()&#123;e.apply(n,i)&#125;,t)&#125;&#125;var canvasEl=document.querySelector(<span class="string">&quot;.fireworks&quot;</span>);<span class="keyword">if</span>(canvasEl)&#123;var ctx=canvasEl.getContext(<span class="string">&quot;2d&quot;</span>),numberOfParticules=30,pointerX=0,pointerY=0,tap=<span class="string">&quot;mousedown&quot;</span>,colors=[<span class="string">&quot;#FF1461&quot;</span>,<span class="string">&quot;#18FF92&quot;</span>,<span class="string">&quot;#5A87FF&quot;</span>,<span class="string">&quot;#FBF38C&quot;</span>],setCanvasSize=debounce(<span class="function"><span class="title">function</span></span>()&#123;canvasEl.width=2*window.innerWidth,canvasEl.height=2*window.innerHeight,canvasEl.style.width=window.innerWidth+<span class="string">&quot;px&quot;</span>,canvasEl.style.height=window.innerHeight+<span class="string">&quot;px&quot;</span>,canvasEl.getContext(<span class="string">&quot;2d&quot;</span>).scale(2,2)&#125;,500),render=anime(&#123;duration:1/0,update:<span class="function"><span class="title">function</span></span>()&#123;ctx.clearRect(0,0,canvasEl.width,canvasEl.height)&#125;&#125;);document.addEventListener(tap,<span class="keyword">function</span>(e)&#123;<span class="string">&quot;sidebar&quot;</span>!==e.target.id&amp;&amp;<span class="string">&quot;toggle-sidebar&quot;</span>!==e.target.id&amp;&amp;<span class="string">&quot;A&quot;</span>!==e.target.nodeName&amp;&amp;<span class="string">&quot;IMG&quot;</span>!==e.target.nodeName&amp;&amp;(render.play(),updateCoords(e),animateParticules(pointerX,pointerY))&#125;,!1),setCanvasSize(),window.addEventListener(<span class="string">&quot;resize&quot;</span>,setCanvasSize,!1)&#125;;</span><br></pre></td></tr></table></figure><div class="note default">love.min.js</div><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">!<span class="keyword">function</span>(e,t,a)&#123;<span class="keyword">function</span> <span class="function"><span class="title">n</span></span>()&#123;c(<span class="string">&quot;.heart&#123;width: 10px;height: 10px;position: fixed;background: #f00;transform: rotate(45deg);-webkit-transform: rotate(45deg);-moz-transform: rotate(45deg);&#125;.heart:after,.heart:before&#123;content: &#x27;&#x27;;width: inherit;height: inherit;background: inherit;border-radius: 50%;-webkit-border-radius: 50%;-moz-border-radius: 50%;position: fixed;&#125;.heart:after&#123;top: -5px;&#125;.heart:before&#123;left: -5px;&#125;&quot;</span>),o(),r()&#125;<span class="keyword">function</span> <span class="function"><span class="title">r</span></span>()&#123;<span class="keyword">for</span>(var e=0;e&lt;d.length;e++)d[e].alpha&lt;=0?(t.body.removeChild(d[e].el),d.splice(e,1)):(d[e].y--,d[e].scale+=.004,d[e].alpha-=.013,d[e].el.style.cssText=<span class="string">&quot;left:&quot;</span>+d[e].x+<span class="string">&quot;px;top:&quot;</span>+d[e].y+<span class="string">&quot;px;opacity:&quot;</span>+d[e].alpha+<span class="string">&quot;;transform:scale(&quot;</span>+d[e].scale+<span class="string">&quot;,&quot;</span>+d[e].scale+<span class="string">&quot;) rotate(45deg);background:&quot;</span>+d[e].color+<span class="string">&quot;;z-index:99999&quot;</span>);requestAnimationFrame(r)&#125;<span class="keyword">function</span> <span class="function"><span class="title">o</span></span>()&#123;var t=<span class="string">&quot;function&quot;</span>==typeof e.onclick&amp;&amp;e.onclick;e.onclick=<span class="keyword">function</span>(e)&#123;t&amp;&amp;t(),i(e)&#125;&#125;<span class="keyword">function</span> i(e)&#123;var a=t.createElement(<span class="string">&quot;div&quot;</span>);a.className=<span class="string">&quot;heart&quot;</span>,d.push(&#123;el:a,x:e.clientX-5,y:e.clientY-5,scale:1,alpha:1,color:s()&#125;),t.body.appendChild(a)&#125;<span class="keyword">function</span> c(e)&#123;var a=t.createElement(<span class="string">&quot;style&quot;</span>);a.type=<span class="string">&quot;text/css&quot;</span>;try&#123;a.appendChild(t.createTextNode(e))&#125;catch(t)&#123;a.styleSheet.cssText=e&#125;t.getElementsByTagName(<span class="string">&quot;head&quot;</span>)[0].appendChild(a)&#125;<span class="keyword">function</span> <span class="function"><span class="title">s</span></span>()&#123;<span class="built_in">return</span><span class="string">&quot;rgb(&quot;</span>+~~(255*Math.random())+<span class="string">&quot;,&quot;</span>+~~(255*Math.random())+<span class="string">&quot;,&quot;</span>+~~(255*Math.random())+<span class="string">&quot;)&quot;</span>&#125;var d=[];e.requestAnimationFrame=<span class="function"><span class="title">function</span></span>()&#123;<span class="built_in">return</span> e.requestAnimationFrame||e.webkitRequestAnimationFrame||e.mozRequestAnimationFrame||e.oRequestAnimationFrame||e.msRequestAnimationFrame||<span class="keyword">function</span>(e)&#123;setTimeout(e,1e3/60)&#125;&#125;(),n()&#125;(window,document);</span><br></pre></td></tr></table></figure><div class="note default">text.js</div><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">var a_idx = 0;</span><br><span class="line">jQuery(document).ready(<span class="keyword">function</span>($) &#123;</span><br><span class="line">  $(<span class="string">&quot;body&quot;</span>).click(<span class="keyword">function</span>(e) &#123;</span><br><span class="line">    var a = new Array(<span class="string">&quot;富强&quot;</span>, <span class="string">&quot;民主&quot;</span>, <span class="string">&quot;文明&quot;</span>, <span class="string">&quot;和谐&quot;</span>, <span class="string">&quot;自由&quot;</span>, <span class="string">&quot;平等&quot;</span>, <span class="string">&quot;公正&quot;</span> ,<span class="string">&quot;法治&quot;</span>, <span class="string">&quot;爱国&quot;</span>, <span class="string">&quot;敬业&quot;</span>, <span class="string">&quot;诚信&quot;</span>, <span class="string">&quot;友善&quot;</span>);</span><br><span class="line">    var <span class="variable">$i</span> = $(<span class="string">&quot;&lt;span/&gt;&quot;</span>).text(a[a_idx]);</span><br><span class="line">    var x = e.pageX,</span><br><span class="line">      y = e.pageY;</span><br><span class="line">    <span class="variable">$i</span>.css(&#123;</span><br><span class="line">      <span class="string">&quot;z-index&quot;</span>: 99999,</span><br><span class="line">      <span class="string">&quot;top&quot;</span>: y - 28,</span><br><span class="line">      <span class="string">&quot;left&quot;</span>: x - a[a_idx].length * 8,</span><br><span class="line">      <span class="string">&quot;position&quot;</span>: <span class="string">&quot;absolute&quot;</span>,</span><br><span class="line">      <span class="string">&quot;color&quot;</span>: <span class="string">&quot;#ff7a45&quot;</span></span><br><span class="line">    &#125;);</span><br><span class="line">    $(<span class="string">&quot;body&quot;</span>).append(<span class="variable">$i</span>);</span><br><span class="line">    <span class="variable">$i</span>.animate(&#123;</span><br><span class="line">      <span class="string">&quot;top&quot;</span>: y - 180,</span><br><span class="line">      <span class="string">&quot;opacity&quot;</span>: 0</span><br><span class="line">    &#125;, 1500, <span class="function"><span class="title">function</span></span>() &#123;</span><br><span class="line">      <span class="variable">$i</span>.remove();</span><br><span class="line">    &#125;);</span><br><span class="line">    a_idx = (a_idx + 1) % a.length;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Hexo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Hexo </tag>
            
            <tag> 点击特效 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hexo博客中加入豆瓣读书页面</title>
      <link href="posts/7fbe9500.html"/>
      <url>posts/7fbe9500.html</url>
      
        <content type="html"><![CDATA[<p>在Hexo博客个性化定制中，加入豆瓣读书界面是一个很不错的功能，<a href="https://hasaik.com/books/">可以进入我的个人阅读界面查看效果</a>，那么我是怎么做到的呢？其实很简单，我们只需要加入一个 <code>hexo-douban</code> 模块即可。</p><a href=https://github.com/mythsman/hexo-douban target='_blank' class='LinkCard'><style type=text/css>.LinkCard,.LinkCard:hover{text-decoration:none;border:none!important;color:inherit!important}.LinkCard{position:relative;display:block;margin:5px auto;width:330px;box-sizing:border-box;border-radius:12px;max-width:100%;overflow:hidden;color:inherit;text-decoration:none}.ztext{word-break:break-word;line-height:1.6}.LinkCard-backdrop{position:absolute;top:0;left:0;right:0;bottom:0;background-repeat:no-repeat;-webkit-filter:blur(20px);filter:blur(20px);background-size:cover;background-position:center}.LinkCard,.LinkCard:hover{text-decoration:none;border:none!important;color:inherit!important}.LinkCard-content{position:relative;display:flex;align-items:center;justify-content:space-between;padding:12px;border-radius:inherit;background-color:rgba(246,246,246,0.88)}.LinkCard-text{overflow:hidden;width:260px;}.LinkCard-title{white-space: nowrap;display:-webkit-box;-webkit-line-clamp:2;overflow:hidden;text-overflow:ellipsis;max-height:calc(16px * 1.25 * 2);font-size:16px;font-weight:500;line-height:1.25;color:#1a1a1a}@media(max-width: 767px){.LinkCard-title{font-size:13px;}}.LinkCard-meta{display:flex;margin-top:4px;font-size:14px;line-height:20px;color:#999;white-space:nowrap}.LinkCard-imageCell{margin-left:28px;border-radius:30px;width:70px;}.LinkCard-image{background-image:url('https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/linkcard/spider-man.png');background-size: 100% 100%;display:block;width:65px;height:65px;border-radius:inherit;margin-bottom: 0 !important;}</style><span class=LinkCard-backdrop style=background-image:url(https://zhstatic.zhihu.com/assets/zhihu/editor/zhihu-card-default.svg)></span><span class=LinkCard-content><span class=LinkCard-text><span class=LinkCard-title>hexo-douban的Github地址</span><span class=LinkCard-meta><span style=display:inline-flex;align-items:center><svg class='Zi Zi--InsertLink' fill=currentColor viewBox='0 0 24 24' width=17 height=17><path d='M6.77 17.23c-.905-.904-.94-2.333-.08-3.193l3.059-3.06-1.192-1.19-3.059 3.058c-1.489 1.489-1.427 3.954.138 5.519s4.03 1.627 5.519.138l3.059-3.059-1.192-1.192-3.059 3.06c-.86.86-2.289.824-3.193-.08zm3.016-8.673l1.192 1.192 3.059-3.06c.86-.86 2.289-.824 3.193.08.905.905.94 2.334.08 3.194l-3.059 3.06 1.192 1.19 3.059-3.058c1.489-1.489 1.427-3.954-.138-5.519s-4.03-1.627-5.519-.138L9.786 8.557zm-1.023 6.68c.33.33.863.343 1.177.029l5.34-5.34c.314-.314.3-.846-.03-1.176-.33-.33-.862-.344-1.176-.03l-5.34 5.34c-.314.314-.3.846.03 1.177z' fill-rule=evenodd></path></svg></span><span style='margin-top: -0.1rem;'>https://github.com/mythsman/hexo-douban</span></span></span><span class='LinkCard-imageCell'><div class='LinkCard-image'></div></span></span></a><h1 id="安装模块依赖">安装模块依赖</h1><p>我们使用时可以先安装依赖模块，在GitBash中使用以下命令：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm install hexo-douban --save</span><br></pre></td></tr></table></figure><h2 id="站点配置文件中添加配置">站点配置文件中添加配置</h2><p>然后我们再在Hexo站点根目录配置文件 <code>_config.xml</code> 中的末尾添加如下配置：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">douban:</span><br><span class="line">  user: mythsman</span><br><span class="line">  <span class="built_in">builtin</span>: <span class="literal">false</span></span><br><span class="line">  book:</span><br><span class="line">    title: <span class="string">&#x27;This is my book title&#x27;</span></span><br><span class="line">    quote: <span class="string">&#x27;This is my book quote&#x27;</span></span><br><span class="line">  movie:</span><br><span class="line">    title: <span class="string">&#x27;This is my movie title&#x27;</span></span><br><span class="line">    quote: <span class="string">&#x27;This is my movie quote&#x27;</span></span><br><span class="line">  game:</span><br><span class="line">    title: <span class="string">&#x27;This is my game title&#x27;</span></span><br><span class="line">    quote: <span class="string">&#x27;This is my game quote&#x27;</span></span><br><span class="line">  timeout: 10000</span><br></pre></td></tr></table></figure><p>上面参数说明：</p><ul><li>user: 你的豆瓣ID.打开豆瓣，登入账户，然后在右上角点击 “个人主页” ，这时候地址栏的URL大概是这样：<code>https://www.douban.com/people/xxxxxx/</code> ，其中的 <code>xxxxxx</code> 就是你的个人ID了。</li><li>builtin: 是否将生成页面的功能嵌入hexo s和hexo g中，默认是false,另一可选项为true(1.x.x版本新增配置项)。</li><li>title: 该页面的标题.</li><li>quote: 写在页面开头的一段话,支持html语法.</li><li>timeout: 爬取数据的超时时间，默认是 10000ms ,如果在使用时发现报了超时的错(ETIMEOUT)可以把这个数据设置的大一点。</li></ul><p>由于 <code>hexo-douban</code> 是默认抓取豆瓣读书、豆瓣电影以及豆瓣游戏的，如果只想要其中一部分，可以把其它部分在上述配置文件中去掉即可。</p><h2 id="启动">启动</h2><p>那么我们如何去使用这个呢？</p><p>我们只需要在 <code>GitBash</code> 中输入以下命令：<code>hexo clean &amp;&amp; hexo douban -bgm &amp;&amp; hexo g &amp;&amp; hexo s</code> 即可，注意其中开启hexo-douban的命令中，<code>-bgm</code> 代表的是book、game、movie三个参数，如果只需要其中的一部分就只带你想要的那些参数。</p><div class="note danger"><p>另外注意的是，由于 <code>hexo douban</code> 的简写也是 <code>hexo d</code> ，与 <code>hexo deploy</code> 的简写指令 <code>hexo d</code> 冲突，因此在进行二者部署的时候，只能都打全名而不能打简写形式。</p></div><h2 id="测试">测试</h2><p>上面都没问题之后，我们只需要在站点目录下测试 <code>http://localhost:4000/books</code> 或者 <code>http://localhost:4000/movies</code> 等，如果看到页面了就说明成功了。</p><h2 id="部署">部署</h2><p>如果上述都没有问题，我们就可以在菜单栏中添加按钮了，打开主题配置文件 <code>_config.xml</code> ，找到菜单按钮，可以选择性的添加下面内容：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">menu:</span><br><span class="line">  home: /</span><br><span class="line">  archives: /archives</span><br><span class="line">  books: /books     <span class="comment"># 这是链接到books页面</span></span><br><span class="line">  movies: /movies   <span class="comment">#  这是链接到movies页面</span></span><br><span class="line">  games: /games   <span class="comment"># 这是链接到games页面</span></span><br></pre></td></tr></table></figure><p>注意添加完成之后按钮并不是中文的，这是由于在 <code>languages</code> 文件夹下面的 <code>zh-CN</code>（中文语言配置文件）没有添加上述对应的中文参数信息，所以我们需要主动添加。</p><p>语言文件夹在你的主题配置文件夹下面，比如我的是使用的next主题，则是在 <code>E:\blog\hexo\themes\next\languages</code> 目录下，找到 <code>zh-CN</code> 文件，在menu菜单下添加：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">menu:</span><br><span class="line">  books: 阅读</span><br><span class="line">  movies: 电影</span><br><span class="line">  games: 游戏</span><br></pre></td></tr></table></figure><p>即可完成中文化自定义菜单。</p>]]></content>
      
      
      <categories>
          
          <category> Hexo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Hexo </tag>
            
            <tag> 豆瓣 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hexo博客界面美化</title>
      <link href="posts/dff7e11c.html"/>
      <url>posts/dff7e11c.html</url>
      
        <content type="html"><![CDATA[<div class="note warning">注意：本样式美化方式只适用于 Next 主题，并且最好懂一些 CSS 前端知识，以便有些不兼容样式部分可以自行在浏览器中 F12 调试。</div><a href=https://github.com/iissnan/hexo-theme-next target='_blank' class='LinkCard'><style type=text/css>.LinkCard,.LinkCard:hover{text-decoration:none;border:none!important;color:inherit!important}.LinkCard{position:relative;display:block;margin:5px auto;width:330px;box-sizing:border-box;border-radius:12px;max-width:100%;overflow:hidden;color:inherit;text-decoration:none}.ztext{word-break:break-word;line-height:1.6}.LinkCard-backdrop{position:absolute;top:0;left:0;right:0;bottom:0;background-repeat:no-repeat;-webkit-filter:blur(20px);filter:blur(20px);background-size:cover;background-position:center}.LinkCard,.LinkCard:hover{text-decoration:none;border:none!important;color:inherit!important}.LinkCard-content{position:relative;display:flex;align-items:center;justify-content:space-between;padding:12px;border-radius:inherit;background-color:rgba(246,246,246,0.88)}.LinkCard-text{overflow:hidden;width:260px;}.LinkCard-title{white-space: nowrap;display:-webkit-box;-webkit-line-clamp:2;overflow:hidden;text-overflow:ellipsis;max-height:calc(16px * 1.25 * 2);font-size:16px;font-weight:500;line-height:1.25;color:#1a1a1a}@media(max-width: 767px){.LinkCard-title{font-size:13px;}}.LinkCard-meta{display:flex;margin-top:4px;font-size:14px;line-height:20px;color:#999;white-space:nowrap}.LinkCard-imageCell{margin-left:28px;border-radius:30px;width:70px;}.LinkCard-image{background-image:url('https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/linkcard/spider-man.png');background-size: 100% 100%;display:block;width:65px;height:65px;border-radius:inherit;margin-bottom: 0 !important;}</style><span class=LinkCard-backdrop style=background-image:url(https://zhstatic.zhihu.com/assets/zhihu/editor/zhihu-card-default.svg)></span><span class=LinkCard-content><span class=LinkCard-text><span class=LinkCard-title>Next5主题的Github地址</span><span class=LinkCard-meta><span style=display:inline-flex;align-items:center><svg class='Zi Zi--InsertLink' fill=currentColor viewBox='0 0 24 24' width=17 height=17><path d='M6.77 17.23c-.905-.904-.94-2.333-.08-3.193l3.059-3.06-1.192-1.19-3.059 3.058c-1.489 1.489-1.427 3.954.138 5.519s4.03 1.627 5.519.138l3.059-3.059-1.192-1.192-3.059 3.06c-.86.86-2.289.824-3.193-.08zm3.016-8.673l1.192 1.192 3.059-3.06c.86-.86 2.289-.824 3.193.08.905.905.94 2.334.08 3.194l-3.059 3.06 1.192 1.19 3.059-3.058c1.489-1.489 1.427-3.954-.138-5.519s-4.03-1.627-5.519-.138L9.786 8.557zm-1.023 6.68c.33.33.863.343 1.177.029l5.34-5.34c.314-.314.3-.846-.03-1.176-.33-.33-.862-.344-1.176-.03l-5.34 5.34c-.314.314-.3.846.03 1.177z' fill-rule=evenodd></path></svg></span><span style='margin-top: -0.1rem;'>https://github.com/iissnan/hexo-theme-next</span></span></span><span class='LinkCard-imageCell'><div class='LinkCard-image'></div></span></span></a><p>我的个人博客样式都是基于 Next5 主题的，如果你用的是 Next6 主题，那么会有一部分样式不是很兼容， 需要自己在浏览器中定位该样式并做一些调整。</p><p>修改的话就找到next主题目录下的 <code>next\source\css\_custom\custom.styl</code> ，这个文件是Next主题预留给用户自定义修改css样式的文件，所以我们绝大多数全局样式都在这里进行修改即可。</p><p>以下附上我的 <code>custom.styl</code> 文件内容供大家参考，注意出现问题一定要在浏览器中调试修改！</p><p>文件位置：hexo/themes/next/source/css/_custom/custom.styl</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br><span class="line">480</span><br><span class="line">481</span><br><span class="line">482</span><br><span class="line">483</span><br><span class="line">484</span><br><span class="line">485</span><br><span class="line">486</span><br><span class="line">487</span><br><span class="line">488</span><br><span class="line">489</span><br><span class="line">490</span><br><span class="line">491</span><br><span class="line">492</span><br><span class="line">493</span><br><span class="line">494</span><br><span class="line">495</span><br><span class="line">496</span><br><span class="line">497</span><br><span class="line">498</span><br><span class="line">499</span><br><span class="line">500</span><br><span class="line">501</span><br><span class="line">502</span><br><span class="line">503</span><br><span class="line">504</span><br><span class="line">505</span><br><span class="line">506</span><br><span class="line">507</span><br><span class="line">508</span><br><span class="line">509</span><br><span class="line">510</span><br><span class="line">511</span><br><span class="line">512</span><br><span class="line">513</span><br><span class="line">514</span><br><span class="line">515</span><br><span class="line">516</span><br><span class="line">517</span><br><span class="line">518</span><br><span class="line">519</span><br><span class="line">520</span><br><span class="line">521</span><br><span class="line">522</span><br><span class="line">523</span><br><span class="line">524</span><br><span class="line">525</span><br><span class="line">526</span><br><span class="line">527</span><br><span class="line">528</span><br><span class="line">529</span><br><span class="line">530</span><br><span class="line">531</span><br><span class="line">532</span><br><span class="line">533</span><br><span class="line">534</span><br><span class="line">535</span><br><span class="line">536</span><br><span class="line">537</span><br><span class="line">538</span><br><span class="line">539</span><br><span class="line">540</span><br><span class="line">541</span><br><span class="line">542</span><br><span class="line">543</span><br><span class="line">544</span><br><span class="line">545</span><br><span class="line">546</span><br><span class="line">547</span><br><span class="line">548</span><br><span class="line">549</span><br><span class="line">550</span><br><span class="line">551</span><br><span class="line">552</span><br><span class="line">553</span><br><span class="line">554</span><br><span class="line">555</span><br><span class="line">556</span><br><span class="line">557</span><br><span class="line">558</span><br><span class="line">559</span><br><span class="line">560</span><br><span class="line">561</span><br><span class="line">562</span><br><span class="line">563</span><br><span class="line">564</span><br><span class="line">565</span><br><span class="line">566</span><br><span class="line">567</span><br><span class="line">568</span><br><span class="line">569</span><br><span class="line">570</span><br><span class="line">571</span><br><span class="line">572</span><br><span class="line">573</span><br><span class="line">574</span><br><span class="line">575</span><br><span class="line">576</span><br><span class="line">577</span><br><span class="line">578</span><br><span class="line">579</span><br><span class="line">580</span><br><span class="line">581</span><br><span class="line">582</span><br><span class="line">583</span><br><span class="line">584</span><br><span class="line">585</span><br><span class="line">586</span><br><span class="line">587</span><br><span class="line">588</span><br><span class="line">589</span><br><span class="line">590</span><br><span class="line">591</span><br><span class="line">592</span><br><span class="line">593</span><br><span class="line">594</span><br><span class="line">595</span><br><span class="line">596</span><br><span class="line">597</span><br><span class="line">598</span><br><span class="line">599</span><br><span class="line">600</span><br><span class="line">601</span><br><span class="line">602</span><br><span class="line">603</span><br><span class="line">604</span><br><span class="line">605</span><br><span class="line">606</span><br><span class="line">607</span><br><span class="line">608</span><br><span class="line">609</span><br><span class="line">610</span><br><span class="line">611</span><br><span class="line">612</span><br><span class="line">613</span><br><span class="line">614</span><br><span class="line">615</span><br><span class="line">616</span><br><span class="line">617</span><br><span class="line">618</span><br><span class="line">619</span><br><span class="line">620</span><br><span class="line">621</span><br><span class="line">622</span><br><span class="line">623</span><br><span class="line">624</span><br><span class="line">625</span><br><span class="line">626</span><br><span class="line">627</span><br><span class="line">628</span><br><span class="line">629</span><br><span class="line">630</span><br><span class="line">631</span><br><span class="line">632</span><br><span class="line">633</span><br><span class="line">634</span><br><span class="line">635</span><br><span class="line">636</span><br><span class="line">637</span><br><span class="line">638</span><br><span class="line">639</span><br><span class="line">640</span><br><span class="line">641</span><br><span class="line">642</span><br><span class="line">643</span><br><span class="line">644</span><br><span class="line">645</span><br><span class="line">646</span><br><span class="line">647</span><br><span class="line">648</span><br><span class="line">649</span><br><span class="line">650</span><br><span class="line">651</span><br><span class="line">652</span><br><span class="line">653</span><br><span class="line">654</span><br><span class="line">655</span><br><span class="line">656</span><br><span class="line">657</span><br><span class="line">658</span><br><span class="line">659</span><br><span class="line">660</span><br><span class="line">661</span><br><span class="line">662</span><br><span class="line">663</span><br><span class="line">664</span><br><span class="line">665</span><br><span class="line">666</span><br><span class="line">667</span><br><span class="line">668</span><br><span class="line">669</span><br><span class="line">670</span><br><span class="line">671</span><br><span class="line">672</span><br><span class="line">673</span><br><span class="line">674</span><br><span class="line">675</span><br><span class="line">676</span><br><span class="line">677</span><br><span class="line">678</span><br><span class="line">679</span><br><span class="line">680</span><br><span class="line">681</span><br><span class="line">682</span><br><span class="line">683</span><br><span class="line">684</span><br><span class="line">685</span><br><span class="line">686</span><br><span class="line">687</span><br><span class="line">688</span><br><span class="line">689</span><br><span class="line">690</span><br><span class="line">691</span><br><span class="line">692</span><br><span class="line">693</span><br><span class="line">694</span><br><span class="line">695</span><br><span class="line">696</span><br><span class="line">697</span><br><span class="line">698</span><br><span class="line">699</span><br><span class="line">700</span><br><span class="line">701</span><br><span class="line">702</span><br><span class="line">703</span><br><span class="line">704</span><br><span class="line">705</span><br><span class="line">706</span><br><span class="line">707</span><br><span class="line">708</span><br><span class="line">709</span><br><span class="line">710</span><br><span class="line">711</span><br><span class="line">712</span><br><span class="line">713</span><br><span class="line">714</span><br><span class="line">715</span><br><span class="line">716</span><br><span class="line">717</span><br><span class="line">718</span><br><span class="line">719</span><br><span class="line">720</span><br><span class="line">721</span><br><span class="line">722</span><br><span class="line">723</span><br><span class="line">724</span><br><span class="line">725</span><br><span class="line">726</span><br><span class="line">727</span><br><span class="line">728</span><br><span class="line">729</span><br><span class="line">730</span><br><span class="line">731</span><br><span class="line">732</span><br><span class="line">733</span><br><span class="line">734</span><br><span class="line">735</span><br><span class="line">736</span><br><span class="line">737</span><br><span class="line">738</span><br><span class="line">739</span><br><span class="line">740</span><br><span class="line">741</span><br><span class="line">742</span><br><span class="line">743</span><br><span class="line">744</span><br><span class="line">745</span><br><span class="line">746</span><br><span class="line">747</span><br><span class="line">748</span><br><span class="line">749</span><br><span class="line">750</span><br><span class="line">751</span><br><span class="line">752</span><br><span class="line">753</span><br><span class="line">754</span><br><span class="line">755</span><br><span class="line">756</span><br><span class="line">757</span><br><span class="line">758</span><br><span class="line">759</span><br><span class="line">760</span><br><span class="line">761</span><br><span class="line">762</span><br><span class="line">763</span><br><span class="line">764</span><br><span class="line">765</span><br><span class="line">766</span><br><span class="line">767</span><br><span class="line">768</span><br><span class="line">769</span><br><span class="line">770</span><br><span class="line">771</span><br><span class="line">772</span><br><span class="line">773</span><br><span class="line">774</span><br><span class="line">775</span><br><span class="line">776</span><br><span class="line">777</span><br><span class="line">778</span><br><span class="line">779</span><br><span class="line">780</span><br><span class="line">781</span><br><span class="line">782</span><br><span class="line">783</span><br><span class="line">784</span><br><span class="line">785</span><br><span class="line">786</span><br><span class="line">787</span><br><span class="line">788</span><br><span class="line">789</span><br><span class="line">790</span><br><span class="line">791</span><br><span class="line">792</span><br><span class="line">793</span><br><span class="line">794</span><br><span class="line">795</span><br><span class="line">796</span><br><span class="line">797</span><br><span class="line">798</span><br><span class="line">799</span><br><span class="line">800</span><br><span class="line">801</span><br><span class="line">802</span><br><span class="line">803</span><br><span class="line">804</span><br><span class="line">805</span><br><span class="line">806</span><br><span class="line">807</span><br><span class="line">808</span><br><span class="line">809</span><br><span class="line">810</span><br><span class="line">811</span><br><span class="line">812</span><br><span class="line">813</span><br><span class="line">814</span><br><span class="line">815</span><br><span class="line">816</span><br><span class="line">817</span><br><span class="line">818</span><br><span class="line">819</span><br><span class="line">820</span><br><span class="line">821</span><br><span class="line">822</span><br><span class="line">823</span><br><span class="line">824</span><br><span class="line">825</span><br><span class="line">826</span><br><span class="line">827</span><br><span class="line">828</span><br><span class="line">829</span><br><span class="line">830</span><br><span class="line">831</span><br><span class="line">832</span><br><span class="line">833</span><br><span class="line">834</span><br><span class="line">835</span><br><span class="line">836</span><br><span class="line">837</span><br><span class="line">838</span><br><span class="line">839</span><br><span class="line">840</span><br><span class="line">841</span><br><span class="line">842</span><br><span class="line">843</span><br><span class="line">844</span><br><span class="line">845</span><br><span class="line">846</span><br><span class="line">847</span><br><span class="line">848</span><br><span class="line">849</span><br><span class="line">850</span><br><span class="line">851</span><br><span class="line">852</span><br><span class="line">853</span><br><span class="line">854</span><br><span class="line">855</span><br><span class="line">856</span><br><span class="line">857</span><br><span class="line">858</span><br><span class="line">859</span><br><span class="line">860</span><br><span class="line">861</span><br><span class="line">862</span><br><span class="line">863</span><br><span class="line">864</span><br><span class="line">865</span><br><span class="line">866</span><br><span class="line">867</span><br><span class="line">868</span><br><span class="line">869</span><br><span class="line">870</span><br><span class="line">871</span><br><span class="line">872</span><br><span class="line">873</span><br><span class="line">874</span><br><span class="line">875</span><br><span class="line">876</span><br><span class="line">877</span><br><span class="line">878</span><br><span class="line">879</span><br><span class="line">880</span><br><span class="line">881</span><br><span class="line">882</span><br><span class="line">883</span><br><span class="line">884</span><br><span class="line">885</span><br><span class="line">886</span><br><span class="line">887</span><br><span class="line">888</span><br><span class="line">889</span><br><span class="line">890</span><br><span class="line">891</span><br><span class="line">892</span><br><span class="line">893</span><br><span class="line">894</span><br><span class="line">895</span><br><span class="line">896</span><br><span class="line">897</span><br><span class="line">898</span><br><span class="line">899</span><br><span class="line">900</span><br><span class="line">901</span><br><span class="line">902</span><br><span class="line">903</span><br><span class="line">904</span><br><span class="line">905</span><br><span class="line">906</span><br><span class="line">907</span><br><span class="line">908</span><br><span class="line">909</span><br><span class="line">910</span><br><span class="line">911</span><br><span class="line">912</span><br><span class="line">913</span><br><span class="line">914</span><br><span class="line">915</span><br><span class="line">916</span><br><span class="line">917</span><br><span class="line">918</span><br><span class="line">919</span><br><span class="line">920</span><br><span class="line">921</span><br><span class="line">922</span><br><span class="line">923</span><br><span class="line">924</span><br><span class="line">925</span><br><span class="line">926</span><br><span class="line">927</span><br><span class="line">928</span><br><span class="line">929</span><br><span class="line">930</span><br><span class="line">931</span><br><span class="line">932</span><br><span class="line">933</span><br><span class="line">934</span><br><span class="line">935</span><br><span class="line">936</span><br><span class="line">937</span><br><span class="line">938</span><br><span class="line">939</span><br><span class="line">940</span><br><span class="line">941</span><br><span class="line">942</span><br><span class="line">943</span><br><span class="line">944</span><br><span class="line">945</span><br><span class="line">946</span><br><span class="line">947</span><br><span class="line">948</span><br><span class="line">949</span><br><span class="line">950</span><br><span class="line">951</span><br><span class="line">952</span><br><span class="line">953</span><br><span class="line">954</span><br><span class="line">955</span><br><span class="line">956</span><br><span class="line">957</span><br><span class="line">958</span><br><span class="line">959</span><br><span class="line">960</span><br><span class="line">961</span><br><span class="line">962</span><br><span class="line">963</span><br><span class="line">964</span><br><span class="line">965</span><br><span class="line">966</span><br><span class="line">967</span><br><span class="line">968</span><br><span class="line">969</span><br><span class="line">970</span><br><span class="line">971</span><br><span class="line">972</span><br><span class="line">973</span><br><span class="line">974</span><br><span class="line">975</span><br><span class="line">976</span><br><span class="line">977</span><br><span class="line">978</span><br><span class="line">979</span><br><span class="line">980</span><br><span class="line">981</span><br><span class="line">982</span><br><span class="line">983</span><br><span class="line">984</span><br><span class="line">985</span><br><span class="line">986</span><br><span class="line">987</span><br><span class="line">988</span><br><span class="line">989</span><br><span class="line">990</span><br><span class="line">991</span><br><span class="line">992</span><br><span class="line">993</span><br><span class="line">994</span><br><span class="line">995</span><br><span class="line">996</span><br><span class="line">997</span><br><span class="line">998</span><br><span class="line">999</span><br><span class="line">1000</span><br><span class="line">1001</span><br><span class="line">1002</span><br><span class="line">1003</span><br><span class="line">1004</span><br><span class="line">1005</span><br><span class="line">1006</span><br><span class="line">1007</span><br><span class="line">1008</span><br><span class="line">1009</span><br><span class="line">1010</span><br><span class="line">1011</span><br><span class="line">1012</span><br><span class="line">1013</span><br><span class="line">1014</span><br><span class="line">1015</span><br><span class="line">1016</span><br><span class="line">1017</span><br><span class="line">1018</span><br><span class="line">1019</span><br><span class="line">1020</span><br><span class="line">1021</span><br><span class="line">1022</span><br><span class="line">1023</span><br><span class="line">1024</span><br><span class="line">1025</span><br><span class="line">1026</span><br><span class="line">1027</span><br><span class="line">1028</span><br><span class="line">1029</span><br><span class="line">1030</span><br><span class="line">1031</span><br><span class="line">1032</span><br><span class="line">1033</span><br><span class="line">1034</span><br><span class="line">1035</span><br><span class="line">1036</span><br><span class="line">1037</span><br><span class="line">1038</span><br><span class="line">1039</span><br><span class="line">1040</span><br><span class="line">1041</span><br><span class="line">1042</span><br><span class="line">1043</span><br><span class="line">1044</span><br><span class="line">1045</span><br><span class="line">1046</span><br><span class="line">1047</span><br><span class="line">1048</span><br><span class="line">1049</span><br><span class="line">1050</span><br><span class="line">1051</span><br><span class="line">1052</span><br><span class="line">1053</span><br><span class="line">1054</span><br><span class="line">1055</span><br><span class="line">1056</span><br><span class="line">1057</span><br><span class="line">1058</span><br><span class="line">1059</span><br><span class="line">1060</span><br><span class="line">1061</span><br><span class="line">1062</span><br><span class="line">1063</span><br><span class="line">1064</span><br><span class="line">1065</span><br><span class="line">1066</span><br><span class="line">1067</span><br><span class="line">1068</span><br><span class="line">1069</span><br><span class="line">1070</span><br><span class="line">1071</span><br><span class="line">1072</span><br><span class="line">1073</span><br><span class="line">1074</span><br><span class="line">1075</span><br><span class="line">1076</span><br><span class="line">1077</span><br><span class="line">1078</span><br><span class="line">1079</span><br><span class="line">1080</span><br><span class="line">1081</span><br><span class="line">1082</span><br><span class="line">1083</span><br><span class="line">1084</span><br><span class="line">1085</span><br><span class="line">1086</span><br><span class="line">1087</span><br><span class="line">1088</span><br><span class="line">1089</span><br><span class="line">1090</span><br><span class="line">1091</span><br><span class="line">1092</span><br><span class="line">1093</span><br><span class="line">1094</span><br><span class="line">1095</span><br><span class="line">1096</span><br><span class="line">1097</span><br><span class="line">1098</span><br><span class="line">1099</span><br><span class="line">1100</span><br><span class="line">1101</span><br><span class="line">1102</span><br><span class="line">1103</span><br><span class="line">1104</span><br><span class="line">1105</span><br><span class="line">1106</span><br><span class="line">1107</span><br><span class="line">1108</span><br><span class="line">1109</span><br><span class="line">1110</span><br><span class="line">1111</span><br><span class="line">1112</span><br><span class="line">1113</span><br><span class="line">1114</span><br><span class="line">1115</span><br><span class="line">1116</span><br><span class="line">1117</span><br><span class="line">1118</span><br><span class="line">1119</span><br><span class="line">1120</span><br><span class="line">1121</span><br><span class="line">1122</span><br><span class="line">1123</span><br><span class="line">1124</span><br><span class="line">1125</span><br><span class="line">1126</span><br><span class="line">1127</span><br><span class="line">1128</span><br><span class="line">1129</span><br><span class="line">1130</span><br><span class="line">1131</span><br><span class="line">1132</span><br><span class="line">1133</span><br><span class="line">1134</span><br><span class="line">1135</span><br><span class="line">1136</span><br><span class="line">1137</span><br><span class="line">1138</span><br><span class="line">1139</span><br><span class="line">1140</span><br><span class="line">1141</span><br><span class="line">1142</span><br><span class="line">1143</span><br><span class="line">1144</span><br><span class="line">1145</span><br><span class="line">1146</span><br><span class="line">1147</span><br><span class="line">1148</span><br><span class="line">1149</span><br><span class="line">1150</span><br><span class="line">1151</span><br><span class="line">1152</span><br><span class="line">1153</span><br><span class="line">1154</span><br><span class="line">1155</span><br><span class="line">1156</span><br><span class="line">1157</span><br><span class="line">1158</span><br><span class="line">1159</span><br><span class="line">1160</span><br><span class="line">1161</span><br><span class="line">1162</span><br><span class="line">1163</span><br><span class="line">1164</span><br><span class="line">1165</span><br><span class="line">1166</span><br><span class="line">1167</span><br><span class="line">1168</span><br><span class="line">1169</span><br><span class="line">1170</span><br><span class="line">1171</span><br><span class="line">1172</span><br><span class="line">1173</span><br><span class="line">1174</span><br><span class="line">1175</span><br><span class="line">1176</span><br><span class="line">1177</span><br><span class="line">1178</span><br><span class="line">1179</span><br><span class="line">1180</span><br><span class="line">1181</span><br><span class="line">1182</span><br><span class="line">1183</span><br><span class="line">1184</span><br><span class="line">1185</span><br><span class="line">1186</span><br><span class="line">1187</span><br><span class="line">1188</span><br><span class="line">1189</span><br><span class="line">1190</span><br><span class="line">1191</span><br><span class="line">1192</span><br><span class="line">1193</span><br><span class="line">1194</span><br><span class="line">1195</span><br><span class="line">1196</span><br><span class="line">1197</span><br><span class="line">1198</span><br><span class="line">1199</span><br><span class="line">1200</span><br><span class="line">1201</span><br><span class="line">1202</span><br><span class="line">1203</span><br><span class="line">1204</span><br><span class="line">1205</span><br><span class="line">1206</span><br><span class="line">1207</span><br><span class="line">1208</span><br><span class="line">1209</span><br><span class="line">1210</span><br><span class="line">1211</span><br><span class="line">1212</span><br><span class="line">1213</span><br><span class="line">1214</span><br><span class="line">1215</span><br><span class="line">1216</span><br><span class="line">1217</span><br><span class="line">1218</span><br><span class="line">1219</span><br><span class="line">1220</span><br><span class="line">1221</span><br><span class="line">1222</span><br><span class="line">1223</span><br><span class="line">1224</span><br><span class="line">1225</span><br><span class="line">1226</span><br><span class="line">1227</span><br><span class="line">1228</span><br><span class="line">1229</span><br><span class="line">1230</span><br><span class="line">1231</span><br><span class="line">1232</span><br><span class="line">1233</span><br><span class="line">1234</span><br><span class="line">1235</span><br><span class="line">1236</span><br><span class="line">1237</span><br><span class="line">1238</span><br><span class="line">1239</span><br><span class="line">1240</span><br><span class="line">1241</span><br><span class="line">1242</span><br><span class="line">1243</span><br><span class="line">1244</span><br><span class="line">1245</span><br><span class="line">1246</span><br><span class="line">1247</span><br><span class="line">1248</span><br><span class="line">1249</span><br><span class="line">1250</span><br><span class="line">1251</span><br><span class="line">1252</span><br><span class="line">1253</span><br><span class="line">1254</span><br><span class="line">1255</span><br><span class="line">1256</span><br><span class="line">1257</span><br><span class="line">1258</span><br><span class="line">1259</span><br><span class="line">1260</span><br><span class="line">1261</span><br><span class="line">1262</span><br><span class="line">1263</span><br><span class="line">1264</span><br><span class="line">1265</span><br><span class="line">1266</span><br><span class="line">1267</span><br><span class="line">1268</span><br><span class="line">1269</span><br><span class="line">1270</span><br><span class="line">1271</span><br><span class="line">1272</span><br><span class="line">1273</span><br><span class="line">1274</span><br><span class="line">1275</span><br><span class="line">1276</span><br><span class="line">1277</span><br><span class="line">1278</span><br><span class="line">1279</span><br><span class="line">1280</span><br><span class="line">1281</span><br><span class="line">1282</span><br><span class="line">1283</span><br><span class="line">1284</span><br><span class="line">1285</span><br><span class="line">1286</span><br><span class="line">1287</span><br><span class="line">1288</span><br><span class="line">1289</span><br><span class="line">1290</span><br><span class="line">1291</span><br><span class="line">1292</span><br><span class="line">1293</span><br><span class="line">1294</span><br><span class="line">1295</span><br><span class="line">1296</span><br><span class="line">1297</span><br><span class="line">1298</span><br><span class="line">1299</span><br><span class="line">1300</span><br><span class="line">1301</span><br><span class="line">1302</span><br><span class="line">1303</span><br><span class="line">1304</span><br><span class="line">1305</span><br><span class="line">1306</span><br><span class="line">1307</span><br><span class="line">1308</span><br><span class="line">1309</span><br><span class="line">1310</span><br><span class="line">1311</span><br><span class="line">1312</span><br><span class="line">1313</span><br><span class="line">1314</span><br><span class="line">1315</span><br><span class="line">1316</span><br><span class="line">1317</span><br><span class="line">1318</span><br><span class="line">1319</span><br><span class="line">1320</span><br><span class="line">1321</span><br><span class="line">1322</span><br><span class="line">1323</span><br><span class="line">1324</span><br><span class="line">1325</span><br><span class="line">1326</span><br><span class="line">1327</span><br><span class="line">1328</span><br><span class="line">1329</span><br><span class="line">1330</span><br><span class="line">1331</span><br><span class="line">1332</span><br><span class="line">1333</span><br><span class="line">1334</span><br><span class="line">1335</span><br><span class="line">1336</span><br><span class="line">1337</span><br><span class="line">1338</span><br><span class="line">1339</span><br><span class="line">1340</span><br><span class="line">1341</span><br><span class="line">1342</span><br><span class="line">1343</span><br><span class="line">1344</span><br><span class="line">1345</span><br><span class="line">1346</span><br><span class="line">1347</span><br><span class="line">1348</span><br><span class="line">1349</span><br><span class="line">1350</span><br><span class="line">1351</span><br><span class="line">1352</span><br><span class="line">1353</span><br><span class="line">1354</span><br><span class="line">1355</span><br><span class="line">1356</span><br><span class="line">1357</span><br><span class="line">1358</span><br><span class="line">1359</span><br><span class="line">1360</span><br><span class="line">1361</span><br><span class="line">1362</span><br><span class="line">1363</span><br><span class="line">1364</span><br><span class="line">1365</span><br><span class="line">1366</span><br><span class="line">1367</span><br><span class="line">1368</span><br><span class="line">1369</span><br><span class="line">1370</span><br><span class="line">1371</span><br><span class="line">1372</span><br><span class="line">1373</span><br><span class="line">1374</span><br><span class="line">1375</span><br><span class="line">1376</span><br><span class="line">1377</span><br><span class="line">1378</span><br><span class="line">1379</span><br><span class="line">1380</span><br><span class="line">1381</span><br><span class="line">1382</span><br><span class="line">1383</span><br><span class="line">1384</span><br><span class="line">1385</span><br><span class="line">1386</span><br><span class="line">1387</span><br><span class="line">1388</span><br><span class="line">1389</span><br><span class="line">1390</span><br><span class="line">1391</span><br><span class="line">1392</span><br><span class="line">1393</span><br><span class="line">1394</span><br><span class="line">1395</span><br><span class="line">1396</span><br><span class="line">1397</span><br><span class="line">1398</span><br><span class="line">1399</span><br><span class="line">1400</span><br><span class="line">1401</span><br><span class="line">1402</span><br><span class="line">1403</span><br><span class="line">1404</span><br><span class="line">1405</span><br><span class="line">1406</span><br><span class="line">1407</span><br><span class="line">1408</span><br><span class="line">1409</span><br><span class="line">1410</span><br><span class="line">1411</span><br><span class="line">1412</span><br><span class="line">1413</span><br><span class="line">1414</span><br><span class="line">1415</span><br><span class="line">1416</span><br><span class="line">1417</span><br><span class="line">1418</span><br><span class="line">1419</span><br><span class="line">1420</span><br><span class="line">1421</span><br><span class="line">1422</span><br><span class="line">1423</span><br><span class="line">1424</span><br><span class="line">1425</span><br><span class="line">1426</span><br><span class="line">1427</span><br><span class="line">1428</span><br><span class="line">1429</span><br><span class="line">1430</span><br><span class="line">1431</span><br><span class="line">1432</span><br><span class="line">1433</span><br><span class="line">1434</span><br><span class="line">1435</span><br><span class="line">1436</span><br><span class="line">1437</span><br><span class="line">1438</span><br><span class="line">1439</span><br><span class="line">1440</span><br><span class="line">1441</span><br><span class="line">1442</span><br><span class="line">1443</span><br><span class="line">1444</span><br><span class="line">1445</span><br><span class="line">1446</span><br><span class="line">1447</span><br><span class="line">1448</span><br><span class="line">1449</span><br><span class="line">1450</span><br><span class="line">1451</span><br><span class="line">1452</span><br><span class="line">1453</span><br><span class="line">1454</span><br><span class="line">1455</span><br><span class="line">1456</span><br><span class="line">1457</span><br><span class="line">1458</span><br><span class="line">1459</span><br><span class="line">1460</span><br><span class="line">1461</span><br><span class="line">1462</span><br><span class="line">1463</span><br><span class="line">1464</span><br><span class="line">1465</span><br><span class="line">1466</span><br><span class="line">1467</span><br><span class="line">1468</span><br><span class="line">1469</span><br><span class="line">1470</span><br><span class="line">1471</span><br><span class="line">1472</span><br><span class="line">1473</span><br><span class="line">1474</span><br><span class="line">1475</span><br><span class="line">1476</span><br><span class="line">1477</span><br><span class="line">1478</span><br><span class="line">1479</span><br><span class="line">1480</span><br><span class="line">1481</span><br><span class="line">1482</span><br><span class="line">1483</span><br><span class="line">1484</span><br><span class="line">1485</span><br><span class="line">1486</span><br><span class="line">1487</span><br><span class="line">1488</span><br><span class="line">1489</span><br><span class="line">1490</span><br><span class="line">1491</span><br><span class="line">1492</span><br><span class="line">1493</span><br><span class="line">1494</span><br><span class="line">1495</span><br><span class="line">1496</span><br><span class="line">1497</span><br><span class="line">1498</span><br><span class="line">1499</span><br></pre></td><td class="code"><pre><span class="line">// Custom styles.</span><br><span class="line">// 自定义的侧栏时间样式</span><br><span class="line"><span class="comment">#days &#123;</span></span><br><span class="line">  display: block;</span><br><span class="line">  color: rgb(7, 179, 155);</span><br><span class="line">  font-size: 13px;</span><br><span class="line">  //margin-top: 15px;</span><br><span class="line">  //margin-left: 35px;</span><br><span class="line">  //margin-bottom: 15px;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/*菜单*/</span><br><span class="line">.menu-item:hover &#123;</span><br><span class="line">  transform: scale(1.1);</span><br><span class="line">  box-shadow: 10px 10px 15px 2px rgba(0, 0, 0, .12), 0 0 6px 0 rgba(104, 104, 105, 0.1);</span><br><span class="line">  //border-radius: 3px;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/*近期文章*/</span><br><span class="line">.my-links-of-blogroll-li:hover &#123;</span><br><span class="line">  transform: scale(1.1);</span><br><span class="line">  box-shadow: 10px 10px 15px 2px rgba(0, 0, 0, .12), 0 0 6px 0 rgba(104, 104, 105, 0.1);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/* 排行榜 */</span><br><span class="line">.my-article-top:hover &#123;</span><br><span class="line">  transform: scale(1.1);</span><br><span class="line">  box-shadow: 10px 10px 15px 2px rgba(0, 0, 0, .12), 0 0 6px 0 rgba(104, 104, 105, 0.1);</span><br><span class="line">  border-radius: 30px;</span><br><span class="line">  width: 580px;</span><br><span class="line">  padding: 5px 10px;</span><br><span class="line">  transition-duration: 0.15s;</span><br><span class="line">  +<span class="function"><span class="title">mobile</span></span>() &#123;</span><br><span class="line">    width: 315px;</span><br><span class="line">    //display: block;//不换行</span><br><span class="line">    //margin-left: 18px;</span><br><span class="line">  &#125;</span><br><span class="line">  //display:flex;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/*归档页样式优化 began*/</span><br><span class="line">.page-archive .archive-page-counter &#123;</span><br><span class="line">  font-size: 18px;</span><br><span class="line">  background-color: <span class="comment">#49b1f5;</span></span><br><span class="line">  padding-left: 10px;</span><br><span class="line">  padding-right: 10px;</span><br><span class="line">  border-radius: 8px;</span><br><span class="line">  color: <span class="comment">#fff;</span></span><br><span class="line">  +<span class="function"><span class="title">mobile</span></span>() &#123;</span><br><span class="line">    font-size: 16px;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.my-post-time &#123;</span><br><span class="line">  font-size: 11px;</span><br><span class="line">  position: absolute;</span><br><span class="line">  color: <span class="comment">#fff;</span></span><br><span class="line">  background-color: <span class="comment">#49b1f5;</span></span><br><span class="line">  border-radius: 5px;</span><br><span class="line">  padding-left: 5px;</span><br><span class="line">  padding-right: 5px;</span><br><span class="line">  margin-left: 15px;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.mypost &#123;</span><br><span class="line">  position: relative;</span><br><span class="line">  margin-bottom: 1rem;</span><br><span class="line">  -webkit-transition: all .2s ease-in-out;</span><br><span class="line">  -moz-transition: all .2s ease-in-out;</span><br><span class="line">  -o-transition: all .2s ease-in-out;</span><br><span class="line">  -ms-transition: all .2s ease-in-out;</span><br><span class="line">  transition: all .2s ease-in-out;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">a.my-post-title-link:before &#123;</span><br><span class="line">  top: 10px;</span><br><span class="line">  width: 18px;</span><br><span class="line">  height: 18px;</span><br><span class="line">  content: <span class="string">&quot;📚&quot;</span>;</span><br><span class="line">  margin-right: 5px;</span><br><span class="line">  font: normal normal normal 14px / 1 FontAwesome;</span><br><span class="line">  font-size: 15px;</span><br><span class="line">  line-height: 18px;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.my-post:hover &#123;</span><br><span class="line">  transform: scale(1.1);</span><br><span class="line">  box-shadow: 10px 10px 15px 2px rgba(0, 0, 0, .12), 0 0 6px 0 rgba(104, 104, 105, 0.1);</span><br><span class="line">  border-radius: 30px;</span><br><span class="line">  width: 550px;</span><br><span class="line">  padding: 1px 10px;</span><br><span class="line">  margin-left: 25px;</span><br><span class="line">  font-size: 16px;</span><br><span class="line">  transition-duration: 0.15s;</span><br><span class="line">  +<span class="function"><span class="title">mobile</span></span>() &#123;</span><br><span class="line">    width: 260px;</span><br><span class="line">    margin-left: 18px;</span><br><span class="line">  &#125;</span><br><span class="line">  //display:flex;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">a.my-post-title-link &#123;</span><br><span class="line">  text-decoration: none;</span><br><span class="line">  font-size: 15px;</span><br><span class="line">  font-weight: 400;</span><br><span class="line">  +<span class="function"><span class="title">mobile</span></span>() &#123;</span><br><span class="line">    font-size: 14px;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.my-post-title &#123;</span><br><span class="line">  display: block;</span><br><span class="line">  margin-left: 4.5rem;</span><br><span class="line">  color: <span class="comment">#4c4948;</span></span><br><span class="line">  text-decoration: none;</span><br><span class="line">  font-size: .8rem;</span><br><span class="line">  cursor: pointer;</span><br><span class="line">  +<span class="function"><span class="title">mobile</span></span>() &#123;</span><br><span class="line">    //margin-left: 4rem;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.my-post-header &#123;</span><br><span class="line">  position: top;</span><br><span class="line">  margin-bottom: 1rem;</span><br><span class="line">  -webkit-transition: all .2s ease-in-out;</span><br><span class="line">  -moz-transition: all .2s ease-in-out;</span><br><span class="line">  -o-transition: all .2s ease-in-out;</span><br><span class="line">  -ms-transition: all .2s ease-in-out;</span><br><span class="line">  transition: all .2s ease-in-out;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//.my-post-title-link&#123;</span><br><span class="line">//  font-size: 16px;</span><br><span class="line">//  font-weight: 500;</span><br><span class="line">//&#125;</span><br><span class="line">.my-post-meta &#123;</span><br><span class="line">  position: absolute;</span><br><span class="line">  color: <span class="comment">#99a9bf;</span></span><br><span class="line">  width: 80px;</span><br><span class="line">  color: <span class="comment">#114142;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">div.post-block.tag .collection-title h2 &#123;</span><br><span class="line">  border-width: 1px;</span><br><span class="line">  border-style: solid;</span><br><span class="line">  border-color: <span class="comment">#3f3f3f;</span></span><br><span class="line">  border-radius: 20px;</span><br><span class="line">  font-size: 22px;</span><br><span class="line">  background-color: <span class="comment">#b4e8fa;</span></span><br><span class="line">  padding: 2px 15px;</span><br><span class="line">  letter-spacing: 1.5px;</span><br><span class="line">  box-sizing: border-box;</span><br><span class="line">  color: <span class="comment">#3f3f3f;</span></span><br><span class="line">  display: inline-block;</span><br><span class="line">  margin: 10px 0 10px;</span><br><span class="line">  text-align: center;</span><br><span class="line">  +<span class="function"><span class="title">mobile</span></span>() &#123;</span><br><span class="line">    font-size: 18px;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.category-list-link:hover &#123;</span><br><span class="line">  transform: scale(1.1);</span><br><span class="line">  box-shadow: 10px 10px 15px 2px rgba(0, 0, 0, .12), 0 0 6px 0 rgba(104, 104, 105, 0.1);</span><br><span class="line">  border-radius: 8px;</span><br><span class="line">  padding: 1px 1px;</span><br><span class="line">  margin-left: 5px;</span><br><span class="line">  font-size: 16px;</span><br><span class="line">  transition-duration: 0.15s;</span><br><span class="line">  //display:flex;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/*归档页样式优化 end */</span><br><span class="line"></span><br><span class="line">.main &#123;</span><br><span class="line">  padding-bottom: 150px;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//hexo next主题下，自动更换背景图片 began</span><br><span class="line">// 图片来源https://source.unsplash.com/</span><br><span class="line">body &#123;</span><br><span class="line">  //background: url(https://source.unsplash.com/random/1920x1080);</span><br><span class="line">  background-image: url(/images/bg1.jpeg);</span><br><span class="line">  background-repeat: no-repeat;</span><br><span class="line">  background-attachment: fixed;</span><br><span class="line">  background-position: 50% 50%;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//hexo next主题下，自动更换背景图片 end</span><br><span class="line"></span><br><span class="line">/*评论数*/</span><br><span class="line">.posts-expand .post-comments-count &#123;</span><br><span class="line">  display: none;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/*鼠标样式*/</span><br><span class="line">* &#123;</span><br><span class="line">  cursor: url(/images/default.cur), auto;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">:active &#123;</span><br><span class="line">  //cursor: url(/images/pointer.cur),auto</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">:link &#123;</span><br><span class="line">  cursor: url(/images/pointer.cur), auto</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/*文章底部评分相关*/</span><br><span class="line">.post-widgets &#123;</span><br><span class="line">  //padding-top: 9px;</span><br><span class="line">  margin-bottom: 45px;</span><br><span class="line">  margin-top: 30px;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/*文章底部标签样式*/</span><br><span class="line">.posts-expand .post-tags a &#123;</span><br><span class="line">  -webkit-box-shadow: 0 1px 3px rgba(0, 0, 0, .12), 0 1px 2px rgba(0, 0, 0, .24);</span><br><span class="line">  -moz-box-shadow: 0 1px 3px rgba(0, 0, 0, .12), 0 1px 2px rgba(0, 0, 0, .24);</span><br><span class="line">  box-shadow: 0 1px 3px rgba(0, 0, 0, .12), 0 1px 2px rgba(0, 0, 0, .24);</span><br><span class="line">  font-family: <span class="string">&#x27;Comic Sans MS&#x27;</span>, sans-serif;</span><br><span class="line">  transition: .2s ease-out;</span><br><span class="line">  padding: 3px 5px;</span><br><span class="line">  margin: 5px;</span><br><span class="line">  background: <span class="comment">#f5f5f5;</span></span><br><span class="line">  border-bottom: none;</span><br><span class="line">  border-radius: 15px;</span><br><span class="line"></span><br><span class="line">  +<span class="function"><span class="title">mobile</span></span>() &#123;</span><br><span class="line">    padding: 1px 3px;</span><br><span class="line">    font-size: 8px;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  &amp;:hover &#123;</span><br><span class="line">    background: rgba(100, 154, 182, 0.902);</span><br><span class="line">    color: <span class="comment">#fff;</span></span><br><span class="line">    -webkit-box-shadow: 0 8px 16px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);</span><br><span class="line">    -moz-box-shadow: 0 8px 16px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);</span><br><span class="line">    box-shadow: 0 8px 16px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// pc主页文章添加阴影效果</span><br><span class="line">.post &#123;</span><br><span class="line">  margin-top: 0px;</span><br><span class="line">  margin-bottom: 50px;</span><br><span class="line">  padding: 25px;</span><br><span class="line">  -webkit-box-shadow: 0 0 5px rgba(202, 203, 203, .5);</span><br><span class="line">  -moz-box-shadow: 0 0 5px rgba(202, 203, 204, .5);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/* 1~4级标题设置 */</span><br><span class="line">h1,</span><br><span class="line">h2,</span><br><span class="line">h3,</span><br><span class="line">h4,</span><br><span class="line">strong &#123;</span><br><span class="line">  font-weight: 600;</span><br><span class="line">  color: <span class="comment">#2c3e50;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">blockquote &#123; // PC端&gt;符号表示的内容样式</span><br><span class="line">  font-size: 15px;</span><br><span class="line">  //background: <span class="comment">#e8f7ef;</span></span><br><span class="line">  //border-left-color: <span class="comment">#42b983;</span></span><br><span class="line">  background: <span class="comment">#d9efdc5e;</span></span><br><span class="line">  border-left-color: <span class="comment">#0fc530 85;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.tip, blockquote &#123;</span><br><span class="line">  padding: 12px 24px 12px 30px;</span><br><span class="line">  margin: 1em 0;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">p &#123;</span><br><span class="line">  margin: 10px 0 10px 0;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/*文章页*/</span><br><span class="line">.posts-expand &#123;</span><br><span class="line">  margin: 0 1px;</span><br><span class="line">  padding-top: 0px;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.posts-expand .post-body p &#123;</span><br><span class="line">  font-size: 16px;</span><br><span class="line">  letter-spacing: 1px;</span><br><span class="line">  margin: 3px 0;</span><br><span class="line">  padding-bottom: 4px;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/* 一到六级标题设置 */</span><br><span class="line">.posts-expand .post-body h1,</span><br><span class="line">.posts-expand .post-body h2,</span><br><span class="line">.posts-expand .post-body h3,</span><br><span class="line">.posts-expand .post-body h4,</span><br><span class="line">.posts-expand .post-body h5,</span><br><span class="line">.posts-expand .post-body h6 &#123;</span><br><span class="line">  padding-top: 10px;</span><br><span class="line">  margin-bottom: 10px;</span><br><span class="line">  border-bottom: 1px solid <span class="comment">#eee;</span></span><br><span class="line">  padding-bottom: 10px;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/*修改h1前面图标*/</span><br><span class="line">.posts-expand .post-body h1:before &#123;</span><br><span class="line">  top: 10px;</span><br><span class="line">  width: 18px;</span><br><span class="line">  height: 18px;</span><br><span class="line">  content: <span class="string">&quot;⛅&quot;</span>;</span><br><span class="line">  font-size: 18px;</span><br><span class="line">  line-height: 18px;</span><br><span class="line">  margin-right: 16px;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/*修改h2前面图标*/</span><br><span class="line">.posts-expand .post-body h2:before &#123;</span><br><span class="line">  top: 10px;</span><br><span class="line">  width: 18px;</span><br><span class="line">  height: 18px;</span><br><span class="line">  content: <span class="string">&quot;🌞&quot;</span>;</span><br><span class="line">  font-size: 18px;</span><br><span class="line">  line-height: 18px;</span><br><span class="line">  margin-right: 16px</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/*修改h3前面图标*/</span><br><span class="line">.posts-expand .post-body h3:before &#123;</span><br><span class="line">  top: 10px;</span><br><span class="line">  width: 18px;</span><br><span class="line">  height: 18px;</span><br><span class="line">  content: <span class="string">&quot;🔍&quot;</span>;</span><br><span class="line">  font-size: 18px;</span><br><span class="line">  line-height: 18px;</span><br><span class="line">  margin-right: 16px;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.posts-expand .post-body ul li &#123;</span><br><span class="line">  margin-bottom: 10px;</span><br><span class="line">  //list-style: none;</span><br><span class="line">  list-style: disc;</span><br><span class="line">  color: <span class="comment">#000;</span></span><br><span class="line">  font-size: 15px;</span><br><span class="line">  //list-style: disc;</span><br><span class="line">  //margin-left: 3%;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.posts-expand .post-body ul li p &#123;</span><br><span class="line">  //margin-bottom: 10px;</span><br><span class="line">  //border-radius: 6px;</span><br><span class="line">  text-align: left;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/* 有序图标设置 */</span><br><span class="line">ol &#123;</span><br><span class="line">  padding-left: 0;</span><br><span class="line">  font-size: 15px;</span><br><span class="line">  margin-top: .4rem;</span><br><span class="line">  //padding: 0 0 0 .8rem;</span><br><span class="line">  list-style: none;</span><br><span class="line">  counter-reset: ol-li;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.posts-expand .post-body ol li:before &#123;</span><br><span class="line">  display: block;</span><br><span class="line">  <span class="built_in">float</span>: left;</span><br><span class="line">  width: 17px;</span><br><span class="line">  height: 17px;</span><br><span class="line">  line-height: 16px;</span><br><span class="line">  margin: .4rem 12px 0 0;</span><br><span class="line">  color: <span class="comment">#fff;</span></span><br><span class="line">  font-size: 15px;</span><br><span class="line">  font-weight: 500;</span><br><span class="line">  font-style: normal;</span><br><span class="line">  background-color: <span class="comment">#49b1f5;</span></span><br><span class="line">  border-radius: 50%;</span><br><span class="line">  text-align: center;</span><br><span class="line">  content: counter(ol-li);</span><br><span class="line">  counter-increment: ol-li;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//.posts-expand .post-body ul li &#123;</span><br><span class="line">//  margin-bottom: 10px;</span><br><span class="line">//  list-style: none;</span><br><span class="line">//  color: <span class="comment">#000;</span></span><br><span class="line">//&#125;</span><br><span class="line">//</span><br><span class="line">//.posts-expand .post-body ul li:before &#123;</span><br><span class="line">//  display: block;</span><br><span class="line">//  <span class="built_in">float</span>: left;</span><br><span class="line">//  width: 12px;</span><br><span class="line">//  height: 12px;</span><br><span class="line">//  line-height: 28px;</span><br><span class="line">//  margin: .5rem 12px 0 0;</span><br><span class="line">//  color: <span class="comment">#fff;</span></span><br><span class="line">//  font-size: 15px;</span><br><span class="line">//  font-weight: 700;</span><br><span class="line">//  font-style: normal;</span><br><span class="line">//  background-color: <span class="comment">#49b1f5;</span></span><br><span class="line">//  border-radius: 50%;</span><br><span class="line">//  text-align: center;</span><br><span class="line">//  content: <span class="string">&quot;&quot;</span>;</span><br><span class="line">//&#125;</span><br><span class="line"></span><br><span class="line">//自定义回到顶部样式</span><br><span class="line">.back-to-top &#123;</span><br><span class="line">  //right: 60px;</span><br><span class="line">  width: 70px; //图片素材宽度</span><br><span class="line">  height: 900px; //图片素材高度</span><br><span class="line">  top: -900px;</span><br><span class="line">  bottom: <span class="built_in">unset</span>;</span><br><span class="line">  transition: all .5s ease-in-out;</span><br><span class="line">  background: url(<span class="string">&quot;/images/scroll.png&quot;</span>);</span><br><span class="line">  //隐藏箭头图标</span><br><span class="line"></span><br><span class="line">  &gt; i &#123;</span><br><span class="line">    display: none;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  &amp;.back-to-top-on &#123;</span><br><span class="line">    bottom: <span class="built_in">unset</span>;</span><br><span class="line">    top: 100vh &lt; (900px + 200px) ? calc(100vh - 900px - 200px):0px;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//代码块复制按钮</span><br><span class="line">.highlight &#123;</span><br><span class="line">  //方便copy代码按钮（btn-copy）的定位</span><br><span class="line">  //position: relative;</span><br><span class="line">  position: static;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">highlight-wrap &#123;</span><br><span class="line">  background: <span class="comment">#008b89;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.btn-copy &#123;</span><br><span class="line">  display: inline-block;</span><br><span class="line">  cursor: pointer;</span><br><span class="line">  background-color: <span class="comment">#eee;</span></span><br><span class="line">  background-image: linear-gradient(<span class="comment">#fcfcfc, #eee);</span></span><br><span class="line">  border: 1px solid <span class="comment">#d5d5d5;</span></span><br><span class="line">  border-radius: 3px;</span><br><span class="line">  -webkit-user-select: none;</span><br><span class="line">  -moz-user-select: none;</span><br><span class="line">  -ms-user-select: none;</span><br><span class="line">  user-select: none;</span><br><span class="line">  -webkit-appearance: none;</span><br><span class="line">  font-size: 13px;</span><br><span class="line">  font-weight: 700;</span><br><span class="line">  line-height: 20px;</span><br><span class="line">  color: <span class="comment">#333;</span></span><br><span class="line">  -webkit-transition: opacity .3s ease-in-out;</span><br><span class="line">  -o-transition: opacity .3s ease-in-out;</span><br><span class="line">  transition: opacity .3s ease-in-out;</span><br><span class="line">  padding: 2px 6px;</span><br><span class="line">  position: absolute;</span><br><span class="line">  right: 5px;</span><br><span class="line">  top: 5px;</span><br><span class="line">  opacity: 0;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.btn-copy span &#123;</span><br><span class="line">  margin-left: 5px;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.highlight:hover .btn-copy &#123;</span><br><span class="line">  opacity: 1;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//pc端</span><br><span class="line">.read-over &#123; //本文阅读结束</span><br><span class="line">  text-align: center;</span><br><span class="line">  margin-top: 20px;</span><br><span class="line">  color: <span class="comment">#ea103d91;</span></span><br><span class="line">  font-size: 18px;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.share_reward &#123; //pc打赏</span><br><span class="line">  margin: 10px auto;</span><br><span class="line">  width: 90%;</span><br><span class="line">  text-align: center;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">#rewardButton &#123; //打赏</span></span><br><span class="line">  margin: 15px auto;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 代码块样式 Custom styles.</span><br><span class="line">//code &#123;</span><br><span class="line">//  color: <span class="comment">#ff7600;</span></span><br><span class="line">//  background: <span class="comment">#fbf7f8;</span></span><br><span class="line">//  margin: 2px;</span><br><span class="line">//&#125;</span><br><span class="line">//行内代码样式</span><br><span class="line"></span><br><span class="line">code &#123;</span><br><span class="line">  color: <span class="comment">#c7254e;</span></span><br><span class="line">  background: <span class="comment">#f9f2f4;</span></span><br><span class="line">  border: 1px solid <span class="comment">#d6d6d6;</span></span><br><span class="line">  padding: 1px 4px;</span><br><span class="line">  word-break: break-all;</span><br><span class="line">  border-radius: 4px;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 大代码块的自定义样式</span><br><span class="line"></span><br><span class="line">.highlight, pre &#123;</span><br><span class="line">  margin: 0px 0;</span><br><span class="line">  //padding: 5px;</span><br><span class="line">  border-radius: 0px;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.highlight, pre &#123;</span><br><span class="line">  border: 1px solid <span class="comment">#21252b;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.post-body &#123;</span><br><span class="line">  color: <span class="comment">#000;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.post-body .note &#123; //提示条</span><br><span class="line">  font-size: 15px;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/*文章标题字体*/</span><br><span class="line"></span><br><span class="line">.posts-expand .post-title &#123;</span><br><span class="line">  font-size: 26px;</span><br><span class="line">  letter-spacing: 1px;</span><br><span class="line">  font-weight: 700;</span><br><span class="line">  text-align: center;</span><br><span class="line">  +<span class="function"><span class="title">mobile</span></span>() &#123;</span><br><span class="line">    font-size: 20px;</span><br><span class="line">    //margin: 10px;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/*文章标题动态效果*/</span><br><span class="line"></span><br><span class="line">.posts-expand .post-title-link::before &#123;</span><br><span class="line">  background-image: linear-gradient(90deg, <span class="comment">#a166ab 0%, #ef4e7b 25%, #f37055 50%, #ef4e7b 75%, #a166ab 100%);</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/*文章大标题*/</span><br><span class="line"></span><br><span class="line">.posts-expand .post-title-link:hover &#123;</span><br><span class="line">  transform: scale(1.1);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.posts-expand .post-meta &#123;</span><br><span class="line">  //margin: 3px 0 20px 0;</span><br><span class="line">  margin-bottom: 20px !important;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 文章内链接文本样式</span><br><span class="line"></span><br><span class="line">.post-body a &#123;</span><br><span class="line">  color: <span class="comment">#0593d3;</span></span><br><span class="line">  border-bottom: none;</span><br><span class="line">  border-bottom: 1px solid <span class="comment">#0593d3;</span></span><br><span class="line">  //text-decoration: underline  // none || underline || blink || overline || line-through</span><br><span class="line"></span><br><span class="line">  &amp;:hover &#123;</span><br><span class="line">    color: <span class="comment">#fc6423;</span></span><br><span class="line">    //border-bottom: none;</span><br><span class="line">    //background: white;</span><br><span class="line">    text-decoration: none;</span><br><span class="line">    border-bottom: 1px solid <span class="comment">#fc6423;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//  精品文章 began</span><br><span class="line"></span><br><span class="line">.jingping &#123;</span><br><span class="line">  background: <span class="comment">#00a8c3;</span></span><br><span class="line">  padding: 2px 4px 2px 4px;</span><br><span class="line">  color: <span class="comment">#fff;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//  精品文章 end</span><br><span class="line"></span><br><span class="line">// new ------</span><br><span class="line">//热评文章</span><br><span class="line"></span><br><span class="line">.ds-top-threads li a &#123;</span><br><span class="line">  padding-left: 5px;</span><br><span class="line">  transition: border-width 0.2s linear 0s, color 0.2s linear 0s;</span><br><span class="line">  border-bottom: none;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.ds-top-threads li a:hover &#123;</span><br><span class="line">  border-left: 8px solid <span class="comment">#4d768c;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/*相关文章推荐 pc样式设置*/</span><br><span class="line"></span><br><span class="line">summary &#123;</span><br><span class="line">  outline: 0;</span><br><span class="line">  cursor: pointer;</span><br><span class="line">  margin-top: 15px;</span><br><span class="line">  +<span class="function"><span class="title">mobile</span></span>() &#123; /*手机端*/</span><br><span class="line">    font-size: 14px;</span><br><span class="line">    margin-top: 10px;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">details &#123;</span><br><span class="line">  margin-left: 20px;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">details .popular-posts &#123;</span><br><span class="line">  +<span class="function"><span class="title">mobile</span></span>() &#123;</span><br><span class="line">    margin: 5px -12px;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.popular-posts-header &#123;</span><br><span class="line">  margin-top: 45px;</span><br><span class="line">  font-size: 20px;</span><br><span class="line">  font-weight: 900;</span><br><span class="line">  border-bottom: 1px solid <span class="comment">#eee;</span></span><br><span class="line">  +<span class="function"><span class="title">mobile</span></span>() &#123; /*手机端*/</span><br><span class="line">    font-size: 18px;</span><br><span class="line">    margin-top: 25px;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">ul.popular-posts .popular-posts-item .popular-posts-title a &#123;</span><br><span class="line">  border-bottom: 1px solid <span class="comment">#999;</span></span><br><span class="line"></span><br><span class="line">  &amp;:hover &#123;</span><br><span class="line">    border-bottom: none;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//小胡同背景图</span><br><span class="line"></span><br><span class="line">.xiaohutong-img-class &#123;</span><br><span class="line">  width: 960px;</span><br><span class="line">  height: 660px;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//友链页样式 begain --------&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">#links &#123;</span></span><br><span class="line">  margin-top: 5rem;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.links-content &#123;</span><br><span class="line">  margin-top: 1rem;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.link-navigation::after &#123;</span><br><span class="line">  content: <span class="string">&quot; &quot;</span>;</span><br><span class="line">  display: block;</span><br><span class="line">  clear: both;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.card &#123;</span><br><span class="line">  width: 300px;</span><br><span class="line">  font-size: 1rem;</span><br><span class="line">  padding: 10px 20px;</span><br><span class="line">  border-radius: 4px;</span><br><span class="line">  transition-duration: 0.15s;</span><br><span class="line">  margin-bottom: 1rem;</span><br><span class="line">  display: flex;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.card:nth-child(odd) &#123;</span><br><span class="line">  <span class="built_in">float</span>: left;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.card:nth-child(even) &#123;</span><br><span class="line">  <span class="built_in">float</span>: right;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.card:hover &#123;</span><br><span class="line">  transform: scale(1.1);</span><br><span class="line">  box-shadow: 0 2px 6px 0 rgba(0, 0, 0, 0.12), 0 0 6px 0 rgba(0, 0, 0, 0.04);</span><br><span class="line">  background-image: linear-gradient(to right, <span class="comment">#6a11cb 0, #2575fc 100%);</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.card a &#123;</span><br><span class="line">  border: none;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.card .ava &#123;</span><br><span class="line">  width: 3rem !important;</span><br><span class="line">  height: 3rem !important;</span><br><span class="line">  margin: 0 !important;</span><br><span class="line">  margin-right: 1em !important;</span><br><span class="line">  border-radius: 4px;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.card .card-header &#123;</span><br><span class="line">  font-style: italic;</span><br><span class="line">  overflow: hidden;</span><br><span class="line">  width: 236px;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.card .card-header a &#123;</span><br><span class="line">  font-style: normal;</span><br><span class="line">  color: <span class="comment">#2bbc8a;</span></span><br><span class="line">  font-weight: bold;</span><br><span class="line">  text-decoration: none;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.card .card-header a:hover &#123;</span><br><span class="line">  color: <span class="comment">#d480aa;</span></span><br><span class="line">  text-decoration: none;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.card .card-header .info &#123;</span><br><span class="line">  font-style: normal;</span><br><span class="line">  color: <span class="comment">#a3a3a3;</span></span><br><span class="line">  font-size: 14px;</span><br><span class="line">  min-width: 0;</span><br><span class="line">  text-overflow: ellipsis;</span><br><span class="line">  overflow: hidden;</span><br><span class="line">  white-space: nowrap;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">span.focus-links &#123;</span><br><span class="line">  font-style: normal;</span><br><span class="line">  margin-left: 10px;</span><br><span class="line">  position: <span class="built_in">unset</span>;</span><br><span class="line">  left: 0;</span><br><span class="line">  padding: 0 7px 0 5px;</span><br><span class="line">  font-size: 11px;</span><br><span class="line">  border-color: <span class="comment">#42c02e;</span></span><br><span class="line">  border-radius: 40px;</span><br><span class="line">  line-height: 24px;</span><br><span class="line">  height: 22px;</span><br><span class="line">  color: <span class="comment">#fff !important;</span></span><br><span class="line">  background-color: <span class="comment">#42c02e;</span></span><br><span class="line">  display: inline-block;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">span.focus-links:hover &#123;</span><br><span class="line">  background-color: <span class="comment">#318024;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.friends-btn &#123;</span><br><span class="line">  text-align: center;</span><br><span class="line">  color: <span class="comment">#555 !important;</span></span><br><span class="line">  background-color: <span class="comment">#fff;</span></span><br><span class="line">  border-radius: 3px;</span><br><span class="line">  font-size: 15px;</span><br><span class="line">  box-shadow: inset 0 0 10px 0 rgba(0, 0, 0, .35);</span><br><span class="line">  border: none !important;</span><br><span class="line">  transition-property: <span class="built_in">unset</span>;</span><br><span class="line">  padding: 0 15px;</span><br><span class="line">  margin: inherit;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.friends-btn:hover &#123;</span><br><span class="line">  color: rgb(255, 255, 255) !important;</span><br><span class="line">  border-radius: 3px;</span><br><span class="line">  font-size: 15px;</span><br><span class="line">  box-shadow: inset 0px 0px 10px 0px rgba(0, 0, 0, 0.35);</span><br><span class="line">  background-image: linear-gradient(90deg, <span class="comment">#a166ab 0%, #ef4e7b 25%, #f37055 50%, #ef4e7b 75%, #a166ab 100%);</span></span><br><span class="line">  margin: inherit;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//友链页样式 end    --------&gt;</span><br><span class="line"></span><br><span class="line">//首页头部样式</span><br><span class="line"></span><br><span class="line">.header &#123;</span><br><span class="line">  //background: url(<span class="string">&quot;/images/header-bk.jpg&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.site-meta &#123;</span><br><span class="line">  <span class="built_in">float</span>: none;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.menu &#123;</span><br><span class="line">  <span class="built_in">float</span>: none;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.logo-line-before,</span><br><span class="line">.logo-line-after &#123;</span><br><span class="line">  display: none;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.menu .menu-item a &#123;</span><br><span class="line">  font-size: 14px;</span><br><span class="line">  color: rgb(15, 46, 65);</span><br><span class="line">  border-radius: 4px;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.site-meta &#123;</span><br><span class="line">  margin-left: 0px;</span><br><span class="line">  text-align: center;</span><br><span class="line">  //background: <span class="comment">#f7edd9</span></span><br><span class="line">  //background-image: linear-gradient(90deg,<span class="comment">#f79533 0,#f37055 15%,#ef4e7b 30%,#a166ab 44%,#5073b8 58%,#1098ad 72%,#07b39b 86%,#6dba82 100%)!important;</span></span><br><span class="line">  background-image: url(/images/bg.jpeg)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.site-meta .site-title &#123;</span><br><span class="line">  font-weight: 900;</span><br><span class="line">  font-size: 28px;</span><br><span class="line">  font-family: <span class="string">&#x27;Comic Sans MS&#x27;</span>, sans-serif;</span><br><span class="line">  color: <span class="comment">#fff;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.title1 &#123;</span><br><span class="line">  color: rgb(66, 133, 244)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.title2 &#123;</span><br><span class="line">  color: rgb(234, 67, 53)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.title3 &#123;</span><br><span class="line">  color: rgb(251, 188, 5)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.title4 &#123;</span><br><span class="line">  color: rgb(66, 133, 244)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.title5 &#123;</span><br><span class="line">  color: rgb(52, 168, 83)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.title6 &#123;</span><br><span class="line">  color: rgb(234, 67, 53)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.title7 &#123;</span><br><span class="line">  color: rgb(66, 133, 244)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.title8 &#123;</span><br><span class="line">  color: rgb(234, 67, 53)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.site-subtitle &#123;</span><br><span class="line">  color: <span class="comment">#213951;</span></span><br><span class="line">  font-weight: bold</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">#myheartbeat &#123;</span></span><br><span class="line">  animation: heartAnimate 1.33s ease-in-out infinite;</span><br><span class="line">  color: <span class="comment">#f50404;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//首页尾部样式</span><br><span class="line"></span><br><span class="line">.footer &#123;</span><br><span class="line">  //background: none;</span><br><span class="line">  //font-size: 14px;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.footer-inner &#123;</span><br><span class="line">  font-family: <span class="string">&#x27;Comic Sans MS&#x27;</span>, sans-serif;</span><br><span class="line">  text-align: center;</span><br><span class="line">  color: <span class="comment">#4c618f;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//侧边栏信息样式修改</span><br><span class="line"></span><br><span class="line">.site-author-name &#123;</span><br><span class="line">  margin: 18px 0 0;</span><br><span class="line">  color: <span class="comment">#090909;</span></span><br><span class="line">  font-family: <span class="string">&#x27;Comic Sans MS&#x27;</span>, sans-serif;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.links-of-blogroll &#123;</span><br><span class="line">  font-size: 13px;</span><br><span class="line">  margin-bottom: 22px;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.links-of-author &#123;</span><br><span class="line">  margin-top: 10px;</span><br><span class="line">  //margin-bottom: 58px;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.site-overview &#123; //左侧socia标签居中</span><br><span class="line">  text-align: center;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.sidebar-inner &#123;</span><br><span class="line">  color: <span class="comment">#649ab6;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.sidebar &#123;</span><br><span class="line">  margin-left: auto; /* <span class="keyword">for</span> IE */</span><br><span class="line">  margin-left: inherit;</span><br><span class="line">  box-shadow: inset 2px 2px 40px <span class="comment">#bdb2b2;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.sidebar a &#123;</span><br><span class="line">  color: <span class="comment">#649ab6;</span></span><br><span class="line">  border-bottom-color: <span class="comment">#649ab6;</span></span><br><span class="line">  border-bottom: none;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.sidebar a:hover &#123;</span><br><span class="line">  color: <span class="comment">#0c0b0b;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.site-state-item &#123;</span><br><span class="line">  display: inline-block;</span><br><span class="line">  padding: 8px 18px;</span><br><span class="line">  border-left: 1px solid <span class="comment">#649ab6;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.sidebar-nav .sidebar-nav-active &#123;</span><br><span class="line">  color: <span class="comment">#649ab6;</span></span><br><span class="line">  border-bottom-color: <span class="comment">#649ab6;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.sidebar-nav li:hover &#123;</span><br><span class="line">  color: <span class="comment">#0c0b0b;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//侧栏描述样式</span><br><span class="line"></span><br><span class="line">.site-description motion-element &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//侧栏按钮样式</span><br><span class="line"></span><br><span class="line">.sidebar-toggle &#123;</span><br><span class="line">  background: <span class="comment">#649ab6;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//文章目录样式</span><br><span class="line"></span><br><span class="line">.post-toc .nav .active &gt; a &#123;</span><br><span class="line">  color: <span class="comment">#4f7e96;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.post-toc ol a:hover &#123;</span><br><span class="line">  color: <span class="comment">#7784ba;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.sidebar-nav .sidebar-nav-active:hover &#123;</span><br><span class="line">  color: <span class="comment">#37596c;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">a &#123;</span><br><span class="line">  border-bottom: none;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//首页阅读全文样式</span><br><span class="line"></span><br><span class="line">.post-button .btn &#123;</span><br><span class="line">  color: <span class="comment">#555;</span></span><br><span class="line">  background-color: rgb(255, 255, 255);</span><br><span class="line">  border-radius: 3px;</span><br><span class="line">  font-size: 15px;</span><br><span class="line">  box-shadow: inset 0px 0px 10px 0px rgba(0, 0, 0, 0.35);</span><br><span class="line">  border: none !important;</span><br><span class="line">  transition-property: <span class="built_in">unset</span>;</span><br><span class="line">  padding: 0px 15px;</span><br><span class="line">  margin: inherit;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.post-button .btn:hover &#123;</span><br><span class="line">  color: rgb(255, 255, 255);</span><br><span class="line">  border-radius: 3px;</span><br><span class="line">  font-size: 15px;</span><br><span class="line">  box-shadow: inset 0px 0px 10px 0px rgba(0, 0, 0, 0.35);</span><br><span class="line">  background-image: linear-gradient(90deg, <span class="comment">#a166ab 0%, #ef4e7b 25%, #f37055 50%, #ef4e7b 75%, #a166ab 100%);</span></span><br><span class="line">  margin: inherit;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//.post-button a&#123;</span><br><span class="line">//  border-bottom: 1px solid <span class="comment">#666;</span></span><br><span class="line">//&#125;</span><br><span class="line">//.post-button a:hover &#123;</span><br><span class="line">//  color: <span class="comment">#7784ba;</span></span><br><span class="line">//&#125;</span><br><span class="line"></span><br><span class="line">// 自定义页脚跳动的心样式 began</span><br><span class="line">@keyframes heartAnimate &#123;</span><br><span class="line">  0%, 100% &#123;</span><br><span class="line">    transform: scale(1);</span><br><span class="line">  &#125;</span><br><span class="line">  10%, 30% &#123;</span><br><span class="line">    transform: scale(0.9);</span><br><span class="line">  &#125;</span><br><span class="line">  20%, 40%, 60%, 80% &#123;</span><br><span class="line">    transform: scale(1.1);</span><br><span class="line">  &#125;</span><br><span class="line">  50%, 70% &#123;</span><br><span class="line">    transform: scale(1.1);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.with-love &#123;</span><br><span class="line">  animation: heartAnimate 1.33s ease-in-out infinite;</span><br><span class="line">  color: rgb(255, 113, 168);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 自定义页脚跳动的心样式 end</span><br><span class="line"></span><br><span class="line">/*修改选择字体块背景颜色*/</span><br><span class="line"></span><br><span class="line">::selection &#123;</span><br><span class="line">  background: <span class="comment">#fff159;</span></span><br><span class="line">  color: <span class="comment">#222;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.pagination &#123;</span><br><span class="line">  margin: 50px;</span><br><span class="line">  text-align: center;</span><br><span class="line">  border-top: 0px;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/* 页码数字显示当前页码样式设置 */</span><br><span class="line"></span><br><span class="line">.pagination .page-number.current &#123;</span><br><span class="line">  background-color: <span class="comment">#49b1f5;</span></span><br><span class="line">  background: <span class="comment">#49b1f5;</span></span><br><span class="line">  border-radius: 50%;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/* 页码样式设置 */</span><br><span class="line"></span><br><span class="line">.pagination .page-number &#123;</span><br><span class="line">  border: 3px solid <span class="comment">#49b1f5;</span></span><br><span class="line">  border-radius: 50%;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">/*valine 评论系统样式 began ------------------&gt; */</span><br><span class="line"></span><br><span class="line">/*valine 评论系统样式 end  ------------------&gt; */</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">// 适配手机样式 began ------------------------&gt;</span><br><span class="line">@media (max-width: 767px</span><br><span class="line"></span><br><span class="line">) &#123;</span><br><span class="line">  /*手机端body体显示*/</span><br><span class="line">  body &#123;</span><br><span class="line">    background-image: none;</span><br><span class="line">    font-size: 16px;</span><br><span class="line">    -webkit-font-smoothing: antialiased;</span><br><span class="line">    -moz-osx-font-smoothing: grayscale;</span><br><span class="line">    color: <span class="comment">#34495e;</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  /*手机端菜单栏样式*/</span><br><span class="line">  .menu &#123;</span><br><span class="line">    display: flex;</span><br><span class="line">    margin-left: 5px;</span><br><span class="line">    <span class="built_in">float</span>: none !important;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  //.menu-item&#123;</span><br><span class="line">  //  display: inline;</span><br><span class="line">  //&#125;</span><br><span class="line">  ////不显示站点地图li</span><br><span class="line">  //.menu .menu-item menu-item-sitemap&#123;</span><br><span class="line">  //  display:none</span><br><span class="line">  //&#125;</span><br><span class="line">  .menu .menu-item a &#123;</span><br><span class="line">    /*font-weight: 600;*/</span><br><span class="line">    color: <span class="comment">#2c3e50;</span></span><br><span class="line">    font-size: 14px;</span><br><span class="line">    //padding: 1px 7px;</span><br><span class="line">    padding: 5px 12px;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  //选中菜单样式</span><br><span class="line">  .menu-item-active a:after &#123;</span><br><span class="line">    top: -10%;</span><br><span class="line">    //top: 66%;</span><br><span class="line">    right: 24px;</span><br><span class="line">    //三角形</span><br><span class="line">    //width:0; height:0; border:10px solid; border-color:<span class="comment">#aececb #f5f7f9 #f5f7f9 #f5f7f9;</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  blockquote &#123; // 手机端&gt;符号表示的内容样式</span><br><span class="line">    //padding: 4px 10px;</span><br><span class="line">    //margin: 10px auto;</span><br><span class="line">    //border-left: 3px solid <span class="comment">#ddd;</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  blockquote p &#123; // 手机端&gt;符号表示的内容样式</span><br><span class="line">    font-size: 13px;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  .back-to-top &#123;</span><br><span class="line">    display: none; //不显示</span><br><span class="line">    right: 0px;</span><br><span class="line">    opacity: .2;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  /*手机屏幕下多级标签样式修改*/</span><br><span class="line">  .posts-expand .post-body h1 &#123;</span><br><span class="line">    margin: 0 0 0em;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  .posts-expand .post-body h2,</span><br><span class="line">  .posts-expand .post-body h3 &#123;</span><br><span class="line">    pointer-events: none;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  .posts-expand .post-body h1,</span><br><span class="line">  .posts-expand .post-body h2,</span><br><span class="line">  .posts-expand .post-body h3,</span><br><span class="line">  .posts-expand .post-body h4 &#123;</span><br><span class="line">    pointer-events: auto;</span><br><span class="line">    color: <span class="comment">#2c3e50;</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  .posts-expand .post-body h1:before</span><br><span class="line">  .posts-expand .post-body h2:before</span><br><span class="line">  .posts-expand .post-body h3:before</span><br><span class="line">  .posts-expand .post-body h4:before</span><br><span class="line">  .posts-expand .post-body h5:before</span><br><span class="line">  .posts-expand .post-body h6:before &#123;</span><br><span class="line">    display: none;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  .posts-expand .post-body h2 &#123;</span><br><span class="line">    padding-bottom: 0.7em;</span><br><span class="line">    border-bottom: 1px solid <span class="comment">#ddd;</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  .posts-expand .post-body h3 &#123;</span><br><span class="line">    line-height: 1.2;</span><br><span class="line">    position: relative;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  .posts-expand .post-body h3 &gt; a:before &#123;</span><br><span class="line">    content: <span class="string">&quot;&quot;</span>;</span><br><span class="line">    color: <span class="comment">#42b983;</span></span><br><span class="line">    position: absolute;</span><br><span class="line">    left: -0.7em;</span><br><span class="line">    margin-top: -0.05em;</span><br><span class="line">    padding-right: 0.5em;</span><br><span class="line">    font-size: 1.2em;</span><br><span class="line">    line-height: 1;</span><br><span class="line">    font-weight: bold;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  .posts-expand .post-body figure &#123;</span><br><span class="line">    //margin: 1.2em 0;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  /*手机段落样式修改*/</span><br><span class="line">  .posts-expand .post-body p &#123;</span><br><span class="line">    line-height: 1.6em;</span><br><span class="line">    text-align: left;</span><br><span class="line">    font-size: 14px;</span><br><span class="line">    //display: contents;//文字左对齐</span><br><span class="line">    margin: 5px 0;</span><br><span class="line">    padding-bottom: 6px;</span><br><span class="line">    position: relative;</span><br><span class="line">    z-index: 1;</span><br><span class="line">    color: <span class="comment">#5e6d82;</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  /* 手机端 列表样式修改*/</span><br><span class="line">  .posts-expand .post-body ul,</span><br><span class="line">  .posts-expand .post-body ol &#123;</span><br><span class="line">    position: inherit;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  .posts-expand .post-body ul ul,</span><br><span class="line">  .posts-expand .post-body ol ul,</span><br><span class="line">  .posts-expand .post-body ul ol,</span><br><span class="line">  .posts-expand .post-body ol ol &#123;</span><br><span class="line">    margin: 0;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  .posts-expand .post-body ul li &#123;</span><br><span class="line">    font-size: 13px;</span><br><span class="line">    //margin-bottom: 0px !important;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  .posts-expand .post-body a &#123;</span><br><span class="line">    //color: <span class="comment">#000;</span></span><br><span class="line">    font-weight: 400;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  p &#123;</span><br><span class="line">    line-height: 1.6em;</span><br><span class="line">    margin: 1.2em 0 -1.2em;</span><br><span class="line">    padding-bottom: 1.2em;</span><br><span class="line">    position: relative;</span><br><span class="line">    z-index: 1;</span><br><span class="line">    font-size: 14px;</span><br><span class="line">    word-spacing: 0.05em;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  /*手机端对ul li展示优化*/</span><br><span class="line">  .posts-expand .post-body ul li:before &#123;</span><br><span class="line">    margin: .4rem 12px 0 0;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  li &#123;</span><br><span class="line">    font-size: 14px;</span><br><span class="line">    color: <span class="comment">#5e6d82;</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  .post-button a &#123;</span><br><span class="line">    font-size: 16px;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  .posts-expand .post-meta &#123;</span><br><span class="line">    font-size: 13px;</span><br><span class="line">    text-align: center;</span><br><span class="line">    margin: 1px 0 20px 0;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  /*设置不展示字数统计*/</span><br><span class="line">  .posts-expand .post-meta .post-wordcount &#123;</span><br><span class="line">    //display: none;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  /*手机端评论数*/</span><br><span class="line">  //.posts-expand .post-comments-count &#123;</span><br><span class="line">  //  +<span class="function"><span class="title">mobile</span></span>() &#123; display: <span class="built_in">unset</span>; &#125;</span><br><span class="line">  //&#125;</span><br><span class="line">  .page-post-detail .post-meta &#123;</span><br><span class="line">    margin: 10px 0px;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  .page-post-detail .post-title &#123;</span><br><span class="line">    font-weight: 600;</span><br><span class="line">    font-size: 20px !important;</span><br><span class="line">    //padding-top: 10px;</span><br><span class="line">    //padding-bottom: 15px;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  .my_post_copyright &#123; //版权所有</span><br><span class="line">    width: 95%;</span><br><span class="line">    //padding: .1em 1em;</span><br><span class="line">    font-size: .73rem</span><br><span class="line">    margin: 2em auto 0</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  .my_post_copyright p &#123;</span><br><span class="line">    font-size: 13px;</span><br><span class="line">    margin: 5px;</span><br><span class="line">    line-height: 1.2em;</span><br><span class="line">    padding-bottom: 0.5em;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/*适应手机屏幕设置*/</span><br><span class="line">@media (max-width: 767px) &#123;</span><br><span class="line">  .header-inner &#123;</span><br><span class="line">    margin-bottom: 10px !important;</span><br><span class="line">    background: none;</span><br><span class="line">    //overflow: auto; //下拉标题是否浮动</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  .posts-expand .post-body h1 &#123;</span><br><span class="line">    padding-top: 20px;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  .post-button &#123;</span><br><span class="line">    text-align: center;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  .posts-expand .post-body h2,</span><br><span class="line">  .posts-expand .post-body h3 &#123;</span><br><span class="line">    pointer-events: none;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  .posts-expand .post-body h1,</span><br><span class="line">  .posts-expand .post-body h2,</span><br><span class="line">  .posts-expand .post-body h3,</span><br><span class="line">  .posts-expand .post-body h4 &#123;</span><br><span class="line">    pointer-events: auto;</span><br><span class="line">    color: <span class="comment">#2c3e50;</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  .posts-expand .post-body h1:before</span><br><span class="line">  .posts-expand .post-body h2:before</span><br><span class="line">  .posts-expand .post-body h3:before</span><br><span class="line">  .posts-expand .post-body h4:before</span><br><span class="line">  .posts-expand .post-body h5:before</span><br><span class="line">  .posts-expand .post-body h6:before &#123;</span><br><span class="line">    display: none;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  .posts-expand .post-body h2 &#123;</span><br><span class="line">    padding-bottom: 0.7em;</span><br><span class="line">    border-bottom: 1px solid <span class="comment">#ddd;</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  .posts-expand .post-body h3 &#123;</span><br><span class="line">    line-height: 1.2;</span><br><span class="line">    position: relative;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/*手机端显示设置信息*/</span><br><span class="line">@media (max-width: 767px) &#123;</span><br><span class="line">  /*手机端代码行上text文档设置*/</span><br><span class="line">  .highlight figcaption &#123;</span><br><span class="line">    font-size: 12px;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  /*手机端显示代码行数背景设置*/</span><br><span class="line">  .highlight .gutter pre &#123;</span><br><span class="line">    padding-left: 2px;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  /*手机端显示代码行数字体大小*/</span><br><span class="line">  .highlight, pre &#123;</span><br><span class="line">    font-size: 13px;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  /*手机端显示代码字体大小*/</span><br><span class="line">  .code span &#123;</span><br><span class="line">    font-size: 12px;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  div<span class="comment">#comments.comments.v &#123;</span></span><br><span class="line">    margin-left: 0px !important;</span><br><span class="line">    margin-right: 0px !important;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  .comments &#123;</span><br><span class="line">    margin: 20px 10px 0;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//手机适配文章底部信息</span><br><span class="line">@media (max-width: 767px) &#123;</span><br><span class="line">  .main &#123;</span><br><span class="line">    padding-bottom: 130px;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  .footer &#123;</span><br><span class="line">    font-size: 12px;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  .read-over &#123; //本文阅读结束</span><br><span class="line">    text-align: center;</span><br><span class="line">    margin-top: 20px;</span><br><span class="line">    color: <span class="comment">#ea103d91;</span></span><br><span class="line">    font-size: 12px;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  .share_reward &#123; //打赏</span><br><span class="line">    font-size: 12px;</span><br><span class="line">    padding: 10px 0;</span><br><span class="line">    margin: 5px auto;</span><br><span class="line">    width: 90%;</span><br><span class="line">    text-align: center;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">#rewardButton &#123;</span></span><br><span class="line">    margin: 15px auto;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">#rewardButton span &#123; //打赏</span></span><br><span class="line">    display: inline-block;</span><br><span class="line">    width: 50px;</span><br><span class="line">    height: 35px;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">#QR &#123;</span></span><br><span class="line">    padding-top: 5px;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">#QR a &#123;</span></span><br><span class="line">    border: 0;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">#QR img &#123;</span></span><br><span class="line">    width: 60px;</span><br><span class="line">    //max-width: 50%;</span><br><span class="line">    display: inline-block;</span><br><span class="line">    margin: 0.8em 2em 0 2em;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  .post-copyright &#123; //外版权</span><br><span class="line">    padding: .1em .5em;</span><br><span class="line">    margin: 0em 0 0;</span><br><span class="line">    border-left: 2px solid <span class="comment">#ff1700;</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  .post-copyright li &#123; //外版权</span><br><span class="line">    font-size: 13.5px;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  .posts-expand .post-tags &#123;</span><br><span class="line">    margin-top: 10px;</span><br><span class="line">    font-size: 8px;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  .post-nav-item a &#123;</span><br><span class="line">    font-size: 12px;</span><br><span class="line">    line-height: <span class="built_in">unset</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  .pagination &#123; // 分页按钮</span><br><span class="line">    margin: 20px;</span><br><span class="line">    text-align: center;</span><br><span class="line">    border-top: 0px;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  /*TopX适应手机屏幕设置*/</span><br><span class="line">  <span class="comment">#top p &#123;</span></span><br><span class="line">    font-size: 12px;</span><br><span class="line">    display: inline-block; //不换行</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  .post-body .note &#123; //提示条</span><br><span class="line">    margin: 10px auto;</span><br><span class="line">    font-size: 14px;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  .post-body .note.info p &#123;</span><br><span class="line">    font-size: 13px;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  .post-body .tabs .tab-content .note &#123;</span><br><span class="line">    margin: 10px auto;</span><br><span class="line">    font-size: 14px;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@media (max-width: 767px) &#123;</span><br><span class="line"></span><br><span class="line">  //小胡同背景图</span><br><span class="line">  .xiaohutong-img-class &#123;</span><br><span class="line">    width: 360px;</span><br><span class="line">    height: 260px;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  // 小胡同里tab页</span><br><span class="line">  .post-body .tabs ul.nav-tabs &#123;</span><br><span class="line">    display: flex;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  /* 手机端文章布局 */</span><br><span class="line">  .post &#123;</span><br><span class="line">    margin-bottom: 20px;</span><br><span class="line">    padding: 10px;</span><br><span class="line">    //-webkit-box-shadow: 0 0 5px rgba(202, 203, 203, .5);</span><br><span class="line">    //-moz-box-shadow: 0 0 5px rgba(202, 203, 204, .5);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  //手机友链页</span><br><span class="line">  .card &#123;</span><br><span class="line">    width: 88%;</span><br><span class="line">    padding: 3px 20px;</span><br><span class="line">    margin-bottom: 0rem;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">#links &#123;</span></span><br><span class="line">    margin-top: 3rem;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  /*移动端 本地搜索框美化*/</span><br><span class="line">  .local-search-popup &#123;</span><br><span class="line">    top: 10%;</span><br><span class="line">    margin: 10px 35px;</span><br><span class="line">    width: 80%;</span><br><span class="line">    height: 60%;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  .local-search-popup .search-icon, .local-search-popup .popup-btn-close &#123;</span><br><span class="line">    color: <span class="comment">#15a1d8 f2;</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  .local-search-popup .local-search-input-wrapper input &#123;</span><br><span class="line">    padding-left: 10px;</span><br><span class="line">    height: 21px;</span><br><span class="line">    background-color: rgb(255, 255, 255);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  .local-search-popup .popup-btn-close &#123;</span><br><span class="line">    border-left: none;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  .local-search-popup p.search-result &#123;</span><br><span class="line">    padding-bottom: 1.2em;</span><br><span class="line">    font-size: 13px;</span><br><span class="line">    margin: .1em 0 .5em;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  .local-search-popup a.search-result-title &#123;</span><br><span class="line">    font-size: 14px;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 适配手机样式 end  ------------------------&gt;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Hexo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Hexo </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hexo博客+Next主题深度优化与定制</title>
      <link href="posts/ab21860c.html"/>
      <url>posts/ab21860c.html</url>
      
        <content type="html"><![CDATA[<h2 id="写在前面">写在前面</h2><div class="note"><p>warning,本教程只适用于 Next5 或者 Next6 主题，Next7 开始做了大量修改，并删除了 custom.styl 文件，同时增加了很多在 Next7 之前需要手动配置的功能，请随个人喜好进行版本选择。</p></div><div class="note"><p>info,我的个人博客就是使用 Hexo 博客框架 + Next 主题搭建而来的，之前也使用过CSDN、博客园等，最后都放弃了，一方面是因为广告多，另外一方面样式我也不是很喜欢，而如果自己从零开始写博客源代码的话，比较复杂而且麻烦。后来偶然看到了 hexo 博客框架，并经过推荐使用了 Next 主题，这才正式入了 hexo 博客的坑！不得不说 Next 主题能够魔改并且自身集成了很多优秀的第三方插件是这款主题具有如此强大活力的根本原因😘。</p></div><p>本文下面主要先介绍 Hexo 博客和 Next 主题的搭建，如果你已经搭建好了博客框架，但是想进一步地修改博客样式，可以直接跳转到最下面<a href="#Next%E4%B8%BB%E9%A2%98%E8%BF%9B%E9%98%B6%E4%BC%98%E5%8C%96%E9%85%8D%E7%BD%AE">优化定制部分</a>😄，本文参考的博客链接也会直接在文中插入或者在文末标明，如果有遗漏，欢迎指出。</p><p>Next 主题最新版本已经更新到 v7.5.0，以下很多内容都已经在新主题中做出了适配或者直接无法使用，愿意更新到最新版本的小伙伴请关注<a href="https://theme-next.org/">官方文档更新</a>。不愿意更新的小伙伴或者目前使用的是旧版本（比如我还是 Next5 版本）可以继续进行一定的参考。</p><h2 id="环境准备">环境准备</h2><p>在安装 hexo 框架之前，我们需要先安装该框架的依赖环境：</p><ol><li>Node.js</li><li>Git</li></ol><p>因为 Hexo 博客框架就是基于 Node.js 渲染的，所以必须要先安装 Node.js 环境，我们可以去<a href="http://nodejs.cn/download/">Node.js中文官网</a>下载，如图</p><a href=http://nodejs.cn/download/ target='_blank' class='LinkCard'><style type=text/css>.LinkCard,.LinkCard:hover{text-decoration:none;border:none!important;color:inherit!important}.LinkCard{position:relative;display:block;margin:5px auto;width:330px;box-sizing:border-box;border-radius:12px;max-width:100%;overflow:hidden;color:inherit;text-decoration:none}.ztext{word-break:break-word;line-height:1.6}.LinkCard-backdrop{position:absolute;top:0;left:0;right:0;bottom:0;background-repeat:no-repeat;-webkit-filter:blur(20px);filter:blur(20px);background-size:cover;background-position:center}.LinkCard,.LinkCard:hover{text-decoration:none;border:none!important;color:inherit!important}.LinkCard-content{position:relative;display:flex;align-items:center;justify-content:space-between;padding:12px;border-radius:inherit;background-color:rgba(246,246,246,0.88)}.LinkCard-text{overflow:hidden;width:260px;}.LinkCard-title{white-space: nowrap;display:-webkit-box;-webkit-line-clamp:2;overflow:hidden;text-overflow:ellipsis;max-height:calc(16px * 1.25 * 2);font-size:16px;font-weight:500;line-height:1.25;color:#1a1a1a}@media(max-width: 767px){.LinkCard-title{font-size:13px;}}.LinkCard-meta{display:flex;margin-top:4px;font-size:14px;line-height:20px;color:#999;white-space:nowrap}.LinkCard-imageCell{margin-left:28px;border-radius:30px;width:70px;}.LinkCard-image{background-image:url('https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/linkcard/spider-man.png');background-size: 100% 100%;display:block;width:65px;height:65px;border-radius:inherit;margin-bottom: 0 !important;}</style><span class=LinkCard-backdrop style=background-image:url(https://zhstatic.zhihu.com/assets/zhihu/editor/zhihu-card-default.svg)></span><span class=LinkCard-content><span class=LinkCard-text><span class=LinkCard-title>安装地址</span><span class=LinkCard-meta><span style=display:inline-flex;align-items:center><svg class='Zi Zi--InsertLink' fill=currentColor viewBox='0 0 24 24' width=17 height=17><path d='M6.77 17.23c-.905-.904-.94-2.333-.08-3.193l3.059-3.06-1.192-1.19-3.059 3.058c-1.489 1.489-1.427 3.954.138 5.519s4.03 1.627 5.519.138l3.059-3.059-1.192-1.192-3.059 3.06c-.86.86-2.289.824-3.193-.08zm3.016-8.673l1.192 1.192 3.059-3.06c.86-.86 2.289-.824 3.193.08.905.905.94 2.334.08 3.194l-3.059 3.06 1.192 1.19 3.059-3.058c1.489-1.489 1.427-3.954-.138-5.519s-4.03-1.627-5.519-.138L9.786 8.557zm-1.023 6.68c.33.33.863.343 1.177.029l5.34-5.34c.314-.314.3-.846-.03-1.176-.33-.33-.862-.344-1.176-.03l-5.34 5.34c-.314.314-.3.846.03 1.177z' fill-rule=evenodd></path></svg></span><span style='margin-top: -0.1rem;'>http://nodejs.cn/download/</span></span></span><span class='LinkCard-imageCell'><div class='LinkCard-image'></div></span></span></a><p><img src="https://s2.ax1x.com/2019/11/13/MG5ZcV.png" class="lazyload placeholder" data-srcset="https://s2.ax1x.com/2019/11/13/MG5ZcV.png" srcset="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/site-img/img-loading.gif" alt="node.js"></p><p>一般我们是在 windows 或者 macOS 环境下作为本机操作的，所以下载对应的安装包就可以了，下载好后一路点 next 下一步就完成了，这个没什么问题。</p><p>然后我们需要安装一下 Git，Git 主要是帮助我们部署到 Github Pages 静态仓库上以域名形式访问。</p><p>安装 Git 的话，如果是 windows 系统，可以直接去<a href="https://gitforwindows.org/">Windows的Git下载地址</a>去下载，如果是 macOS 的话，也可以在<a href="https://www.git-scm.com/download/">这里下载</a>。当这些环境都部署好之后，就可以开始我们的 hexo 博客安装啦！</p><a href=https://gitforwindows.org/ target='_blank' class='LinkCard'><style type=text/css>.LinkCard,.LinkCard:hover{text-decoration:none;border:none!important;color:inherit!important}.LinkCard{position:relative;display:block;margin:5px auto;width:330px;box-sizing:border-box;border-radius:12px;max-width:100%;overflow:hidden;color:inherit;text-decoration:none}.ztext{word-break:break-word;line-height:1.6}.LinkCard-backdrop{position:absolute;top:0;left:0;right:0;bottom:0;background-repeat:no-repeat;-webkit-filter:blur(20px);filter:blur(20px);background-size:cover;background-position:center}.LinkCard,.LinkCard:hover{text-decoration:none;border:none!important;color:inherit!important}.LinkCard-content{position:relative;display:flex;align-items:center;justify-content:space-between;padding:12px;border-radius:inherit;background-color:rgba(246,246,246,0.88)}.LinkCard-text{overflow:hidden;width:260px;}.LinkCard-title{white-space: nowrap;display:-webkit-box;-webkit-line-clamp:2;overflow:hidden;text-overflow:ellipsis;max-height:calc(16px * 1.25 * 2);font-size:16px;font-weight:500;line-height:1.25;color:#1a1a1a}@media(max-width: 767px){.LinkCard-title{font-size:13px;}}.LinkCard-meta{display:flex;margin-top:4px;font-size:14px;line-height:20px;color:#999;white-space:nowrap}.LinkCard-imageCell{margin-left:28px;border-radius:30px;width:70px;}.LinkCard-image{background-image:url('https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/linkcard/spider-man.png');background-size: 100% 100%;display:block;width:65px;height:65px;border-radius:inherit;margin-bottom: 0 !important;}</style><span class=LinkCard-backdrop style=background-image:url(https://zhstatic.zhihu.com/assets/zhihu/editor/zhihu-card-default.svg)></span><span class=LinkCard-content><span class=LinkCard-text><span class=LinkCard-title>Windows的Git下载地址</span><span class=LinkCard-meta><span style=display:inline-flex;align-items:center><svg class='Zi Zi--InsertLink' fill=currentColor viewBox='0 0 24 24' width=17 height=17><path d='M6.77 17.23c-.905-.904-.94-2.333-.08-3.193l3.059-3.06-1.192-1.19-3.059 3.058c-1.489 1.489-1.427 3.954.138 5.519s4.03 1.627 5.519.138l3.059-3.059-1.192-1.192-3.059 3.06c-.86.86-2.289.824-3.193-.08zm3.016-8.673l1.192 1.192 3.059-3.06c.86-.86 2.289-.824 3.193.08.905.905.94 2.334.08 3.194l-3.059 3.06 1.192 1.19 3.059-3.058c1.489-1.489 1.427-3.954-.138-5.519s-4.03-1.627-5.519-.138L9.786 8.557zm-1.023 6.68c.33.33.863.343 1.177.029l5.34-5.34c.314-.314.3-.846-.03-1.176-.33-.33-.862-.344-1.176-.03l-5.34 5.34c-.314.314-.3.846.03 1.177z' fill-rule=evenodd></path></svg></span><span style='margin-top: -0.1rem;'>https://gitforwindows.org/</span></span></span><span class='LinkCard-imageCell'><div class='LinkCard-image'></div></span></span></a><a href=https://www.git-scm.com/download/ target='_blank' class='LinkCard'><style type=text/css>.LinkCard,.LinkCard:hover{text-decoration:none;border:none!important;color:inherit!important}.LinkCard{position:relative;display:block;margin:5px auto;width:330px;box-sizing:border-box;border-radius:12px;max-width:100%;overflow:hidden;color:inherit;text-decoration:none}.ztext{word-break:break-word;line-height:1.6}.LinkCard-backdrop{position:absolute;top:0;left:0;right:0;bottom:0;background-repeat:no-repeat;-webkit-filter:blur(20px);filter:blur(20px);background-size:cover;background-position:center}.LinkCard,.LinkCard:hover{text-decoration:none;border:none!important;color:inherit!important}.LinkCard-content{position:relative;display:flex;align-items:center;justify-content:space-between;padding:12px;border-radius:inherit;background-color:rgba(246,246,246,0.88)}.LinkCard-text{overflow:hidden;width:260px;}.LinkCard-title{white-space: nowrap;display:-webkit-box;-webkit-line-clamp:2;overflow:hidden;text-overflow:ellipsis;max-height:calc(16px * 1.25 * 2);font-size:16px;font-weight:500;line-height:1.25;color:#1a1a1a}@media(max-width: 767px){.LinkCard-title{font-size:13px;}}.LinkCard-meta{display:flex;margin-top:4px;font-size:14px;line-height:20px;color:#999;white-space:nowrap}.LinkCard-imageCell{margin-left:28px;border-radius:30px;width:70px;}.LinkCard-image{background-image:url('https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/linkcard/spider-man.png');background-size: 100% 100%;display:block;width:65px;height:65px;border-radius:inherit;margin-bottom: 0 !important;}</style><span class=LinkCard-backdrop style=background-image:url(https://zhstatic.zhihu.com/assets/zhihu/editor/zhihu-card-default.svg)></span><span class=LinkCard-content><span class=LinkCard-text><span class=LinkCard-title>MacOS的Git下载地址</span><span class=LinkCard-meta><span style=display:inline-flex;align-items:center><svg class='Zi Zi--InsertLink' fill=currentColor viewBox='0 0 24 24' width=17 height=17><path d='M6.77 17.23c-.905-.904-.94-2.333-.08-3.193l3.059-3.06-1.192-1.19-3.059 3.058c-1.489 1.489-1.427 3.954.138 5.519s4.03 1.627 5.519.138l3.059-3.059-1.192-1.192-3.059 3.06c-.86.86-2.289.824-3.193-.08zm3.016-8.673l1.192 1.192 3.059-3.06c.86-.86 2.289-.824 3.193.08.905.905.94 2.334.08 3.194l-3.059 3.06 1.192 1.19 3.059-3.058c1.489-1.489 1.427-3.954-.138-5.519s-4.03-1.627-5.519-.138L9.786 8.557zm-1.023 6.68c.33.33.863.343 1.177.029l5.34-5.34c.314-.314.3-.846-.03-1.176-.33-.33-.862-.344-1.176-.03l-5.34 5.34c-.314.314-.3.846.03 1.177z' fill-rule=evenodd></path></svg></span><span style='margin-top: -0.1rem;'>https://www.git-scm.com/download/</span></span></span><span class='LinkCard-imageCell'><div class='LinkCard-image'></div></span></span></a><h2 id="安装-Hexo-和-Next">安装 Hexo 和 Next</h2><h3 id="安装-hexo">安装 hexo</h3><p>本文安装环境为 windows10，所以以下都以 windows 操作系统下安装为例。</p><div class="note"><p>danger,安装之前需要说明几个注意事项：<br>- 很多命令既可以使用 windows 的 cmd 命令行来完成，也可以使用刚才安装好的 Git 命令行工具 Git Bash 来完成，但是在 cmd 中部分命令会出现一些问题，建议只使用 Git Bash 来执行命令。<br>- Hexo 不同版本之间有差别，要注意自己安装的版本是哪个版本（跟着本文走就没问题啦），如果修改样式的话注意网上教程的 Hexo 版本差异。<br>- Hexo 安装好后有 2 种<code>_config.xml</code>文件，一个是 hexo 站点根目录下的全局<code>_config.xml</code>文件，还有一种是每个主题 theme 下的各自的<code>_config.xml</code>文件，注意区分二者，后面会详细说到。<br></p></div><h4 id="安装-hexo-v2">安装 hexo</h4><p>依然是在 GitBash 中操作，输入以下命令，等待安装完成。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm install -g hexo-cli</span><br></pre></td></tr></table></figure><h4 id="创建-hexo-文件夹">创建 hexo 文件夹</h4><p>在电脑某个位置创建一个名为 hexo 的文件夹（当然名字可以随便取），比如我个人的就是 <code>E:\blog\hexo</code> ，由于这个文件夹是你以后存放博客代码和文章的地方，所以最好不要乱放，然后我们在 GitBash 中使用 cd 命令移动到创建好的文件夹中。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">cd</span> /e/blog/hexo</span><br></pre></td></tr></table></figure><h4 id="初始化-hexo">初始化 hexo</h4><p>在上面 cd 到创建的文件夹后，输入以下命令进行初始化</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo init</span><br></pre></td></tr></table></figure><p>这个命令执行的时间非常长，主要是初始化 hexo 博客中的文件夹，包括 hexo 博客内置的各种 node_modules 组件等等，所以耐心的稍等一下！如果初始化失败建议删除文件夹内容后重试。</p><p>初始化完成后，我们打开刚才创建的文件夹，会发现里面包含如下文件夹：</p><p><img src="https://s2.ax1x.com/2019/10/21/Klkwa4.png" class="lazyload placeholder" data-srcset="https://s2.ax1x.com/2019/10/21/Klkwa4.png" srcset="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/site-img/img-loading.gif" alt=""></p><p>注意，其中有一个_config.xml文件，这个我们叫做<font color="red">站点根目录配置文件</font>，里面的初始内容如下：（附上中文介绍）</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line"># Hexo Configuration</span><br><span class="line">## Docs: https:&#x2F;&#x2F;hexo.io&#x2F;docs&#x2F;configuration.html</span><br><span class="line">## Source: https:&#x2F;&#x2F;github.com&#x2F;hexojs&#x2F;hexo&#x2F;</span><br><span class="line"></span><br><span class="line"># Site 站点主配置</span><br><span class="line">title: Hexo  # 网站标题</span><br><span class="line">subtitle:    # 网站副标题</span><br><span class="line">description:   # 网站描述</span><br><span class="line">keywords:      # 可以不填写保持默认</span><br><span class="line">author: John Doe  # 网站拥有者昵称</span><br><span class="line">language:    # 网站语言设置，一般根据依赖的主题而定</span><br><span class="line">timezone:    # 网站时区设置，一般不填写保持默认</span><br><span class="line"></span><br><span class="line"># URL地址链接设置</span><br><span class="line">url: http:&#x2F;&#x2F;yoursite.com   # 网站url设置</span><br><span class="line">root: &#x2F;                    # 网站根目录链接</span><br><span class="line">permalink: :year&#x2F;:month&#x2F;:day&#x2F;:title&#x2F;   # 文章链接，默认是按照 &#x2F;年&#x2F;月&#x2F;日&#x2F;文章标题 设置的链接</span><br><span class="line">permalink_defaults:                    # 默认链接形式</span><br><span class="line"></span><br><span class="line"># Directory  网站主要目录，这里一般不做改动</span><br><span class="line">source_dir: source</span><br><span class="line">public_dir: public</span><br><span class="line">tag_dir: tags</span><br><span class="line">archive_dir: archives</span><br><span class="line">category_dir: categories</span><br><span class="line">code_dir: downloads&#x2F;code</span><br><span class="line">i18n_dir: :lang</span><br><span class="line">skip_render:</span><br><span class="line"></span><br><span class="line"># Writing  网站文章设置，同样一般不做改动</span><br><span class="line">new_post_name: :title.md  # File name of new posts</span><br><span class="line">default_layout: post</span><br><span class="line">titlecase: false # Transform title into titlecase</span><br><span class="line">external_link: true # Open external links in new tab</span><br><span class="line">filename_case: 0</span><br><span class="line">render_drafts: false</span><br><span class="line">post_asset_folder: false</span><br><span class="line">relative_link: false</span><br><span class="line">future: true</span><br><span class="line">highlight:</span><br><span class="line">  enable: true</span><br><span class="line">  line_number: true</span><br><span class="line">  auto_detect: false</span><br><span class="line">  tab_replace:</span><br><span class="line">  </span><br><span class="line"># Home page setting  主页设置，一般不做改动</span><br><span class="line">index_generator:</span><br><span class="line">  path: &#39;&#39;</span><br><span class="line">  per_page: 10</span><br><span class="line">  order_by: -date  # 首页文章排序，默认是按照文章日期递减</span><br><span class="line">  </span><br><span class="line"># Category &amp; Tag  分类设置，一般不做改动</span><br><span class="line">default_category: uncategorized</span><br><span class="line">category_map:</span><br><span class="line">tag_map:</span><br><span class="line"></span><br><span class="line"># Date &#x2F; Time format  日期设置，一般不做改动</span><br><span class="line">date_format: YYYY-MM-DD</span><br><span class="line">time_format: HH:mm:ss</span><br><span class="line"></span><br><span class="line"># Pagination  导航页设置，一般不做改动</span><br><span class="line">per_page: 10   # 设置每页展示多少文章</span><br><span class="line">pagination_dir: page</span><br><span class="line"></span><br><span class="line"># Extensions  使用的主题名称，可以在这里切换</span><br><span class="line">theme: next  # 此处切换主题名称</span><br><span class="line"></span><br><span class="line"># Deployment  部署，一般选择部署到Github上</span><br><span class="line">deploy:</span><br><span class="line">  type:</span><br></pre></td></tr></table></figure><p>其实到这里来说，我们的 hexo 博客已经做好了！不信？我们执行下面命令看看：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">//<span class="built_in">cd</span>到根目录执行</span><br><span class="line">$ hexo g</span><br><span class="line">$ hexo s</span><br></pre></td></tr></table></figure><p>然后我们打开浏览器，输入 <code>http://localhost:4000</code> ，是不是惊奇的发现已经完成了？</p><p><img src="https://s2.ax1x.com/2019/10/21/KlAJFH.png" class="lazyload placeholder" data-srcset="https://s2.ax1x.com/2019/10/21/KlAJFH.png" srcset="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/site-img/img-loading.gif" alt="首页"></p><p>等….等一下，页面怎么是英文的😫？？？！</p><p>别慌，上面提到配置文件的时候已经说到是语言没有修改了，我们可以打开 hexo 目录下的 themes 文件夹，发现里面有一个 landscape 文件夹，没错，你刚才看到的默认主题就是这个名叫 <code>landscape</code> 的主题，这个主题是 hexo 博客自带的默认主题，当然我们可以下载其它主题来代替它，具体方式在后面会介绍。</p><p>然后我们先来分析一下这个 landscape 主题文件夹：</p><p><img src="https://s2.ax1x.com/2019/11/13/MGH9Fe.png" class="lazyload placeholder" data-srcset="https://s2.ax1x.com/2019/11/13/MGH9Fe.png" srcset="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/site-img/img-loading.gif" alt=""></p><p>注意这里面有一个 <code>_config.xml</code> 配置文件，其实上面已经强调过，这个跟前面的站点根目录下配置文件同名，但是这个配置文件是在主题目录下的，那么这个配置文件我们一般就叫做<font color="red">主题配置文件，基本每个 hexo 博客第三方主题下面都会有这个配置文件，所以主题配置文件是一种统称。</font></p><p>里面的初始内容我们暂时不管（因为不同主题的配置文件内容不一样，反正我们又不使用这个主题~）。</p><p>先来看看上面的 languages 文件夹，一看就懂，都知道这就是网站语言配置文件，好，我们进去看一下，噢~里面的 zh-CN 和 zh-TW 可不就是中文吗。其中 zh-CN 指的是简体中文，zh-TW（湾湾）是繁体中文，欧克。然后我们再去站点根目录下，注意这里是 <font color="red">站点根目录下（hexo/_config.xml）</font>的配置文件中（千万别懵逼了），将这里：</p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"># Site 站点主配置</span><br><span class="line">title: sanarous教你搭建Hexo博客  //网站标题修改</span><br><span class="line">subtitle: so easy~  //副标题修改</span><br><span class="line">description:  //网站描述</span><br><span class="line">keywords: hexo,next,Java,博客    //网站关键字,用英文逗号分开</span><br><span class="line">author: Sanarous   //此处填写你自己的昵称  </span><br><span class="line"><span class="addition">+ language: zh-CN    //这里改成上面在主题配置文件中看到的语言名字，注意英文冒号:后面有一个空格</span></span><br><span class="line">timezone:   //网站时区，保持默认就可以了</span><br></pre></td></tr></table></figure><p>更改完后，我们回 GitBash 命令行，输入以下命令：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo g &amp;&amp; hexo s</span><br></pre></td></tr></table></figure><p>再重新打开浏览器刷新，是不是页面语言变成中文的了！</p><p>好吧，现在先说一下上面的命令中的 <code>hexo s &amp;&amp; hexo g</code> 是什么东西，<code>hexo s</code> 是启动 hexo 服务的，可以理解为是 <code>hexo serve</code> 或者 <code>hexo start</code> ，一般都是简写为 <code>hexo s</code> ，而 <code>hexo g</code> 是重新生成 public 文件夹的命令，全称是 <code>hexo generator</code> ，那么 public 文件夹是什么呢？</p><p>别慌，我们回头看一下 hexo 文件夹目录：</p><p><img src="https://s2.ax1x.com/2019/11/13/MGb6vn.png" class="lazyload placeholder" data-srcset="https://s2.ax1x.com/2019/11/13/MGb6vn.png" srcset="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/site-img/img-loading.gif" alt="文件夹"></p><p>看到这个 public 文件夹嘛，这个里面就是生成的所有静态文件，包括 html，css，js 文件以及图片等，稍微懂一些前端的人就知道这个文件夹就是你的博客被 node.js 渲染后生成的最终文件夹，这个文件夹中点开 index.html 就能看到你的博客页面了😄！简单点来说如果在本地修改了什么文件内容，可以使用 <code>hexo g</code> 命令重新生成一下public文件夹，那么这个文件夹只要修改了，再使用 <code>hexo s</code> 启动服务就可以看到页面变化了，当然 <code>hexo s</code> 本身就具有在线调试的功能，如果 <code>hexo s</code> 无法刷新页面修改内容，那么使用 <code>hexo g &amp;&amp; hexo s</code> 就可以看到更改内容啦~</p><h4 id="第一篇博客文章">第一篇博客文章</h4><p>博客基本框架完成后，我们做的第一件事就是创建第一篇个人博客啦！可以在 Gitbash 中 cd 到 hexo 根目录，使用如下命令：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">hexo new <span class="string">&quot;我的第一篇博客&quot;</span></span><br><span class="line"></span><br><span class="line">//或者可以简写为</span><br><span class="line"></span><br><span class="line">hexo n <span class="string">&quot;我的第一篇博客&quot;</span></span><br></pre></td></tr></table></figure><p>就可以在 <code>hexo/source/_posts</code> 文件下面新建一个 <code>.md</code> 文件，这个 <code>.md</code> 文件就是 Markdown 文件，所以我们写博客只要在本地编辑这个 Markdown 文件就可以了。Markdown 语法可以 Google 一下使用教程，比较简单并且实用。</p><h3 id="将-Hexo-博客部署到-Github-上">将 Hexo 博客部署到 Github 上</h3><ol><li>为什么要部署到 Github上呢，当然是有以下原因：</li><li>因为 Hexo 博客都是静态文件，GithubPages 自身就支持静态文件。</li><li>免费方便，不用花一分钱就可以自己搭建一个自由的个人博客，并且没有服务器没有后台。</li><li>可以随意绑定自己的域名，并且可以一键开启 HTTPS，很方便。</li><li>数据绝对安全，github 可以恢复任意版本。</li><li>博客内容可以轻松打包、转移以及发布到其它平台。</li><li>……</li></ol><p>在部署到 Github 之前，我们需要准备好自己的 Github 账号，Github 账号可以在 Github 官网注册。</p><a href=https://github.com target='_blank' class='LinkCard'><style type=text/css>.LinkCard,.LinkCard:hover{text-decoration:none;border:none!important;color:inherit!important}.LinkCard{position:relative;display:block;margin:5px auto;width:330px;box-sizing:border-box;border-radius:12px;max-width:100%;overflow:hidden;color:inherit;text-decoration:none}.ztext{word-break:break-word;line-height:1.6}.LinkCard-backdrop{position:absolute;top:0;left:0;right:0;bottom:0;background-repeat:no-repeat;-webkit-filter:blur(20px);filter:blur(20px);background-size:cover;background-position:center}.LinkCard,.LinkCard:hover{text-decoration:none;border:none!important;color:inherit!important}.LinkCard-content{position:relative;display:flex;align-items:center;justify-content:space-between;padding:12px;border-radius:inherit;background-color:rgba(246,246,246,0.88)}.LinkCard-text{overflow:hidden;width:260px;}.LinkCard-title{white-space: nowrap;display:-webkit-box;-webkit-line-clamp:2;overflow:hidden;text-overflow:ellipsis;max-height:calc(16px * 1.25 * 2);font-size:16px;font-weight:500;line-height:1.25;color:#1a1a1a}@media(max-width: 767px){.LinkCard-title{font-size:13px;}}.LinkCard-meta{display:flex;margin-top:4px;font-size:14px;line-height:20px;color:#999;white-space:nowrap}.LinkCard-imageCell{margin-left:28px;border-radius:30px;width:70px;}.LinkCard-image{background-image:url('https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/linkcard/spider-man.png');background-size: 100% 100%;display:block;width:65px;height:65px;border-radius:inherit;margin-bottom: 0 !important;}</style><span class=LinkCard-backdrop style=background-image:url(https://zhstatic.zhihu.com/assets/zhihu/editor/zhihu-card-default.svg)></span><span class=LinkCard-content><span class=LinkCard-text><span class=LinkCard-title>Github官网</span><span class=LinkCard-meta><span style=display:inline-flex;align-items:center><svg class='Zi Zi--InsertLink' fill=currentColor viewBox='0 0 24 24' width=17 height=17><path d='M6.77 17.23c-.905-.904-.94-2.333-.08-3.193l3.059-3.06-1.192-1.19-3.059 3.058c-1.489 1.489-1.427 3.954.138 5.519s4.03 1.627 5.519.138l3.059-3.059-1.192-1.192-3.059 3.06c-.86.86-2.289.824-3.193-.08zm3.016-8.673l1.192 1.192 3.059-3.06c.86-.86 2.289-.824 3.193.08.905.905.94 2.334.08 3.194l-3.059 3.06 1.192 1.19 3.059-3.058c1.489-1.489 1.427-3.954-.138-5.519s-4.03-1.627-5.519-.138L9.786 8.557zm-1.023 6.68c.33.33.863.343 1.177.029l5.34-5.34c.314-.314.3-.846-.03-1.176-.33-.33-.862-.344-1.176-.03l-5.34 5.34c-.314.314-.3.846.03 1.177z' fill-rule=evenodd></path></svg></span><span style='margin-top: -0.1rem;'>https://github.com</span></span></span><span class='LinkCard-imageCell'><div class='LinkCard-image'></div></span></span></a><h4 id="创建-Github-仓库">创建 Github 仓库</h4><p>首先我们需要在 Github 上创建一个 repository，就是创建一个仓库的意思，在登录账号后首页就有一个显眼的 create new repository，点进去就可以看到了，注意名字必须为你的 <code>Github用户名.github.io</code> ，如下图：</p><p><img src="https://s2.ax1x.com/2019/10/21/Kl0wjI.png" class="lazyload placeholder" data-srcset="https://s2.ax1x.com/2019/10/21/Kl0wjI.png" srcset="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/site-img/img-loading.gif" alt="github"></p><p>不能设置为其它名字，只能用这个仓库名。这样设置以后，我们在不绑定域名的前提下，可以直接使用 <code>http://Sanarous.github.io</code> 来访问自己的个人博客，这样就相当于有一个个人域名，并且是永久免费的！</p><h4 id="配置-SSH-Key">配置 SSH Key</h4><p>如果是第一次在自己的本机上使用 Git 上传到 Github 上，那么必须配置 <code>SSH key</code> ，表示 Github 允许这台机器有权限使用 Git 上传代码到远端仓库。</p><p>我们可以在 GitBash 中使用 <code>$ cd ~/.ssh</code> 命令来查看本机已经存在的 ssh 密钥，如果是第一次使用会显示 <code>No such file or directory</code> ，如果不是的话，就需要用已经存在的密钥或者重新生成一份了。</p><p>然后输入</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ ssh-keygen -t rsa -C <span class="string">&quot;邮件地址&quot;</span></span><br></pre></td></tr></table></figure><p>上面的邮件地址就是你的 Github 注册邮箱地址，在提示后连续回车，最终会生成一个文件在 C 盘用户目录下面</p><p><img src="https://s2.ax1x.com/2019/11/13/MGOE9g.png" class="lazyload placeholder" data-srcset="https://s2.ax1x.com/2019/11/13/MGOE9g.png" srcset="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/site-img/img-loading.gif" alt="ssh"></p><p>打开这个 .ssh 文件，里面存放了密钥，然后我们打开自己的 Github 个人主页，进入 <code>个人设置 -&gt; SSH and GPG keys -&gt; New SSH key</code></p><p><img src="https://s2.ax1x.com/2019/11/13/MGOrCD.png" class="lazyload placeholder" data-srcset="https://s2.ax1x.com/2019/11/13/MGOrCD.png" srcset="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/site-img/img-loading.gif" alt="ssh1"></p><p>上面的 Title 可以任意填写，下面的 key 注意要打开 .ssh 文件，将密钥复制进去</p><h4 id="测试是否成功">测试是否成功</h4><p>使用如下命令：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ ssh -T git@github.com <span class="comment"># 注意邮箱地址不用改</span></span><br></pre></td></tr></table></figure><p>如果提示 <code>Are you sure you want to continue connecting (yes/no)?</code> 点击yes，会显示</p><p><code>Hi Sanarous! You've successfully authenticated, but GitHub does not provide shell access.</code></p><p>看到这个信息就说明 SSH 已经配置成功！</p><h4 id="配置-Git-提交的用户信息">配置 Git 提交的用户信息</h4><p>上面配置成功后，我们就可以设置 Git 的全局用户信息了，这个信息设置当前 Git 命令上传代码的用户信息。</p><p>使用以下命令：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ git config --global user.name <span class="string">&quot;XuxuGood&quot;</span> // 你的github用户名，非昵称</span><br><span class="line">$ git config --global user.email  <span class="string">&quot;xxx@qq.com&quot;</span> // 填写你的github注册邮箱</span><br></pre></td></tr></table></figure><p>配置完成后以后提交代码都是使用的这个用户信息进行提交的。</p><h4 id="将-Hexo-博客部署到-Github-上-v2">将 Hexo 博客部署到 Github 上</h4><p>首先打开 hexo 站点的配置文件，找到 deloy 并填写如下配置：</p><p>文件位置：<code>hexo/_config.xml</code></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">deploy:</span><br><span class="line">  <span class="built_in">type</span>: git</span><br><span class="line">  repository: git@github.com:XuxuGood/XuxuGood.github.io.git <span class="comment"># 用户名改成你自己的</span></span><br><span class="line">  branch: master</span><br></pre></td></tr></table></figure><p>或者也可以写成这样：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">deploy:</span><br><span class="line">  <span class="built_in">type</span>: github</span><br><span class="line">  repository: https://github.com/XuxuGood/XuxuGood.github.io.git</span><br><span class="line">  branch: master</span><br></pre></td></tr></table></figure><p>无论是哪种写法，此时直接执行 <code>hexo d</code> 的话一般会报如下错误：<code>Deployer not found: github</code> 或者 <code>Deployer not found: git</code></p><p>原因是还需要安装一个插件 <code>hexo-deployer-git</code> ，我们可以在 Git 中 cd 到 hexo 根目录，并输入以下命令：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> /e/hexo/</span><br><span class="line">npm install hexo-deployer-git --save</span><br></pre></td></tr></table></figure><p>然后我们可以使用 <code>hexo clean &amp;&amp; hexo g &amp;&amp; hexo deploy</code> 命令来完成一键部署到 Github 上。</p><h3 id="安装-Next-主题">安装 Next 主题</h3><p>由于默认的主题 landscape 界面比较丑（当然魔改也是可以的），我们可以使用 Hexo 官方推荐的主题：<a href="https://hexo.io/themes">https://hexo.io/themes</a> ，如果喜欢这里面的某些主题，可以直接去上面主题对应的界面中的 Github 中下载（下载方式与稍后介绍的下载 Next 主题一样）。</p><p>目前在 Github 上 star 数量比较多的有 Next 主题、yillia 主题等，Next 主题基本占据了 Hexo 博客的半壁江山，并且 Next 主题集成功能较多，因此我下面只介绍 Next 主题的使用方式。</p><p>首先我们可以打开 Github，全局搜索 <code>hexo-next</code> ，我们会发现是有两个 star 数量比较高的：</p><p><img src="https://s2.ax1x.com/2019/11/13/MGjatK.png" class="lazyload placeholder" data-srcset="https://s2.ax1x.com/2019/11/13/MGjatK.png" srcset="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/site-img/img-loading.gif" alt="hexo-next"></p><div class="note"><p>info,其中第一个是 Next5 版本的，而第二个是 Next6 版本的。2019/7/27 更新：第二个 Github 仓库目前一直是 Next 主题更新最新版本的的仓库，目前已经更新到 v7.2.0，以下内容仅供参考。</p></div><p>注意上面说的版本关系，在 Next6 版本上其实增加了很多 Next5 需要手动配置的东西，并且 Next5 已经停止维护了，如果不太喜欢自己手动去配置的话，建议使用 Next6 版本。当然本博客使用的仍然是 Next5 版本，如果需要我的个性化设置的话也可以留言。</p><p>下面我们来安装 Next 主题。</p><h4 id="下载-Next-主题">下载 Next 主题</h4><p>以下均以 Next6 版本为例，Next5 版本操作基本一样。</p><p>进入<a href="https://github.com/theme-next/hexo-theme-next">https://github.com/theme-next/hexo-theme-next</a></p><p>我们安装 Next6 版本的话，有两种方式：</p><ol><li>在 GitBash 中 cd 到博客根目录下，然后使用 git clone 命令将 Next 仓库克隆到 hexo 目录下的 <code>themes/next</code> ，即命令是 <code>git clone https://github.com/theme-next/hexo-theme-next.git themes/next</code></li><li>直接在 Github 页面上选择绿色的按钮 <code>Clone or Download</code> ，点击下载 zip 压缩包。</li></ol><p>如果第一种方式比较慢的话，可以直接选择第二种方式直接下载，然后将下载好的压缩包解压后放在 <code>E:\blog\hexo\themes\</code> 下面，<code>git clone</code> 的话也是在这个下面，下载好后的名字可以任取。</p><h4 id="设置-hexo-博客为-Next-主题">设置 hexo 博客为 Next 主题</h4><p>在站点根目录下_config.xml配置文件中，找到如下代码并进行配置：</p><p>文件位置：hexo/_config.xml</p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># Extensions</span><br><span class="line">## Plugins: https://hexo.io/plugins/</span><br><span class="line">## Themes: https://hexo.io/themes/</span><br><span class="line"><span class="deletion">- theme: landscape      # 更改原始默认的主题名称，修改为如下</span></span><br><span class="line"><span class="addition">+ theme: hexo-theme-next   # 此处填入你在themes目录下的next主题文件名</span></span><br></pre></td></tr></table></figure><h4 id="测试-Next-主题">测试 Next 主题</h4><p>在 <code>GitBash</code> 中输入</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo clean &amp;&amp; hexo g &amp;&amp; hexo s</span><br></pre></td></tr></table></figure><p>等待启动完成在浏览器中输入http://localhost:4000即可查看安装好的 Next 主题！</p><h2 id="Next-主题基本功能配置">Next 主题基本功能配置</h2><p>Next 主题安装好后的初始界面也是很简洁的，我们可以先设置一些常用功能😊。</p><p>首先为了防止懵逼，再次友情提醒：在这里修改的一律是主题配置文件 <code>_config.xml</code> ，目录是 <code>hexo/themes/next/_config.xml</code> ，千万不要走错地方了！</p><p>我们打开 <code>_config.xml</code> 主题配置文件对应一一修改。</p><div class="note"><p>danger,由于配置文件是 yml，如果对 yml 语法不太熟的小伙伴，注意每个配置之间都必须有空格，不然报错。如 <code>override: false</code> ，注意英文冒号 <code>:</code> 后面有一个空格，所有 yml 语法都是这样。</p></div><p>以下默认使用的文本编辑器为 notepad++、WebStorm 或者 sublime，主题使用的是 Next6 版本（注意 Next 官方会不断进行更新，所以下面的不一定都有效，因为官方正在不断集成更多功能，具体地可以自行在配置文件中探索~）</p><p>以下均在 <code>hexo s</code> 在线调试环境中进行修改~</p><h3 id="网站favicon图标设置">网站favicon图标设置</h3><p><img src="https://s2.ax1x.com/2019/11/13/MJSy28.png" class="lazyload placeholder" data-srcset="https://s2.ax1x.com/2019/11/13/MJSy28.png" srcset="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/site-img/img-loading.gif" alt="favicon"></p><p>favicon 图标相当于是网站的 logo 简化版，所以我们也可以给自己的网站添加一个 favicon 图标，使用notepad++、WebStorm 或者 sublime 打开配置文件后，使用 <code>Ctrl+F</code> 搜索 <code>favicon</code></p><p>文件位置：hexo/themes/next/_config.xml</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">favicon:</span><br><span class="line">  small: /images/favicon-16x16-next.png  <span class="comment"># 网站小图标</span></span><br><span class="line">  medium: /images/favicon-32x32-next.png   <span class="comment"># 中等图标</span></span><br><span class="line">  apple_touch_icon: /images/apple-touch-icon-next.png  <span class="comment"># app_touch上显示图标   </span></span><br><span class="line">  safari_pinned_tab: /images/logo.svg   <span class="comment"># 在Safari浏览器中显示图标</span></span><br><span class="line">  <span class="comment">#android_manifest: /images/manifest.json  # 安卓默认显示同普通情况下</span></span><br><span class="line">  <span class="comment">#ms_browserconfig: /images/browserconfig.xml</span></span><br></pre></td></tr></table></figure><p>网站 favicon 图标可以放到你的 next 主题目录下面的 <code>source/images</code> 中，然后按照上述相对路径方式引用，这里 favicon 图标不需要非得是 ico 格式的，也可以是 png 或其它图片格式。</p><p>如果是有第三方图床放图片链接的，也可以直接改成图片链接。</p><h3 id="网站页脚小心心定义">网站页脚小心心定义</h3><p><img src="https://s2.ax1x.com/2019/11/13/MJ9RNn.png" class="lazyload placeholder" data-srcset="https://s2.ax1x.com/2019/11/13/MJ9RNn.png" srcset="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/site-img/img-loading.gif" alt="heart"></p><p>在 Next5 版本中需要手动修改设置，但是在 Next6 中已经集成好这个功能了，搜索 footer，设置如下，就可以在页脚看到跳动的小心心啦</p><p>文件位置：hexo/themes/next/_config.xml</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">footer:</span><br><span class="line">  <span class="comment"># 指定网站开始运行的年份，如果不指定，则默认为当前年份</span></span><br><span class="line">  since: 2019</span><br><span class="line"></span><br><span class="line">  <span class="comment"># 在页脚年份和版权信息中间显示的图标</span></span><br><span class="line">  icon:</span><br><span class="line">    <span class="comment"># 图标形状显示，可以参考 https://fontawesome.com/v4.7.0/icons 中的名字</span></span><br><span class="line">    <span class="comment"># 官方建议使用 heart 图标，颜色设置为 #ff0000，这也显示的是跳动的心</span></span><br><span class="line">    name: heart</span><br><span class="line">    <span class="comment"># 如果想要图标跳动，下面设置为 true</span></span><br><span class="line">    animated: <span class="literal">true</span></span><br><span class="line">    <span class="comment"># 改变图标颜色</span></span><br><span class="line">    color: <span class="string">&quot;#ff0000&quot;</span></span><br></pre></td></tr></table></figure><h3 id="关闭底部由-hexo-强力驱动的广告">关闭底部由 hexo 强力驱动的广告</h3><p><img src="https://s2.ax1x.com/2019/11/13/MJiCtA.png" class="lazyload placeholder" data-srcset="https://s2.ax1x.com/2019/11/13/MJiCtA.png" srcset="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/site-img/img-loading.gif" alt="HEXO-驱动"></p><p>由于默认的页面中 hexo 会在网页底部居中位置打个广告（要恰饭的嘛），但是官方还是很良心的在配置文件中设置了广告开关，还是在上面 footer 中，如下配置全部设置为 false 就可以关闭广告了。</p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">  powered:</span><br><span class="line">    # Hexo link (Powered by Hexo).</span><br><span class="line"><span class="deletion">-    enable: false</span></span><br><span class="line">    # Version info of Hexo after Hexo link (vX.X.X).</span><br><span class="line"><span class="deletion">-    version: false</span></span><br><span class="line"></span><br><span class="line">  theme:</span><br><span class="line">    # Theme &amp; scheme info link (Theme - NexT.scheme).</span><br><span class="line"><span class="deletion">-    enable: false</span></span><br><span class="line">    # Version info of NexT after scheme info (vX.X.X).</span><br><span class="line"><span class="deletion">-    version: false</span></span><br></pre></td></tr></table></figure><h3 id="菜单栏设置">菜单栏设置</h3><p>在配置文件中搜索 menu，找到如下：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">menu:</span><br><span class="line">  home: / || home</span><br><span class="line">  <span class="comment">#about: /about/ || user</span></span><br><span class="line">  <span class="comment">#tags: /tags/ || tags</span></span><br><span class="line">  <span class="comment">#categories: /categories/ || th</span></span><br><span class="line">  archives: /archives/ || archive</span><br><span class="line">  <span class="comment">#schedule: /schedule/ || calendar</span></span><br><span class="line">  <span class="comment">#sitemap: /sitemap.xml || sitemap</span></span><br><span class="line">  <span class="comment">#commonweal: /404/ || heartbeat</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Enable/Disable menu icons.</span></span><br><span class="line">menu_icons:</span><br><span class="line">  <span class="built_in">enable</span>: <span class="literal">true</span>  <span class="comment">#表示是否显示菜单图标icons</span></span><br><span class="line">  badges: <span class="literal">false</span>  <span class="comment"># 显示每个菜单下面有多少个内容</span></span><br></pre></td></tr></table></figure><p>其中 <code>||</code> 后面表示的 Fontawesome 中的图标名称，如果想要修改图标，可以去<a href="http://www.fontawesome.com.cn/">FontAwesome官网</a>找自己喜欢的图标样式，前面部分 <code>/about/</code> 是表示该菜单的相对链接，比如网站主页访问是 <code>https://bestzuo.cn</code> ，那么点击这个菜单栏的链接就变成了 <code>https://bestzuo.cn/about/</code> 这种形式。</p><p>如果需要增加菜单栏的话，可以在 Gitbash 中输入以下命令：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">hexo new page <span class="string">&quot;photos&quot;</span></span><br><span class="line"></span><br><span class="line">//或者可以间写为如下形式</span><br><span class="line"></span><br><span class="line">hexo n page <span class="string">&quot;photos&quot;</span></span><br></pre></td></tr></table></figure><p>这样就会自动在 <code>hexo/source</code> 目录下生成一个文件夹，而且里面是一个 <code>index.md</code> 文件，Node.js 最终会把这个 md 文件渲染成 html 文件，所以菜单栏中内容就在这个 md 文件中写就可以，并且文章内支持 html 写法，所以具有很强的扩展性🤣，创建之后，就需要在配置文件这个地方添加上新增菜单的名称以及链接格式和 FontAwesome 图标，然后打开 <code>hexo/themes/next/languages/zh-CN.yml</code> 文件，在 menu 下面按照格式汉化你的菜单栏名称~</p><h3 id="Next主题四种风格设置">Next主题四种风格设置</h3><p>Next 主题支持四种内置风格，每个人喜欢的风格都不同，可以在基础风格上继续进行魔改。搜索 schema，找到如下代码：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Schemes</span></span><br><span class="line">scheme: Muse</span><br><span class="line"><span class="comment">#scheme: Mist</span></span><br><span class="line"><span class="comment">#scheme: Pisces</span></span><br><span class="line"><span class="comment">#scheme: Gemini</span></span><br></pre></td></tr></table></figure><p>四种风格样式可以自己进行切换，可以在本地 <code>hexo g &amp;&amp; hexo s</code> 后在线调试这个地方的代码，喜欢哪个就选哪个吧~</p><h3 id="社交链接设置">社交链接设置</h3><p>社交链接主要是在侧边栏中展示的，一般都是自己的各种网站主页。搜索 social，找到如下代码：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#social:</span></span><br><span class="line">  <span class="comment">#GitHub: https://github.com/yourname || github</span></span><br><span class="line">  <span class="comment">#E-Mail: mailto:yourname@gmail.com || envelope</span></span><br><span class="line">  <span class="comment">#Google: https://plus.google.com/yourname || google</span></span><br><span class="line">  <span class="comment">#Twitter: https://twitter.com/yourname || twitter</span></span><br><span class="line">  <span class="comment">#FB Page: https://www.facebook.com/yourname || facebook</span></span><br><span class="line">  <span class="comment">#VK Group: https://vk.com/yourname || vk</span></span><br><span class="line">  <span class="comment">#StackOverflow: https://stackoverflow.com/yourname || stack-overflow</span></span><br><span class="line">  <span class="comment">#YouTube: https://youtube.com/yourname || youtube</span></span><br><span class="line">  <span class="comment">#Instagram: https://instagram.com/yourname || instagram</span></span><br><span class="line">  <span class="comment">#Skype: skype:yourname?call|chat || skype</span></span><br></pre></td></tr></table></figure><p>后面的 yourname 改成你自己在对应网站的 ID，然后将前面的 # 注释去掉。其中 <code>||</code> 后面还是表示该链接前面的图标在 FontAwesome 中的名称，可以进行自定义修改。</p><h3 id="友情链接设置">友情链接设置</h3><p>友情链接也是处于侧边栏中的，这里可以完全自定义内容，一般可以用来放社交圈子链接（不过一般博客都会单独做一个页面放其它人的博客友链）。搜索 links，找到如下配置</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Blog rolls</span></span><br><span class="line">links_icon: link</span><br><span class="line">links_title: Links</span><br><span class="line">links_layout: block</span><br><span class="line"><span class="comment">#links_layout: inline</span></span><br><span class="line"><span class="comment">#links:</span></span><br><span class="line">  <span class="comment">#Title: http://example.com/</span></span><br></pre></td></tr></table></figure><p>这里可以添加你想要的友情链接，比如可以添加百度链接：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Blog rolls</span></span><br><span class="line">links_icon: link  <span class="comment"># 链接对应的Fontawesome图标名称</span></span><br><span class="line">links_title: Links <span class="comment"># 设置链接标题，可以自定义</span></span><br><span class="line">links_layout: block   <span class="comment"># 图标布局方式，有inline和block两种</span></span><br><span class="line"><span class="comment">#links_layout: inline</span></span><br><span class="line">links:</span><br><span class="line">  Baidu: https://www.baidu.com/</span><br><span class="line">  Github: https://github.com/</span><br></pre></td></tr></table></figure><h3 id="侧边栏设置">侧边栏设置</h3><p>搜索 sidebar，找到如下配置</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">sidebar:</span><br><span class="line">  <span class="comment"># Sidebar Position, available value: left | right (only for Pisces | Gemini).</span></span><br><span class="line">  <span class="comment"># 此处设置只适用于Pisces或者Gemini风格</span></span><br><span class="line">  position: left</span><br><span class="line">  <span class="comment">#position: right</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># 侧边栏如何展示</span></span><br><span class="line">  display: post    <span class="comment"># 侧边栏在打开文章的时候显示</span></span><br><span class="line">  <span class="comment">#display: always  # 侧边栏不管在哪都显示</span></span><br><span class="line">  <span class="comment">#display: hide    # 隐藏侧边栏</span></span><br><span class="line">  <span class="comment">#display: remove  # 移除侧边栏</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># Sidebar offset from top menubar in pixels (only for Pisces | Gemini).</span></span><br><span class="line">  offset: 12</span><br><span class="line"></span><br><span class="line">  <span class="comment"># 设置返回页面顶部设置，只适用于Pisces或者Gemini风格，建议开启</span></span><br><span class="line">  b2t: <span class="literal">true</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># 显示浏览百分比，建议开启</span></span><br><span class="line">  scrollpercent: <span class="literal">true</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># Enable sidebar on narrow view (only for Muse | Mist).</span></span><br><span class="line">  onmobile: <span class="literal">false</span></span><br></pre></td></tr></table></figure><h3 id="文章开启阅读更多按钮">文章开启阅读更多按钮</h3><p>如果不开启阅读更多按钮的话，默认是展示文章中所有内容的，这显然体验不好。</p><p>一般都会在文章中插入 <code>&lt;!--more--&gt;</code> 这种注释形式表示首页展示到注释处为止。或者会使用如下官方配置文件中自带的方式。一般都推荐使用注释的方式，因为下面这种 <code>auto_excerpt</code> 方式不会保留前面的行文样式，但是注释方式会保留样式。</p><p>搜索 auto_excerpt，找到如下：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">auto_excerpt:</span><br><span class="line">  <span class="built_in">enable</span>: <span class="literal">true</span></span><br><span class="line">  length: 150 <span class="comment">#到多少字数后不显示</span></span><br></pre></td></tr></table></figure><p>默认是关闭的，也就是首页上默认显示整篇文章，而为了显示阅读更多按钮，我们可以开启这个服务。</p><h3 id="文章元数据设置">文章元数据设置</h3><p><img src="https://s2.ax1x.com/2019/11/14/MY7yJe.png" class="lazyload placeholder" data-srcset="https://s2.ax1x.com/2019/11/14/MY7yJe.png" srcset="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/site-img/img-loading.gif" alt="元数据"></p><p>元数据就是显示在 home 页的文章创建于、更新于、阅读次数之类的数据，搜索 post_meta，找到如下配置：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">post_meta:</span><br><span class="line">  item_text: <span class="literal">true</span>  <span class="comment"># 是否显示对应的文字</span></span><br><span class="line">  created_at: <span class="literal">true</span>  <span class="comment"># 是否显示 创建于</span></span><br><span class="line">  updated_at:       <span class="comment"># 是否显示 更新于</span></span><br><span class="line">    enabled: <span class="literal">false</span></span><br><span class="line">    <span class="comment"># 更新日期显示规则，只有更新日期与创建日期不同时，才会显示</span></span><br><span class="line">    another_day: <span class="literal">true</span></span><br><span class="line">  categories: <span class="literal">true</span> <span class="comment"># 是否显示分类信息</span></span><br></pre></td></tr></table></figure><p>上面应该已经说明的很详细了吧~</p><h3 id="文章字数统计设置">文章字数统计设置</h3><p>由于上面元数据中没有带统计文章字数功能，所以需要利用插件来生成，搜索 post_wordcount，找到如下配置：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Post wordcount display settings</span></span><br><span class="line"><span class="comment"># Dependencies: https://github.com/theme-next/hexo-symbols-count-time</span></span><br><span class="line">symbols_count_time:</span><br><span class="line">  separated_meta: <span class="literal">true</span></span><br><span class="line">  item_text_post: <span class="literal">true</span></span><br><span class="line">  item_text_total: <span class="literal">false</span></span><br><span class="line">  awl: 4</span><br><span class="line">  wpm: 275</span><br></pre></td></tr></table></figure><p>注意开启上述设置必须要添加 <code>hexo-symbols-count-time</code> 模块依赖，即在 hexo 站点根目录下使用</p><p><code>npm install hexo-symbols-count-time --save</code> 命令安装模块后开启上述功能使用。</p><h3 id="侧边栏头像设置">侧边栏头像设置</h3><p>侧边栏中没有博主头像是没有灵魂的。Next6 主题中自带鼠标放在头像上能旋转 360度的功能，如果是 Next5 的话需要自己手动配置。</p><p>搜索 avatar，找到如下配置</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Sidebar Avatar</span></span><br><span class="line">avatar:</span><br><span class="line">  <span class="comment"># 如果放在本地(source/images): /images/avatar.gif</span></span><br><span class="line">  <span class="comment"># 如果第三方图床，直接写地址</span></span><br><span class="line">  url:  <span class="comment"># 此处是头像的地址</span></span><br><span class="line">  rounded: <span class="literal">true</span>   <span class="comment"># 设置头像是否为圆形</span></span><br><span class="line">  opacity: 1    <span class="comment"># 设置不透明度，1为完全不透明，0为完全透明</span></span><br><span class="line">  rotated: <span class="literal">true</span>   <span class="comment"># 设置鼠标放到头像上是否旋转</span></span><br></pre></td></tr></table></figure><h3 id="代码块设置">代码块设置</h3><p>Next6 中自带了复制代码按钮，Next5 需要自己手动配置。</p><p>搜索 codeblock，找到如下配置：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">codeblock:</span><br><span class="line">border_radius: 8   <span class="comment"># 按钮圆滑度</span></span><br><span class="line">copy_button:  <span class="comment"># 设置是否开启代码块复制按钮</span></span><br><span class="line"><span class="built_in">enable</span>: <span class="literal">true</span></span><br><span class="line">show_result: <span class="literal">true</span>  <span class="comment"># 是否显示复制成功信息</span></span><br></pre></td></tr></table></figure><h3 id="开启文章打赏按钮">开启文章打赏按钮</h3><p>一篇辛辛苦苦敲出来的文章，不妨开启一下文章打赏功能，万一真有人给你棒棒糖呢😆 ~</p><p>搜索 reward，找到如下配置并修改：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Reward</span></span><br><span class="line">reward_comment: 坚持原创技术分享，感谢您的支持和鼓励！</span><br><span class="line">wechatpay: <span class="comment"># 微信收款图片地址</span></span><br><span class="line">alipay:  <span class="comment"># 支付宝收款图片地址</span></span><br><span class="line"><span class="comment">#bitcoin: /images/bitcoin.png  # 比特币</span></span><br></pre></td></tr></table></figure><h3 id="开启相关文章推荐功能">开启相关文章推荐功能</h3><p><img src="https://s2.ax1x.com/2019/11/14/MYbnH0.png" class="lazyload placeholder" data-srcset="https://s2.ax1x.com/2019/11/14/MYbnH0.png" srcset="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/site-img/img-loading.gif" alt="相关文章"></p><p>要优化读者体验的话，可以在读者阅读完一篇文章后，能自动推荐相关内容的文章，不仅能考虑读者感受，还能给自己博客文章带来阅读量，岂不是一举两得😆 ？</p><p>搜索 related_posts，找到如下配置：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">related_posts:</span><br><span class="line">  <span class="built_in">enable</span>: <span class="literal">true</span>  <span class="comment"># 是否开启</span></span><br><span class="line">  title: 相关文章推荐    <span class="comment"># 标题</span></span><br><span class="line">  display_in_home: <span class="literal">false</span> <span class="comment"># 是否在首页显示，建议为false</span></span><br><span class="line">  params:</span><br><span class="line">    maxCount: 5   <span class="comment"># 相关文章的最大数量</span></span><br><span class="line">    <span class="comment">#PPMixingRate: 0.0</span></span><br><span class="line">    <span class="comment">#isDate: false</span></span><br><span class="line">    <span class="comment">#isImage: false</span></span><br><span class="line">    <span class="comment">#isExcerpt: false</span></span><br></pre></td></tr></table></figure><p>开启相关文章推荐需要安装 <code>hexo-related-popular-posts</code> 模块，即在 hexo 站点根目录下使用 <code>npm install hexo-related-popular-posts --save</code> 安装模块，然后开启上面的相关文章功能就可以啦~</p><h3 id="开启文章版本信息">开启文章版本信息</h3><p>搜索 post_copyright，找到配置</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">post_copyright:</span><br><span class="line">  <span class="built_in">enable</span>: <span class="literal">false</span></span><br><span class="line">  license: CC BY-NC-SA 3.0</span><br><span class="line">  license_url: https://creativecommons.org/licenses/by-nc-sa/3.0/</span><br></pre></td></tr></table></figure><p>设置为 true 可以打开，这样在每篇文章最后都会有版权提示。</p><h3 id="代码块风格设置">代码块风格设置</h3><p>搜索 highlight_theme，有以下多种风格：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Code Highlight theme</span></span><br><span class="line"><span class="comment"># Available values: normal | night | night eighties | night blue | night bright</span></span><br><span class="line"><span class="comment"># https://github.com/chriskempson/tomorrow-theme</span></span><br><span class="line">highlight_theme: night eighties</span><br></pre></td></tr></table></figure><p>可以自己修改上面 normal 、night 、 night eighties 、 night blue 、night bright 在线调试选择自己喜欢的风格。</p><h3 id="添加valine评论系统">添加valine评论系统</h3><p>没有评论系统的博客是没有灵魂的，不仅如此，当前免费开源的评论系统中，valine 因为简洁并且支持匿名留言得到很多博主的喜爱，而像其它的来必力（韩国的）、Gitalk（Github的）等都有这样那样的缺点，不太建议使用。</p><p>需要注意的是valine后台评论保存是依赖于 leancloud的，leancloud 是一个面向个人用户免费的存储系统（当然不止是提供存储功能，还有其它服务），我们需要在 leancloud 官网注册，具体步骤可以看<a href="https://valine.js.org/">valine的官方文档</a>介绍。</p><p>搜索 valine，找到如下配置：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">valine:</span><br><span class="line">  <span class="built_in">enable</span>: <span class="literal">true</span></span><br><span class="line">  appid:   <span class="comment"># your leancloud application appid</span></span><br><span class="line">  appkey:  <span class="comment"># your leancloud application appkey</span></span><br><span class="line">  notify: <span class="literal">false</span> <span class="comment"># mail notifier , https://github.com/xCss/Valine/wiki</span></span><br><span class="line">  verify: <span class="literal">false</span> <span class="comment"># Verification code</span></span><br><span class="line">  placeholder: 留下邮箱，有回复时你将收到提醒，邮箱不会被公开。 <span class="comment"># comment box placeholder</span></span><br><span class="line">  avatar: wavatar <span class="comment"># gravatar style https://valine.js.org/avatar/</span></span><br><span class="line">  guest_info: nick,mail <span class="comment"># custom comment header default: nick,mail,link</span></span><br><span class="line">  pageSize: 10 <span class="comment"># pagination size</span></span><br></pre></td></tr></table></figure><p>注意由于 valine 依赖于 leancloud 存储服务，因此要先去 <a href="https://leancloud.cn">https://leancloud.cn</a> 网站注册，获取到 appid 和 appkey 后放到这里就 ok 了。其中 avatar 是设置默认头像，可以去 <a href="https://valine.js.org/avatar">https://valine.js.org/avatar</a> 选择默认头像，然后在这里设置名字即可。具体使用可以参考<a href="https://valine.js.org/">valine的官方文档</a>。</p><h3 id="开启分享按钮">开启分享按钮</h3><p>百度分享对国内网站来说更友好一些，搜索 baidushare，找到如下代码：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">baidushare:</span><br><span class="line">  <span class="built_in">type</span>: button  <span class="comment"># 设置分享按钮的风格，有button何slide形式</span></span><br></pre></td></tr></table></figure><p>将注释去掉打开即可，虽然说是默认不支持 https 格式，但是网上有解决方案，可以 Google 一下。</p><p>如果嫌麻烦的话，也可以使用下面支持 https 的 needmoreshare。如果要开启 needmoreshare 的话，可以搜索 needmoreshare2，找到如下代码：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">needmoreshare2:</span><br><span class="line">  <span class="built_in">enable</span>: <span class="literal">false</span></span><br><span class="line">  postbottom:</span><br><span class="line">    <span class="built_in">enable</span>: <span class="literal">false</span></span><br><span class="line">    options:</span><br><span class="line">      iconStyle: box</span><br><span class="line">      boxForm: horizontal</span><br><span class="line">      position: bottomCenter</span><br><span class="line">      networks: Weibo,Wechat,Douban,QQZone,Twitter,Facebook</span><br><span class="line">  <span class="built_in">float</span>:</span><br><span class="line">    <span class="built_in">enable</span>: <span class="literal">false</span></span><br><span class="line">    options:</span><br><span class="line">      iconStyle: box</span><br><span class="line">      boxForm: horizontal</span><br><span class="line">      position: middleRight</span><br><span class="line">      networks: Weibo,Wechat,Douban,QQZone,Twitter,Facebook</span><br></pre></td></tr></table></figure><p>注意 needmoreshare2 是依赖 theme-next-needmoreshare2 模块的，可以去 <a href="https://github.com/theme-next/theme-next-needmoreshare2">https://github.com/theme-next/theme-next-needmoreshare2</a> 找到使用方法。</p><h3 id="设置文章阅读量">设置文章阅读量</h3><p>搜索 leancloud_visitors，并进行如下配置：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">leancloud_visitors:</span><br><span class="line">  <span class="built_in">enable</span>: <span class="literal">true</span></span><br><span class="line">  app_id: </span><br><span class="line">  app_key: </span><br><span class="line">  <span class="comment"># Dependencies: https://github.com/theme-next/hexo-leancloud-counter-security</span></span><br><span class="line">  <span class="comment"># If you don&#x27;t care about security in lc counter and just want to use it directly</span></span><br><span class="line">  <span class="comment"># (without hexo-leancloud-counter-security plugin), set the `security` to `false`.</span></span><br><span class="line">  security: <span class="literal">false</span></span><br><span class="line">  betterPerformance: <span class="literal">true</span></span><br></pre></td></tr></table></figure><p>这个功能依赖 hexo-leancloud-counter-security 模块，需要安装该插件。</p><p>注意这个 appid 和 appkey 跟上面开启 valine 评论使用的 leanCloud 是一样的，但是需要在 leancloud 中创建 classes 对象存储，具体方式可以 Google 一下。</p><h3 id="开启不蒜子统计功能">开启不蒜子统计功能</h3><p>目前不蒜子统计网站统计做的还可以，网站访问量主要是分为 pv 和 uv 两种，pv 是指页面访问量，每访问一次或者刷新一次页面后该页面的 pv+1，而 uv 是指独立 ip 访问量，就是说一天内同一 ip 访问一个页面 N 次，uv 都只是 + 最开始的那一次。一般用 pv 作为页面的访问量，uv 作为页面的访客量。</p><p>搜索 busuanzi_count，可以配置如下，也可以使用默认设置。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Show Views/Visitors of the website/page with busuanzi.</span></span><br><span class="line"><span class="comment"># Get more information on http://ibruce.info/2015/04/04/busuanzi/</span></span><br><span class="line">busuanzi_count:</span><br><span class="line">  <span class="built_in">enable</span>: <span class="literal">true</span></span><br><span class="line">  site_uv: <span class="literal">true</span> <span class="comment">#total visitors</span></span><br><span class="line">  site_uv_icon:  <span class="comment">#user-circle</span></span><br><span class="line">  site_uv_header: 你是来访的第</span><br><span class="line">  site_uv_footer: 位小伙伴</span><br><span class="line">  site_pv: <span class="literal">false</span> <span class="comment">#total views</span></span><br><span class="line">  site_pv_icon: eye</span><br><span class="line">  site_pv_header: 访问次数：</span><br><span class="line">  site_pv_footer: 次</span><br><span class="line">  post_views: <span class="literal">false</span></span><br><span class="line">  post_views_icon: eye</span><br></pre></td></tr></table></figure><p>注意其中的 post_views 与上面的 leanCloud_visitors 冲突，两者都是显示文章阅读量，只开启一个就可以了。</p><h3 id="开启本地博客搜索功能">开启本地博客搜索功能</h3><p>提升读者用户体验，博客内肯定是需要一个全局搜索按钮的。当然hexo已经集成了几款开源的搜索插件，一般都使用的是 local_search。</p><p>搜索 local_search，设置代码如下：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Local search</span></span><br><span class="line"><span class="comment"># Dependencies: https://github.com/theme-next/hexo-generator-searchdb</span></span><br><span class="line">local_search:</span><br><span class="line">  <span class="built_in">enable</span>: <span class="literal">true</span></span><br><span class="line">  <span class="comment"># if auto, trigger search by changing input</span></span><br><span class="line">  <span class="comment"># if manual, trigger search by pressing enter key or search button</span></span><br><span class="line">  trigger: auto</span><br><span class="line">  <span class="comment"># show top n results per article, show all results by setting to -1</span></span><br><span class="line">  top_n_per_article: 1</span><br><span class="line">  <span class="comment"># unescape html strings to the readable one</span></span><br><span class="line">  unescape: <span class="literal">false</span>`</span><br></pre></td></tr></table></figure><p>注意该搜索功能需要依赖 <code>hexo-generator-searchdb</code> 插件，依然还是使用命令 <code>npm install hexo-generator-searchdb --save</code> 来进行安装。然后 在 hexo 站点根目录配置文件 _config.xml 的末尾，加入以下代码即可。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">search:</span><br><span class="line">  path: search.xml</span><br><span class="line">  field: post</span><br><span class="line">  format: html</span><br><span class="line">  <span class="built_in">limit</span>: 10000</span><br></pre></td></tr></table></figure><h3 id="修改加载特效">修改加载特效</h3><p>由于网页不可能一直都秒进，总会等待一段时间的，所以可以修改一下加载的特效。Next 已经集成了很多加载特效，可以在下面选项中在线调试测试一下。</p><p>搜索 pace，找到如下代码：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Progress bar in the top during page loading.</span></span><br><span class="line">pace: <span class="literal">false</span></span><br><span class="line"><span class="comment"># Themes list:</span></span><br><span class="line"><span class="comment">#pace-theme-big-counter</span></span><br><span class="line"><span class="comment">#pace-theme-bounce</span></span><br><span class="line"><span class="comment">#pace-theme-barber-shop</span></span><br><span class="line"><span class="comment">#pace-theme-center-atom</span></span><br><span class="line"><span class="comment">#pace-theme-center-circle</span></span><br><span class="line"><span class="comment">#pace-theme-center-radar</span></span><br><span class="line"><span class="comment">#pace-theme-center-simple</span></span><br><span class="line"><span class="comment">#pace-theme-corner-indicator</span></span><br><span class="line"><span class="comment">#pace-theme-fill-left</span></span><br><span class="line"><span class="comment">#pace-theme-flash</span></span><br><span class="line"><span class="comment">#pace-theme-loading-bar</span></span><br><span class="line"><span class="comment">#pace-theme-mac-osx</span></span><br><span class="line"><span class="comment">#pace-theme-minimal</span></span><br><span class="line"><span class="comment"># For example</span></span><br><span class="line"><span class="comment"># pace_theme: pace-theme-center-simple</span></span><br><span class="line">pace_theme: pace-theme-center-radar <span class="comment">#默认设置，可以修改为上述任何一个</span></span><br></pre></td></tr></table></figure><p>可以自己修改后使用 <code>hexo s</code> 本地调试挑选自己喜欢的加载样式。</p><h3 id="开启3D背景">开启3D背景</h3><p>给博客添加 3D 背景特效，说实话我只在最开始折腾博客的时候开过，后来为了提升响应速度，这些不必要的东西都给关闭了。</p><p>配置文件中代码如下：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Canvas-nest</span></span><br><span class="line">canvas_nest: <span class="literal">false</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># three_waves</span></span><br><span class="line">three_waves: <span class="literal">false</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># canvas_lines</span></span><br><span class="line">canvas_lines: <span class="literal">false</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># canvas_sphere</span></span><br><span class="line">canvas_sphere: <span class="literal">false</span></span><br></pre></td></tr></table></figure><p>默认为 false，可以自己逐一设置为 true 然后在本地调试查看3D效果。</p><h2 id="Next主题进阶优化配置">Next主题进阶优化配置</h2><p>在介绍完 Next 主题的基本配置后，下面才是本文的重头戏，在 Next 进阶配置时，一定需要你懂一些 CSS 和基本的前端知识，不然报错了可能你根本无从寻找问题原因，或者在进行大面积修改前先将主题备份一份，这样出错后找不到原因还能及时止损😂 。</p><h3 id="学会使用浏览器F12定位样式">学会使用浏览器F12定位样式</h3><p>发现页面有大量留白？颜色不合自己口味？那就 F12 开始吧，大换装开始！空白区？颜色？背景？圆角矩形？阴影？透明度？超链接样式？侧栏头像圆形并旋转？文章标题前面的竖线和颜色？只需按下 F12，改到自己想要的样式，然后 Copy 到 <code>custom.styl</code> 文件即可。感觉这是 NexT 主题非常棒的设计，因为这让我们能够很方便自定义博客的样式。怎么知道要修改这个文件呢？ 强烈推荐阅读<a href="http://www.cduyzh.com/hexo-settings-3/">这篇文章</a>。</p><h4 id="怎么修改？">怎么修改？</h4><p>浏览器按 F12 即可，建议用 <a href="http://down.tech.sina.com.cn/content/40975.html">Google Chrome 浏览器</a>（有梯子的直接去 Google 下载😂），或者<a href="http://www.firefox.com.cn/download/">火狐浏览器</a>。因为这两个浏览器属于标准浏览器，如果你按下 F12 后简直特么一脸懵逼，那么别急，硬着头皮慢慢折腾吧哈哈哈嗝～</p><h4 id="快速懵逼到熟悉">快速懵逼到熟悉</h4><p>首先按下 F12 后的操作流程图，就是<a href="https://yangbingdong.com/2017/build-blog-hexo-advanced/#%E5%AE%9A%E4%BD%8D%E5%85%83%E7%B4%A0">这篇文章</a>中的三步骤，点小箭头定位元素，调试 CSS 代码，最后 Copy 到 <code>custom.styl</code> 。然后懵逼的地方，应该有下面两点：</p><ol><li>按下 F12 后弹出的界面是什么鬼？！</li><li>界面中的 <code>&#123;&#125;</code> 前面的和里面的英文是什么鬼？！</li></ol><p>第一点：弹出的界面是为调试设计的，如果你知道调试的是啥，也许就自然了解弹出的界面，所以我不多说，不过还是给一份 Google 官方的资料——<a href="https://developers.google.com/web/tools/chrome-devtools/">Chrome 开发者工具</a>。第二点：<code>&#123;&#125;</code> 前面的是 HTML 的元素名，<code>&#123;&#125;</code> 里面的是这个元素的 CSS 样式。</p><p>社交要先有自己原则，一段代码要先声明变量，一个数学问题有前提，一篇论文要先定义名词，到这里我们也必须要先了解一些 HTML 和 CSS 的基本语法知识了，才能继续折腾下去。建议先浏览下 MDN 的 <a href="https://developer.mozilla.org/zh-CN/docs/Web/HTML">HTML</a> 和 <a href="https://developer.mozilla.org/zh-CN/docs/Web/CSS">CSS</a> 的页面，但没必要记住里面的每一个语法知识，因为这样的记忆是不够深刻也并不高效的，只要浏览下留个印象（为了能找准元素）就行，而记忆是要在实践中记忆的。</p><h4 id="附上我的cutom-styl">附上我的cutom.styl</h4><p>由于原代码比较长，我在<a href="https://hasaik.com/posts/dff7e11c.html">另外一篇博客</a>中已经有专门分享，注意千万不要照搬到你的 <code>custom.styl</code> ！一定要先找对应元素再修改，为了方便大家查看我已经做了一定的注释，仅供大家参考！</p><h3 id="修改博客字体">修改博客字体</h3><p>博客影响美观的除了样式，就是直接映入读者眼睛的字体了，因此选择一款优雅的字体对博客美感的提升是非常大的，当然，博客字体大小是可以直接修改的：</p><p>文件位置：hexo/themes/next/source/css/_variables/base.styl</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$font</span>-size-base = 16px</span><br></pre></td></tr></table></figure><p>如果你对字体的选择比较感兴趣，推荐阅读：</p><ol><li><a href="https://www.voyax.me/posts/59710/">Web 中文字体排版指南</a></li><li><a href="https://blog.coding.net/blog/Web-Fonts">Web 字体的选择和运用</a></li><li><a href="https://segmentfault.com/a/1190000006110417">如何优雅的选择默认字体（font-family）</a></li><li><a href="http://www.ruanyifeng.com/blog/2014/07/chinese_fonts.html">中文字体网页开发指南</a></li><li><a href="https://csspod.com/using-the-system-font-in-web-content/">在 Web 内容中使用系统字体</a></li></ol><p>首先对于汉字来说，因为其字体库太大，通常都是调用本地中文字体库。然而，不同设备有不同默认中文字体和中文字体库，想要尽可能在不同设备上有较好的显示效果，就要在调用不同设备的本地字体库中显示效果较好的中文字体。下面附上我参考的大佬的字体选择：</p><p>文件位置：hexo/themes/next/source/css/_variables/base.styl</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">// Font families.</span><br><span class="line"><span class="variable">$font</span>-family-chinese      = <span class="string">&quot;Noto Serif SC&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="variable">$font</span>-family-base         = <span class="variable">$font</span>-family-chinese, sans-serif</span><br><span class="line"><span class="variable">$font</span>-family-base         = get_font_family(<span class="string">&#x27;global&#x27;</span>), <span class="variable">$font</span>-family-chinese, sans-serif <span class="keyword">if</span> get_font_family(<span class="string">&#x27;global&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="variable">$font</span>-family-logo         = <span class="variable">$font</span>-family-base</span><br><span class="line"><span class="variable">$font</span>-family-logo         = get_font_family(<span class="string">&#x27;logo&#x27;</span>), <span class="variable">$font</span>-family-base <span class="keyword">if</span> get_font_family(<span class="string">&#x27;logo&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="variable">$font</span>-family-headings     = <span class="variable">$font</span>-family-base</span><br><span class="line"><span class="variable">$font</span>-family-headings     = get_font_family(<span class="string">&#x27;headings&#x27;</span>), <span class="variable">$font</span>-family-base <span class="keyword">if</span> get_font_family(<span class="string">&#x27;headings&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="variable">$font</span>-family-posts        = <span class="variable">$font</span>-family-base</span><br><span class="line"><span class="variable">$font</span>-family-posts        = get_font_family(<span class="string">&#x27;posts&#x27;</span>), <span class="variable">$font</span>-family-base <span class="keyword">if</span> get_font_family(<span class="string">&#x27;posts&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="variable">$font</span>-family-monospace    = consolas, Menlo, <span class="variable">$font</span>-family-chinese, monospace</span><br><span class="line"><span class="variable">$font</span>-family-monospace    = get_font_family(<span class="string">&#x27;codes&#x27;</span>), consolas, Menlo, <span class="variable">$font</span>-family-chinese, monospace <span class="keyword">if</span> get_font_family(<span class="string">&#x27;codes&#x27;</span>)</span><br></pre></td></tr></table></figure><p>注意：要想 NexT 主题的简体中文字体配置生效，站点配置文件中的 language 必须为 zh-CN。然后对于英文字体，因为其字体库很小，所以想要个性化就简单多了。首先去 <a href="https://fonts.google.com/">Google Fonts</a> 找自己喜欢的英文字体，然后编辑主题配置文件，可以查看一下 NexT <a href="http://theme-next.iissnan.com/theme-settings.html#fonts-customization">官方文档</a>（<a href="https://theme-next.org/docs/theme-settings/#Fonts-Customization">最新版</a>）。下面附上我参考的大佬的英文字体选择：</p><p>文件位置：hexo/themes/next/_config.yml</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">font:</span><br><span class="line">  <span class="built_in">enable</span>: <span class="literal">true</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># Uri of fonts host. E.g. //fonts.googleapis.com (Default).</span></span><br><span class="line">  <span class="comment"># Google 字体 国内镜像</span></span><br><span class="line">  host:</span><br><span class="line"></span><br><span class="line">  <span class="comment"># Font options:</span></span><br><span class="line">  <span class="comment"># `external: true` will load this font family from `host` above.</span></span><br><span class="line">  <span class="comment"># `family: Times New Roman`. Without any quotes.</span></span><br><span class="line">  <span class="comment"># `size: xx`. Use `px` as unit.</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># Global font settings used on &lt;body&gt; element.</span></span><br><span class="line">  global:</span><br><span class="line">    external: <span class="literal">true</span></span><br><span class="line"><span class="comment">#    family: Lato</span></span><br><span class="line">    family: EB Garamond <span class="comment"># 字体参考：https://io-oi.me/tech/noto-serif-sc-added-on-google-fonts/#main</span></span><br><span class="line">    size: 16</span><br><span class="line"></span><br><span class="line">  <span class="comment"># Font settings for Headlines (h1, h2, h3, h4, h5, h6).</span></span><br><span class="line">  <span class="comment"># Fallback to `global` font settings.</span></span><br><span class="line">  headings:</span><br><span class="line">    external: <span class="literal">true</span></span><br><span class="line">    family:</span><br><span class="line">    size:</span><br><span class="line"></span><br><span class="line">  <span class="comment"># Font settings for posts.</span></span><br><span class="line">  <span class="comment"># Fallback to `global` font settings.</span></span><br><span class="line">  posts:</span><br><span class="line">    external: <span class="literal">true</span></span><br><span class="line">    family:</span><br><span class="line"></span><br><span class="line">  <span class="comment"># Font settings for Logo.</span></span><br><span class="line">  <span class="comment"># Fallback to `global` font settings.</span></span><br><span class="line">  logo:</span><br><span class="line">    external: <span class="literal">true</span></span><br><span class="line">    family:</span><br><span class="line">    size:</span><br><span class="line"></span><br><span class="line">  <span class="comment"># Font settings for &lt;code&gt; and code blocks.</span></span><br><span class="line">  codes:</span><br><span class="line">    external: <span class="literal">true</span></span><br><span class="line">    family:</span><br><span class="line">    size:</span><br></pre></td></tr></table></figure><p>其它字体设置可以参考<a href="https://io-oi.me/tech/noto-serif-sc-added-on-google-fonts.html">这篇文章</a>。</p><h3 id="博客推广及优化">博客推广及优化</h3><p>想要自己写的博客能被别人看到？希望能得到别人的评论肯定？渴望分享技术？那么博客推广肯定是必不可少了😙。</p><h4 id="手动推广">手动推广</h4><p>大概就是在其它博客或者视频等信息流下面留下自己的博客地址，比如第一件事咱们可以去 next 主题<a href="https://github.com/iissnan/hexo-theme-next/issues/119">专门的博客分享的issue区</a>留下自己的爪印，或者在搜索引擎中搜索使用 hexo+next 搭建博客的热门教程中，在评论区留下地址，这样就可以手动引流啦。</p><h4 id="搜索引擎SEO收录">搜索引擎SEO收录</h4><p>当然手动引流不是长久之计，搜索引擎是互联网上寻找资源的重要手段，而要让别人能够在搜索结果中看到自己的博客文章链接，就必须让搜索引擎收录，怎么操作呢？</p><p>可以直接参考<a href="http://www.ehcoo.com/seo.html">这篇文章</a>，写的很详细，学会自己使用站长工具抓取自己的网页，然后请求搜索引擎收录 ，查看收录量可以在百度或者 Google 中使用 <code>site:hasaik.com</code> 即site:后面加上域名的方式，如果你是使用 Github Pages，由于百度是默认不抓取 Github 的，所以也需要使用上述方式进行提交。</p><p>其它优化可以看我的<a href="https://hasaik.com/posts/495d0b23.html">另外一篇博客</a>。</p><h4 id="间接影响">间接影响</h4><p>除了直接被搜索引擎收录之外，如果有其它被搜索引擎收录的文章中，引用你的某篇文章的链接地址，那么同样可以引流到你的博客，这种称为间接影响，不要小看间接影响，如果你的博客写的很好，经常被引用的话，那么间接影响带来的流量是非常巨大的，但是其中会有一个问题，通过“引流”到达的流量，你需要尽可能地将用户留在自己的博客上，那么如何吸引用户呢？当然是有两个方面：</p><ol><li>博客装饰美观</li><li>文章质量高</li></ol><p>读者的第一印象往往是读者需要阅读的内容的质量，如果质量达到要求，那么读者会注意到博客的界面，如果界面很特别的话，那么读者肯定是马上加入了标签，并且选择多停留一下继续浏览博客的其它内容，那么这里就会引出另外一个问题，就是博客的响应速度，如果读者点击某篇文章或者按钮后响应了半天空白，那么你猜他会怎么做？肯定是直接右上角了啊，所以博客的响应速度一定要优化好。</p><p>如果做到上面三点，那么就算好不容易「骗」到一个浏览量，但是这个读者马上被博客和文章惊呆了，看完文章后，这读者心里美滋滋，认为这么好的文章（博客）必须分享啊🌚，于是可能马上来了一大批满怀期待的读者，然后这批读者又……这时文章的读者数（博客的访问量）就不是简单的加法了～</p><h4 id="知识平台">知识平台</h4><p>直接或间接因为 Google 这样的搜索引擎而来的读者，绝大部分都是技术人员，而他们只希望尽快解决自己的技术问题，这也是他们的目的，这就意味着博客上的一首诗还是很难被欣赏。而要想照亮他人，他人必须要能懂自己的文章，这样也才可能有更强的交互——评论。所以为了不浪费自己的光能，能把自己的光能完完整整地贡献给文明，那就必须也让一首诗也有评论，怎么做呢？让读者的类型多样化，不限于技术人员。还好现在大部分读者也不用搜索引擎了，谁在吞食搜索引擎的用户？移动端。智能手机的迅速普及导致搜索引擎已经不是人们获取知识的主要途径，大部分人已经将手机 APP 上的知识平台作为自己获取知识的主要途径，比如：知乎、简书、微信订阅号……所以，你还可以将自己的文章发布在这些知识平台上的相应分类上，然后留个博客链接，吸引更多类型的读者😄～</p><h4 id="谷歌分析">谷歌分析</h4><p>你怎么知道自己推广的效果？你怎么知道有没有人看了自己的博客？哪篇文章最受欢迎？此时有没有人正浏览着自己的博客？自己的文章有没有被引用？这时最常用的就是强大免费的 <a href="https://analytics.google.com/">Google Analytics</a>，推荐博客建好后，就立即使用。</p><p>如何使用？请务必自备梯子查看 <a href="https://analytics.google.com/analytics/academy/course/6">Google 官方的教程</a>，开始使用后一定要按照里面的设置，先添加多份 view（数据视图）。</p><h3 id="文章底部加上评分小星星">文章底部加上评分小星星</h3><p>淘宝买东西，作为消费者的我们，看评价很重要。现在作为博主，写了一篇文章，很期待读者的反馈。而与淘宝一样，确认收货后，相比评论，更愿意五星好评。那么博客文章怎么加上呢？首先打开主题配置文件：</p><p>文件位置：hexo/themes/next/_config.yml</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Star rating support to each article.</span></span><br><span class="line"><span class="comment"># To get your ID visit https://widgetpack.com</span></span><br><span class="line">rating:</span><br><span class="line">  <span class="built_in">enable</span>: <span class="literal">true</span></span><br><span class="line">  id:     </span><br><span class="line">  color: f79533</span><br></pre></td></tr></table></figure><p>先去注释中的<a href="https://widgetpack.com">网站</a>，首页点 Rating，然后注册个帐号，填一下自己博客的信息，左上角有个 ID，填进主题配置文件中就行，<code>color</code> 改成自己喜欢的即可。另：</p><ol><li>可以配置评分方式，侧栏 &gt; Rating &gt; Setting，建议用 IP address 或 Device(cookie)，免登录，毕竟 Socials 里面的选项几乎都被墙，不适合国内网络环境。</li><li>建议在侧栏 &gt; Site &gt; Setting 中勾选 Private 选项。</li><li>上面两步勾选后别忘了点击页面右下方的 SAVE SETTING 绿色按钮保存。</li></ol><p>如果感觉上下留白太多，咋整？浏览器 F12 找元素，调成自己喜欢的值，然后 Copy 到 <code>custom.styl</code> 即可。经过上面的配置，默认最下面只会显示 5 颗小星星，简洁但不明了😂，怎么加上文字说明呢？编辑下面这个文件，Ctrl + F 搜索 <code>rating</code> ，找到这段，对比我给出的，在绿色这行所示的位置，加上自己想要的说明和样式即可。</p><p>文件位置：hexo/themes/next/layout/_macro/post.swig</p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;% if theme.rating.enable %&#125;</span><br><span class="line">&lt;div class=&quot;wp_rating&quot;&gt;</span><br><span class="line"><span class="addition">+            &lt;div style=&quot;color: rgba(0, 0, 0, 0.75); font-size:13px; letter-spacing:3px&quot;&gt;(&amp;gt;看完记得五星好评哦亲&amp;lt;)&lt;/div&gt;</span></span><br><span class="line">&lt;div id=&quot;wpac-rating&quot;&gt;&lt;/div&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&#123;% endif %&#125;</span><br></pre></td></tr></table></figure><h3 id="为站点添加标题崩溃特效">为站点添加标题崩溃特效</h3><p>该特效为：当用户离开站点相关的页面时，网页的标题会变成已崩溃，网站图标也会改变；当用户重新回到站点页面时才会恢复正常。</p><p>实现方式：</p><p>在 <code>/themes/next/source/js/src/</code> 目录下新建 <code>crash_cheat.js</code> ，代码如下：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">$(window).load(<span class="function"><span class="title">function</span></span> () &#123;</span><br><span class="line">//整合页面欺骗特效 window.onload有冲突</span><br><span class="line">    var OriginTitile = document.title;</span><br><span class="line">    var titleTime;</span><br><span class="line">    document.addEventListener(<span class="string">&#x27;visibilitychange&#x27;</span>, <span class="function"><span class="title">function</span></span> () &#123;</span><br><span class="line">        <span class="keyword">if</span> (document.hidden) &#123;</span><br><span class="line">            $(<span class="string">&#x27;[rel=&quot;icon&quot;]&#x27;</span>).attr(<span class="string">&#x27;href&#x27;</span>, <span class="string">&quot;../../images/failure.png&quot;</span>);</span><br><span class="line">            $(<span class="string">&#x27;[rel=&quot;shortcut icon&quot;]&#x27;</span>).attr(<span class="string">&#x27;href&#x27;</span>, <span class="string">&quot;../../images/failure.png&quot;</span>);</span><br><span class="line">            document.title = <span class="string">&#x27;(つェ⊂) 我藏好了哦~ &#x27;</span>;</span><br><span class="line">            clearTimeout(titleTime);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            $(<span class="string">&#x27;[rel=&quot;icon&quot;]&#x27;</span>).attr(<span class="string">&#x27;href&#x27;</span>, <span class="string">&quot;../../images/favicon.png&quot;</span>);</span><br><span class="line">            $(<span class="string">&#x27;[rel=&quot;shortcut icon&quot;]&#x27;</span>).attr(<span class="string">&#x27;href&#x27;</span>, <span class="string">&quot;../../images/favicon.png&quot;</span>);</span><br><span class="line">            document.title = <span class="string">&#x27;o(^▽^)o 被你发现啦~ &#x27;</span>;</span><br><span class="line">            titleTime = setTimeout(<span class="function"><span class="title">function</span></span> () &#123;</span><br><span class="line">                document.title = OriginTitile;</span><br><span class="line">            &#125;, 2000);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>在 <code>/themes/next/layout/_layout.swig</code> 文件末尾（ps：我相信各位引入js的位置应该都知道），添加引用：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--崩溃欺骗--&gt;</span><br><span class="line">&lt;script <span class="built_in">type</span>=<span class="string">&quot;text/javascript&quot;</span> src=<span class="string">&quot;/js/src/crash_cheat.js&quot;</span>&gt;&lt;/script&gt;</span><br></pre></td></tr></table></figure><p>上面的图片放在 <code>/themes/next/source/images/</code> 目录下，自行选择喜欢的图片即可。</p><h3 id="每篇文章末尾添加致谢">每篇文章末尾添加致谢</h3><p><img src="https://s2.ax1x.com/2019/11/14/MtQLeH.png" class="lazyload placeholder" data-srcset="https://s2.ax1x.com/2019/11/14/MtQLeH.png" srcset="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/site-img/img-loading.gif" alt="致谢"></p><p>在 <code>hexo/themes/next/layout/_macro</code> 中新建一个 <code>passage-end-tag.swig</code> 文件，并添加如下内容：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;div&gt;</span><br><span class="line">    &#123;% <span class="keyword">if</span> not is_index %&#125;</span><br><span class="line">        &lt;div class=<span class="string">&quot;read-over&quot;</span>&gt;-------------------本文结束 &lt;i class=<span class="string">&quot;fa fa-paw&quot;</span>&gt;&lt;/i&gt; 感谢您的阅读-------------------&lt;/div&gt;</span><br><span class="line">    &#123;% endif %&#125;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure><p>接着打开 <code>\themes\next\layout\_macro\post.swig</code> 文件，在 <code>post-body</code> 之后， <code>post-footer</code> 之前添加如下画绿色部分代码（post-footer 之前两个 div）：</p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="addition">+ &lt;div&gt;</span></span><br><span class="line"><span class="addition">+  &#123;% if not is_index %&#125;</span></span><br><span class="line"><span class="addition">+    &#123;% include &#x27;passage-end-tag.swig&#x27; %&#125;</span></span><br><span class="line"><span class="addition">+  &#123;% endif %&#125;</span></span><br><span class="line"><span class="addition">+ &lt;/div&gt;</span></span><br><span class="line"></span><br><span class="line">&lt;footer class=&quot;post-footer&quot;&gt;</span><br></pre></td></tr></table></figure><p>最后，在主题配置文件下，在末尾添加：</p><p>文件位置：hexo/themes/next/_config.xml</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 文章末尾添加&quot;本文结束&quot;标记</span></span><br><span class="line">passage_end_tag:</span><br><span class="line">  enabled: <span class="literal">true</span></span><br></pre></td></tr></table></figure><h3 id="新增文章时自动打开Markdown编辑器">新增文章时自动打开Markdown编辑器</h3><p>由于每次在 GitBash 中使用 <code>hexo n &quot;文章名称&quot;</code> 时还要自己去本地目录中打开编辑器，这对于懒癌患者来说实在是太麻烦了😂，那么不如实现一个监听的 js 代码监听新建文章的命令，只要监听到了就自动打开相应的 Markdown编辑器，这样不就方便多了嘛！</p><p>首先在 <code>hexo/scripts</code> 下新建一个 <code>newpost.js</code> 文件，如果没有 <code>scripts</code> 文件可以手动创建一个。</p><p>如果你是 windows 用户，在这个文件中写入如下代码：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> spawn = <span class="built_in">require</span>(<span class="string">&#x27;child_process&#x27;</span>).exec;</span><br><span class="line">hexo.on(<span class="string">&#x27;new&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params">data</span>)</span>&#123;</span><br><span class="line">  spawn(<span class="string">&#x27;start  &quot;markdown编辑器绝对路径.exe&quot; &#x27;</span> + data.path);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>如果是 mac 用户，就写入如下代码：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> exec = <span class="built_in">require</span>(<span class="string">&#x27;child_process&#x27;</span>).exec;</span><br><span class="line">hexo.on(<span class="string">&#x27;new&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params">data</span>)</span>&#123;</span><br><span class="line">    exec(<span class="string">&#x27;open -a &quot;markdown编辑器绝对路径.app&quot; &#x27;</span> + data.path);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>注意里面要修改的是 Markdown 编辑器的绝对路径，我使用的是 Typora ，所以我的绝对路径是 <code>E:\\Typora\\bin\\Typora.exe</code> ，大家可以对应进行修改。</p><h3 id="使用hexo-admin在线发布文章">使用hexo-admin在线发布文章</h3><p>最近有不少小伙伴问我这个博客如何在线发布文章，毕竟大多数人都是程序小白，不想使用 GitBash 命令行敲各种命令。所以也有大神做一个 hexo-admin 管理工具，虽然这个东西没有适配完全，但是对于文章管理的基本功能够用。</p><a href=https://github.com/jaredly/hexo-admin target='_blank' class='LinkCard'><style type=text/css>.LinkCard,.LinkCard:hover{text-decoration:none;border:none!important;color:inherit!important}.LinkCard{position:relative;display:block;margin:5px auto;width:330px;box-sizing:border-box;border-radius:12px;max-width:100%;overflow:hidden;color:inherit;text-decoration:none}.ztext{word-break:break-word;line-height:1.6}.LinkCard-backdrop{position:absolute;top:0;left:0;right:0;bottom:0;background-repeat:no-repeat;-webkit-filter:blur(20px);filter:blur(20px);background-size:cover;background-position:center}.LinkCard,.LinkCard:hover{text-decoration:none;border:none!important;color:inherit!important}.LinkCard-content{position:relative;display:flex;align-items:center;justify-content:space-between;padding:12px;border-radius:inherit;background-color:rgba(246,246,246,0.88)}.LinkCard-text{overflow:hidden;width:260px;}.LinkCard-title{white-space: nowrap;display:-webkit-box;-webkit-line-clamp:2;overflow:hidden;text-overflow:ellipsis;max-height:calc(16px * 1.25 * 2);font-size:16px;font-weight:500;line-height:1.25;color:#1a1a1a}@media(max-width: 767px){.LinkCard-title{font-size:13px;}}.LinkCard-meta{display:flex;margin-top:4px;font-size:14px;line-height:20px;color:#999;white-space:nowrap}.LinkCard-imageCell{margin-left:28px;border-radius:30px;width:70px;}.LinkCard-image{background-image:url('https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/linkcard/spider-man.png');background-size: 100% 100%;display:block;width:65px;height:65px;border-radius:inherit;margin-bottom: 0 !important;}</style><span class=LinkCard-backdrop style=background-image:url(https://zhstatic.zhihu.com/assets/zhihu/editor/zhihu-card-default.svg)></span><span class=LinkCard-content><span class=LinkCard-text><span class=LinkCard-title>hexo-admin官方地址</span><span class=LinkCard-meta><span style=display:inline-flex;align-items:center><svg class='Zi Zi--InsertLink' fill=currentColor viewBox='0 0 24 24' width=17 height=17><path d='M6.77 17.23c-.905-.904-.94-2.333-.08-3.193l3.059-3.06-1.192-1.19-3.059 3.058c-1.489 1.489-1.427 3.954.138 5.519s4.03 1.627 5.519.138l3.059-3.059-1.192-1.192-3.059 3.06c-.86.86-2.289.824-3.193-.08zm3.016-8.673l1.192 1.192 3.059-3.06c.86-.86 2.289-.824 3.193.08.905.905.94 2.334.08 3.194l-3.059 3.06 1.192 1.19 3.059-3.058c1.489-1.489 1.427-3.954-.138-5.519s-4.03-1.627-5.519-.138L9.786 8.557zm-1.023 6.68c.33.33.863.343 1.177.029l5.34-5.34c.314-.314.3-.846-.03-1.176-.33-.33-.862-.344-1.176-.03l-5.34 5.34c-.314.314-.3.846.03 1.177z' fill-rule=evenodd></path></svg></span><span style='margin-top: -0.1rem;'>https://github.com/jaredly/hexo-admin</span></span></span><span class='LinkCard-imageCell'><div class='LinkCard-image'></div></span></span></a><p>官方在线演示地址：<a href="https://jaredforsyth.com/hexo-admin/admin/#/">https://jaredforsyth.com/hexo-admin/admin/#/</a></p><p>要使用这个工具，首先需要安装插件：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install --save hexo-admin</span><br></pre></td></tr></table></figure><p>安装完成后，要启动的话，使用 <code>hexo s -d</code> 命令，然后打开网址 <code>localhost:4000/admin/</code> 进行登录就可以管理后台了。</p><div class="note"><p>warning,注意，安装 hexo-admin 插件后，启动后台页面时 GitBash 可能还是会报错，这是由于 hexo-admin 自身还依赖很多个插件，报错信息上只要提示缺少 module “xxx”时，你只要继续使用上面的命令安装缺少的那个插件xxx就可以了，我当时好像连续装了十几个插件才最终启动成功🌚…</p></div><p>安装好后，还需要设置登录的账号密码，不然谁都可以使用你的后台管理。第一次登录后，进入 <code>setting</code> 菜单，点击 <code>Setup authentification here</code> 进入用户名密码设置项，按照提示设置后，把生成的代码添加到 <code>hexo/_config.xml</code> 中，如：</p><p>安装好后，还需要设置登录的账号密码，不然谁都可以使用你的后台管理。第一次登录后，进入 <code>setting</code> 菜单，点击 <code>Setup authentification here</code> 进入用户名密码设置项，按照提示设置后，把生成的代码添加到 <code>hexo/_config.xml</code> 中，如：</p><p>文件位置：hexo/_config.xml</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># hexo-admin authentification</span></span><br><span class="line">admin:</span><br><span class="line">  username: xuxu</span><br><span class="line">  password_hash: $2a$10<span class="variable">$anOUoIka5uKSupfpNtu6IOSPvsj2OTPOXC2qpewkP1DmrTZr39Va6</span></span><br><span class="line">  secret: my blog</span><br></pre></td></tr></table></figure><p>其中密码是在你设置后进行加密的。</p><p>最后在线 deploy 时，可以打开 <code>Deploy</code> 菜单，第一次点击 Deploy 时会提示 <code>Error: Config value &quot;admin.deployCommand&quot; not found</code> ，这个问题作者已经解决，在上面的配置中添加一行配置：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">admin:</span><br><span class="line">  deployCommand: <span class="string">&#x27;./hexo-deploy.sh&#x27;</span></span><br></pre></td></tr></table></figure><p>就可以在线部署到 Github 了！</p><h3 id="Hexo-abbrlink生成唯一文章链接">Hexo-abbrlink生成唯一文章链接</h3><p>一个 <a href="https://hexo.io/plugins/">Hexo插件</a> ，用于根据帖子标题生成静态帖子链接。</p><p>首先需要安装插件，博客站点下执行下面命令：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-abbrlink --save</span><br></pre></td></tr></table></figure><div class="note"><p>danger,执行此命令可能会不成功，提示你缺少相应的依赖，比如babel-eslint、mini-css-extract-plugin、webpack-cli…<br>使用npm命令安装即可，比如 <code>npm install eslint@4.x babel-eslint@8 --save-dev</code></p></div><p>修改站点配置文件 <code>config.yml</code> 文件中的永久链接：</p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="deletion">- permalink: year/:month/:day/:title/</span></span><br><span class="line"><span class="addition">+ permalink: posts/:abbrlink.html</span></span><br></pre></td></tr></table></figure><p>在 permalink 下面写入下面的内容：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># abbrlink config</span></span><br><span class="line">abbrlink:</span><br><span class="line">  alg: crc32  <span class="comment"># 算法：crc16(default) and crc32</span></span><br><span class="line">  rep: hex    <span class="comment"># 进制：dec(default) and hex</span></span><br></pre></td></tr></table></figure><p>示例：<a href="https://hasaik.com/posts/ab21860c.html">https://hasaik.com/posts/ab21860c.html</a> ，其中 <code>ab21860c.html</code> 就是生成的永链。</p><h3 id="修改侧栏滚动条样式">修改侧栏滚动条样式</h3><p>默认的侧栏滚动条其实挺丑的，添加如下代码重新渲染页面就可以修改侧栏滚动条了。</p><p>文件位置：hexo/themes/next/source/css/_custom/custom.styl</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*更好的侧边滚动条*/</span></span><br><span class="line"><span class="selector-pseudo">::-webkit-scrollbar</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">10px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">10px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-pseudo">::-webkit-scrollbar-button</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-pseudo">::-webkit-scrollbar-button</span><span class="selector-pseudo">:start</span><span class="selector-pseudo">:increment</span>,<span class="selector-pseudo">::-webkit-scrollbar-button</span><span class="selector-pseudo">:end</span><span class="selector-pseudo">:decrement</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: none;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-pseudo">::-webkit-scrollbar-corner</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: block;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-pseudo">::-webkit-scrollbar-thumb</span> &#123;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">8px</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="built_in">rgba</span>(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,.<span class="number">2</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-pseudo">::-webkit-scrollbar-thumb</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">8px</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="built_in">rgba</span>(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,.<span class="number">5</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-pseudo">::-webkit-scrollbar-track</span>,<span class="selector-pseudo">::-webkit-scrollbar-thumb</span> &#123;</span><br><span class="line">  <span class="attribute">border-right</span>: <span class="number">1px</span> solid transparent;</span><br><span class="line">  <span class="attribute">border-left</span>: <span class="number">1px</span> solid transparent;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-pseudo">::-webkit-scrollbar-track</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="built_in">rgba</span>(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,.<span class="number">15</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-pseudo">::-webkit-scrollbar-button</span><span class="selector-pseudo">:start</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">10px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">10px</span>;</span><br><span class="line">  <span class="comment">/*background: url(../images/scrollbar_arrow.png) no-repeat 0 0;*/</span>  <span class="comment">/*可以添加滚动条样式*/</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="侧栏加入已运行的时间">侧栏加入已运行的时间</h3><p>我们都有自己的生日，都知道自己的岁数，那为什么不给博客加上，让读者知道博客的年纪呢？操作很简单，而且不是精确到年而是精确到秒，233333～</p><p>首先加入以下代码：</p><p>文件位置：hexo/themes/next/layout/_custom/sidebar.swig</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=<span class="string">&quot;days&quot;</span>&gt;&lt;/div&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line"><span class="keyword">function</span> <span class="function"><span class="title">show_date_time</span></span>()&#123;</span><br><span class="line">    window.setTimeout(<span class="string">&quot;show_date_time()&quot;</span>, 1000);</span><br><span class="line">    BirthDay=new Date(<span class="string">&quot;05/27/2017 15:13:14&quot;</span>);</span><br><span class="line">    today=new Date();</span><br><span class="line">    timeold=(today.getTime()-BirthDay.getTime());</span><br><span class="line">    sectimeold=timeold/1000</span><br><span class="line">    secondsold=Math.floor(sectimeold);</span><br><span class="line">    msPerDay=24*60*60*1000</span><br><span class="line">    e_daysold=timeold/msPerDay</span><br><span class="line">    daysold=Math.floor(e_daysold);</span><br><span class="line">    e_hrsold=(e_daysold-daysold)*24;</span><br><span class="line">    hrsold=setzero(Math.floor(e_hrsold));</span><br><span class="line">    e_minsold=(e_hrsold-hrsold)*60;</span><br><span class="line">    minsold=setzero(Math.floor((e_hrsold-hrsold)*60));</span><br><span class="line">    seconds=setzero(Math.floor((e_minsold-minsold)*60));</span><br><span class="line">    document.getElementById(<span class="string">&#x27;days&#x27;</span>).innerHTML=<span class="string">&quot;已运行 &quot;</span>+daysold+<span class="string">&quot; 天 &quot;</span>+hrsold+<span class="string">&quot; 小时 &quot;</span>+minsold+<span class="string">&quot; 分 &quot;</span>+seconds+<span class="string">&quot; 秒&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">function</span> setzero(i) &#123;</span><br><span class="line">    <span class="keyword">if</span> (i&lt;10) &#123;</span><br><span class="line">        i=<span class="string">&quot;0&quot;</span> + i</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="built_in">return</span> i;</span><br><span class="line">&#125;</span><br><span class="line">show_date_time();</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><p>上面 <code>Date</code> 的值记得改为你自己的，且按上面格式，然后修改：</p><p>文件位置：hexo/themes/next/layout/_macro/sidebar.swig</p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">        &#123;# Blogroll #&#125;</span><br><span class="line">        &#123;% if theme.links %&#125;</span><br><span class="line">          &lt;div class=&quot;links-of-blogroll motion-element &#123;&#123; &quot;links-of-blogroll-&quot; + theme.links_layout | default(&#x27;inline&#x27;) &#125;&#125;&quot;&gt;</span><br><span class="line">            &lt;div class=&quot;links-of-blogroll-title&quot;&gt;</span><br><span class="line">              &lt;i class=&quot;fa  fa-fw fa-&#123;&#123; theme.links_icon | default(&#x27;globe&#x27;) | lower &#125;&#125;&quot;&gt;&lt;/i&gt;</span><br><span class="line">              &#123;&#123; theme.links_title &#125;&#125;&amp;nbsp;</span><br><span class="line">              &lt;i class=&quot;fa  fa-fw fa-&#123;&#123; theme.links_icon | default(&#x27;globe&#x27;) | lower &#125;&#125;&quot;&gt;&lt;/i&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">            &lt;ul class=&quot;links-of-blogroll-list&quot;&gt;</span><br><span class="line">              &#123;% for name, link in theme.links %&#125;</span><br><span class="line">                &lt;li class=&quot;links-of-blogroll-item&quot;&gt;</span><br><span class="line">                  &lt;a href=&quot;&#123;&#123; link &#125;&#125;&quot; title=&quot;&#123;&#123; name &#125;&#125;&quot; target=&quot;_blank&quot;&gt;&#123;&#123; name &#125;&#125;&lt;/a&gt;</span><br><span class="line">                &lt;/li&gt;</span><br><span class="line">              &#123;% endfor %&#125;</span><br><span class="line">            &lt;/ul&gt;</span><br><span class="line"><span class="addition">+        &#123;% include &#x27;../_custom/sidebar.swig&#x27; %&#125;</span></span><br><span class="line">          &lt;/div&gt;</span><br><span class="line">         &#123;% endif %&#125;</span><br><span class="line"></span><br><span class="line"><span class="deletion">-        &#123;% include &#x27;../_custom/sidebar.swig&#x27; %&#125;</span></span><br></pre></td></tr></table></figure><p>这样就可以了！当然，要是不喜欢颜色，感觉不好看，就可以在上文所提的 <code>custom.styl</code> 加入：</p><p>文件位置：hexo/themes/next/source/css/_custom/custom.styl</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*自定义的侧栏时间样式*/</span></span><br><span class="line"><span class="selector-id">#days</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: block;</span><br><span class="line">    <span class="attribute">color</span>: <span class="built_in">rgb</span>(<span class="number">7</span>, <span class="number">179</span>, <span class="number">155</span>);</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">13px</span>;</span><br><span class="line">    <span class="attribute">margin-top</span>: <span class="number">15px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>里面的值 F12 调成自己喜欢的，然后更改即可。要是不想放在侧栏，想放在页脚，自己应该能折腾了吧😄～</p><h3 id="添加博客热门文章页面">添加博客热门文章页面</h3><p>博客已有的分类，如 categories 和 tags，都是基于博主的，那么有没有一种分类是基于读者的呢？有，一种是搜索，另一种就是这里的文章阅读量排行榜。前提是在主题配置文件中配置了 leancloud_visitors，配置方法在基础配置中已经介绍过了。首先新建页面：</p><p>所在目录：hexo/</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo new page <span class="string">&quot;top&quot;</span></span><br></pre></td></tr></table></figure><p>然后在主题配置文件中加上菜单 top 和它的 icon：</p><p>文件位置：hexo/themes/next/_config.yml</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">menu:</span><br><span class="line">  top: /top/ || signal</span><br></pre></td></tr></table></figure><p>接着在语言翻译文件中加上菜单 top：</p><p>文件位置：hexo/themes/next/languages/zh_Hans.yml</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">menu:</span><br><span class="line">  home: 首页</span><br><span class="line">  archives: 归档</span><br><span class="line">  categories: 分类</span><br><span class="line">  tags: 标签</span><br><span class="line">  about: 关于</span><br><span class="line">  search: 搜索</span><br><span class="line">  schedule: 日程表</span><br><span class="line">  sitemap: 站点地图</span><br><span class="line">  commonweal: 公益404</span><br><span class="line">  top: 热门排行 /* 可以不为 热门排行，随便取 */</span><br></pre></td></tr></table></figure><p>注意：如果你的站点配置文件中的 languages 写的不是 zh-CN，那么这里请更改相应语言配置文件。最后，编辑第一步新建页面生成的文件：</p><p>文件位置：hexo/source/top/index.md</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">title: 文章热度排行</span><br><span class="line">comments: <span class="literal">false</span></span><br><span class="line">date: 2019-11-03 14:37:48</span><br><span class="line"><span class="built_in">type</span>:</span><br><span class="line">---</span><br><span class="line"></span><br><span class="line">&lt;div id=<span class="string">&quot;top&quot;</span> style=<span class="string">&quot;margin-top:30px;&quot;</span>&gt;&lt;/div&gt;</span><br><span class="line"></span><br><span class="line">&lt;script src=<span class="string">&quot;//cdn1.lncld.net/static/js/3.0.4/av-min.js&quot;</span>&gt;&lt;/script&gt;</span><br><span class="line">&lt;!-- &lt;script src=<span class="string">&quot;https://cdn1.lncld.net/static/js/av-core-mini-0.6.4.js&quot;</span>&gt;&lt;/script&gt; --&gt;</span><br><span class="line">&lt;script&gt;AV.initialize(<span class="string">&quot;app_id&quot;</span>, <span class="string">&quot;app_key&quot;</span>);&lt;/script&gt;</span><br><span class="line">&lt;script <span class="built_in">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><br><span class="line">    var time = 0</span><br><span class="line">    var title = <span class="string">&quot;&quot;</span></span><br><span class="line">    var url = <span class="string">&quot;&quot;</span></span><br><span class="line">    var query = new AV.Query(<span class="string">&#x27;Counter&#x27;</span>);</span><br><span class="line">    query.notEqualTo(<span class="string">&#x27;id&#x27;</span>, 0);</span><br><span class="line">    query.descending(<span class="string">&#x27;time&#x27;</span>);</span><br><span class="line">    query.limit(1000);</span><br><span class="line">    query.find().<span class="keyword">then</span>(<span class="keyword">function</span> (todo) &#123;</span><br><span class="line">        <span class="keyword">for</span> (var i = 0; i &lt; 1000; i++) &#123;</span><br><span class="line">            var result = todo[i].attributes;</span><br><span class="line">            time = result.time;</span><br><span class="line">            title = result.title;</span><br><span class="line">            url = result.url;</span><br><span class="line">            var content = <span class="string">&quot;&lt;p class=&#x27;my-article-top&#x27;&gt;&quot;</span> + <span class="string">&quot;&lt;font color=&#x27;#a7a7e5&#x27;&gt;&quot;</span> + <span class="string">&quot;➤【热度: &quot;</span> + <span class="string">&quot;&lt;/font&gt;&quot;</span> + <span class="string">&quot;&lt;font color=&#x27;#f1a8ce&#x27;&gt;&quot;</span> + time + <span class="string">&quot; ℃】&quot;</span> + <span class="string">&quot;&lt;/font&gt;&quot;</span> + <span class="string">&quot;&lt;a href=&#x27;&quot;</span> + url + <span class="string">&quot;&#x27;&gt;&quot;</span> + title + <span class="string">&quot;&lt;/a&gt;&quot;</span> + <span class="string">&quot;&lt;/p&gt;&quot;</span>;</span><br><span class="line">            document.getElementById(<span class="string">&quot;top&quot;</span>).innerHTML += content</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;, <span class="keyword">function</span> (error) &#123;</span><br><span class="line">        console.log(<span class="string">&quot;error&quot;</span>);</span><br><span class="line">    &#125;);</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style&gt;.post-description &#123;</span><br><span class="line">        display: none;</span><br><span class="line">    &#125;</span><br><span class="line">&lt;/style&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>必须将里面的里面的 <code>app_id</code> 和 <code>app_key</code> 替换为你的主题配置文件中的值，必须替换里面博客的链接，1000是显示文章的数量，其它可以自己看情况更改。最后，修改样式可以在 <code>custom.styl</code> 中加入自定义代码，不过还有几点需要注意：</p><ol><li>如果在设置 &gt; 安全中心中，没有将http://localhost:4000加入 Web 安全域名，那么本地调试将看不到，可以先将之加入，调试完后删除。</li><li>如果你发现文章标题显示不对，这是由于更改过文章标题导致的，在存储 &gt; Counter 双击title修改即可。</li></ol><p>注意：如果你的博客使用了 Valine 评论系统，那么可能会有代码冲突问题，解决方法可 Google ~</p><h3 id="文章置顶功能">文章置顶功能</h3><p>由于博客的首页可能是被浏览最多的页面，所以首页的前几篇文章被阅读的可能性比较大。可以利用这个特点，通过将自己认为重要的文章放在首页，从而让重要的文章被阅读的可能性增大😄。但是，默认的排序只有一个维度——时间，两种选择——正序和倒序，这就造成自己的得意之作被埋没了，怎么办呢，如何实现文章的置顶？</p><p>NexT 主题以前有过这个功能，然而由于一些 bugs（<a href="https://github.com/iissnan/hexo-theme-next/issues/415">issue</a>）被去掉了。不过在这个丰富的 issue 中，我自己摸索出了一种解决方法，参考了 issue 中的那篇<a href="http://www.netcan666.com/2015/11/22/%E8%A7%A3%E5%86%B3Hexo%E7%BD%AE%E9%A1%B6%E9%97%AE%E9%A2%98/">文章</a>。</p><p>首先移除默认安装的插件：</p><p>所在目录：hexo/</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm uninstall hexo-generator-index --save</span><br></pre></td></tr></table></figure><p>然后安装新插件：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-generator-index-pin-top --save</span><br></pre></td></tr></table></figure><p>最后编辑有这需求的相关文章时，在Front-matter（文件最上方以—分隔的区域）加上一行:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">top: <span class="literal">true</span></span><br></pre></td></tr></table></figure><p>然后就行了。如果你置顶了多篇，怎么控制顺序呢？设置top的值（大的在前面），比如：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Post a.md</span></span><br><span class="line">title: a</span><br><span class="line">top: 1</span><br><span class="line"></span><br><span class="line"><span class="comment"># Post b.md</span></span><br><span class="line">title: b</span><br><span class="line">top: 10</span><br></pre></td></tr></table></figure><p>那么文章 b 便会显示在文章 a 的前面。可是，没有任何标记啊，读者怎么知道文章置顶了😂～还好 NexT 原有的置顶功能有考虑到这个，且置顶的样式没有被移除，所以可以直接利用，编辑文件加入以下代码：</p><p>文件位置：/themes/next/layout/_macro/post.swig</p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;div class=&quot;post-meta&quot;&gt;</span><br><span class="line">  &lt;span class=&quot;post-time&quot;&gt;</span><br><span class="line"></span><br><span class="line"><span class="addition">+     &#123;% if post.top %&#125;</span></span><br><span class="line"><span class="addition">+          &lt;i class=&quot;fa fa-thumb-tack&quot;&gt;&lt;/i&gt;</span></span><br><span class="line"><span class="addition">+          &lt;font color=7D26CD&gt;置顶&lt;/font&gt;</span></span><br><span class="line"><span class="addition">+          &lt;span class=&quot;post-meta-divider&quot;&gt;|&lt;/span&gt;</span></span><br><span class="line"><span class="addition">+      &#123;% endif %&#125;</span></span><br></pre></td></tr></table></figure><h3 id="精品文章">精品文章</h3><p>在 <code>/themes/next/layout/_macro/</code> 路径，找到 <code>post.swig</code> ，在前 <code>文置</code> 顶功能后边，加上如下代码：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;% <span class="keyword">if</span> post.essential%&#125;</span><br><span class="line">     &lt;span class=<span class="string">&quot;post-meta-item-icon&quot;</span>&gt;</span><br><span class="line">         &lt;i class=<span class="string">&quot;fa fa-newspaper-o jingping&quot;</span>&gt;精品&lt;/i&gt;</span><br><span class="line">     &lt;/span&gt;</span><br><span class="line">     &lt;span class=<span class="string">&quot;post-meta-divider&quot;</span>&gt;|&lt;/span&gt;</span><br><span class="line"> &#123;% endif %&#125;</span><br></pre></td></tr></table></figure><p>在 <code>themes/next/source/css/_custom/custom.styl</code> 中，增加如下样式：</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.jingping</span>&#123;</span><br><span class="line">  <span class="attribute">background </span>: <span class="number">#00a8c3</span>;</span><br><span class="line">  <span class="attribute">padding</span>:<span class="number">2px</span> <span class="number">4px</span> <span class="number">2px</span> <span class="number">4px</span>;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#fff</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>在需要设置精品的文章md文件中，加入如下代码：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">essential: <span class="literal">true</span></span><br></pre></td></tr></table></figure><h3 id="添加近期文章版块">添加近期文章版块</h3><p>在 <code>next/layout/_macro/sidebar.swig</code> 中的 <code>if theme.links</code> 对应的 <code>endif</code> 后面添加以下代码：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--近期文章版块 began--&gt;</span><br><span class="line">  &#123;% <span class="keyword">if</span> theme.recent_posts %&#125;</span><br><span class="line">      &lt;div class=<span class="string">&quot;links-of-blogroll motion-element &#123;&#123; &quot;</span>links-of-blogroll-<span class="string">&quot; + theme.recent_posts_layout  &#125;&#125;&quot;</span>&gt;</span><br><span class="line">        &lt;div class=<span class="string">&quot;links-of-blogroll-title&quot;</span>&gt;</span><br><span class="line">          &lt;i class=<span class="string">&quot;fa fa-history fa-&#123;&#123; theme.recent_posts_icon | lower &#125;&#125;&quot;</span> aria-hidden=<span class="string">&quot;true&quot;</span>&gt;&lt;/i&gt;</span><br><span class="line">          &#123;&#123; theme.recent_posts_title &#125;&#125;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">        &lt;ul class=<span class="string">&quot;links-of-blogroll-list&quot;</span>&gt;</span><br><span class="line">          &#123;% <span class="built_in">set</span> posts = site.posts.sort(<span class="string">&#x27;-date&#x27;</span>) %&#125;</span><br><span class="line">          &#123;% <span class="keyword">for</span> post <span class="keyword">in</span> posts.slice(<span class="string">&#x27;0&#x27;</span>, <span class="string">&#x27;5&#x27;</span>) %&#125;</span><br><span class="line">            &lt;li class=<span class="string">&#x27;my-links-of-blogroll-li&#x27;</span>&gt;</span><br><span class="line">              &lt;a href=<span class="string">&quot;&#123;&#123; url_for(post.path) &#125;&#125;&quot;</span> title=<span class="string">&quot;&#123;&#123; post.title &#125;&#125;&quot;</span> target=<span class="string">&quot;&quot;</span>&gt;&#123;&#123; post.title &#125;&#125;&lt;/a&gt;</span><br><span class="line">            &lt;/li&gt;</span><br><span class="line">          &#123;% endfor %&#125;</span><br><span class="line">        &lt;/ul&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">  &#123;% endif %&#125;</span><br><span class="line">&lt;!--近期文章版块 end--&gt;</span><br></pre></td></tr></table></figure><p>为了配置方便，在主题的 <code>_config.yml</code> 中添加了几个变量，如下：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">recent_posts_title: 近期文章</span><br><span class="line">recent_posts_layout: block</span><br><span class="line">recent_posts: <span class="literal">true</span></span><br></pre></td></tr></table></figure><h3 id="代码块复制功能">代码块复制功能</h3><p>依赖 <a href="https://clipboardjs.com/">clipboard.js</a> 实现，个性化配置可参考官方文档。在 <code>/themes/next/layout/_layout.swig</code> 引入下载的 JS</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 代码块复制功能 --&gt;</span><br><span class="line">&lt;script <span class="built_in">type</span>=<span class="string">&quot;text/javascript&quot;</span> src=<span class="string">&quot;/js/src/clipboard.min.js&quot;</span>&gt;&lt;/script&gt;</span><br><span class="line">&lt;script <span class="built_in">type</span>=<span class="string">&quot;text/javascript&quot;</span> src=<span class="string">&quot;/js/src/clipboard-use.js&quot;</span>&gt;&lt;/script&gt;</span><br></pre></td></tr></table></figure><p>位于 <code>/themes/next/source/js/src/</code> 目录下的 <code>clipboard.min.js</code> 和 <code>clipboard-use.js</code> 代码分别如下：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">/*!</span><br><span class="line"> * clipboard.min.js v2.0.4</span><br><span class="line"> * https://zenorocha.github.io/clipboard.js</span><br><span class="line"> * </span><br><span class="line"> * Licensed MIT © Zeno Rocha</span><br><span class="line"> */</span><br><span class="line">!<span class="keyword">function</span>(t,e)&#123;<span class="string">&quot;object&quot;</span>==typeof exports&amp;&amp;<span class="string">&quot;object&quot;</span>==typeof module?module.exports=e():<span class="string">&quot;function&quot;</span>==typeof define&amp;&amp;define.amd?define([],e):<span class="string">&quot;object&quot;</span>==typeof exports?exports.ClipboardJS=e():t.ClipboardJS=e()&#125;(this,<span class="function"><span class="title">function</span></span>()&#123;<span class="built_in">return</span> <span class="keyword">function</span>(n)&#123;var o=&#123;&#125;;<span class="keyword">function</span> r(t)&#123;<span class="keyword">if</span>(o[t])<span class="built_in">return</span> o[t].exports;var e=o[t]=&#123;i:t,l:!1,exports:&#123;&#125;&#125;;<span class="built_in">return</span> n[t].call(e.exports,e,e.exports,r),e.l=!0,e.exports&#125;<span class="built_in">return</span> r.m=n,r.c=o,r.d=<span class="keyword">function</span>(t,e,n)&#123;r.o(t,e)||Object.defineProperty(t,e,&#123;enumerable:!0,get:n&#125;)&#125;,r.r=<span class="keyword">function</span>(t)&#123;<span class="string">&quot;undefined&quot;</span>!=typeof Symbol&amp;&amp;Symbol.toStringTag&amp;&amp;Object.defineProperty(t,Symbol.toStringTag,&#123;value:<span class="string">&quot;Module&quot;</span>&#125;),Object.defineProperty(t,<span class="string">&quot;__esModule&quot;</span>,&#123;value:!0&#125;)&#125;,r.t=<span class="keyword">function</span>(e,t)&#123;<span class="keyword">if</span>(1&amp;t&amp;&amp;(e=r(e)),8&amp;t)<span class="built_in">return</span> e;<span class="keyword">if</span>(4&amp;t&amp;&amp;<span class="string">&quot;object&quot;</span>==typeof e&amp;&amp;e&amp;&amp;e.__esModule)<span class="built_in">return</span> e;var n=Object.create(null);<span class="keyword">if</span>(r.r(n),Object.defineProperty(n,<span class="string">&quot;default&quot;</span>,&#123;enumerable:!0,value:e&#125;),2&amp;t&amp;&amp;<span class="string">&quot;string&quot;</span>!=typeof e)<span class="keyword">for</span>(var o <span class="keyword">in</span> e)r.d(n,o,<span class="keyword">function</span>(t)&#123;<span class="built_in">return</span> e[t]&#125;.<span class="built_in">bind</span>(null,o));<span class="built_in">return</span> n&#125;,r.n=<span class="keyword">function</span>(t)&#123;var e=t&amp;&amp;t.__esModule?<span class="function"><span class="title">function</span></span>()&#123;<span class="built_in">return</span> t.default&#125;:<span class="function"><span class="title">function</span></span>()&#123;<span class="built_in">return</span> t&#125;;<span class="built_in">return</span> r.d(e,<span class="string">&quot;a&quot;</span>,e),e&#125;,r.o=<span class="keyword">function</span>(t,e)&#123;<span class="built_in">return</span> Object.prototype.hasOwnProperty.call(t,e)&#125;,r.p=<span class="string">&quot;&quot;</span>,r(r.s=0)&#125;([<span class="keyword">function</span>(t,e,n)&#123;<span class="string">&quot;use strict&quot;</span>;var r=<span class="string">&quot;function&quot;</span>==typeof Symbol&amp;&amp;<span class="string">&quot;symbol&quot;</span>==typeof Symbol.iterator?<span class="keyword">function</span>(t)&#123;<span class="built_in">return</span> typeof t&#125;:<span class="keyword">function</span>(t)&#123;<span class="built_in">return</span> t&amp;&amp;<span class="string">&quot;function&quot;</span>==typeof Symbol&amp;&amp;t.constructor===Symbol&amp;&amp;t!==Symbol.prototype?<span class="string">&quot;symbol&quot;</span>:typeof t&#125;,i=<span class="function"><span class="title">function</span></span>()&#123;<span class="keyword">function</span> o(t,e)&#123;<span class="keyword">for</span>(var n=0;n&lt;e.length;n++)&#123;var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,<span class="string">&quot;value&quot;</span><span class="keyword">in</span> o&amp;&amp;(o.writable=!0),Object.defineProperty(t,o.key,o)&#125;&#125;<span class="built_in">return</span> <span class="keyword">function</span>(t,e,n)&#123;<span class="built_in">return</span> e&amp;&amp;o(t.prototype,e),n&amp;&amp;o(t,n),t&#125;&#125;(),a=o(n(1)),c=o(n(3)),u=o(n(4));<span class="keyword">function</span> o(t)&#123;<span class="built_in">return</span> t&amp;&amp;t.__esModule?t:&#123;default:t&#125;&#125;var l=<span class="keyword">function</span>(t)&#123;<span class="keyword">function</span> o(t,e)&#123;!<span class="keyword">function</span>(t,e)&#123;<span class="keyword">if</span>(!(t instanceof e))throw new TypeError(<span class="string">&quot;Cannot call a class as a function&quot;</span>)&#125;(this,o);var n=<span class="keyword">function</span>(t,e)&#123;<span class="keyword">if</span>(!t)throw new ReferenceError(<span class="string">&quot;this hasn&#x27;t been initialised - super() hasn&#x27;t been called&quot;</span>);<span class="built_in">return</span>!e||<span class="string">&quot;object&quot;</span>!=typeof e&amp;&amp;<span class="string">&quot;function&quot;</span>!=typeof e?t:e&#125;(this,(o.__proto__||Object.getPrototypeOf(o)).call(this));<span class="built_in">return</span> n.resolveOptions(e),n.listenClick(t),n&#125;<span class="built_in">return</span> <span class="keyword">function</span>(t,e)&#123;<span class="keyword">if</span>(<span class="string">&quot;function&quot;</span>!=typeof e&amp;&amp;null!==e)throw new TypeError(<span class="string">&quot;Super expression must either be null or a function, not &quot;</span>+typeof e);t.prototype=Object.create(e&amp;&amp;e.prototype,&#123;constructor:&#123;value:t,enumerable:!1,writable:!0,configurable:!0&#125;&#125;),e&amp;&amp;(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)&#125;(o,c.default),i(o,[&#123;key:<span class="string">&quot;resolveOptions&quot;</span>,value:<span class="function"><span class="title">function</span></span>()&#123;var t=0&lt;arguments.length&amp;&amp;void 0!==arguments[0]?arguments[0]:&#123;&#125;;this.action=<span class="string">&quot;function&quot;</span>==typeof t.action?t.action:this.defaultAction,this.target=<span class="string">&quot;function&quot;</span>==typeof t.target?t.target:this.defaultTarget,this.text=<span class="string">&quot;function&quot;</span>==typeof t.text?t.text:this.defaultText,this.container=<span class="string">&quot;object&quot;</span>===r(t.container)?t.container:document.body&#125;&#125;,&#123;key:<span class="string">&quot;listenClick&quot;</span>,value:<span class="keyword">function</span>(t)&#123;var e=this;this.listener=(0,u.default)(t,<span class="string">&quot;click&quot;</span>,<span class="keyword">function</span>(t)&#123;<span class="built_in">return</span> e.onClick(t)&#125;)&#125;&#125;,&#123;key:<span class="string">&quot;onClick&quot;</span>,value:<span class="keyword">function</span>(t)&#123;var e=t.delegateTarget||t.currentTarget;this.clipboardAction&amp;&amp;(this.clipboardAction=null),this.clipboardAction=new a.default(&#123;action:this.action(e),target:this.target(e),text:this.text(e),container:this.container,trigger:e,emitter:this&#125;)&#125;&#125;,&#123;key:<span class="string">&quot;defaultAction&quot;</span>,value:<span class="keyword">function</span>(t)&#123;<span class="built_in">return</span> s(<span class="string">&quot;action&quot;</span>,t)&#125;&#125;,&#123;key:<span class="string">&quot;defaultTarget&quot;</span>,value:<span class="keyword">function</span>(t)&#123;var e=s(<span class="string">&quot;target&quot;</span>,t);<span class="keyword">if</span>(e)<span class="built_in">return</span> document.querySelector(e)&#125;&#125;,&#123;key:<span class="string">&quot;defaultText&quot;</span>,value:<span class="keyword">function</span>(t)&#123;<span class="built_in">return</span> s(<span class="string">&quot;text&quot;</span>,t)&#125;&#125;,&#123;key:<span class="string">&quot;destroy&quot;</span>,value:<span class="function"><span class="title">function</span></span>()&#123;this.listener.destroy(),this.clipboardAction&amp;&amp;(this.clipboardAction.destroy(),this.clipboardAction=null)&#125;&#125;],[&#123;key:<span class="string">&quot;isSupported&quot;</span>,value:<span class="function"><span class="title">function</span></span>()&#123;var t=0&lt;arguments.length&amp;&amp;void 0!==arguments[0]?arguments[0]:[<span class="string">&quot;copy&quot;</span>,<span class="string">&quot;cut&quot;</span>],e=<span class="string">&quot;string&quot;</span>==typeof t?[t]:t,n=!!document.queryCommandSupported;<span class="built_in">return</span> e.forEach(<span class="keyword">function</span>(t)&#123;n=n&amp;&amp;!!document.queryCommandSupported(t)&#125;),n&#125;&#125;]),o&#125;();<span class="keyword">function</span> s(t,e)&#123;var n=<span class="string">&quot;data-clipboard-&quot;</span>+t;<span class="keyword">if</span>(e.hasAttribute(n))<span class="built_in">return</span> e.getAttribute(n)&#125;t.exports=l&#125;,<span class="keyword">function</span>(t,e,n)&#123;<span class="string">&quot;use strict&quot;</span>;var o,r=<span class="string">&quot;function&quot;</span>==typeof Symbol&amp;&amp;<span class="string">&quot;symbol&quot;</span>==typeof Symbol.iterator?<span class="keyword">function</span>(t)&#123;<span class="built_in">return</span> typeof t&#125;:<span class="keyword">function</span>(t)&#123;<span class="built_in">return</span> t&amp;&amp;<span class="string">&quot;function&quot;</span>==typeof Symbol&amp;&amp;t.constructor===Symbol&amp;&amp;t!==Symbol.prototype?<span class="string">&quot;symbol&quot;</span>:typeof t&#125;,i=<span class="function"><span class="title">function</span></span>()&#123;<span class="keyword">function</span> o(t,e)&#123;<span class="keyword">for</span>(var n=0;n&lt;e.length;n++)&#123;var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,<span class="string">&quot;value&quot;</span><span class="keyword">in</span> o&amp;&amp;(o.writable=!0),Object.defineProperty(t,o.key,o)&#125;&#125;<span class="built_in">return</span> <span class="keyword">function</span>(t,e,n)&#123;<span class="built_in">return</span> e&amp;&amp;o(t.prototype,e),n&amp;&amp;o(t,n),t&#125;&#125;(),a=n(2),c=(o=a)&amp;&amp;o.__esModule?o:&#123;default:o&#125;;var u=<span class="function"><span class="title">function</span></span>()&#123;<span class="keyword">function</span> e(t)&#123;!<span class="keyword">function</span>(t,e)&#123;<span class="keyword">if</span>(!(t instanceof e))throw new TypeError(<span class="string">&quot;Cannot call a class as a function&quot;</span>)&#125;(this,e),this.resolveOptions(t),this.initSelection()&#125;<span class="built_in">return</span> i(e,[&#123;key:<span class="string">&quot;resolveOptions&quot;</span>,value:<span class="function"><span class="title">function</span></span>()&#123;var t=0&lt;arguments.length&amp;&amp;void 0!==arguments[0]?arguments[0]:&#123;&#125;;this.action=t.action,this.container=t.container,this.emitter=t.emitter,this.target=t.target,this.text=t.text,this.trigger=t.trigger,this.selectedText=<span class="string">&quot;&quot;</span>&#125;&#125;,&#123;key:<span class="string">&quot;initSelection&quot;</span>,value:<span class="function"><span class="title">function</span></span>()&#123;this.text?this.selectFake():this.target&amp;&amp;this.selectTarget()&#125;&#125;,&#123;key:<span class="string">&quot;selectFake&quot;</span>,value:<span class="function"><span class="title">function</span></span>()&#123;var t=this,e=<span class="string">&quot;rtl&quot;</span>==document.documentElement.getAttribute(<span class="string">&quot;dir&quot;</span>);this.removeFake(),this.fakeHandlerCallback=<span class="function"><span class="title">function</span></span>()&#123;<span class="built_in">return</span> t.removeFake()&#125;,this.fakeHandler=this.container.addEventListener(<span class="string">&quot;click&quot;</span>,this.fakeHandlerCallback)||!0,this.fakeElem=document.createElement(<span class="string">&quot;textarea&quot;</span>),this.fakeElem.style.fontSize=<span class="string">&quot;12pt&quot;</span>,this.fakeElem.style.border=<span class="string">&quot;0&quot;</span>,this.fakeElem.style.padding=<span class="string">&quot;0&quot;</span>,this.fakeElem.style.margin=<span class="string">&quot;0&quot;</span>,this.fakeElem.style.position=<span class="string">&quot;absolute&quot;</span>,this.fakeElem.style[e?<span class="string">&quot;right&quot;</span>:<span class="string">&quot;left&quot;</span>]=<span class="string">&quot;-9999px&quot;</span>;var n=window.pageYOffset||document.documentElement.scrollTop;this.fakeElem.style.top=n+<span class="string">&quot;px&quot;</span>,this.fakeElem.setAttribute(<span class="string">&quot;readonly&quot;</span>,<span class="string">&quot;&quot;</span>),this.fakeElem.value=this.text,this.container.appendChild(this.fakeElem),this.selectedText=(0,c.default)(this.fakeElem),this.copyText()&#125;&#125;,&#123;key:<span class="string">&quot;removeFake&quot;</span>,value:<span class="function"><span class="title">function</span></span>()&#123;this.fakeHandler&amp;&amp;(this.container.removeEventListener(<span class="string">&quot;click&quot;</span>,this.fakeHandlerCallback),this.fakeHandler=null,this.fakeHandlerCallback=null),this.fakeElem&amp;&amp;(this.container.removeChild(this.fakeElem),this.fakeElem=null)&#125;&#125;,&#123;key:<span class="string">&quot;selectTarget&quot;</span>,value:<span class="function"><span class="title">function</span></span>()&#123;this.selectedText=(0,c.default)(this.target),this.copyText()&#125;&#125;,&#123;key:<span class="string">&quot;copyText&quot;</span>,value:<span class="function"><span class="title">function</span></span>()&#123;var e=void 0;try&#123;e=document.execCommand(this.action)&#125;catch(t)&#123;e=!1&#125;this.handleResult(e)&#125;&#125;,&#123;key:<span class="string">&quot;handleResult&quot;</span>,value:<span class="keyword">function</span>(t)&#123;this.emitter.emit(t?<span class="string">&quot;success&quot;</span>:<span class="string">&quot;error&quot;</span>,&#123;action:this.action,text:this.selectedText,trigger:this.trigger,clearSelection:this.clearSelection.bind(this)&#125;)&#125;&#125;,&#123;key:<span class="string">&quot;clearSelection&quot;</span>,value:<span class="function"><span class="title">function</span></span>()&#123;this.trigger&amp;&amp;this.trigger.focus(),window.getSelection().removeAllRanges()&#125;&#125;,&#123;key:<span class="string">&quot;destroy&quot;</span>,value:<span class="function"><span class="title">function</span></span>()&#123;this.removeFake()&#125;&#125;,&#123;key:<span class="string">&quot;action&quot;</span>,<span class="built_in">set</span>:<span class="function"><span class="title">function</span></span>()&#123;var t=0&lt;arguments.length&amp;&amp;void 0!==arguments[0]?arguments[0]:<span class="string">&quot;copy&quot;</span>;<span class="keyword">if</span>(this._action=t,<span class="string">&quot;copy&quot;</span>!==this._action&amp;&amp;<span class="string">&quot;cut&quot;</span>!==this._action)throw new Error(<span class="string">&#x27;Invalid &quot;action&quot; value, use either &quot;copy&quot; or &quot;cut&quot;&#x27;</span>)&#125;,get:<span class="function"><span class="title">function</span></span>()&#123;<span class="built_in">return</span> this._action&#125;&#125;,&#123;key:<span class="string">&quot;target&quot;</span>,<span class="built_in">set</span>:<span class="keyword">function</span>(t)&#123;<span class="keyword">if</span>(void 0!==t)&#123;<span class="keyword">if</span>(!t||<span class="string">&quot;object&quot;</span>!==(void 0===t?<span class="string">&quot;undefined&quot;</span>:r(t))||1!==t.nodeType)throw new Error(<span class="string">&#x27;Invalid &quot;target&quot; value, use a valid Element&#x27;</span>);<span class="keyword">if</span>(<span class="string">&quot;copy&quot;</span>===this.action&amp;&amp;t.hasAttribute(<span class="string">&quot;disabled&quot;</span>))throw new Error(<span class="string">&#x27;Invalid &quot;target&quot; attribute. Please use &quot;readonly&quot; instead of &quot;disabled&quot; attribute&#x27;</span>);<span class="keyword">if</span>(<span class="string">&quot;cut&quot;</span>===this.action&amp;&amp;(t.hasAttribute(<span class="string">&quot;readonly&quot;</span>)||t.hasAttribute(<span class="string">&quot;disabled&quot;</span>)))throw new Error(<span class="string">&#x27;Invalid &quot;target&quot; attribute. You can\&#x27;</span>t cut text from elements with <span class="string">&quot;readonly&quot;</span> or <span class="string">&quot;disabled&quot;</span> attributes<span class="string">&#x27;);this._target=t&#125;&#125;,get:function()&#123;return this._target&#125;&#125;]),e&#125;();t.exports=u&#125;,function(t,e)&#123;t.exports=function(t)&#123;var e;if(&quot;SELECT&quot;===t.nodeName)t.focus(),e=t.value;else if(&quot;INPUT&quot;===t.nodeName||&quot;TEXTAREA&quot;===t.nodeName)&#123;var n=t.hasAttribute(&quot;readonly&quot;);n||t.setAttribute(&quot;readonly&quot;,&quot;&quot;),t.select(),t.setSelectionRange(0,t.value.length),n||t.removeAttribute(&quot;readonly&quot;),e=t.value&#125;else&#123;t.hasAttribute(&quot;contenteditable&quot;)&amp;&amp;t.focus();var o=window.getSelection(),r=document.createRange();r.selectNodeContents(t),o.removeAllRanges(),o.addRange(r),e=o.toString()&#125;return e&#125;&#125;,function(t,e)&#123;function n()&#123;&#125;n.prototype=&#123;on:function(t,e,n)&#123;var o=this.e||(this.e=&#123;&#125;);return(o[t]||(o[t]=[])).push(&#123;fn:e,ctx:n&#125;),this&#125;,once:function(t,e,n)&#123;var o=this;function r()&#123;o.off(t,r),e.apply(n,arguments)&#125;return r._=e,this.on(t,r,n)&#125;,emit:function(t)&#123;for(var e=[].slice.call(arguments,1),n=((this.e||(this.e=&#123;&#125;))[t]||[]).slice(),o=0,r=n.length;o&lt;r;o++)n[o].fn.apply(n[o].ctx,e);return this&#125;,off:function(t,e)&#123;var n=this.e||(this.e=&#123;&#125;),o=n[t],r=[];if(o&amp;&amp;e)for(var i=0,a=o.length;i&lt;a;i++)o[i].fn!==e&amp;&amp;o[i].fn._!==e&amp;&amp;r.push(o[i]);return r.length?n[t]=r:delete n[t],this&#125;&#125;,t.exports=n&#125;,function(t,e,n)&#123;var d=n(5),h=n(6);t.exports=function(t,e,n)&#123;if(!t&amp;&amp;!e&amp;&amp;!n)throw new Error(&quot;Missing required arguments&quot;);if(!d.string(e))throw new TypeError(&quot;Second argument must be a String&quot;);if(!d.fn(n))throw new TypeError(&quot;Third argument must be a Function&quot;);if(d.node(t))return s=e,f=n,(l=t).addEventListener(s,f),&#123;destroy:function()&#123;l.removeEventListener(s,f)&#125;&#125;;if(d.nodeList(t))return a=t,c=e,u=n,Array.prototype.forEach.call(a,function(t)&#123;t.addEventListener(c,u)&#125;),&#123;destroy:function()&#123;Array.prototype.forEach.call(a,function(t)&#123;t.removeEventListener(c,u)&#125;)&#125;&#125;;if(d.string(t))return o=t,r=e,i=n,h(document.body,o,r,i);throw new TypeError(&quot;First argument must be a String, HTMLElement, HTMLCollection, or NodeList&quot;);var o,r,i,a,c,u,l,s,f&#125;&#125;,function(t,n)&#123;n.node=function(t)&#123;return void 0!==t&amp;&amp;t instanceof HTMLElement&amp;&amp;1===t.nodeType&#125;,n.nodeList=function(t)&#123;var e=Object.prototype.toString.call(t);return void 0!==t&amp;&amp;(&quot;[object NodeList]&quot;===e||&quot;[object HTMLCollection]&quot;===e)&amp;&amp;&quot;length&quot;in t&amp;&amp;(0===t.length||n.node(t[0]))&#125;,n.string=function(t)&#123;return&quot;string&quot;==typeof t||t instanceof String&#125;,n.fn=function(t)&#123;return&quot;[object Function]&quot;===Object.prototype.toString.call(t)&#125;&#125;,function(t,e,n)&#123;var a=n(7);function i(t,e,n,o,r)&#123;var i=function(e,n,t,o)&#123;return function(t)&#123;t.delegateTarget=a(t.target,n),t.delegateTarget&amp;&amp;o.call(e,t)&#125;&#125;.apply(this,arguments);return t.addEventListener(n,i,r),&#123;destroy:function()&#123;t.removeEventListener(n,i,r)&#125;&#125;&#125;t.exports=function(t,e,n,o,r)&#123;return&quot;function&quot;==typeof t.addEventListener?i.apply(null,arguments):&quot;function&quot;==typeof n?i.bind(null,document).apply(null,arguments):(&quot;string&quot;==typeof t&amp;&amp;(t=document.querySelectorAll(t)),Array.prototype.map.call(t,function(t)&#123;return i(t,e,n,o,r)&#125;))&#125;&#125;,function(t,e)&#123;if(&quot;undefined&quot;!=typeof Element&amp;&amp;!Element.prototype.matches)&#123;var n=Element.prototype;n.matches=n.matchesSelector||n.mozMatchesSelector||n.msMatchesSelector||n.oMatchesSelector||n.webkitMatchesSelector&#125;t.exports=function(t,e)&#123;for(;t&amp;&amp;9!==t.nodeType;)&#123;if(&quot;function&quot;==typeof t.matches&amp;&amp;t.matches(e))return t;t=t.parentNode&#125;&#125;&#125;])&#125;);</span></span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">/*页面载入完成后，创建复制按钮*/</span><br><span class="line">!<span class="keyword">function</span> (e, t, a) &#123;</span><br><span class="line">  /* code */</span><br><span class="line">  var initCopyCode = <span class="function"><span class="title">function</span></span>()&#123;</span><br><span class="line">    var copyHtml = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">    copyHtml += <span class="string">&#x27;&lt;button class=&quot;btn-copy&quot; data-clipboard-snippet=&quot;&quot;&gt;&#x27;</span>;</span><br><span class="line">    //fa fa-globe可以去字体库替换自己想要的图标</span><br><span class="line">    copyHtml += <span class="string">&#x27;  &lt;i class=&quot;fa fa-clipboard&quot;&gt;&lt;/i&gt;&lt;span&gt;复制&lt;/span&gt;&#x27;</span>;</span><br><span class="line">    copyHtml += <span class="string">&#x27;&lt;/button&gt;&#x27;</span>;</span><br><span class="line">    $(<span class="string">&quot;.highlight .code pre&quot;</span>).before(copyHtml);</span><br><span class="line">    new ClipboardJS(<span class="string">&#x27;.btn-copy&#x27;</span>, &#123;</span><br><span class="line">      target: <span class="keyword">function</span>(trigger) &#123;</span><br><span class="line">        <span class="built_in">return</span> trigger.nextElementSibling;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">  initCopyCode();</span><br><span class="line">&#125;(window, document);</span><br></pre></td></tr></table></figure><p>可根据需要在 <code>/themes/next/source/css/_custom/custom.styl</code> 加 CSS</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.highlight</span>&#123;</span><br><span class="line">  //position: relative;</span><br><span class="line">  <span class="selector-tag">position</span>: <span class="selector-tag">static</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">highlight-wrap</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="number">#008b89</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.btn-copy</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: inline-block;</span><br><span class="line">  <span class="attribute">cursor</span>: pointer;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#eee</span>;</span><br><span class="line">  <span class="attribute">background-image</span>: <span class="built_in">linear-gradient</span>(#fcfcfc,#eee);</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#d5d5d5</span>;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">3px</span>;</span><br><span class="line">  <span class="attribute">-webkit-user-select</span>: none;</span><br><span class="line">  <span class="attribute">-moz-user-select</span>: none;</span><br><span class="line">  <span class="attribute">-ms-user-select</span>: none;</span><br><span class="line">  <span class="attribute">user-select</span>: none;</span><br><span class="line">  <span class="attribute">-webkit-appearance</span>: none;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">13px</span>;</span><br><span class="line">  <span class="attribute">font-weight</span>: <span class="number">700</span>;</span><br><span class="line">  <span class="attribute">line-height</span>: <span class="number">20px</span>;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#333</span>;</span><br><span class="line">  <span class="attribute">-webkit-transition</span>: opacity .<span class="number">3s</span> ease-in-out;</span><br><span class="line">  <span class="attribute">-o-transition</span>: opacity .<span class="number">3s</span> ease-in-out;</span><br><span class="line">  <span class="attribute">transition</span>: opacity .<span class="number">3s</span> ease-in-out;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">2px</span> <span class="number">6px</span>;</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">right</span>: <span class="number">5px</span>;</span><br><span class="line">  <span class="attribute">top</span>: <span class="number">5px</span>;</span><br><span class="line">  <span class="attribute">opacity</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.btn-copy</span> <span class="selector-tag">span</span> &#123;</span><br><span class="line">  <span class="attribute">margin-left</span>: <span class="number">5px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.highlight</span><span class="selector-pseudo">:hover</span> <span class="selector-class">.btn-copy</span>&#123;</span><br><span class="line">  <span class="attribute">opacity</span>: <span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="博客加入canvas粒子时钟">博客加入canvas粒子时钟</h3><p>这是一款很有意思的 HTML5 Canvas 时间动画，总体来说，它是一个可以和客户端同步的时钟，其特点是当时间走动时，数字将会散落成一个个粒子动画。</p><p>在 <code>/themes/next/layout/_custom/</code> 目录下，新建 <code>clock.swig</code> 文件，内容如下：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=<span class="string">&quot;&quot;</span>&gt;</span><br><span class="line">  &lt;canvas id=<span class="string">&quot;canvas&quot;</span> style=<span class="string">&quot;width:60%;&quot;</span>&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line"></span><br><span class="line">&lt;!--粒子时钟js--&gt;</span><br><span class="line">&lt;script <span class="built_in">type</span>=<span class="string">&quot;text/javascript&quot;</span> src=<span class="string">&quot;/js/src/canvas-dance-time.js&quot;</span>&gt;&lt;/script&gt;</span><br></pre></td></tr></table></figure><p>在 <code>/themes/next/layout/_macro/sidebar.swig</code> 中引入：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% include <span class="string">&#x27;../_custom/clock.swig&#x27;</span> %&#125;</span><br></pre></td></tr></table></figure><p>可根据自己的偏好来设置具体位置，我是加在了侧栏的末尾。</p><p>在 <code>/themes/next/source/js/src</code> 目录下，新建 <code>canvas-dance-time.js</code> 文件，内容如下：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br></pre></td><td class="code"><pre><span class="line">(<span class="function"><span class="title">function</span></span>()&#123;</span><br><span class="line">    var WINDOW_WIDTH = 820;</span><br><span class="line">    var WINDOW_HEIGHT = 250;</span><br><span class="line">    var RADIUS = 7; //球半径</span><br><span class="line">    var NUMBER_GAP = 10; //数字之间的间隙</span><br><span class="line">    var u=0.65; //碰撞能量损耗系数</span><br><span class="line">    var context; //Canvas绘制上下文</span><br><span class="line">    var balls = []; //存储彩色的小球</span><br><span class="line">    const colors = [<span class="string">&quot;#33B5E5&quot;</span>,<span class="string">&quot;#0099CC&quot;</span>,<span class="string">&quot;#AA66CC&quot;</span>,<span class="string">&quot;#9933CC&quot;</span>,<span class="string">&quot;#99CC00&quot;</span>,<span class="string">&quot;#669900&quot;</span>,<span class="string">&quot;#FFBB33&quot;</span>,<span class="string">&quot;#FF8800&quot;</span>,<span class="string">&quot;#FF4444&quot;</span>,<span class="string">&quot;#CC0000&quot;</span>]; //彩色小球的颜色</span><br><span class="line">    var currentNums = []; //屏幕显示的8个字符</span><br><span class="line">    var digit =</span><br><span class="line">        [</span><br><span class="line">            [</span><br><span class="line">                [0,0,1,1,1,0,0],</span><br><span class="line">                [0,1,1,0,1,1,0],</span><br><span class="line">                [1,1,0,0,0,1,1],</span><br><span class="line">                [1,1,0,0,0,1,1],</span><br><span class="line">                [1,1,0,0,0,1,1],</span><br><span class="line">                [1,1,0,0,0,1,1],</span><br><span class="line">                [1,1,0,0,0,1,1],</span><br><span class="line">                [1,1,0,0,0,1,1],</span><br><span class="line">                [0,1,1,0,1,1,0],</span><br><span class="line">                [0,0,1,1,1,0,0]</span><br><span class="line">            ],//0</span><br><span class="line">            [</span><br><span class="line">                [0,0,0,1,1,0,0],</span><br><span class="line">                [0,1,1,1,1,0,0],</span><br><span class="line">                [0,0,0,1,1,0,0],</span><br><span class="line">                [0,0,0,1,1,0,0],</span><br><span class="line">                [0,0,0,1,1,0,0],</span><br><span class="line">                [0,0,0,1,1,0,0],</span><br><span class="line">                [0,0,0,1,1,0,0],</span><br><span class="line">                [0,0,0,1,1,0,0],</span><br><span class="line">                [0,0,0,1,1,0,0],</span><br><span class="line">                [1,1,1,1,1,1,1]</span><br><span class="line">            ],//1</span><br><span class="line">            [</span><br><span class="line">                [0,1,1,1,1,1,0],</span><br><span class="line">                [1,1,0,0,0,1,1],</span><br><span class="line">                [0,0,0,0,0,1,1],</span><br><span class="line">                [0,0,0,0,1,1,0],</span><br><span class="line">                [0,0,0,1,1,0,0],</span><br><span class="line">                [0,0,1,1,0,0,0],</span><br><span class="line">                [0,1,1,0,0,0,0],</span><br><span class="line">                [1,1,0,0,0,0,0],</span><br><span class="line">                [1,1,0,0,0,1,1],</span><br><span class="line">                [1,1,1,1,1,1,1]</span><br><span class="line">            ],//2</span><br><span class="line">            [</span><br><span class="line">                [1,1,1,1,1,1,1],</span><br><span class="line">                [0,0,0,0,0,1,1],</span><br><span class="line">                [0,0,0,0,1,1,0],</span><br><span class="line">                [0,0,0,1,1,0,0],</span><br><span class="line">                [0,0,1,1,1,0,0],</span><br><span class="line">                [0,0,0,0,1,1,0],</span><br><span class="line">                [0,0,0,0,0,1,1],</span><br><span class="line">                [0,0,0,0,0,1,1],</span><br><span class="line">                [1,1,0,0,0,1,1],</span><br><span class="line">                [0,1,1,1,1,1,0]</span><br><span class="line">            ],//3</span><br><span class="line">            [</span><br><span class="line">                [0,0,0,0,1,1,0],</span><br><span class="line">                [0,0,0,1,1,1,0],</span><br><span class="line">                [0,0,1,1,1,1,0],</span><br><span class="line">                [0,1,1,0,1,1,0],</span><br><span class="line">                [1,1,0,0,1,1,0],</span><br><span class="line">                [1,1,1,1,1,1,1],</span><br><span class="line">                [0,0,0,0,1,1,0],</span><br><span class="line">                [0,0,0,0,1,1,0],</span><br><span class="line">                [0,0,0,0,1,1,0],</span><br><span class="line">                [0,0,0,1,1,1,1]</span><br><span class="line">            ],//4</span><br><span class="line">            [</span><br><span class="line">                [1,1,1,1,1,1,1],</span><br><span class="line">                [1,1,0,0,0,0,0],</span><br><span class="line">                [1,1,0,0,0,0,0],</span><br><span class="line">                [1,1,1,1,1,1,0],</span><br><span class="line">                [0,0,0,0,0,1,1],</span><br><span class="line">                [0,0,0,0,0,1,1],</span><br><span class="line">                [0,0,0,0,0,1,1],</span><br><span class="line">                [0,0,0,0,0,1,1],</span><br><span class="line">                [1,1,0,0,0,1,1],</span><br><span class="line">                [0,1,1,1,1,1,0]</span><br><span class="line">            ],//5</span><br><span class="line">            [</span><br><span class="line">                [0,0,0,0,1,1,0],</span><br><span class="line">                [0,0,1,1,0,0,0],</span><br><span class="line">                [0,1,1,0,0,0,0],</span><br><span class="line">                [1,1,0,0,0,0,0],</span><br><span class="line">                [1,1,0,1,1,1,0],</span><br><span class="line">                [1,1,0,0,0,1,1],</span><br><span class="line">                [1,1,0,0,0,1,1],</span><br><span class="line">                [1,1,0,0,0,1,1],</span><br><span class="line">                [1,1,0,0,0,1,1],</span><br><span class="line">                [0,1,1,1,1,1,0]</span><br><span class="line">            ],//6</span><br><span class="line">            [</span><br><span class="line">                [1,1,1,1,1,1,1],</span><br><span class="line">                [1,1,0,0,0,1,1],</span><br><span class="line">                [0,0,0,0,1,1,0],</span><br><span class="line">                [0,0,0,0,1,1,0],</span><br><span class="line">                [0,0,0,1,1,0,0],</span><br><span class="line">                [0,0,0,1,1,0,0],</span><br><span class="line">                [0,0,1,1,0,0,0],</span><br><span class="line">                [0,0,1,1,0,0,0],</span><br><span class="line">                [0,0,1,1,0,0,0],</span><br><span class="line">                [0,0,1,1,0,0,0]</span><br><span class="line">            ],//7</span><br><span class="line">            [</span><br><span class="line">                [0,1,1,1,1,1,0],</span><br><span class="line">                [1,1,0,0,0,1,1],</span><br><span class="line">                [1,1,0,0,0,1,1],</span><br><span class="line">                [1,1,0,0,0,1,1],</span><br><span class="line">                [0,1,1,1,1,1,0],</span><br><span class="line">                [1,1,0,0,0,1,1],</span><br><span class="line">                [1,1,0,0,0,1,1],</span><br><span class="line">                [1,1,0,0,0,1,1],</span><br><span class="line">                [1,1,0,0,0,1,1],</span><br><span class="line">                [0,1,1,1,1,1,0]</span><br><span class="line">            ],//8</span><br><span class="line">            [</span><br><span class="line">                [0,1,1,1,1,1,0],</span><br><span class="line">                [1,1,0,0,0,1,1],</span><br><span class="line">                [1,1,0,0,0,1,1],</span><br><span class="line">                [1,1,0,0,0,1,1],</span><br><span class="line">                [0,1,1,1,0,1,1],</span><br><span class="line">                [0,0,0,0,0,1,1],</span><br><span class="line">                [0,0,0,0,0,1,1],</span><br><span class="line">                [0,0,0,0,1,1,0],</span><br><span class="line">                [0,0,0,1,1,0,0],</span><br><span class="line">                [0,1,1,0,0,0,0]</span><br><span class="line">            ],//9</span><br><span class="line">            [</span><br><span class="line">                [0,0,0,0],</span><br><span class="line">                [0,0,0,0],</span><br><span class="line">                [0,1,1,0],</span><br><span class="line">                [0,1,1,0],</span><br><span class="line">                [0,0,0,0],</span><br><span class="line">                [0,0,0,0],</span><br><span class="line">                [0,1,1,0],</span><br><span class="line">                [0,1,1,0],</span><br><span class="line">                [0,0,0,0],</span><br><span class="line">                [0,0,0,0]</span><br><span class="line">            ]//:</span><br><span class="line">        ];</span><br><span class="line"></span><br><span class="line">    <span class="keyword">function</span> drawDatetime(cxt)&#123;</span><br><span class="line">        var nums = [];</span><br><span class="line"></span><br><span class="line">        context.fillStyle=<span class="string">&quot;#005eac&quot;</span></span><br><span class="line">        var date = new Date();</span><br><span class="line">        var offsetX = 70, offsetY = 30;</span><br><span class="line">        var hours = date.getHours();</span><br><span class="line">        var num1 = Math.floor(hours/10);</span><br><span class="line">        var num2 = hours%10;</span><br><span class="line">        nums.push(&#123;num: num1&#125;);</span><br><span class="line">        nums.push(&#123;num: num2&#125;);</span><br><span class="line">        nums.push(&#123;num: 10&#125;); //冒号</span><br><span class="line">        var minutes = date.getMinutes();</span><br><span class="line">        var num1 = Math.floor(minutes/10);</span><br><span class="line">        var num2 = minutes%10;</span><br><span class="line">        nums.push(&#123;num: num1&#125;);</span><br><span class="line">        nums.push(&#123;num: num2&#125;);</span><br><span class="line">        nums.push(&#123;num: 10&#125;); //冒号</span><br><span class="line">        var seconds = date.getSeconds();</span><br><span class="line">        var num1 = Math.floor(seconds/10);</span><br><span class="line">        var num2 = seconds%10;</span><br><span class="line">        nums.push(&#123;num: num1&#125;);</span><br><span class="line">        nums.push(&#123;num: num2&#125;);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span>(var x = 0;x&lt;nums.length;x++)&#123;</span><br><span class="line">            nums[x].offsetX = offsetX;</span><br><span class="line">            offsetX = drawSingleNumber(offsetX,offsetY, nums[x].num,cxt);</span><br><span class="line">            //两个数字连一块，应该间隔一些距离</span><br><span class="line">            <span class="keyword">if</span>(x&lt;nums.length-1)&#123;</span><br><span class="line">                <span class="keyword">if</span>((nums[x].num!=10) &amp;&amp;(nums[x+1].num!=10))&#123;</span><br><span class="line">                    offsetX+=NUMBER_GAP;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        //说明这是初始化</span><br><span class="line">        <span class="keyword">if</span>(currentNums.length ==0)&#123;</span><br><span class="line">            currentNums = nums;</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            //进行比较</span><br><span class="line">            <span class="keyword">for</span>(var index = 0;index&lt;currentNums.length;index++)&#123;</span><br><span class="line">                <span class="keyword">if</span>(currentNums[index].num!=nums[index].num)&#123;</span><br><span class="line">                    //不一样时，添加彩色小球</span><br><span class="line">                    addBalls(nums[index]);</span><br><span class="line">                    currentNums[index].num=nums[index].num;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        renderBalls(cxt);</span><br><span class="line">        updateBalls();</span><br><span class="line"></span><br><span class="line">        <span class="built_in">return</span> date;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">function</span> addBalls (item) &#123;</span><br><span class="line">        var num = item.num;</span><br><span class="line">        var numMatrix = digit[num];</span><br><span class="line">        <span class="keyword">for</span>(var y = 0;y&lt;numMatrix.length;y++)&#123;</span><br><span class="line">            <span class="keyword">for</span>(var x = 0;x&lt;numMatrix[y].length;x++)&#123;</span><br><span class="line">                <span class="keyword">if</span>(numMatrix[y][x]==1)&#123;</span><br><span class="line">                    var ball=&#123;</span><br><span class="line">                        offsetX:item.offsetX+RADIUS+RADIUS*2*x,</span><br><span class="line">                        offsetY:30+RADIUS+RADIUS*2*y,</span><br><span class="line">                        color:colors[Math.floor(Math.random()*colors.length)],</span><br><span class="line">                        g:1.5+Math.random(),</span><br><span class="line">                        vx:Math.pow(-1, Math.ceil(Math.random()*10))*4+Math.random(),</span><br><span class="line">                        vy:-5</span><br><span class="line">                    &#125;</span><br><span class="line">                    balls.push(ball);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">function</span> renderBalls(cxt)&#123;</span><br><span class="line">        <span class="keyword">for</span>(var index = 0;index&lt;balls.length;index++)&#123;</span><br><span class="line">            cxt.beginPath();</span><br><span class="line">            cxt.fillStyle=balls[index].color;</span><br><span class="line">            cxt.arc(balls[index].offsetX, balls[index].offsetY, RADIUS, 0, 2*Math.PI);</span><br><span class="line">            cxt.fill();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">function</span> <span class="function"><span class="title">updateBalls</span></span> () &#123;</span><br><span class="line">        var i =0;</span><br><span class="line">        <span class="keyword">for</span>(var index = 0;index&lt;balls.length;index++)&#123;</span><br><span class="line">            var ball = balls[index];</span><br><span class="line">            ball.offsetX += ball.vx;</span><br><span class="line">            ball.offsetY += ball.vy;</span><br><span class="line">            ball.vy+=ball.g;</span><br><span class="line">            <span class="keyword">if</span>(ball.offsetY &gt; (WINDOW_HEIGHT-RADIUS))&#123;</span><br><span class="line">                ball.offsetY= WINDOW_HEIGHT-RADIUS;</span><br><span class="line">                ball.vy=-ball.vy*u;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>(ball.offsetX&gt;RADIUS&amp;&amp;ball.offsetX&lt;(WINDOW_WIDTH-RADIUS))&#123;</span><br><span class="line"></span><br><span class="line">                balls[i]=balls[index];</span><br><span class="line">                i++;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        //去除出边界的球</span><br><span class="line">        <span class="keyword">for</span>(;i&lt;balls.length;i++)&#123;</span><br><span class="line">            balls.pop();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">function</span> drawSingleNumber(offsetX, offsetY, num, cxt)&#123;</span><br><span class="line">        var numMatrix = digit[num];</span><br><span class="line">        <span class="keyword">for</span>(var y = 0;y&lt;numMatrix.length;y++)&#123;</span><br><span class="line">            <span class="keyword">for</span>(var x = 0;x&lt;numMatrix[y].length;x++)&#123;</span><br><span class="line">                <span class="keyword">if</span>(numMatrix[y][x]==1)&#123;</span><br><span class="line">                    cxt.beginPath();</span><br><span class="line">                    cxt.arc(offsetX+RADIUS+RADIUS*2*x,offsetY+RADIUS+RADIUS*2*y,RADIUS,0,2*Math.PI);</span><br><span class="line">                    cxt.fill();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        cxt.beginPath();</span><br><span class="line">        offsetX += numMatrix[0].length*RADIUS*2;</span><br><span class="line">        <span class="built_in">return</span> offsetX;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    var canvas = document.getElementById(<span class="string">&quot;canvas&quot;</span>);</span><br><span class="line">    canvas.width=WINDOW_WIDTH;</span><br><span class="line">    canvas.height=WINDOW_HEIGHT;</span><br><span class="line">    context = canvas.getContext(<span class="string">&quot;2d&quot;</span>);</span><br><span class="line"></span><br><span class="line">    //记录当前绘制的时刻</span><br><span class="line">    var currentDate = new Date();</span><br><span class="line"></span><br><span class="line">    setInterval(<span class="function"><span class="title">function</span></span>()&#123;</span><br><span class="line">        //清空整个Canvas，重新绘制内容</span><br><span class="line">        context.clearRect(0, 0, context.canvas.width, context.canvas.height);</span><br><span class="line">        drawDatetime(context);</span><br><span class="line">    &#125;, 50)</span><br><span class="line">&#125;)();</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="自定义文章底部版权声明">自定义文章底部版权声明</h3><p>效果图：</p><p><img src="https://s2.ax1x.com/2019/11/25/MjejGq.png" class="lazyload placeholder" data-srcset="https://s2.ax1x.com/2019/11/25/MjejGq.png" srcset="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/site-img/img-loading.gif" alt="版权"></p><p>在目录 <code>themes/next/layout/_macro/</code> 下添加 <code>my-copyright.swig</code> ，内容如下：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">&#123;% <span class="keyword">if</span> page.copyright %&#125;</span><br><span class="line">&lt;div class=<span class="string">&quot;my_post_copyright&quot;</span>&gt;</span><br><span class="line">  &lt;script src=<span class="string">&quot;//cdn.bootcss.com/clipboard.js/1.5.10/clipboard.min.js&quot;</span>&gt;&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">  &lt;!-- JS库 sweetalert 可修改路径 --&gt;</span><br><span class="line">  &lt;script src=<span class="string">&quot;https://cdn.bootcss.com/jquery/2.0.0/jquery.min.js&quot;</span>&gt;&lt;/script&gt;</span><br><span class="line">  &lt;script src=<span class="string">&quot;https://unpkg.com/sweetalert/dist/sweetalert.min.js&quot;</span>&gt;&lt;/script&gt;</span><br><span class="line">  &lt;p&gt;&lt;span&gt;本文标题:&lt;/span&gt;&lt;a href=<span class="string">&quot;&#123;&#123; url_for(page.path) &#125;&#125;&quot;</span>&gt;&#123;&#123; page.title &#125;&#125;&lt;/a&gt;&lt;/p&gt;</span><br><span class="line">  &lt;p&gt;&lt;span&gt;文章作者:&lt;/span&gt;&lt;a href=<span class="string">&quot;/&quot;</span> title=<span class="string">&quot;访问 &#123;&#123; theme.author &#125;&#125; 的个人博客&quot;</span>&gt;&#123;&#123; theme.author &#125;&#125;&lt;/a&gt;&lt;/p&gt;</span><br><span class="line">  &lt;p&gt;&lt;span&gt;发布时间:&lt;/span&gt;&#123;&#123; page.date.format(<span class="string">&quot;YYYY年MM月DD日 - HH:mm:ss&quot;</span>) &#125;&#125;&lt;/p&gt;</span><br><span class="line">  &lt;p&gt;&lt;span&gt;最后更新:&lt;/span&gt;&#123;&#123; page.updated.format(<span class="string">&quot;YYYY年MM月DD日 - HH:mm:ss&quot;</span>) &#125;&#125;&lt;/p&gt;</span><br><span class="line">  &lt;p&gt;&lt;span&gt;原始链接:&lt;/span&gt;&lt;a href=<span class="string">&quot;&#123;&#123; url_for(page.path) &#125;&#125;&quot;</span> title=<span class="string">&quot;&#123;&#123; page.title &#125;&#125;&quot;</span>&gt;&#123;&#123; page.permalink &#125;&#125;&lt;/a&gt;</span><br><span class="line">    &lt;span class=<span class="string">&quot;copy-path&quot;</span>  title=<span class="string">&quot;点击复制文章链接&quot;</span>&gt;&lt;i class=<span class="string">&quot;fa fa-clipboard&quot;</span> data-clipboard-text=<span class="string">&quot;&#123;&#123; page.permalink &#125;&#125;&quot;</span>  aria-label=<span class="string">&quot;复制成功！&quot;</span>&gt;&lt;/i&gt;&lt;/span&gt;</span><br><span class="line">  &lt;/p&gt;</span><br><span class="line">  &lt;p&gt;&lt;span&gt;许可协议:&lt;/span&gt;&lt;i class=<span class="string">&quot;fa fa-creative-commons&quot;</span>&gt;&lt;/i&gt; &lt;a rel=<span class="string">&quot;license&quot;</span> href=<span class="string">&quot;https://creativecommons.org/licenses/by-nc-nd/4.0/&quot;</span> target=<span class="string">&quot;_blank&quot;</span> title=<span class="string">&quot;Attribution-NonCommercial-NoDerivatives 4.0 International (CC BY-NC-ND 4.0)&quot;</span>&gt;署名-非商业性使用-禁止演绎 4.0 国际&lt;/a&gt; 转载请保留原文链接及作者。&lt;/p&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">    var clipboard = new Clipboard(<span class="string">&#x27;.fa-clipboard&#x27;</span>);</span><br><span class="line">    $(<span class="string">&quot;.fa-clipboard&quot;</span>).click(<span class="function"><span class="title">function</span></span>()&#123;</span><br><span class="line">      clipboard.on(<span class="string">&#x27;success&#x27;</span>, <span class="function"><span class="title">function</span></span>()&#123;</span><br><span class="line">        swal(&#123;</span><br><span class="line">          title: <span class="string">&quot;&quot;</span>,</span><br><span class="line">          text: <span class="string">&#x27;复制成功&#x27;</span>,</span><br><span class="line">          icon: <span class="string">&quot;success&quot;</span>,</span><br><span class="line">          showConfirmButton: <span class="literal">true</span></span><br><span class="line">          &#125;);</span><br><span class="line">    &#125;);</span><br><span class="line">    &#125;);</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&#123;% endif %&#125;</span><br></pre></td></tr></table></figure><p>在目录 <code>themes/next/source/css/_common/components/post/</code> 下添加 <code>my-post-copyright.styl</code>，内容如下:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line">.my_post_copyright &#123;</span><br><span class="line">  width: 85%;</span><br><span class="line">  max-width: 45em;</span><br><span class="line">  margin: 2.8em auto 0;</span><br><span class="line">  padding: 0.5em 1.0em;</span><br><span class="line">  border: 1px solid <span class="comment">#d3d3d3;</span></span><br><span class="line">  font-size: 0.93rem;</span><br><span class="line">  line-height: 1.6em;</span><br><span class="line">  word-break: break-all;</span><br><span class="line">  background: rgba(255, 255, 255, 0.4);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.my_post_copyright p &#123;</span><br><span class="line">  margin: 0;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.my_post_copyright span &#123;</span><br><span class="line">  display: inline-block;</span><br><span class="line">  width: 5.2em;</span><br><span class="line">  color: <span class="comment">#b5b5b5;</span></span><br><span class="line">  font-weight: bold;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.my_post_copyright .raw &#123;</span><br><span class="line">  margin-left: 1em;</span><br><span class="line">  width: 5em;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.my_post_copyright a &#123;</span><br><span class="line">  color: <span class="comment">#808080;</span></span><br><span class="line">  border-bottom: 0;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.my_post_copyright a:hover &#123;</span><br><span class="line">  color: <span class="comment">#0593d3;</span></span><br><span class="line">  text-decoration: underline;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.my_post_copyright:hover .fa-clipboard &#123;</span><br><span class="line">  color: <span class="comment">#000;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.my_post_copyright .post-url:hover &#123;</span><br><span class="line">  font-weight: normal;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.my_post_copyright .copy-path &#123;</span><br><span class="line">  margin-left: 1em;</span><br><span class="line">  width: 1em;</span><br><span class="line">  +<span class="function"><span class="title">mobile</span></span>() &#123;</span><br><span class="line">    display: none;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.my_post_copyright .copy-path:hover &#123;</span><br><span class="line">  color: <span class="comment">#808080;</span></span><br><span class="line">  cursor: pointer;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>修改 <code>themes/next/layout/_macro/post.swig</code> ，如下：</p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&#123;#####################&#125;</span><br><span class="line">&#123;### END POST BODY ###&#125;</span><br><span class="line">&#123;#####################&#125;</span><br><span class="line"></span><br><span class="line"><span class="addition">+&lt;div&gt;</span></span><br><span class="line"><span class="addition">+      &#123;% if not is_index %&#125;</span></span><br><span class="line"><span class="addition">+        &#123;% include &#x27;my-copyright.swig&#x27; %&#125;</span></span><br><span class="line"><span class="addition">+      &#123;% endif %&#125;</span></span><br><span class="line"><span class="addition">+&lt;/div&gt;</span></span><br><span class="line"></span><br><span class="line">&#123;% if theme.wechat_subscriber.enabled and not is_index %&#125;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &#123;% include &#x27;wechat-subscriber.swig&#x27; %&#125;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&#123;% endif %&#125;</span><br></pre></td></tr></table></figure><div class="note"><p>danger,以上 + 号后面的为新增代码</p></div><p>打开 <code>themes/next/source/css/_common/components/post/post.styl</code> 文件，在最后一行增加代码：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">@import <span class="string">&quot;my-post-copyright&quot;</span></span><br></pre></td></tr></table></figure><p>设置新建文章自动开启 copyright ，即新建文章自动显示自定义的版权声明，设置 <code>～/scaffolds/post.md</code> 文件，如下：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">title: &#123;&#123; title &#125;&#125;</span><br><span class="line">date: &#123;&#123; date &#125;&#125;</span><br><span class="line">copyright: <span class="literal">true</span> <span class="comment">#新增,开启</span></span><br><span class="line">---</span><br></pre></td></tr></table></figure><h3 id="博客动态背景图片">博客动态背景图片</h3><p>在 <code>themes/next/source/css/_custom/custom.styl</code> 中添加CSS样式</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* hexo next主题下，自动更换背景图片 began */</span></span><br><span class="line"><span class="comment">/* 图片来源https://source.unsplash.com/ */</span></span><br><span class="line"></span><br><span class="line"><span class="selector-tag">body</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">url</span>(https://source.unsplash.com/random/<span class="number">1920</span>x1080);</span><br><span class="line">  <span class="attribute">background-repeat</span>: no-repeat;</span><br><span class="line">  <span class="attribute">background-attachment</span>: fixed;</span><br><span class="line">  <span class="attribute">background-position</span>: <span class="number">50%</span> <span class="number">50%</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* hexo next主题下，自动更换背景图片 end */</span></span><br></pre></td></tr></table></figure><h3 id="博客写作进阶">博客写作进阶</h3><p>Next主题集成了很多好看的写作样式，具体可以看我的<a href="https://hasaik.com/posts/c7631ec1.html">另外一篇博客</a>。</p><h3 id="插入音乐和视频">插入音乐和视频</h3><p>音乐的话，网易云音乐的外链很好用，不仅有可以单曲，还能有歌单，有兴趣的自己去<a href="https://music.163.com/">网易云音乐</a>找首歌尝试。但是目前有很多音乐因为版权原因放不了，还有就是不完全支持 https，导致浏览器地址栏的小绿锁不见了。要解决这些缺点，就需要安装插件👽。</p><h4 id="音乐">音乐</h4><ol><li>直接用 HTML 的标签，写法如下：</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;audio src=<span class="string">&quot;https://什么什么什么.mp3&quot;</span> style=<span class="string">&quot;max-height :100%; max-width: 100%; display: block; margin-left: auto; margin-right: auto;&quot;</span> controls=<span class="string">&quot;controls&quot;</span> loop=<span class="string">&quot;loop&quot;</span> preload=<span class="string">&quot;meta&quot;</span>&gt;Your browser does not support the audio tag.&lt;/audio&gt;</span><br></pre></td></tr></table></figure><ol start="2"><li>用插件，有显示歌词功能，也美观。首先在站点文件夹根目录安装插件：</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-tag-aplayer --save</span><br></pre></td></tr></table></figure><p>然后文章中的写法：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% aplayer <span class="string">&quot;歌曲名&quot;</span> <span class="string">&quot;歌手名&quot;</span> <span class="string">&quot;https://什么什么什么.mp3&quot;</span> <span class="string">&quot;https://封面图.jpg&quot;</span> <span class="string">&quot;lrc:https://歌词.lrc&quot;</span> %&#125;</span><br></pre></td></tr></table></figure><p>另外可以支持歌单：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">&#123;% aplayerlist %&#125;</span><br><span class="line">&#123;</span><br><span class="line">    <span class="string">&quot;autoplay&quot;</span>: <span class="literal">false</span>,</span><br><span class="line">    <span class="string">&quot;showlrc&quot;</span>: 3,</span><br><span class="line">    <span class="string">&quot;mutex&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="string">&quot;music&quot;</span>: [</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="string">&quot;title&quot;</span>: <span class="string">&quot;歌曲名&quot;</span>,</span><br><span class="line">            <span class="string">&quot;author&quot;</span>: <span class="string">&quot;歌手名&quot;</span>,</span><br><span class="line">            <span class="string">&quot;url&quot;</span>: <span class="string">&quot;https://什么什么什么.mp3&quot;</span>,</span><br><span class="line">            <span class="string">&quot;pic&quot;</span>: <span class="string">&quot;https://封面图.jpg&quot;</span>,</span><br><span class="line">            <span class="string">&quot;lrc&quot;</span>: <span class="string">&quot;https://歌词.lrc&quot;</span></span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="string">&quot;title&quot;</span>: <span class="string">&quot;歌曲名&quot;</span>,</span><br><span class="line">            <span class="string">&quot;author&quot;</span>: <span class="string">&quot;歌手名&quot;</span>,</span><br><span class="line">            <span class="string">&quot;url&quot;</span>: <span class="string">&quot;https://什么什么什么.mp3&quot;</span>,</span><br><span class="line">            <span class="string">&quot;pic&quot;</span>: <span class="string">&quot;https://封面图.jpg&quot;</span>,</span><br><span class="line">            <span class="string">&quot;lrc&quot;</span>: <span class="string">&quot;https://歌词.lrc&quot;</span></span><br><span class="line">        &#125;</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br><span class="line">&#123;% endaplayerlist %&#125;</span><br></pre></td></tr></table></figure><p>里面的详细参数见 <a href="https://github.com/MoePlayer/hexo-tag-aplayer">README</a> 和这插件的「母亲」Aplayer 的<a href="https://aplayer.js.org/">官方文档</a>。关于 <a href="https://baike.baidu.com/item/lrc/46935">LRC</a> 歌词，可以用<a href="https://www.zhihu.com/question/27638171">工具</a>下载网易云音乐的歌词，另发现暂时不支持 <code>offset</code> 参数。当然，如果那歌词很操蛋，有错误（比如字母大小写和标点符号乱加）或者时间完全对不上，然后你也和我一样是个完美主义者，那接下来就是令人窒息的操作了，一句一句自己查看修改……</p><p>什么，你想把网易云的几百首歌手动同步到博客😨？慢慢慢，有一种<a href="https://github.com/MoePlayer/hexo-tag-aplayer#meingjs-support-new-in-30">非常简单的方法</a>，此这种方法也支持单曲，将参数里的 <code>playlist</code> 更改为 <code>song</code> 即可，非常建议食用！更多功能请仔细阅读 README。</p><h4 id="视频">视频</h4><ol><li>直接用 HTML 的标签，写法如下：</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;video poster=<span class="string">&quot;https://封面图.jpg&quot;</span> src=<span class="string">&quot;https://什么什么什么.mp4&quot;</span> style=<span class="string">&quot;max-height :100%; max-width: 100%; display: block; margin-left: auto; margin-right: auto;&quot;</span> controls=<span class="string">&quot;controls&quot;</span> loop=<span class="string">&quot;loop&quot;</span> preload=<span class="string">&quot;meta&quot;</span>&gt;Your browser does not support the video tag.&lt;/video&gt;</span><br></pre></td></tr></table></figure><ol start="2"><li>用插件，可支持弹幕，首先在站点文件夹根目录安装插件：</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-tag-dplayer --save</span><br></pre></td></tr></table></figure><p>然后文章中的写法：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% dplayer <span class="string">&quot;url=https://什么什么什么.mp4&quot;</span> <span class="string">&quot;https://封面图.jpg&quot;</span> <span class="string">&quot;api=https://api.prprpr.me/dplayer/&quot;</span> <span class="string">&quot;id=&quot;</span> <span class="string">&quot;loop=false&quot;</span> %&#125;</span><br></pre></td></tr></table></figure><p>要使用弹幕，必须有 <code>api</code> 和 <code>id</code> 两项，并且若使用的是官方的 api 地址（即上面的），id 的值不能与<a href="https://api.prprpr.me/dplayer/list">这个列表</a>的值一样。id 的值自己随便取，唯一要求就是前面这点。如果唯一要求难倒了你，可以使用<a href="http://tool.oschina.net/encrypt?type=2">这个工具</a>将一段与众不同的文字😂生成一段看起来毫无意义的哈希值，这样看起来是不是好多了。</p><p>当然，这个插件的功能还有很多，可以去 <a href="https://github.com/MoePlayer/hexo-tag-dplayer">README</a> 和这插件的「母亲」Dplayer 的<a href="https://dplayer.js.org/">官方文档</a>看看。</p><h3 id="主题代码块高亮">主题代码块高亮</h3><p>发现一款类似 MacPanel 的代码块高亮样式，具体可以看我的<a href="https://hasaik.com/posts/d7399e80.html">另外一篇博客</a>。</p><h3 id="主题头像旋转功能">主题头像旋转功能</h3><p>将头像显示成圆形，鼠标放上去有旋转效果。</p><p>找到 <code>/themes/next/source/css/_common/components/sidebar/sidebar-author.styl</code> 添加以下代码：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line">/*  添加头像旋转 */</span><br><span class="line">.site-author-image &#123;</span><br><span class="line">  display: block;</span><br><span class="line">  margin: 0 auto;</span><br><span class="line">  padding: <span class="variable">$site</span>-author-image-padding;</span><br><span class="line">  max-width: <span class="variable">$site</span>-author-image-width;</span><br><span class="line">  height: <span class="variable">$site</span>-author-image-height;</span><br><span class="line">  border: <span class="variable">$site</span>-author-image-border-width solid <span class="variable">$site</span>-author-image-border-color;</span><br><span class="line">  /* 头像圆形 */</span><br><span class="line">  border-radius: 80px;</span><br><span class="line">  -webkit-border-radius: 80px;</span><br><span class="line">  -moz-border-radius: 80px;</span><br><span class="line">  box-shadow: inset 0 -1px 0 <span class="comment">#333sf;</span></span><br><span class="line">  /* 设置循环动画 [animation: (play)动画名称 (2s)动画播放时长单位秒或微秒 (ase-out)动画播放的速度曲线为以低速结束</span><br><span class="line">    (1s)等待1秒然后开始动画 (1)动画播放次数(infinite为循环播放) ]*/</span><br><span class="line"></span><br><span class="line">  /* 鼠标经过头像旋转360度 */</span><br><span class="line">  -webkit-transition: -webkit-transform 1.0s ease-out;</span><br><span class="line">  -moz-transition: -moz-transform 1.0s ease-out;</span><br><span class="line">  transition: transform 1.0s ease-out;</span><br><span class="line">&#125;</span><br><span class="line">img:hover &#123;</span><br><span class="line">  /* 鼠标经过停止头像旋转</span><br><span class="line">  -webkit-animation-play-state:paused;</span><br><span class="line">  animation-play-state:paused;*/</span><br><span class="line">  /* 鼠标经过头像旋转360度 */</span><br><span class="line">  -webkit-transform: rotateZ(360deg);</span><br><span class="line">  -moz-transform: rotateZ(360deg);</span><br><span class="line">  transform: rotateZ(360deg);</span><br><span class="line">&#125;</span><br><span class="line">/* Z 轴旋转动画 */</span><br><span class="line">@-webkit-keyframes play &#123;</span><br><span class="line">  0% &#123;</span><br><span class="line">    -webkit-transform: rotateZ(0deg);</span><br><span class="line">  &#125;</span><br><span class="line">  100% &#123;</span><br><span class="line">    -webkit-transform: rotateZ(-360deg);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">@-moz-keyframes play &#123;</span><br><span class="line">  0% &#123;</span><br><span class="line">    -moz-transform: rotateZ(0deg);</span><br><span class="line">  &#125;</span><br><span class="line">  100% &#123;</span><br><span class="line">    -moz-transform: rotateZ(-360deg);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">@keyframes play &#123;</span><br><span class="line">  0% &#123;</span><br><span class="line">    transform: rotateZ(0deg);</span><br><span class="line">  &#125;</span><br><span class="line">  100% &#123;</span><br><span class="line">    transform: rotateZ(-360deg);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="实现图片点击放大效果">实现图片点击放大效果</h2><p>next 主题自带 facybox 图片放大功能，首先推荐使用 fancybox，如果不想用可以使用以下自定义的图片放大功能，首先创建 <code>images.js</code> 文件如下：</p><p>目录位置：hexo/themes/next/source/js/src/image.js</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">let</span> container = document.documentElement||document.body;</span><br><span class="line"><span class="built_in">let</span> img,div,src,btnleft,btnright;</span><br><span class="line">var imgid=0;</span><br><span class="line"><span class="built_in">let</span> x,y,w,h,tx,ty,tw,th,ww,wh;</span><br><span class="line"><span class="built_in">let</span> closeMove=<span class="function"><span class="title">function</span></span>()&#123;</span><br><span class="line">    <span class="keyword">if</span>(div==undefined)&#123;</span><br><span class="line">        <span class="built_in">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    div.style.opacity=0;</span><br><span class="line">    img.style.height=h+<span class="string">&quot;px&quot;</span>;</span><br><span class="line">    img.style.width=w+<span class="string">&quot;px&quot;</span>;</span><br><span class="line">    img.style.left=x+<span class="string">&quot;px&quot;</span>;</span><br><span class="line">    img.style.top=(y - container.scrollTop)+<span class="string">&quot;px&quot;</span>;</span><br><span class="line">    // 延迟移除dom</span><br><span class="line">    setTimeout(<span class="function"><span class="title">function</span></span>()&#123;</span><br><span class="line">        div.remove();</span><br><span class="line">        img.remove();</span><br><span class="line">        btnright.remove();</span><br><span class="line">        btnleft.remove();</span><br><span class="line">    &#125;,100);</span><br><span class="line"></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="built_in">let</span> closeFade=<span class="function"><span class="title">function</span></span>()&#123;</span><br><span class="line">    <span class="keyword">if</span>(div==undefined)&#123;</span><br><span class="line">        <span class="built_in">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    div.style.opacity=0;</span><br><span class="line">    img.style.opacity=0;</span><br><span class="line">    // 延迟移除dom</span><br><span class="line">    setTimeout(<span class="function"><span class="title">function</span></span>()&#123;</span><br><span class="line">        div.remove();</span><br><span class="line">        img.remove();</span><br><span class="line">        btnright.remove();</span><br><span class="line">        btnleft.remove();</span><br><span class="line">    &#125;,100);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">// 监听滚动关闭层</span><br><span class="line">document.addEventListener(<span class="string">&quot;scroll&quot;</span>,<span class="function"><span class="title">function</span></span>()&#123;</span><br><span class="line">    closeFade();</span><br><span class="line">&#125;);</span><br><span class="line">document.querySelectorAll(<span class="string">&quot;img&quot;</span>).forEach(v=&gt;&#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (v.parentNode.localName!=a) &#123;</span><br><span class="line">v.id=imgid;</span><br><span class="line">imgid++;</span><br><span class="line">    v.addEventListener(<span class="string">&quot;click&quot;</span>,<span class="keyword">function</span>(e)&#123; // 注册事件</span><br><span class="line">        // 记录小图的位置个大小</span><br><span class="line">        x=e.target.offsetLeft;</span><br><span class="line">        y=e.target.offsetTop;</span><br><span class="line">        w=e.target.offsetWidth;</span><br><span class="line">        h=e.target.offsetHeight;</span><br><span class="line">         data-src=e.target.src;</span><br><span class="line">        id=e.target.id;</span><br><span class="line">        // 创建遮罩层</span><br><span class="line">        div=document.createElement(<span class="string">&quot;div&quot;</span>);</span><br><span class="line">        div.style.cssText=`</span><br><span class="line">            position:fixed;</span><br><span class="line">            left:0;</span><br><span class="line">            top:0;</span><br><span class="line">            bottom:0;</span><br><span class="line">            right:0;</span><br><span class="line">            background-color: rgba(25,25,25,0.8);</span><br><span class="line">            z-index:99999999;</span><br><span class="line">            transition:all .3s cubic-bezier(0.165, 0.84, 0.44, 1);</span><br><span class="line">        `;</span><br><span class="line">        document.body.appendChild(div);</span><br><span class="line">        setTimeout(<span class="function"><span class="title">function</span></span>()&#123;</span><br><span class="line">            div.style.opacity=1;</span><br><span class="line">        &#125;,0);</span><br><span class="line">        // (此处可以加loading)</span><br><span class="line"></span><br><span class="line">        // 创建副本</span><br><span class="line">        img=new Image();</span><br><span class="line">        btnright=document.createElement(<span class="string">&quot;button&quot;</span>);</span><br><span class="line">        btnleft=document.createElement(<span class="string">&quot;button&quot;</span>);</span><br><span class="line">        img. data-src=src;</span><br><span class="line">        btnleft.style.cssText=`</span><br><span class="line">    position:fixed;</span><br><span class="line">    border-radius: 50%;;</span><br><span class="line">    left:<span class="variable">$&#123;x - 20&#125;</span>px;</span><br><span class="line">    top:<span class="variable">$&#123;y - container.scrollTop + h/2&#125;</span>px;</span><br><span class="line">    width:50px;</span><br><span class="line">    height:50px;</span><br><span class="line">    border: 0px;</span><br><span class="line">    background-color: rgba(200,200,200,0.8);</span><br><span class="line">    font-size: 20px;</span><br><span class="line">    z-index: 999999999;</span><br><span class="line">    transition:all .3s cubic-bezier(0.165, 0.84, 0.44, 1);</span><br><span class="line">`;</span><br><span class="line">btnright.style.cssText=`</span><br><span class="line">    position:fixed;</span><br><span class="line">    border-radius: 50%;</span><br><span class="line">    left:<span class="variable">$&#123;x + w + 20&#125;</span>px;</span><br><span class="line">    top:<span class="variable">$&#123;y - container.scrollTop + h/2&#125;</span>px;</span><br><span class="line">    width:50px;</span><br><span class="line">    border: 0px;</span><br><span class="line">    height:50px;</span><br><span class="line">    font-size: 20px;</span><br><span class="line">    background-color: rgba(200,200,200,0.8);</span><br><span class="line">    z-index: 999999999;</span><br><span class="line">    transition:all .3s cubic-bezier(0.165, 0.84, 0.44, 1);</span><br><span class="line">`;</span><br><span class="line">btnleft.innerText=<span class="string">&quot;&lt;&quot;</span>;</span><br><span class="line">btnright.innerText=<span class="string">&quot;&gt;&quot;</span>;</span><br><span class="line"></span><br><span class="line">img.style.cssText=`</span><br><span class="line">    position:fixed;</span><br><span class="line">    border-radius: 12px;</span><br><span class="line">    left:<span class="variable">$&#123;x&#125;</span>px;</span><br><span class="line">    top:<span class="variable">$&#123;y - container.scrollTop&#125;</span>px;</span><br><span class="line">    width:<span class="variable">$&#123;w&#125;</span>px;</span><br><span class="line">    height:<span class="variable">$&#123;h&#125;</span>px;</span><br><span class="line">    z-index: 999999999;</span><br><span class="line">    transition:all .3s cubic-bezier(0.165, 0.84, 0.44, 1);</span><br><span class="line">    opacity:0;</span><br><span class="line">`;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        btnleft.onclick=<span class="function"><span class="title">function</span></span>()&#123;</span><br><span class="line">        <span class="keyword">if</span>(id===0)&#123;</span><br><span class="line">        alert(<span class="string">&quot;已经是第一张了！&quot;</span>);</span><br><span class="line">        <span class="built_in">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        var left=document.getElementById(id-1);</span><br><span class="line">        img. data-src=left.src;</span><br><span class="line">        x=left.offsetLeft;</span><br><span class="line">        y=left.offsetTop;</span><br><span class="line">      w=left.offsetWidth;</span><br><span class="line">        h=left.offsetHeight;</span><br><span class="line">        id--;</span><br><span class="line">        &#125;</span><br><span class="line">        btnright.onclick=<span class="function"><span class="title">function</span></span>()&#123;</span><br><span class="line">        id++;</span><br><span class="line">        <span class="keyword">if</span>(id&gt;=imgid)&#123;</span><br><span class="line">        alert(<span class="string">&quot;已经是最后一张了！&quot;</span>);</span><br><span class="line">        <span class="built_in">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        var right=document.getElementById(id);</span><br><span class="line">        img. data-src=right.src;</span><br><span class="line">        x=right.offsetLeft;</span><br><span class="line">        y=right.offsetTop;</span><br><span class="line">      w=right.offsetWidth;</span><br><span class="line">        h=right.offsetHeight;</span><br><span class="line">        &#125;</span><br><span class="line">        img.onload=<span class="function"><span class="title">function</span></span>()&#123;</span><br><span class="line">            document.body.appendChild(img);</span><br><span class="line">            document.body.appendChild(btnright);</span><br><span class="line">            document.body.appendChild(btnleft);</span><br><span class="line"></span><br><span class="line">            // 浏览器宽高</span><br><span class="line">            wh=window.innerHeight;</span><br><span class="line">            ww=window.innerWidth;</span><br><span class="line"></span><br><span class="line">            // 目标宽高和坐标</span><br><span class="line">            <span class="keyword">if</span>(w/h&lt;ww/wh)&#123;</span><br><span class="line">            th=wh-80;</span><br><span class="line">            tw=w/h*th &gt;&gt; 0;</span><br><span class="line">            tx=(ww - tw) / 2;</span><br><span class="line">            ty=40;            </span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span>&#123;</span><br><span class="line">            tw=ww*0.8;</span><br><span class="line">            th=h/w*tw &gt;&gt; 0;</span><br><span class="line">            tx=ww*0.1;</span><br><span class="line">            ty=(wh-th)/2;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            // 延迟写入否则不会有动画</span><br><span class="line">            setTimeout(<span class="function"><span class="title">function</span></span>()&#123;</span><br><span class="line">                img.style.opacity=1;</span><br><span class="line">                img.style.height=th+<span class="string">&quot;px&quot;</span>;</span><br><span class="line">                img.style.width=tw+<span class="string">&quot;px&quot;</span>;</span><br><span class="line">                img.style.left=tx+<span class="string">&quot;px&quot;</span>;</span><br><span class="line">                img.style.top=ty+<span class="string">&quot;px&quot;</span>;</span><br><span class="line">                btnleft.style.left=(tx-90)+<span class="string">&quot;px&quot;</span>;</span><br><span class="line">                btnleft.style.top=(ty+th/2)+<span class="string">&quot;px&quot;</span>;</span><br><span class="line">                btnright.style.left=(tx+tw+40)+<span class="string">&quot;px&quot;</span>;</span><br><span class="line">                btnright.style.top=(ty+th/2)+<span class="string">&quot;px&quot;</span>;</span><br><span class="line">                // 点击隐藏</span><br><span class="line">                div.onclick=img.onclick=closeMove;</span><br><span class="line">            &#125;,10);</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;);//end event</span><br><span class="line">&#125;</span><br><span class="line">&#125;);//end forEach</span><br></pre></td></tr></table></figure><p>然后在 <code>hexo/themes/layout/_layout.swig</code> 中最下面 <code>&lt;script&gt;&lt;/script&gt;</code> 中加入如下引入：</p><p>文件位置：hexo/themes/layout/_layout.swig</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;script <span class="built_in">type</span>=<span class="string">&quot;text/javascript&quot;</span> src=<span class="string">&quot;/js/src/image.js&quot;</span>&gt;&lt;/script&gt;</span><br></pre></td></tr></table></figure><h3 id="给博客添加豆瓣读书-电影-游戏页面">给博客添加豆瓣读书/电影/游戏页面</h3><p>作为一个有内涵的博客…咳咳…展示自己丰富的阅读量是很有必要的，豆瓣读书就是这么一个很好的平台，当然已经有作者利用爬虫将豆瓣读书/电影/游戏内容爬取下来，并制作成了 hexo 博客插件，具体可以看官方文档<a href="https://github.com/mythsman/hexo-douban">README</a>，当然也可以看我的<a href="https://hasaik.com/posts/7fbe9500.html">另外一篇博客</a>。</p><p>当然作者所做的界面是没有样式的，我们可以在作者的基础上继续魔改增加自己喜欢的样式，在安装好所需插件后，我们打开目录为 <code>hexo/node_modules/hexo-douban/lib/templates/index.css</code> 文件，里面是整个阅读界面的 css 样式代码文件，我们可以在其中添加背景图片等样式，比如可以添加如下：</p><p>文件位置：hexo/node_modules/hexo-douban/lib/templates/index.css</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">.main &#123;</span><br><span class="line">    padding-bottom: 150px;</span><br><span class="line">    margin-top: 0px;</span><br><span class="line">    background-image:url(<span class="string">&quot;xxx.jpg&quot;</span>);</span><br><span class="line">    background-size: cover;</span><br><span class="line">    background-attachment: fixed;</span><br><span class="line">    background-repeat:no-repeat;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>修改上面的 url 中地址图片链接就可以新增背景图片了~</p><h3 id="增加二次元看板娘live2d模型">增加二次元看板娘live2d模型</h3><p>如果你喜欢二次元，或者想给博客增加一个动态装饰，那么看板娘肯定是你的不二之选了，看板娘原生<a href="https://github.com/EYHN/hexo-helper-live2d">使用文档在这里</a> ，但是原生的其实不是很好用，这里我推荐一个只需要引入一个js文件就能实现看板娘的方法，<a href="https://github.com/stevenjoezhang/live2d-widget">README</a>在这里，这个作者对Live2d模型进行了深度优化，可以根据鼠标放置和点击内容的不同进行一定的提示信息，并且代码中设置了一年中特殊节日的祝福语，可以说是很有心了，唯一的缺点就是网页刷新时人物模型的加载速度较慢🌚~</p><p>具体设置的话，我们去这个<a href="https://github.com/stevenjoezhang/live2d-widget">张书樵live2d-widget</a>下载这个 zip 项目并解压到 <code>themes/next/source</code> 下。</p><p>然后打开下载文件中的 <code>autoload.js</code> 文件，修改以下代码：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">const live2d_path = <span class="string">&quot;https://cdn.jsdelivr.net/gh/stevenjoezhang/live2d-widget/&quot;</span>;</span><br></pre></td></tr></table></figure><p>为下面这个地址：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">const live2d_path = <span class="string">&quot;/live2d-widget/&quot;</span>;</span><br></pre></td></tr></table></figure><p>上面那个地址表示在本地引用，然后打开 <code>themes/next/layout/_layout.swig</code> 文件，在其中引入 js 文件如下：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;script src=<span class="string">&quot;/live2d-widget/autoload.js&quot;</span>&gt;&lt;/script&gt;</span><br></pre></td></tr></table></figure><p>打开主题配置文件 <code>themes/next/_config.xml</code> 文件，在其中末尾添加：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">live2d:</span><br><span class="line">  <span class="built_in">enable</span>: <span class="literal">true</span>  <span class="comment"># 设置看板娘开关</span></span><br></pre></td></tr></table></figure><p>最后，想修改看板娘大小、位置、格式、文本内容等，可查看并修改 <code>waifu-tips.js</code> 、 <code>waifu-tips.json</code> 和 <code>waifu.css</code> 三个文件。</p><h3 id="彩色标签云">彩色标签云</h3><p>就是标签上增加随机颜色，每次刷新页面标签上展示颜色都不一样。打开 <code>hexo/themes/next/layout/page.swig</code> 文件，找到：</p><p>文件位置：hexo/themes/next/layout/page.swig</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% <span class="keyword">if</span> page.type === <span class="string">&quot;tags&quot;</span> %&#125;</span><br></pre></td></tr></table></figure><p>然后将这段代码：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;div class=<span class="string">&quot;tag-cloud&quot;</span>&gt;</span><br><span class="line"></span><br><span class="line">   &lt;!-- &lt;div class=<span class="string">&quot;tag-cloud-title&quot;</span>&gt;</span><br><span class="line">       &#123;&#123; _p(counter.tag_cloud, site.tags.length) &#125;&#125;</span><br><span class="line">   &lt;/div&gt; --&gt;</span><br><span class="line">   &lt;div class=<span class="string">&quot;tag-cloud-tags&quot;</span> id=<span class="string">&quot;tags&quot;</span>&gt;</span><br><span class="line">     &#123;&#123; tagcloud(&#123;min_font: 16, max_font: 16, amount: 300, color: <span class="literal">true</span>, start_color: <span class="comment">#fff, end_color: #fff&#125;) &#125;&#125;</span></span><br><span class="line">   &lt;/div&gt;</span><br><span class="line"> &lt;/div&gt;</span><br></pre></td></tr></table></figure><p>换成这段代码：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line">&lt;div class=<span class="string">&quot;tag-cloud&quot;</span>&gt;</span><br><span class="line">  &lt;!-- &lt;div class=<span class="string">&quot;tag-cloud-title&quot;</span>&gt;</span><br><span class="line">      &#123;&#123; _p(counter.tag_cloud, site.tags.length) &#125;&#125;</span><br><span class="line">  &lt;/div&gt; --&gt;</span><br><span class="line">  &lt;div class=<span class="string">&quot;tag-cloud-tags&quot;</span> id=<span class="string">&quot;tags&quot;</span>&gt;</span><br><span class="line">    &#123;&#123; tagcloud(&#123;min_font: 16, max_font: 16, amount: 300, color: <span class="literal">true</span>, start_color: <span class="comment">#fff, end_color: #fff&#125;) &#125;&#125;</span></span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;br&gt;</span><br><span class="line"></span><br><span class="line">&lt;script <span class="built_in">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><br><span class="line">   var alltags=document.getElementById(tags);</span><br><span class="line">   var tags=alltags.getElementsByTagName(a);</span><br><span class="line"></span><br><span class="line">   <span class="keyword">for</span> (var i = tags.length - 1; i &gt;= 0; i--) &#123;</span><br><span class="line">     var r=Math.floor(Math.random()*75+130);</span><br><span class="line">     var g=Math.floor(Math.random()*75+100);</span><br><span class="line">     var b=Math.floor(Math.random()*75+80);</span><br><span class="line">     tags[i].style.background = <span class="string">&quot;rgb(&quot;</span>+r+<span class="string">&quot;,&quot;</span>+g+<span class="string">&quot;,&quot;</span>+b+<span class="string">&quot;)&quot;</span>;</span><br><span class="line">   &#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style <span class="built_in">type</span>=<span class="string">&quot;text/css&quot;</span>&gt;</span><br><span class="line">    div<span class="comment">#posts.posts-expand .tag-cloud a&#123;</span></span><br><span class="line">   background-color: <span class="comment">#f5f7f1;</span></span><br><span class="line">   border-radius: 6px;</span><br><span class="line">   padding-left: 10px;</span><br><span class="line">   padding-right: 10px;</span><br><span class="line">   margin-top: 18px;</span><br><span class="line"></span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> .tag-cloud a&#123;</span><br><span class="line">   background-color: <span class="comment">#f5f7f1;</span></span><br><span class="line">   border-radius: 4px;</span><br><span class="line">   padding-right: 5px;</span><br><span class="line">   padding-left: 5px;</span><br><span class="line">   margin-right: 5px;</span><br><span class="line">   margin-left: 0px;</span><br><span class="line">   margin-top: 8px;</span><br><span class="line">   margin-bottom: 0px;</span><br><span class="line"></span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> .tag-cloud a:before&#123;</span><br><span class="line">      content: <span class="string">&quot;?&quot;</span>;</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> .tag-cloud-tags&#123;</span><br><span class="line">   text-align: left;</span><br><span class="line">   counter-reset: tags;</span><br><span class="line"> &#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure><p>然后重新渲染页面就好啦~然后如果需要将标签云放到首页，直接在对应位置添加标签云的引用代码即可：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;div class=<span class="string">&quot;tag-cloud&quot;</span>&gt;</span><br><span class="line">  &lt;div class=<span class="string">&quot;tag-cloud-tags&quot;</span> id=<span class="string">&quot;tags&quot;</span>&gt;</span><br><span class="line">    &#123;&#123; tagcloud(&#123;min_font: 16, max_font: 16, amount: 300, color: <span class="literal">true</span>, start_color: <span class="string">&#x27;#fff&#x27;</span>, end_color: <span class="string">&#x27;#fff&#x27;</span>&#125;) &#125;&#125;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure><h3 id="鼠标样式">鼠标样式</h3><p>添加CSS样式代码：</p><p>文件位置：/themes/next/source/css/_custom/custom.styl</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">/* 鼠标样式 */</span><br><span class="line">* &#123;</span><br><span class="line">  cursor: url(/images/default.cur),auto;</span><br><span class="line">&#125;</span><br><span class="line">:link &#123;</span><br><span class="line">  cursor: url(/images/pointer.cur),auto</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>用到的两个文件：default.cur、pointer.cur 位于 images 目录下，因为是 .cur 这种静态光标文件，编辑器打开是一堆 <a href="http://ascii.911cha.com/">ASCII 码</a>，这里就不贴了，直接附上链接，当然，你也可以在浏览器里获取。</p><span class='btn'><a class="button" href='default.cur' title='https://hasaik.com/images/default.cur'><i class='download fa-lg fa-fw'></i>https://hasaik.com/images/default.cur</a></span><span class='btn'><a class="button" href='pointer.cur' title='https://hasaik.com/images/pointer.cur'><i class='download fa-lg fa-fw'></i>https://hasaik.com/images/pointer.cur</a></span><h3 id="鼠标点击特效">鼠标点击特效</h3><p>鼠标点击常用4种特效可以参考的我的<a href="https://hasaik.com/posts/9c9b482b.html">另外一篇博客</a>。</p><h3 id="Valine评论框样式美化">Valine评论框样式美化</h3><p><a href="https://valine.js.org/">valine</a>自带的样式比较素，并且颜色有点单调，不如花点时间将 valine 重新打造一下，注意我修改的 valine 样式只支持 1.3.4 版本的，其它版本的也可以修改，但是需要重新适配 CSS 样式。具体内容参考我的<a href="https://hasaik.com/posts/89ea6c8b.html">另外一篇博客</a>。</p><h3 id="归档页面美化">归档页面美化</h3><p>归档页面其实有很多大佬已经给出美化样式了，有的有翻页特效，比如<a href="https://hearxn.github.io/archives/">像这样</a>，或者直接简单点，可以参考我的<a href="https://hasaik.com/posts/f68f129b.html">另外一篇博客</a>。</p><h3 id="添加相册功能">添加相册功能</h3><p>这个实现的方式比较多，但是个人觉得比较实用好看的推荐参考<a href="https://me.idealli.com/post/73ad4183.html">这篇文章</a>，相册展示图片样式可以在原作者基础上继续进行二次开发。我的<a href="https://hasaik.com/photos/">个人相册</a>是另一种方式哦，附上<a href="https://hasaik.com/posts/39d47c89.html">教程</a>。</p><h3 id="引入share-js分享功能">引入share.js分享功能</h3><p><img src="https://s2.ax1x.com/2019/11/14/MtjAbj.png" class="lazyload placeholder" data-srcset="https://s2.ax1x.com/2019/11/14/MtjAbj.png" srcset="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/site-img/img-loading.gif" alt="share"></p><p>我目前使用的 Next5 自带的分享样式都不是很好看，百度分享虽然默认不支持 HTTPS，但是强行支持后总是在 console 控制台报错，我觉得挺烦的就直接删掉了。然后偶然在 Github 上看到一个 Share.js 感觉比较美观，就想办法引入到了个人博客。方法如下：</p><p>在这个 <a href="https://github.com/overtrue/share.js">Share.js</a> 中拷贝 <code>dist</code> 目录到本地的 <code>hexo/themes/next/source</code> 下。</p><p>在 <code>hexo/themes/next/layout/_layout.swig</code> 文件的 <code>&lt;head&gt;&lt;/head&gt;</code> 标签体内引入如下样式：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;link rel=<span class="string">&quot;stylesheet&quot;</span> href=<span class="string">&quot;/dist/css/share.min.css&quot;</span>&gt;</span><br></pre></td></tr></table></figure><p>然后在下面 <code>&lt;body&gt;&lt;/body&gt;</code> 标签体内引入如下 js 文件：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;script src=<span class="string">&quot;/dist/js/social-share.min.js&quot;</span>&gt;&lt;/script&gt;</span><br></pre></td></tr></table></figure><p>最后，在 <code>hexo/themes/next/layout/post.swig</code> 文件中添加如下代码：</p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">    &lt;div class=&quot;post-spread&quot;&gt;</span><br><span class="line">      &#123;% if theme.jiathis %&#125;</span><br><span class="line">        &#123;% include &#x27;_partials/share/jiathis.swig&#x27; %&#125;</span><br><span class="line">      &#123;% elseif theme.baidushare %&#125;</span><br><span class="line">        &#123;% include &#x27;_partials/share/baidushare.swig&#x27; %&#125;</span><br><span class="line">      &#123;% elseif theme.add_this_id %&#125;</span><br><span class="line">        &#123;% include &#x27;_partials/share/add-this.swig&#x27; %&#125;</span><br><span class="line">      &#123;% elseif theme.duoshuo_shortname and theme.duoshuo_share %&#125;</span><br><span class="line">        &#123;% include &#x27;_partials/share/duoshuo_share.swig&#x27; %&#125;</span><br><span class="line">        </span><br><span class="line">       &lt;!-- 引入share.js --&gt;</span><br><span class="line"><span class="addition">+      &#123;% elseif theme.share_js%&#125;</span></span><br><span class="line"><span class="addition">+      &lt;div data-weibo-title=&quot;分享到微博&quot; data-qq-title=&quot;分享到QQ&quot; data-douban-title=&quot;分享到豆瓣&quot; class=&quot;social-share&quot; class=&quot;share-component&quot; data-disabled=&quot;twitter,facebook&quot; data-description=&quot;Share.js - 一键分享到微博，QQ空间，腾讯微博，人人，豆瓣&quot;&gt;分享到：&lt;/div&gt;</span></span><br><span class="line"><span class="addition">+      &#123;% endif %&#125;</span></span><br><span class="line"></span><br><span class="line">  &lt;/div&gt;</span><br></pre></td></tr></table></figure><p>并在主题配置文件中末尾添加如下：</p><p>文件位置：hexo/themes/next/_config.xml</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">share_js: <span class="literal">true</span></span><br></pre></td></tr></table></figure><p>然后就可以使用了！里面具体一些属性设置可以查看原作者的<a href="https://github.com/overtrue/share.js/blob/master/README.md">README</a>文档，介绍的很详细。</p><h2 id="参考文章">参考文章</h2><ol><li><a href="https://io-oi.me/tech/hexo-next-optimization.html">造个性超赞博客 Hexo + NexT + GitHub Pages 的超深度优化</a></li><li><a href="https://www.jianshu.com/p/efbeddc5eb19?utm_campaign=maleskine&amp;utm_content=note&amp;utm_medium=seo_notes&amp;utm_source=recommendation">Hexo+Next主题优化</a></li><li><a href="https://www.jianshu.com/p/1f8107a8778c">Hexo搭建个人博客–next主题优化</a></li><li><a href="https://www.jianshu.com/p/efbeddc5eb19">Hexo+Next个人博客主题优化</a></li><li><a href="https://io-oi.me/tech/speed-up-hexo.html#main">加速Hexo博客</a></li><li><a href="https://me.idealli.com/post/d6caa003.html">hexo建站笔记之彩色标签云</a></li><li><a href="https://me.idealli.com/post/6bf81741.html">hexo建站笔记之首页轮播图</a></li><li><a href="https://me.idealli.com/post/ed80a662.html">原生js实现图片点击展示效果</a></li><li><a href="https://zhangshuqiao.org/2018-07/%E5%9C%A8%E7%BD%91%E9%A1%B5%E4%B8%AD%E6%B7%BB%E5%8A%A0Live2D%E7%9C%8B%E6%9D%BF%E5%A8%98">在网页中添加live2d看板娘</a></li><li><a href="https://io-oi.me/tech/noto-serif-sc-added-on-google-fonts.html#main">Google Fonts已支持思源宋体</a></li><li><a href="https://bestzuo.cn/posts/blog-establish.html">Hexo博客+Next主题深度优化与定制</a></li></ol>]]></content>
      
      
      <categories>
          
          <category> Hexo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Hexo </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hexo+NexT 自定义样式博文加密</title>
      <link href="posts/c1cdcf68.html"/>
      <url>posts/c1cdcf68.html</url>
      
        <content type="html"><![CDATA[<p>介绍一种自定义博文加密方式，不需要插件，极简模式，相对安全。</p><p>先看一下效果：</p><p><img src="https://s2.ax1x.com/2019/11/01/KHMRr8.png" class="lazyload placeholder" data-srcset="https://s2.ax1x.com/2019/11/01/KHMRr8.png" srcset="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/site-img/img-loading.gif" alt="密码"></p><h2 id="代码">代码</h2><p>1、在目录 <code>/themes/next/layout/</code> 下的 <code>_layout.swig</code> 中，找到main标签添加自定义的 swig</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&lt;main id=<span class="string">&quot;main&quot;</span> class=<span class="string">&quot;main&quot;</span>&gt;</span><br><span class="line">  &lt;div class=<span class="string">&quot;main-inner&quot;</span>&gt;</span><br><span class="line">    &lt;div class=<span class="string">&quot;content-wrap&quot;</span>&gt;</span><br><span class="line">      &lt;div id=<span class="string">&quot;content&quot;</span> class=<span class="string">&quot;content&quot;</span>&gt;</span><br><span class="line">        &#123;% block content %&#125;&#123;% endblock %&#125;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">      &#123;% include <span class="string">&#x27;_third-party/duoshuo-hot-articles.swig&#x27;</span> %&#125;</span><br><span class="line">      &#123;% include <span class="string">&#x27;_partials/comments.swig&#x27;</span> %&#125;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &#123;% <span class="keyword">if</span> theme.sidebar.display !== <span class="string">&#x27;remove&#x27;</span> %&#125;</span><br><span class="line">      &#123;% block sidebar %&#125;&#123;% endblock %&#125;</span><br><span class="line">    &#123;% endif %&#125;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line"></span><br><span class="line"> &lt;!-- 此处为新加的代码 --&gt;</span><br><span class="line"> &#123;% include <span class="string">&#x27;password.swig&#x27;</span> %&#125;</span><br><span class="line"></span><br><span class="line">&lt;/main&gt;</span><br></pre></td></tr></table></figure><p>2、在目录 <code>/themes/next/layout/</code> 下创建 <code>password.swig</code> ，内容如下：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br></pre></td><td class="code"><pre><span class="line">&lt;script src=<span class="string">&quot;https://cdn.staticfile.org/jquery/3.1.1/jquery.min.js&quot;</span>&gt;&lt;/script&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">    <span class="comment">//暂时储存文章中的内容</span></span><br><span class="line">    <span class="keyword">var</span> div = $(<span class="string">&#x27;.post-body&#x27;</span>);</span><br><span class="line">    <span class="comment">//暂时储存目录的内容</span></span><br><span class="line">    <span class="keyword">var</span> toc=$(<span class="string">&#x27;.post-toc&#x27;</span>)</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">password</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(<span class="string">&#x27;&#123;&#123; page.password &#125;&#125;&#x27;</span>)&#123;</span><br><span class="line">            <span class="comment">//将文章内容删除</span></span><br><span class="line">            div.remove();</span><br><span class="line">            <span class="comment">//将目录删除</span></span><br><span class="line">            toc.remove();</span><br><span class="line">            <span class="comment">//将文章删除后，向原来文章的地方添加，应该出现的提示用户输入密码的样式</span></span><br><span class="line">            <span class="comment">//下面这里的第一个用textarea是因为如果在手机端的时候只能显示一部分文字，</span></span><br><span class="line">            <span class="comment">//只是拓展:input里面的字只能显示一行，不会自动换行，目前上网搜索没有发现好的办法，所以用了textarea，右下角的小三角通过resize:none 去掉。</span></span><br><span class="line">            $(<span class="string">&#x27;.post-header&#x27;</span>).after(</span><br><span class="line">            <span class="string">&#x27;&lt;span class=&quot;description&quot; value=&quot;请输入密码，然后按 Enter 键阅读&quot; style=&quot;font-style: oblique;font-weight: bold;border: none;display: block;&#x27;</span>+</span><br><span class="line">            <span class="string">&#x27;width: 60%;margin: 0 auto;text-align: center;outline: none;margin-bottom: 40px;resize:none &quot;&gt;&#x27;</span>+</span><br><span class="line">            <span class="string">&#x27;&lt;i class=&quot;fa fa-heartbeat&quot; id=&quot;myheartbeat&quot;&gt;&lt;/i&gt;&#x27;</span>+</span><br><span class="line">            <span class="string">&#x27;请输入密码，然后按 Enter 键阅读&#x27;</span> +</span><br><span class="line">            <span class="string">&#x27;&lt;i class=&quot;fa fa-heartbeat&quot; id=&quot;myheartbeat&quot;&gt;&lt;/i&gt;&#x27;</span>+</span><br><span class="line">            <span class="string">&#x27;&lt;/span&gt;&#x27;</span> +</span><br><span class="line">            <span class="string">&#x27;&lt;div class=&quot;qiang&quot; style=&quot;height: 100px;width: 60%;margin:0 auto&quot;&gt;&#x27;</span> +</span><br><span class="line">            <span class="string">&#x27;&lt;input class=&quot;password&quot;  type=&quot;password&quot; autocomplete=&quot;new-password&quot; autofocus=&quot;autofocus&quot; value=&quot;&quot; style=&quot;border-radius: 5px;height: 30px;border: none;display: block;border-bottom: 1px solid #ccc;&#x27;</span> +</span><br><span class="line">            <span class="string">&#x27;margin: 0 auto;outline: none;width:95%&quot;/&gt;&#x27;</span> +</span><br><span class="line">            <span class="string">&#x27;&lt;/div&gt;&#x27;</span>)</span><br><span class="line">            <span class="comment">//绑定点击事件，如果是点击的.password 这个div就改变样式，如果是document中除了div之外的其他任何元素，就变回原来的样式。</span></span><br><span class="line">            <span class="built_in">document</span>.onclick = <span class="function"><span class="keyword">function</span> (<span class="params">event</span>) </span>&#123;</span><br><span class="line">                <span class="keyword">var</span> e = event || <span class="built_in">window</span>.event;</span><br><span class="line">                <span class="keyword">var</span> elem = e.srcElement || e.target;</span><br><span class="line"></span><br><span class="line">                <span class="keyword">while</span> (elem) &#123;</span><br><span class="line">                    <span class="keyword">if</span> (elem != <span class="built_in">document</span>) &#123;</span><br><span class="line">                        <span class="keyword">if</span> (elem.className == <span class="string">&quot;password&quot;</span>) &#123;</span><br><span class="line">                            <span class="comment">//$(&quot;.password&quot;).animate(&#123;paddingTop:&quot;30px&quot;,width:&quot;100%&quot;,borderWidth:&quot;2px&quot;&#125;,300)</span></span><br><span class="line">                            <span class="keyword">return</span>;</span><br><span class="line">                        &#125;</span><br><span class="line">                        elem = elem.parentNode;</span><br><span class="line">                    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                        <span class="comment">//$(&quot;.password&quot;).animate(&#123;paddingTop:&quot;0px&quot;,width:&quot;95%&quot;,borderWidth:&quot;1px&quot;&#125;,300)</span></span><br><span class="line">                        <span class="keyword">return</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">//绑定enter键按下后离开的事件</span></span><br><span class="line">            $(<span class="built_in">document</span>).keyup(<span class="function"><span class="keyword">function</span>(<span class="params">event</span>)</span>&#123;</span><br><span class="line">                <span class="keyword">if</span>(event.keyCode ==<span class="number">13</span>&amp;&amp;$(<span class="string">&#x27;.password&#x27;</span>).length&gt;<span class="number">0</span>)&#123;</span><br><span class="line">                    <span class="comment">//console.log($(&#x27;.password&#x27;).val())</span></span><br><span class="line">                    <span class="comment">//console.log(&#x27;&#123;&#123; page.password &#125;&#125;&#x27;)</span></span><br><span class="line">                    <span class="keyword">if</span> ($(<span class="string">&#x27;.password&#x27;</span>).val() == <span class="string">&#x27;&#123;&#123; page.password &#125;&#125;&#x27;</span>) &#123;</span><br><span class="line">                        <span class="comment">//恢复文章内容</span></span><br><span class="line">                        (div).appendTo($(<span class="string">&quot;.post-header&quot;</span>))</span><br><span class="line">                        <span class="comment">//恢复目录</span></span><br><span class="line">                        toc.appendTo($(<span class="string">&quot;.sidebar-inner&quot;</span>))</span><br><span class="line">                        <span class="comment">//删除本页面的输入密码组件</span></span><br><span class="line">                        $(<span class="string">&quot;.description&quot;</span>).remove();</span><br><span class="line">                        $(<span class="string">&quot;.qiang&quot;</span>).remove();</span><br><span class="line">                        $(<span class="string">&quot;.password&quot;</span>).remove();</span><br><span class="line"></span><br><span class="line">                        <span class="comment">//重新处理pjax事件,如果没有加pjax的从下面这行起到下面的else之间的代码需要去掉。</span></span><br><span class="line">                        <span class="comment">//图片懒加载，没有加入此功能的这个函数需要去掉</span></span><br><span class="line">                        $(<span class="string">&#x27;img&#x27;</span>).lazyload(&#123;</span><br><span class="line">                            placeholder: <span class="string">&#x27;/images/loading.gif&#x27;</span>,</span><br><span class="line">                            effect: <span class="string">&#x27;fadeIn&#x27;</span>,</span><br><span class="line">                            threshold : <span class="number">100</span>,</span><br><span class="line">                            failure_limit : <span class="number">20</span>,</span><br><span class="line">                            skip_invisible : <span class="literal">false</span></span><br><span class="line">                        &#125;);</span><br><span class="line">                        <span class="comment">//pjax后出现文章不显示，没有pjax的下面四行需要去掉</span></span><br><span class="line">                        $(<span class="string">&quot;.post-block&quot;</span>).css(&#123;<span class="attr">opacity</span>:<span class="number">1</span>&#125;);</span><br><span class="line">                        $(<span class="string">&quot;.post-header&quot;</span>).css(&#123;<span class="attr">opacity</span>:<span class="number">1</span>&#125;);</span><br><span class="line">                        $(<span class="string">&quot;.post-body&quot;</span>).css(&#123;<span class="attr">opacity</span>:<span class="number">1</span>&#125;);</span><br><span class="line">                        $(<span class="string">&quot;.pagination&quot;</span>).css(&#123;<span class="attr">opacity</span>:<span class="number">1</span>&#125;);</span><br><span class="line">                    &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">                        alert(<span class="string">&quot;对不起，密码输入错误。&quot;</span>)</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="comment">//将document的keyup移除，防止在pjax的情况下会重复绑定事件</span></span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    password();</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h2 id="使用">使用</h2><p>新建一个 <a href="http://test.md">test.md</a> ，内容如下</p><figure class="highlight md"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">title: 测试</span><br><span class="line">date: 2019-03-30 21:18:02</span><br><span class="line">password: aaa</span><br><span class="line">---</span><br><span class="line"><span class="section"># aaaaaa</span></span><br><span class="line">我就很反感大家老是那么说我，</span><br><span class="line"><span class="section">## bbbbbb</span></span><br><span class="line">除了有才，就只剩下那无可比拟的颜值。</span><br></pre></td></tr></table></figure><p>上面的 password 后面的值自定义。</p><h2 id="注意">注意</h2><p>如果自己的博客源码中的这篇文章上传到 github ，密码也就公诸于世了，可以在 push 到 github 的时候将这篇文章忽略。</p>]]></content>
      
      
      <categories>
          
          <category> Hexo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Hexo </tag>
            
            <tag> Password </tag>
            
            <tag> Security </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hexo+NexT 博客搭建相册</title>
      <link href="posts/39d47c89.html"/>
      <url>posts/39d47c89.html</url>
      
        <content type="html"><![CDATA[<p>首先说一下实现想法，在 <a href="https://dev.tencent.com/">腾讯云开发者平台</a> 上面创建一个相册库（PS：腾讯云开发者平台是腾讯云与 CODING 共同为开发者打造的云端工具平台，旨在为更多的开发者带去便捷、高效的开发体验，提供包括需求管理、代码编写、代码管理、代码运行的整套系统），当有更新时，提交到腾讯云开发者平台上面，同时在博客 resource 下面生成一个 data.json 来生成所有相册文件的 json 文件，博客读取 data.json 来展示相册。</p><p>实现效果链接：</p><a href=https://hasaik.com/photos/ target='_blank' class='LinkCard'><style type=text/css>.LinkCard,.LinkCard:hover{text-decoration:none;border:none!important;color:inherit!important}.LinkCard{position:relative;display:block;margin:5px auto;width:330px;box-sizing:border-box;border-radius:12px;max-width:100%;overflow:hidden;color:inherit;text-decoration:none}.ztext{word-break:break-word;line-height:1.6}.LinkCard-backdrop{position:absolute;top:0;left:0;right:0;bottom:0;background-repeat:no-repeat;-webkit-filter:blur(20px);filter:blur(20px);background-size:cover;background-position:center}.LinkCard,.LinkCard:hover{text-decoration:none;border:none!important;color:inherit!important}.LinkCard-content{position:relative;display:flex;align-items:center;justify-content:space-between;padding:12px;border-radius:inherit;background-color:rgba(246,246,246,0.88)}.LinkCard-text{overflow:hidden;width:260px;}.LinkCard-title{white-space: nowrap;display:-webkit-box;-webkit-line-clamp:2;overflow:hidden;text-overflow:ellipsis;max-height:calc(16px * 1.25 * 2);font-size:16px;font-weight:500;line-height:1.25;color:#1a1a1a}@media(max-width: 767px){.LinkCard-title{font-size:13px;}}.LinkCard-meta{display:flex;margin-top:4px;font-size:14px;line-height:20px;color:#999;white-space:nowrap}.LinkCard-imageCell{margin-left:28px;border-radius:30px;width:70px;}.LinkCard-image{background-image:url('https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/linkcard/spider-man.png');background-size: 100% 100%;display:block;width:65px;height:65px;border-radius:inherit;margin-bottom: 0 !important;}</style><span class=LinkCard-backdrop style=background-image:url(https://zhstatic.zhihu.com/assets/zhihu/editor/zhihu-card-default.svg)></span><span class=LinkCard-content><span class=LinkCard-text><span class=LinkCard-title>Photos</span><span class=LinkCard-meta><span style=display:inline-flex;align-items:center><svg class='Zi Zi--InsertLink' fill=currentColor viewBox='0 0 24 24' width=17 height=17><path d='M6.77 17.23c-.905-.904-.94-2.333-.08-3.193l3.059-3.06-1.192-1.19-3.059 3.058c-1.489 1.489-1.427 3.954.138 5.519s4.03 1.627 5.519.138l3.059-3.059-1.192-1.192-3.059 3.06c-.86.86-2.289.824-3.193-.08zm3.016-8.673l1.192 1.192 3.059-3.06c.86-.86 2.289-.824 3.193.08.905.905.94 2.334.08 3.194l-3.059 3.06 1.192 1.19 3.059-3.058c1.489-1.489 1.427-3.954-.138-5.519s-4.03-1.627-5.519-.138L9.786 8.557zm-1.023 6.68c.33.33.863.343 1.177.029l5.34-5.34c.314-.314.3-.846-.03-1.176-.33-.33-.862-.344-1.176-.03l-5.34 5.34c-.314.314-.3.846.03 1.177z' fill-rule=evenodd></path></svg></span><span style='margin-top: -0.1rem;'>https://hasaik.com/photos/</span></span></span><span class='LinkCard-imageCell'><div class='LinkCard-image'></div></span></span></a><h2 id="创建相册">创建相册</h2><p>在腾讯云开发者平台上面创建一个仓库,命名为 <code>Blog_Back_Up</code> (仓库名字随便). 用 <code>git clone</code> 把仓库 <code>clone</code> 到本地来.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> Blog_Back_Up</span><br></pre></td></tr></table></figure><p>创建 <code>photos</code> 和 <code>min_photos</code> 两个目录,把要上传的相册图片 放到 <code>photos</code> 文件夹下面.</p><div class="note info">***相册图片命名方式 : yyyy-MM-dd_des.jpg/png/jpef/gif. &emsp;eg: 2017-9-18_风景.jpg*** </div><h2 id="处理图片">处理图片</h2><p>图片的处理我用 <code>python</code> 脚本来处理，这样每次只要执行脚本就可以了。如果您的电脑没有 <code>Python</code> ，自行上网搜索安装教程，一搜一大把。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#coding: utf-8</span></span><br><span class="line"><span class="keyword">from</span> PIL <span class="keyword">import</span> Image</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"><span class="keyword">import</span> json</span><br><span class="line"><span class="keyword">from</span> datetime <span class="keyword">import</span> datetime</span><br><span class="line"><span class="keyword">from</span> ImageProcess <span class="keyword">import</span> Graphics</span><br><span class="line"></span><br><span class="line"><span class="comment"># 定义压缩比，数值越大，压缩越小</span></span><br><span class="line">SIZE_normal = <span class="number">1.0</span></span><br><span class="line">SIZE_small = <span class="number">1.5</span></span><br><span class="line">SIZE_more_small = <span class="number">2.0</span></span><br><span class="line">SIZE_more_small_small = <span class="number">3.0</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">make_directory</span>(<span class="params">directory</span>):</span></span><br><span class="line">    <span class="string">&quot;&quot;&quot;创建目录&quot;&quot;&quot;</span></span><br><span class="line">    os.makedirs(directory)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">directory_exists</span>(<span class="params">directory</span>):</span></span><br><span class="line">    <span class="string">&quot;&quot;&quot;判断目录是否存在&quot;&quot;&quot;</span></span><br><span class="line">    <span class="keyword">if</span> os.path.exists(directory):</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">list_img_file</span>(<span class="params">directory</span>):</span></span><br><span class="line">    <span class="string">&quot;&quot;&quot;列出目录下所有文件，并筛选出图片文件列表返回&quot;&quot;&quot;</span></span><br><span class="line">    old_list = <span class="built_in">sorted</span>(os.listdir(directory), reverse=<span class="literal">True</span>)</span><br><span class="line">    print(old_list)</span><br><span class="line">    new_list = []</span><br><span class="line">    <span class="keyword">for</span> filename <span class="keyword">in</span> old_list:</span><br><span class="line">        name, fileformat = filename.split(<span class="string">&quot;.&quot;</span>)</span><br><span class="line">        <span class="keyword">if</span> fileformat.lower() == <span class="string">&quot;jpg&quot;</span> <span class="keyword">or</span> fileformat.lower() == <span class="string">&quot;png&quot;</span> <span class="keyword">or</span> fileformat.lower() == <span class="string">&quot;gif&quot;</span> <span class="keyword">or</span> fileformat.lower() == <span class="string">&quot;jpeg&quot;</span>:</span><br><span class="line">            new_list.append(filename)</span><br><span class="line">    <span class="comment"># print new_list</span></span><br><span class="line">    <span class="keyword">return</span> new_list</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">print_help</span>():</span></span><br><span class="line">    print(<span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    This program helps compress many image files</span></span><br><span class="line"><span class="string">    you can choose which scale you want to compress your img(jpg/png/etc)</span></span><br><span class="line"><span class="string">    1) normal compress(4M to 1M around)</span></span><br><span class="line"><span class="string">    2) small compress(4M to 500K around)</span></span><br><span class="line"><span class="string">    3) smaller compress(4M to 300K around)</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">compress</span>(<span class="params">choose, des_dir, src_dir, file_list</span>):</span></span><br><span class="line">    <span class="string">&quot;&quot;&quot;压缩算法，img.thumbnail对图片进行压缩，</span></span><br><span class="line"><span class="string">    </span></span><br><span class="line"><span class="string">    参数</span></span><br><span class="line"><span class="string">    -----------</span></span><br><span class="line"><span class="string">    choose: str</span></span><br><span class="line"><span class="string">            选择压缩的比例，有4个选项，越大压缩后的图片越小</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    <span class="keyword">if</span> choose == <span class="string">&#x27;1&#x27;</span>:</span><br><span class="line">        scale = SIZE_normal</span><br><span class="line">    <span class="keyword">if</span> choose == <span class="string">&#x27;2&#x27;</span>:</span><br><span class="line">        scale = SIZE_small</span><br><span class="line">    <span class="keyword">if</span> choose == <span class="string">&#x27;3&#x27;</span>:</span><br><span class="line">        scale = SIZE_more_small</span><br><span class="line">    <span class="keyword">if</span> choose == <span class="string">&#x27;4&#x27;</span>:</span><br><span class="line">        scale = SIZE_more_small_small</span><br><span class="line">    <span class="keyword">for</span> infile <span class="keyword">in</span> file_list:</span><br><span class="line">        img = Image.<span class="built_in">open</span>(src_dir+infile)</span><br><span class="line">        <span class="comment"># size_of_file = os.path.getsize(infile)</span></span><br><span class="line">        w, h = img.size</span><br><span class="line">        img.thumbnail((<span class="built_in">int</span>(w/scale), <span class="built_in">int</span>(h/scale)))</span><br><span class="line">        img.save(des_dir + infile)</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">compress_photo</span>():</span></span><br><span class="line">    <span class="string">&#x27;&#x27;&#x27;调用压缩图片的函数</span></span><br><span class="line"><span class="string">    &#x27;&#x27;&#x27;</span></span><br><span class="line">    src_dir, des_dir = <span class="string">&quot;photos/&quot;</span>, <span class="string">&quot;min_photos/&quot;</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> directory_exists(src_dir):</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> directory_exists(src_dir):</span><br><span class="line">            make_directory(src_dir)</span><br><span class="line">        <span class="comment"># business logic</span></span><br><span class="line">        file_list_src = list_img_file(src_dir)</span><br><span class="line">    <span class="keyword">if</span> directory_exists(des_dir):</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> directory_exists(des_dir):</span><br><span class="line">            make_directory(des_dir)</span><br><span class="line">        file_list_des = list_img_file(des_dir)</span><br><span class="line">        <span class="comment"># print file_list</span></span><br><span class="line">    <span class="string">&#x27;&#x27;&#x27;如果已经压缩了，就不再压缩&#x27;&#x27;&#x27;</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(file_list_des)):</span><br><span class="line">        <span class="keyword">if</span> file_list_des[i] <span class="keyword">in</span> file_list_src:</span><br><span class="line">            file_list_src.remove(file_list_des[i])</span><br><span class="line">    compress(<span class="string">&#x27;4&#x27;</span>, des_dir, src_dir, file_list_src)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">handle_photo</span>():</span></span><br><span class="line">    <span class="string">&#x27;&#x27;&#x27;根据图片的文件名处理成需要的json格式的数据</span></span><br><span class="line"><span class="string">    </span></span><br><span class="line"><span class="string">    -----------</span></span><br><span class="line"><span class="string">    最后将data.json文件存到博客的source/photos文件夹下</span></span><br><span class="line"><span class="string">    &#x27;&#x27;&#x27;</span></span><br><span class="line">    src_dir, des_dir = <span class="string">&quot;photos/&quot;</span>, <span class="string">&quot;min_photos/&quot;</span></span><br><span class="line">    file_list = list_img_file(src_dir)</span><br><span class="line">    print(file_list)</span><br><span class="line">    list_info = []</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(file_list)):</span><br><span class="line">        filename = file_list[i]</span><br><span class="line">        date_str, info = filename.split(<span class="string">&quot;_&quot;</span>)</span><br><span class="line">        info, _ = info.split(<span class="string">&quot;.&quot;</span>)</span><br><span class="line">        date = datetime.strptime(date_str, <span class="string">&quot;%Y-%m-%d&quot;</span>)</span><br><span class="line">        year_month = date_str[<span class="number">0</span>:<span class="number">7</span>]            </span><br><span class="line">        <span class="keyword">if</span> i == <span class="number">0</span>:  <span class="comment"># 处理第一个文件</span></span><br><span class="line">            new_dict = &#123;<span class="string">&quot;date&quot;</span>: year_month, <span class="string">&quot;arr&quot;</span>:&#123;<span class="string">&#x27;year&#x27;</span>: date.year,</span><br><span class="line">                                                                   <span class="string">&#x27;month&#x27;</span>: date.month,</span><br><span class="line">                                                                   <span class="string">&#x27;link&#x27;</span>: [filename],</span><br><span class="line">                                                                   <span class="string">&#x27;text&#x27;</span>: [info],</span><br><span class="line">                                                                   <span class="string">&#x27;type&#x27;</span>: [<span class="string">&#x27;image&#x27;</span>]</span><br><span class="line">                                                                   &#125;</span><br><span class="line">                                        &#125; </span><br><span class="line">            list_info.append(new_dict)</span><br><span class="line">        <span class="keyword">elif</span> year_month != list_info[-<span class="number">1</span>][<span class="string">&#x27;date&#x27;</span>]:  <span class="comment"># 不是最后的一个日期，就新建一个dict</span></span><br><span class="line">            new_dict = &#123;<span class="string">&quot;date&quot;</span>: year_month, <span class="string">&quot;arr&quot;</span>:&#123;<span class="string">&#x27;year&#x27;</span>: date.year,</span><br><span class="line">                                                   <span class="string">&#x27;month&#x27;</span>: date.month,</span><br><span class="line">                                                   <span class="string">&#x27;link&#x27;</span>: [filename],</span><br><span class="line">                                                   <span class="string">&#x27;text&#x27;</span>: [info],</span><br><span class="line">                                                   <span class="string">&#x27;type&#x27;</span>: [<span class="string">&#x27;image&#x27;</span>]</span><br><span class="line">                                                   &#125;</span><br><span class="line">                        &#125;</span><br><span class="line">            list_info.append(new_dict)</span><br><span class="line">        <span class="keyword">else</span>:  <span class="comment"># 同一个日期</span></span><br><span class="line">            list_info[-<span class="number">1</span>][<span class="string">&#x27;arr&#x27;</span>][<span class="string">&#x27;link&#x27;</span>].append(filename)</span><br><span class="line">            list_info[-<span class="number">1</span>][<span class="string">&#x27;arr&#x27;</span>][<span class="string">&#x27;text&#x27;</span>].append(info)</span><br><span class="line">            list_info[-<span class="number">1</span>][<span class="string">&#x27;arr&#x27;</span>][<span class="string">&#x27;type&#x27;</span>].append(<span class="string">&#x27;image&#x27;</span>)</span><br><span class="line">    list_info.reverse()  <span class="comment"># 翻转</span></span><br><span class="line">    tmp = bubbleYear(list_info)</span><br><span class="line">    bubble(tmp)</span><br><span class="line">    final_dict = &#123;<span class="string">&quot;list&quot;</span>: list_info&#125;</span><br><span class="line">    <span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&quot;../xuxugood.github.io/source/photos/data.json&quot;</span>,<span class="string">&quot;w&quot;</span>) <span class="keyword">as</span> fp:</span><br><span class="line">        json.dump(final_dict, fp)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">cut_photo</span>():</span></span><br><span class="line">    <span class="string">&quot;&quot;&quot;裁剪算法</span></span><br><span class="line"><span class="string">    </span></span><br><span class="line"><span class="string">    ----------</span></span><br><span class="line"><span class="string">    调用Graphics类中的裁剪算法，将src_dir目录下的文件进行裁剪（裁剪成正方形）</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    src_dir = <span class="string">&quot;photos/&quot;</span></span><br><span class="line">    <span class="keyword">if</span> directory_exists(src_dir):</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> directory_exists(src_dir):</span><br><span class="line">            make_directory(src_dir)</span><br><span class="line">        <span class="comment"># business logic</span></span><br><span class="line">        file_list = list_img_file(src_dir)</span><br><span class="line">        <span class="comment"># print file_list</span></span><br><span class="line">        <span class="keyword">if</span> file_list:</span><br><span class="line">            print_help()</span><br><span class="line">            <span class="keyword">for</span> infile <span class="keyword">in</span> file_list:</span><br><span class="line">                img = Image.<span class="built_in">open</span>(src_dir+infile)</span><br><span class="line">                Graphics(infile=src_dir+infile, outfile=src_dir + infile).cut_by_ratio()            </span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">pass</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        print(<span class="string">&quot;source directory not exist!&quot;</span>)     </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">git_operation</span>():</span></span><br><span class="line">    <span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">    git 命令行函数，将仓库提交</span></span><br><span class="line"><span class="string">    </span></span><br><span class="line"><span class="string">    ----------</span></span><br><span class="line"><span class="string">    需要安装git命令行工具，并且添加到环境变量中</span></span><br><span class="line"><span class="string">    &#x27;&#x27;&#x27;</span></span><br><span class="line">    os.system(<span class="string">&#x27;git add --all&#x27;</span>)</span><br><span class="line">    os.system(<span class="string">&#x27;git commit -m &quot;add photos&quot;&#x27;</span>)</span><br><span class="line">    os.system(<span class="string">&#x27;git push origin master&#x27;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">bubble</span>(<span class="params">bubbleList</span>):</span></span><br><span class="line">    listLength = <span class="built_in">len</span>(bubbleList)</span><br><span class="line">    <span class="keyword">while</span> listLength &gt; <span class="number">0</span>:</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(listLength - <span class="number">1</span>):    <span class="comment"># 这个循环负责设置冒泡排序进行的次数</span></span><br><span class="line">            <span class="comment"># print(bubbleList[i])</span></span><br><span class="line">            <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(listLength-i-<span class="number">1</span>):  <span class="comment"># ｊ为列表下标</span></span><br><span class="line">                <span class="keyword">if</span>(bubbleList[j].get(<span class="string">&#x27;arr&#x27;</span>).get(<span class="string">&#x27;year&#x27;</span>) == bubbleList[j+<span class="number">1</span>].get(<span class="string">&#x27;arr&#x27;</span>).get(<span class="string">&#x27;year&#x27;</span>)):</span><br><span class="line">                    <span class="keyword">if</span> bubbleList[j].get(<span class="string">&#x27;arr&#x27;</span>).get(<span class="string">&#x27;month&#x27;</span>) &lt; bubbleList[j+<span class="number">1</span>].get(<span class="string">&#x27;arr&#x27;</span>).get(<span class="string">&#x27;month&#x27;</span>):</span><br><span class="line">                </span><br><span class="line">                        bubbleList[j], bubbleList[j+<span class="number">1</span>] = bubbleList[j+<span class="number">1</span>], bubbleList[j]</span><br><span class="line">        <span class="keyword">return</span> bubbleList</span><br><span class="line"></span><br><span class="line">    </span><br><span class="line">        <span class="comment"># for i in range(listLength - 1):</span></span><br><span class="line">        <span class="comment">#     if(bubbleList[i].get(&#x27;arr&#x27;).get(&#x27;year&#x27;) == bubbleList[i+1].get(&#x27;arr&#x27;).get(&#x27;year&#x27;)):</span></span><br><span class="line">        <span class="comment">#         if bubbleList[i].get(&#x27;arr&#x27;).get(&#x27;month&#x27;) &gt; bubbleList[i+1].get(&#x27;arr&#x27;).get(&#x27;month&#x27;):</span></span><br><span class="line">        <span class="comment">#             bubbleList[i] = bubbleList[i] + bubbleList[i+1]</span></span><br><span class="line">        <span class="comment">#             bubbleList[i+1] = bubbleList[i] - bubbleList[i+1]</span></span><br><span class="line">        <span class="comment">#             bubbleList[i] = bubbleList[i] - bubbleList[i+1]</span></span><br><span class="line">        <span class="comment"># listLength -= 1</span></span><br><span class="line">    </span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">bubbleYear</span>(<span class="params">bubbleList</span>):</span></span><br><span class="line">    listLength = <span class="built_in">len</span>(bubbleList)</span><br><span class="line">    <span class="keyword">while</span> listLength &gt; <span class="number">0</span>:</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(listLength - <span class="number">1</span>):</span><br><span class="line">            <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(listLength-i-<span class="number">1</span>):</span><br><span class="line">                <span class="keyword">if</span> bubbleList[j].get(<span class="string">&#x27;arr&#x27;</span>).get(<span class="string">&#x27;year&#x27;</span>) &lt; bubbleList[j+<span class="number">1</span>].get(<span class="string">&#x27;arr&#x27;</span>).get(<span class="string">&#x27;year&#x27;</span>):</span><br><span class="line">                    </span><br><span class="line">                    bubbleList[j], bubbleList[j+<span class="number">1</span>] = bubbleList[j+<span class="number">1</span>], bubbleList[j]</span><br><span class="line">        <span class="comment"># print(bubbleList)</span></span><br><span class="line">        <span class="keyword">return</span> bubbleList</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">    cut_photo()        <span class="comment"># 裁剪图片，裁剪成正方形，去中间部分</span></span><br><span class="line">    compress_photo()   <span class="comment"># 压缩图片，并保存到mini_photos文件夹下</span></span><br><span class="line">    git_operation()    <span class="comment"># 提交到github仓库</span></span><br><span class="line">    handle_photo()     <span class="comment"># 将文件处理成json格式，存到博客仓库中</span></span><br></pre></td></tr></table></figure><p>其中 <code>../xuxugood.github.io/source/photos/data.json</code> 是我博客地址，这里换成你的博客地址。</p><h3 id="使用方法"><em>使用方法</em></h3><p>执行命令 <code>python3 tool.py</code> ，因为我用的是 <code>python3</code> 这里可以根据你的 <code>python</code> 版本来使用。</p><h3 id="问题">问题</h3><p>如果出现 <code>from PIL import Image</code> 这种报错，说明没有 PIL 这个库，执行 <code>python3 -m pip install Pillow</code></p><h2 id="增加相册style">增加相册style</h2><p>在 Next 主题下面增加 <code>photo.swig</code> 页面，路径如下 <code>next/layout</code></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">&#123;% extends <span class="string">&#x27;_layout.swig&#x27;</span> %&#125;</span><br><span class="line">&#123;% import <span class="string">&#x27;_macro/post-collapse.swig&#x27;</span> as post_template %&#125;</span><br><span class="line">&#123;% import <span class="string">&#x27;_macro/sidebar.swig&#x27;</span> as sidebar_template %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% block title %&#125;&#123;&#123; page.title &#125;&#125; | &#123;&#123; config.title &#125;&#125;&#123;% endblock %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% block content %&#125;</span><br><span class="line"></span><br><span class="line">  &#123;<span class="comment">#################&#125;</span></span><br><span class="line">  &#123;<span class="comment">### Photo BLOCK ###&#125;</span></span><br><span class="line">  &#123;<span class="comment">#################&#125;</span></span><br><span class="line">  &lt;div class=<span class="string">&quot;post-block photo&quot;</span>&gt;</span><br><span class="line"></span><br><span class="line">    &lt;div id=<span class="string">&quot;posts&quot;</span> class=<span class="string">&quot;posts-collapse&quot;</span>&gt;</span><br><span class="line"></span><br><span class="line">    &lt;/div&gt;</span><br><span class="line"></span><br><span class="line">  &lt;/div&gt;</span><br><span class="line"></span><br><span class="line">  &#123;<span class="comment">#####################&#125;</span></span><br><span class="line">  &#123;<span class="comment">### END Photo BLOCK ###&#125;</span></span><br><span class="line">  &#123;<span class="comment">#####################&#125;</span></span><br><span class="line"></span><br><span class="line">  &#123;% include <span class="string">&#x27;_partials/pagination.swig&#x27;</span> %&#125;</span><br><span class="line">&#123;% endblock %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% block sidebar %&#125;</span><br><span class="line">  &#123;&#123; sidebar_template.render(<span class="literal">false</span>) &#125;&#125;</span><br><span class="line">&#123;% endblock %&#125;</span><br></pre></td></tr></table></figure><h2 id="生成相册页面">生成相册页面</h2><p>生成相册页面 <code>hexo new page photos</code>，修改 <code>photos</code> 下的 <code>index.md</code> 文件如下</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">title: 我的相册</span><br><span class="line">date: 2017-09-15 09:51:05</span><br><span class="line"><span class="built_in">type</span>: <span class="string">&quot;photos&quot;</span></span><br><span class="line">comments: <span class="literal">false</span></span><br><span class="line">---</span><br><span class="line">&lt;link rel=<span class="string">&quot;stylesheet&quot;</span> href=<span class="string">&quot;./ins.css&quot;</span>&gt;</span><br><span class="line"> &lt;link rel=<span class="string">&quot;stylesheet&quot;</span> href=<span class="string">&quot;./photoswipe.css&quot;</span>&gt; </span><br><span class="line">&lt;link rel=<span class="string">&quot;stylesheet&quot;</span> href=<span class="string">&quot;./default-skin/default-skin.css&quot;</span>&gt; </span><br><span class="line">&lt;div class=<span class="string">&quot;photos-btn-wrap&quot;</span>&gt;</span><br><span class="line">&lt;a class=<span class="string">&quot;photos-btn active&quot;</span> href=<span class="string">&quot;javascript:void(0)&quot;</span>&gt;Photos&lt;/a&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;div class=<span class="string">&quot;instagram itemscope&quot;</span>&gt;</span><br><span class="line">&lt;a href=<span class="string">&quot;https://xuxugood.github.io&quot;</span> target=<span class="string">&quot;_blank&quot;</span> class=<span class="string">&quot;open-ins&quot;</span>&gt;图片正在加载中…&lt;/a&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line"> </span><br><span class="line">&lt;script&gt;</span><br><span class="line">  (<span class="function"><span class="title">function</span></span>() &#123;</span><br><span class="line">    var loadScript = <span class="keyword">function</span>(path) &#123;</span><br><span class="line">      var <span class="variable">$script</span> = document.createElement(<span class="string">&#x27;script&#x27;</span>)</span><br><span class="line">      document.getElementsByTagName(<span class="string">&#x27;body&#x27;</span>)[0].appendChild(<span class="variable">$script</span>)</span><br><span class="line">      <span class="variable">$script</span>.setAttribute(<span class="string">&#x27;src&#x27;</span>, path)</span><br><span class="line">    &#125;</span><br><span class="line">    setTimeout(<span class="function"><span class="title">function</span></span>() &#123;</span><br><span class="line">        loadScript(<span class="string">&#x27;./ins.js&#x27;</span>)</span><br><span class="line">    &#125;, 0)</span><br><span class="line">  &#125;)()</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><p>其中 <code>&lt;a href=&quot;https://xuxugood.github.io&quot; target=&quot;_blank&quot; class=&quot;open-ins&quot;&gt;图片正在加载中…&lt;/a&gt;</code> 中的 url 替换成你的博客网址。</p><p>需要三个 css 文件和一个 js 文件放在 photos 文件夹下，其文件都在我的 <a href="https://johnxuxuy.coding.net/p/Blog_Back_Up/d/Blog_Back_Up/git/tree/master/source/photos">腾讯云开发者平台</a> 上面，需要修改 <code>ins.js</code> 的 120 和 121 行的 url 为你腾讯云开发者平台图片的网址。</p><h2 id="查看相册插件-photoswipe">查看相册插件 photoswipe</h2><p>上面 <code>index.md</code> 中加入了两个 css 文件，这是我们用 photoswipe 查看相册用到的，具体可以参考网址 <a href="https://photoswipe.com/">photoswipe</a> 。这里我们已经把 css 文件加上了，之后我们要加上 js 文件 <code>photoswipe.min.js</code> 和 <code>photoswipe-ui-default.min.js</code>，js 资源下载地址 <a href="https://johnxuxuy.coding.net/p/Blog_Back_Up/d/Blog_Back_Up/git/tree/master/source/photos/photoswipe.css">photoswipe</a> ，js 存放路径为 <code>next/source/js/src</code></p><h2 id="引用-js-文件">引用 js 文件</h2><p>在 <code>layout/_scripts/pages/post-details.swig</code> 中插入</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;script src=<span class="string">&quot;&#123;&#123; url_for(theme.js) &#125;&#125;/src/photoswipe.min.js?v=&#123;&#123; theme.version &#125;&#125;&quot;</span>&gt;&lt;/script&gt;</span><br><span class="line">&lt;script src=<span class="string">&quot;&#123;&#123; url_for(theme.js) &#125;&#125;/src/photoswipe-ui-default.min.js?v=&#123;&#123; theme.version &#125;&#125;&quot;</span>&gt;&lt;/script&gt;</span><br></pre></td></tr></table></figure><h2 id="在根目录加入标签">在根目录加入标签</h2><p>在 <code>_layout.swig</code> 中的body标签里最前面插入以下内容</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">&#123;% <span class="keyword">if</span> page.type === <span class="string">&quot;photos&quot;</span> %&#125;</span><br><span class="line">&lt;!-- Root element of PhotoSwipe. Must have class pswp. --&gt;</span><br><span class="line">&lt;div class=<span class="string">&quot;pswp&quot;</span> tabindex=<span class="string">&quot;-1&quot;</span> role=<span class="string">&quot;dialog&quot;</span> aria-hidden=<span class="string">&quot;true&quot;</span>&gt;</span><br><span class="line">    &lt;div class=<span class="string">&quot;pswp__bg&quot;</span>&gt;&lt;/div&gt;</span><br><span class="line">    &lt;div class=<span class="string">&quot;pswp__scroll-wrap&quot;</span>&gt;</span><br><span class="line">        &lt;div class=<span class="string">&quot;pswp__container&quot;</span>&gt;</span><br><span class="line">            &lt;div class=<span class="string">&quot;pswp__item&quot;</span>&gt;&lt;/div&gt;</span><br><span class="line">            &lt;div class=<span class="string">&quot;pswp__item&quot;</span>&gt;&lt;/div&gt;</span><br><span class="line">            &lt;div class=<span class="string">&quot;pswp__item&quot;</span>&gt;&lt;/div&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">        &lt;div class=<span class="string">&quot;pswp__ui pswp__ui--hidden&quot;</span>&gt;</span><br><span class="line">            &lt;div class=<span class="string">&quot;pswp__top-bar&quot;</span>&gt;</span><br><span class="line">                &lt;div class=<span class="string">&quot;pswp__counter&quot;</span>&gt;&lt;/div&gt;</span><br><span class="line">                &lt;button class=<span class="string">&quot;pswp__button pswp__button--close&quot;</span> title=<span class="string">&quot;Close (Esc)&quot;</span>&gt;&lt;/button&gt;</span><br><span class="line">                &lt;button class=<span class="string">&quot;pswp__button pswp__button--share&quot;</span> title=<span class="string">&quot;Share&quot;</span>&gt;&lt;/button&gt;</span><br><span class="line">                &lt;button class=<span class="string">&quot;pswp__button pswp__button--fs&quot;</span> title=<span class="string">&quot;Toggle fullscreen&quot;</span>&gt;&lt;/button&gt;</span><br><span class="line">                &lt;button class=<span class="string">&quot;pswp__button pswp__button--zoom&quot;</span> title=<span class="string">&quot;Zoom in/out&quot;</span>&gt;&lt;/button&gt;</span><br><span class="line">                &lt;!-- Preloader demo http://codepen.io/dimsemenov/pen/yyBWoR --&gt;</span><br><span class="line">                &lt;!-- element will get class pswp__preloader--active when preloader is running --&gt;</span><br><span class="line">                &lt;div class=<span class="string">&quot;pswp__preloader&quot;</span>&gt;</span><br><span class="line">                    &lt;div class=<span class="string">&quot;pswp__preloader__icn&quot;</span>&gt;</span><br><span class="line">                      &lt;div class=<span class="string">&quot;pswp__preloader__cut&quot;</span>&gt;</span><br><span class="line">                        &lt;div class=<span class="string">&quot;pswp__preloader__donut&quot;</span>&gt;&lt;/div&gt;</span><br><span class="line">                      &lt;/div&gt;</span><br><span class="line">                    &lt;/div&gt;</span><br><span class="line">                &lt;/div&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">            &lt;div class=<span class="string">&quot;pswp__share-modal pswp__share-modal--hidden pswp__single-tap&quot;</span>&gt;</span><br><span class="line">                &lt;div class=<span class="string">&quot;pswp__share-tooltip&quot;</span>&gt;&lt;/div&gt; </span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">            &lt;button class=<span class="string">&quot;pswp__button pswp__button--arrow--left&quot;</span> title=<span class="string">&quot;Previous (arrow left)&quot;</span>&gt;</span><br><span class="line">            &lt;/button&gt;</span><br><span class="line">            &lt;button class=<span class="string">&quot;pswp__button pswp__button--arrow--right&quot;</span> title=<span class="string">&quot;Next (arrow right)&quot;</span>&gt;</span><br><span class="line">            &lt;/button&gt;</span><br><span class="line">            &lt;div class=<span class="string">&quot;pswp__caption&quot;</span>&gt;</span><br><span class="line">                &lt;div class=<span class="string">&quot;pswp__caption__center&quot;</span>&gt;&lt;/div&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&#123;% endif %&#125;</span><br></pre></td></tr></table></figure><p>至此相册查看插件 photoswipe 已经配置完毕。</p><h2 id="整个流程使用">整个流程使用</h2><ol><li>在 Blog_Back_Up 里面加入图片,图片路径在 photos 里面 图片命名方式 yyyy-MM-dd_des.jpg/jpeg/gif/png</li><li>执行 python3 <a href="http://tool.py">tool.py</a></li><li>切换到博客 resource 目录下</li><li>在 photos 里面生成了 data.json 文件，提交到腾讯云开发者平台仓库上面</li><li>输入网址查看照片</li></ol>]]></content>
      
      
      <categories>
          
          <category> Hexo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Hexo </tag>
            
            <tag> Photos </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hexo NexT主题之代码块Mac Panel特效</title>
      <link href="posts/d7399e80.html"/>
      <url>posts/d7399e80.html</url>
      
        <content type="html"><![CDATA[<p>偶然间发现一款不错的文章代码块样式，类似Mac的面板效果。能设置阴影效果和实现文本编辑功能，不过文本只存在浏览器页面上，不会真正保存。配置的方式也很简单，觉得不错的朋友可以试一下。</p><h2 id="引入-JS">引入 JS</h2><p>这里需要新建两个 js 文件 <code>events.js</code> 和 <code>codeblock.js</code> ，路径位于 <code>/themes/next/scripts/</code> 包下。</p><div class="note success"><p><em><strong>events.js 代码：</strong></em></p></div><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; mac Panel效果代码块相关</span><br><span class="line">var exec &#x3D; require(&#39;child_process&#39;).exec;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; new 后自动打开编辑器</span><br><span class="line">hexo.on(&#39;new&#39;, function(data)&#123;</span><br><span class="line">  exec(&#39;open -a MacDown &#39; + data.path);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>这个js会在你敲 <code>hexo new xxx</code> 命令后，调用本地的MarkDown编辑器打开新建的md文件 <code>xxx</code></p><div class="note success"><p><em><strong>codeblock.js 代码：</strong></em></p></div><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; mac Panel效果代码块相关</span><br><span class="line">var attributes &#x3D; [</span><br><span class="line">  &#39;autocomplete&#x3D;&quot;off&quot;&#39;,</span><br><span class="line">  &#39;autocorrect&#x3D;&quot;off&quot;&#39;,</span><br><span class="line">  &#39;autocapitalize&#x3D;&quot;off&quot;&#39;,</span><br><span class="line">  &#39;spellcheck&#x3D;&quot;false&quot;&#39;,</span><br><span class="line">  &#39;contenteditable&#x3D;&quot;true&quot;&#39;</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line">var attributesStr &#x3D; attributes.join(&#39; &#39;)</span><br><span class="line"></span><br><span class="line">hexo.extend.filter.register(&#39;after_post_render&#39;, function (data) &#123;</span><br><span class="line">  while (&#x2F;&lt;figure class&#x3D;&quot;highlight ([a-zA-Z]+)&quot;&gt;.*?&lt;\&#x2F;figure&gt;&#x2F;.test(data.content)) &#123;</span><br><span class="line">    data.content &#x3D; data.content.replace(&#x2F;&lt;figure class&#x3D;&quot;highlight ([a-zA-Z]+)&quot;&gt;.*?&lt;\&#x2F;figure&gt;&#x2F;, function () &#123;</span><br><span class="line">      var language &#x3D; RegExp.$1 || &#39;plain&#39;</span><br><span class="line">      var lastMatch &#x3D; RegExp.lastMatch</span><br><span class="line">      lastMatch &#x3D; lastMatch.replace(&#x2F;&lt;figure class&#x3D;&quot;highlight &#x2F;, &#39;&lt;figure class&#x3D;&quot;iseeu highlight &#x2F;&#39;)</span><br><span class="line">      return &#39;&lt;div class&#x3D;&quot;highlight-wrap&quot;&#39; + attributesStr + &#39;data-rel&#x3D;&quot;&#39; + language.toUpperCase() + &#39;&quot;&gt;&#39; + lastMatch + &#39;&lt;&#x2F;div&gt;&#39;</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">  return data</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h2 id="引入-CSS">引入 CSS</h2><p>在 <code>/themes/next/source/css/_common/components/highlight/</code> 目录下新建 <code>macPanel.styl</code> 文件，内容如下：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;*mac Panel效果代码块相关*&#x2F;</span><br><span class="line">.highlight-wrap[data-rel] &#123;</span><br><span class="line">  position: relative;</span><br><span class="line">  overflow: hidden;</span><br><span class="line">  border-radius: 5px;</span><br><span class="line">  &#x2F;*box-shadow: 0 10px 30px 0px rgba(0, 0, 0, 0.4);*&#x2F;</span><br><span class="line">  box-shadow:18px 18px 15px 0px rgba(0,0,0,.4);</span><br><span class="line">  margin: 35px 0;</span><br><span class="line">  margin-top: 10px;</span><br><span class="line">  margin-bottom: 25px;</span><br><span class="line">  ::-webkit-scrollbar &#123;</span><br><span class="line">    height: 10px;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  ::-webkit-scrollbar-track &#123;</span><br><span class="line">    -webkit-box-shadow: inset 0 0 6px rgba(0, 0, 0, 0.3);</span><br><span class="line">    border-radius: 10px;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  ::-webkit-scrollbar-thumb &#123;</span><br><span class="line">    border-radius: 10px;</span><br><span class="line">    -webkit-box-shadow: inset 0 0 6px rgba(0, 0, 0, 0.5);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  &amp;::before &#123;</span><br><span class="line">    content: attr(data-rel);</span><br><span class="line">    height: 38px;</span><br><span class="line">    line-height: 38px;</span><br><span class="line">    background: #21252b;</span><br><span class="line">    &#x2F;*background: #108414de;*&#x2F;</span><br><span class="line">    color: #fff;</span><br><span class="line">    font-size: 16px;</span><br><span class="line">    &#x2F;*position: absolute;*&#x2F;</span><br><span class="line">    top: 0;</span><br><span class="line">    left: 0;</span><br><span class="line">    width: 100%;</span><br><span class="line">    &#x2F;*font-family: &#39;Source Sans Pro&#39;, sans-serif;*&#x2F;</span><br><span class="line">    font-weight: bold;</span><br><span class="line">    padding: 0px 80px;</span><br><span class="line">    text-indent: 15px;</span><br><span class="line">    float: left;</span><br><span class="line">  &#125;</span><br><span class="line">  &amp;::after &#123;</span><br><span class="line">    content: &#39; &#39;;</span><br><span class="line">    position: absolute;</span><br><span class="line">    -webkit-border-radius: 50%;</span><br><span class="line">    border-radius: 50%;</span><br><span class="line">    background: #fc625d;</span><br><span class="line">    width: 12px;</span><br><span class="line">    height: 12px;</span><br><span class="line">    top: 0;</span><br><span class="line">    left: 20px;</span><br><span class="line">    margin-top: 13px;</span><br><span class="line">    -webkit-box-shadow: 20px 0px #fdbc40, 40px 0px #35cd4b;</span><br><span class="line">    box-shadow: 20px 0px #fdbc40, 40px 0px #35cd4b;</span><br><span class="line">    z-index: 3;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>此css是根据我本地的样式做过调整，注释的代码为原有的，根据需要调整样式即可。</p><h2 id="配置引用">配置引用</h2><p>在 <code>/themes/next/source/css/_common/components/highlight/highlight.styl</code> 中引入刚才新建的 <code>macPanel.styl</code>：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">@require &quot;macPanel&quot;</span><br></pre></td></tr></table></figure><p>配置在文件的顶部位置即可。</p><p>到此Mac Panel配置完成，根据需要可调整主题配置文件中的 <code>highlight_theme</code> 的值，选择自己喜欢的样式。</p>]]></content>
      
      
      <categories>
          
          <category> Hexo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Hexo </tag>
            
            <tag> 代码块 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hexo博客静态资源压缩</title>
      <link href="posts/495d0b23.html"/>
      <url>posts/495d0b23.html</url>
      
        <content type="html"><![CDATA[<p>针对于博文静态资源压缩，介绍一下两种压缩方式，第一种方式是使用Gulp来进行压缩，<code>Gulp</code> 是 <code>Node.js</code> 下的自动构建工具，通过一列的task执行步骤进行自动流程化处理。第二种方式就是使用由rozbo大佬开发的 <code>Hexo-Neat</code> 压缩插件，配置简单，无需额外命令。</p><p>附上大佬的 <code>Github</code> 链接：</p><a href=https://github.com/rozbo/hexo-neat target='_blank' class='LinkCard'><style type=text/css>.LinkCard,.LinkCard:hover{text-decoration:none;border:none!important;color:inherit!important}.LinkCard{position:relative;display:block;margin:5px auto;width:330px;box-sizing:border-box;border-radius:12px;max-width:100%;overflow:hidden;color:inherit;text-decoration:none}.ztext{word-break:break-word;line-height:1.6}.LinkCard-backdrop{position:absolute;top:0;left:0;right:0;bottom:0;background-repeat:no-repeat;-webkit-filter:blur(20px);filter:blur(20px);background-size:cover;background-position:center}.LinkCard,.LinkCard:hover{text-decoration:none;border:none!important;color:inherit!important}.LinkCard-content{position:relative;display:flex;align-items:center;justify-content:space-between;padding:12px;border-radius:inherit;background-color:rgba(246,246,246,0.88)}.LinkCard-text{overflow:hidden;width:260px;}.LinkCard-title{white-space: nowrap;display:-webkit-box;-webkit-line-clamp:2;overflow:hidden;text-overflow:ellipsis;max-height:calc(16px * 1.25 * 2);font-size:16px;font-weight:500;line-height:1.25;color:#1a1a1a}@media(max-width: 767px){.LinkCard-title{font-size:13px;}}.LinkCard-meta{display:flex;margin-top:4px;font-size:14px;line-height:20px;color:#999;white-space:nowrap}.LinkCard-imageCell{margin-left:28px;border-radius:30px;width:70px;}.LinkCard-image{background-image:url('https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/linkcard/spider-man.png');background-size: 100% 100%;display:block;width:65px;height:65px;border-radius:inherit;margin-bottom: 0 !important;}</style><span class=LinkCard-backdrop style=background-image:url(https://zhstatic.zhihu.com/assets/zhihu/editor/zhihu-card-default.svg)></span><span class=LinkCard-content><span class=LinkCard-text><span class=LinkCard-title>Hexo-Neat</span><span class=LinkCard-meta><span style=display:inline-flex;align-items:center><svg class='Zi Zi--InsertLink' fill=currentColor viewBox='0 0 24 24' width=17 height=17><path d='M6.77 17.23c-.905-.904-.94-2.333-.08-3.193l3.059-3.06-1.192-1.19-3.059 3.058c-1.489 1.489-1.427 3.954.138 5.519s4.03 1.627 5.519.138l3.059-3.059-1.192-1.192-3.059 3.06c-.86.86-2.289.824-3.193-.08zm3.016-8.673l1.192 1.192 3.059-3.06c.86-.86 2.289-.824 3.193.08.905.905.94 2.334.08 3.194l-3.059 3.06 1.192 1.19 3.059-3.058c1.489-1.489 1.427-3.954-.138-5.519s-4.03-1.627-5.519-.138L9.786 8.557zm-1.023 6.68c.33.33.863.343 1.177.029l5.34-5.34c.314-.314.3-.846-.03-1.176-.33-.33-.862-.344-1.176-.03l-5.34 5.34c-.314.314-.3.846.03 1.177z' fill-rule=evenodd></path></svg></span><span style='margin-top: -0.1rem;'>https://github.com/rozbo/hexo-neat</span></span></span><span class='LinkCard-imageCell'><div class='LinkCard-image'></div></span></span></a><h2 id="Hexo-Neat使用">Hexo-Neat使用</h2><p>1、在站点根目录下安装 <code>Hexo-Neat</code></p><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm install hexo-neat --save</span><br></pre></td></tr></table></figure><p>2、在站点配置文件中末尾添加以下相关配置即可，也可以按照自己的需求去自定义配置。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># hexo-neat</span></span><br><span class="line"><span class="comment"># 博文压缩</span></span><br><span class="line">neat_enable: <span class="literal">true</span></span><br><span class="line"><span class="comment"># 压缩html</span></span><br><span class="line">neat_html:</span><br><span class="line"> <span class="built_in">enable</span>: <span class="literal">true</span></span><br><span class="line"> exclude:</span><br><span class="line"><span class="comment"># 压缩css</span></span><br><span class="line">neat_css:</span><br><span class="line"> <span class="built_in">enable</span>: <span class="literal">true</span></span><br><span class="line"> exclude:</span><br><span class="line">   - <span class="string">&#x27;*/*.min.css&#x27;</span></span><br><span class="line"><span class="comment"># 压缩js</span></span><br><span class="line">neat_js:</span><br><span class="line"> <span class="built_in">enable</span>: <span class="literal">true</span></span><br><span class="line"> mangle: <span class="literal">true</span></span><br><span class="line"> output:</span><br><span class="line"> compress:</span><br><span class="line"> exclude:</span><br><span class="line">   - <span class="string">&#x27;**/*.min.js&#x27;</span></span><br><span class="line">   - <span class="string">&#x27;**/jquery.fancybox.pack.js&#x27;</span></span><br><span class="line">   - <span class="string">&#x27;**/index.js&#x27;</span></span><br></pre></td></tr></table></figure><h2 id="Gulp使用">Gulp使用</h2><p>1、在站点的根目录下执行以下命令</p><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ npm install gulp -g</span><br><span class="line">$ npm install gulp-minify-css gulp-uglify gulp-htmlmin gulp-htmlclean gulp --save</span><br></pre></td></tr></table></figure><p>2、在博客根目录下新建 <code>gulpfile.js</code> ，并填入以下内容</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line">var gulp = require(<span class="string">&#x27;gulp&#x27;</span>);</span><br><span class="line">var minifycss = require(<span class="string">&#x27;gulp-minify-css&#x27;</span>);</span><br><span class="line">var uglify = require(<span class="string">&#x27;gulp-uglify&#x27;</span>);</span><br><span class="line">var htmlmin = require(<span class="string">&#x27;gulp-htmlmin&#x27;</span>);</span><br><span class="line">var htmlclean = require(<span class="string">&#x27;gulp-htmlclean&#x27;</span>);</span><br><span class="line">var imagemin = require(<span class="string">&#x27;gulp-imagemin&#x27;</span>);</span><br><span class="line"></span><br><span class="line">// 压缩html</span><br><span class="line">gulp.task(<span class="string">&#x27;minify-html&#x27;</span>, <span class="function"><span class="title">function</span></span>() &#123;</span><br><span class="line">    <span class="built_in">return</span> gulp.src(<span class="string">&#x27;./public/**/*.html&#x27;</span>)</span><br><span class="line">        .pipe(htmlclean())</span><br><span class="line">        .pipe(htmlmin(&#123;</span><br><span class="line">            collapseWhitespace: <span class="literal">true</span>, //从字面意思应该可以看出来，清除空格，压缩html，这一条比较重要，作用比较大，引起的改变压缩量也特别大</span><br><span class="line">            collapseBooleanAttributes: <span class="literal">true</span>, //省略布尔属性的值，比如：&lt;input checked=<span class="string">&quot;checked&quot;</span>/&gt;,那么设置这个属性后，就会变成 &lt;input checked/&gt;</span><br><span class="line">            removeComments: <span class="literal">true</span>, //清除html中注释的部分</span><br><span class="line">            removeEmptyAttributes: <span class="literal">true</span>, //清除所有的空属性</span><br><span class="line">            removeScriptTypeAttributes: <span class="literal">true</span>, //清除所有script标签中的<span class="built_in">type</span>=<span class="string">&quot;text/javascript&quot;</span>属性。</span><br><span class="line">            removeStyleLinkTypeAttributes: <span class="literal">true</span>, //清楚所有Link标签上的<span class="built_in">type</span>属性。</span><br><span class="line">            minifyJS: <span class="literal">true</span>,</span><br><span class="line">            minifyCSS: <span class="literal">true</span>,</span><br><span class="line">            minifyURLs: <span class="literal">true</span>,</span><br><span class="line">        &#125;))</span><br><span class="line">        .pipe(gulp.dest(<span class="string">&#x27;./public&#x27;</span>));</span><br><span class="line">&#125;);</span><br><span class="line">// 压缩css</span><br><span class="line">gulp.task(<span class="string">&#x27;minify-css&#x27;</span>, <span class="function"><span class="title">function</span></span>() &#123;</span><br><span class="line">    <span class="built_in">return</span> gulp.src(<span class="string">&#x27;./public/**/*.css&#x27;</span>)</span><br><span class="line">        .pipe(minifycss(&#123;</span><br><span class="line">            compatibility: <span class="string">&#x27;ie8&#x27;</span></span><br><span class="line">        &#125;))</span><br><span class="line">        .pipe(gulp.dest(<span class="string">&#x27;./public&#x27;</span>));</span><br><span class="line">&#125;);</span><br><span class="line">// 压缩js !代表排除的js,例如[<span class="string">&#x27;!./public/js/**/*min.js&#x27;</span>]</span><br><span class="line">gulp.task(<span class="string">&#x27;minify-js&#x27;</span>, <span class="function"><span class="title">function</span></span>() &#123;</span><br><span class="line">    <span class="built_in">return</span> gulp.src([<span class="string">&#x27;./public/js/**/.js&#x27;</span>])</span><br><span class="line">        .pipe(uglify()) //压缩混淆</span><br><span class="line">        .pipe(gulp.dest(<span class="string">&#x27;./public&#x27;</span>));</span><br><span class="line">&#125;);</span><br><span class="line">// 压缩图片</span><br><span class="line">gulp.task(<span class="string">&#x27;minify-images&#x27;</span>, <span class="function"><span class="title">function</span></span>() &#123;</span><br><span class="line">    <span class="built_in">return</span> gulp.src(<span class="string">&#x27;./public/images/**/*.*&#x27;</span>)</span><br><span class="line">        .pipe(imagemin(</span><br><span class="line">        [imagemin.gifsicle(&#123;<span class="string">&#x27;optimizationLevel&#x27;</span>: 3&#125;),</span><br><span class="line">        imagemin.jpegtran(&#123;<span class="string">&#x27;progressive&#x27;</span>: <span class="literal">true</span>&#125;),</span><br><span class="line">        imagemin.optipng(&#123;<span class="string">&#x27;optimizationLevel&#x27;</span>: 7&#125;),</span><br><span class="line">        imagemin.svgo()],</span><br><span class="line">        &#123;<span class="string">&#x27;verbose&#x27;</span>: <span class="literal">true</span>&#125;))</span><br><span class="line">        .pipe(gulp.dest(<span class="string">&#x27;./public/images&#x27;</span>));</span><br><span class="line">&#125;);</span><br><span class="line">// 默认任务</span><br><span class="line">gulp.task(<span class="string">&#x27;default&#x27;</span>,gulp.series(gulp.parallel(<span class="string">&#x27;minify-html&#x27;</span>,<span class="string">&#x27;minify-css&#x27;</span>,<span class="string">&#x27;minify-js&#x27;</span>,<span class="string">&#x27;minify-images&#x27;</span>)));</span><br></pre></td></tr></table></figure><p>3、生成博文时执行 <code>hexo g &amp;&amp; gulp</code> 就会根据 <code>gulpfile.js</code> 中的配置，对 <code>public</code> 目录中的静态资源文件进行压缩。</p><div class="note success">以上就是关于博文静态资源压缩的两种方式，欢迎自由选择引用，如有不明白的地方欢迎下方留言 o(^▽^)o ，谢谢阅读。</div>]]></content>
      
      
      <categories>
          
          <category> Hexo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Hexo </tag>
            
            <tag> Gulp </tag>
            
            <tag> Neat </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>基于 TravisCI 实现 Hexo 在 Github 和 Coding 的同步部署</title>
      <link href="posts/3e5a3bb6.html"/>
      <url>posts/3e5a3bb6.html</url>
      
        <content type="html"><![CDATA[<p>关于TravisCI我这里简单介绍一下，TravisCI是一个在线的、分布式的持续集成服务，可以用来构建和测试托管在Github上的代码，并且其本身就是开源的。TravisCI提供了主流编程语言如C#、Java、JavaScript、Ruby、PHP、Node.js等的支持，相比Jenkins而言，它是一个轻量级的持续集成平台，它会在每次提交代码后，根据配置文件来创建一个虚拟机，并执行用户定义的Build任务，这个虚拟机提供版本控制(Git)、项目构建(Node.js)等，在此前提下，我们下面着手Hexo的自动化部署。</p><p>其原理就是Github和Coding（<code>小插曲：Coding现在已经被腾讯收购了</code>）各为TravisCI分配一个token，当我们向 Github 推送新的代码以后，TravisCI就会从代码仓库中拉取代码，并通过 npm 安装依赖生成静态页面，我们将这些静态页面推送到 master 分支，即可完成对Hexo的部署操作。</p><p>对于我个人博客是以 Github 作为代码的主仓库，其上面的 blog-source 分支存放博客的源代码，master 分支存放博客的静态页面，在此基础上，我们同时推送静态页面到 Github 和 Coding 的代码仓库，这样就可以实现两个平台的同步部署，这里的部署自然是指由 Travis 完成的自动化部署。整体的流程如下图所示：</p><p><img src="https://s2.ax1x.com/2019/10/21/KlNiCR.png" class="lazyload placeholder" data-srcset="https://s2.ax1x.com/2019/10/21/KlNiCR.png" srcset="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/site-img/img-loading.gif" alt="Travis自动构建流程图"></p><h2 id="Github相关操作">Github相关操作</h2><p>1、按规定仓库名称为 <code>XXXXX.github.io</code>，其中 <code>XXXXX</code> 为你的用户名，进行创建仓库。</p><p><img src="https://s2.ax1x.com/2019/10/21/Kl0wjI.png" class="lazyload placeholder" data-srcset="https://s2.ax1x.com/2019/10/21/Kl0wjI.png" srcset="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/site-img/img-loading.gif" alt="Github建库"></p><p>2、建好仓库以后我们在仓库中新建一个分支放博客源码，我这里命名为 <code>blog-source</code>，建好以后将源码提交到该分支下即可。</p><p><img src="https://s2.ax1x.com/2019/10/22/K3szy4.png" class="lazyload placeholder" data-srcset="https://s2.ax1x.com/2019/10/22/K3szy4.png" srcset="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/site-img/img-loading.gif" alt="blog-source"></p><p>3、为了使 Travis 能够将编译好的文件 push 回咱们的 Github，我们需要生成 <code>token</code>，步骤如下：</p><ol><li>在 Github 上 Setting 中找到 <a href="https://github.com/settings/tokens">Personal access tokens</a> 设置。</li><li>点 Generate new token，为 <code>token</code> 起一个名字，勾选 repo，然后点击生成一个新的 <code>token</code> ，并复制下来记录好，待会下面 Travis 配置会用到。（这个只会出现一次！！）</li></ol><h2 id="Coding相关操作">Coding相关操作</h2><p>1、因为腾讯云已经收购了 <a href="https://coding.net">Coding</a> ，所以我们直接在 <a href="https://dev.tencent.com/production">腾讯云开发者平台</a> 注册账号来管理我们的仓库。</p><p>2、注册完毕后我们新建一个名为 <code>XXXXX.coding.me</code> 的项目，其中 <code>XXXXX</code> 为你的用户名，基本操作与 Github 一致，实在不会的可以留言。</p><p>3、Coding可以和 Github 一样可以生成一个 <code>token</code> 如下图，成功以后将 <code>token</code> 保存好，一会下面会用到。</p><p><img src="https://s2.ax1x.com/2019/10/22/K34SXV.png" class="lazyload placeholder" data-srcset="https://s2.ax1x.com/2019/10/22/K34SXV.png" srcset="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/site-img/img-loading.gif" alt="blog-source"></p><h2 id="Travis相关操作">Travis相关操作</h2><p>1、使用 <code>github </code> 帐号登录 <a href="https://travis-ci.org">TravisCI</a> ，左上方按钮点击同步项目，下方打开需要集成的项目，最后点击齿轮进入项目配置页面</p><p><img src="https://s2.ax1x.com/2019/10/24/KN4q56.png" class="lazyload placeholder" data-srcset="https://s2.ax1x.com/2019/10/24/KN4q56.png" srcset="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/site-img/img-loading.gif" alt="Travis-首页"></p><p>2、具体 <code>Travis</code> 配置如下图</p><p><img src="https://s2.ax1x.com/2019/10/24/KN5IW8.png" class="lazyload placeholder" data-srcset="https://s2.ax1x.com/2019/10/24/KN5IW8.png" srcset="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/site-img/img-loading.gif" alt="Travis-配置页"></p><p>3、配置好 <code>Travis</code> 后，回到终端，进入 <code>blog</code> 所在的文件夹下，新建 <code>.travis.yml</code> 文件，并添加以下内容</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line">sudo: <span class="literal">false</span></span><br><span class="line">language: node_js</span><br><span class="line">node_js:</span><br><span class="line">  - 10 <span class="comment"># use nodejs v10 LTS</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 指定缓存模块，可选。缓存可加快编译速度。</span></span><br><span class="line">cache:</span><br><span class="line">  directories:</span><br><span class="line">    - node_modules</span><br><span class="line"></span><br><span class="line"><span class="comment"># 指定博客的仓库地址</span></span><br><span class="line">env:</span><br><span class="line"> global:</span><br><span class="line">   <span class="comment"># Github Pages</span></span><br><span class="line">   - GH_REF: github.com/XuxuGood/XuxuGood.github.io</span><br><span class="line">   <span class="comment"># Coding Pages</span></span><br><span class="line">   - CO_REF: git.dev.tencent.com/XuxuGood/XuxuGood.coding.me.git</span><br><span class="line"></span><br><span class="line"><span class="comment"># 指定博客分支</span></span><br><span class="line">branches:</span><br><span class="line">  only:</span><br><span class="line">    - blog-source <span class="comment"># build master branch only</span></span><br><span class="line"></span><br><span class="line">before_install:</span><br><span class="line">  - npm install -g hexo-cli</span><br><span class="line"></span><br><span class="line"><span class="comment"># Start: Build Lifecycle</span></span><br><span class="line">install:</span><br><span class="line">  - npm install</span><br><span class="line">  - npm install hexo-deployer-git --save</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 执行清缓存，生成网页操作</span></span><br><span class="line">script:</span><br><span class="line">  - hexo clean</span><br><span class="line">  - hexo generate</span><br><span class="line">  <span class="comment">#gulp压缩文件</span></span><br><span class="line">  - gulp</span><br><span class="line"></span><br><span class="line"><span class="comment"># 设置git提交名，邮箱；替换真实token到_config.yml文件，最后depoy部署</span></span><br><span class="line">after_script:</span><br><span class="line">  - <span class="built_in">cd</span> ./public</span><br><span class="line">  - git init</span><br><span class="line">  - git config user.name <span class="string">&quot;xuxu&quot;</span></span><br><span class="line">  - git config user.email <span class="string">&quot;22476705@qq.com&quot;</span></span><br><span class="line">  - git add .</span><br><span class="line">  - git commit -m <span class="string">&quot;TravisCI 自动部署&quot;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># Github Pages</span></span><br><span class="line">  - git push --force --quiet <span class="string">&quot;https://<span class="variable">$&#123;GH_TOKEN&#125;</span>@<span class="variable">$&#123;GH_REF&#125;</span>&quot;</span> master:master</span><br><span class="line">  <span class="comment"># Coding Pages</span></span><br><span class="line">  - git push --force --quiet <span class="string">&quot;https://XuxuGood:<span class="variable">$&#123;CO_TOKEN&#125;</span>@<span class="variable">$&#123;CO_REF&#125;</span>&quot;</span> master:master</span><br><span class="line">  - git tag v0.0.<span class="variable">$TRAVIS_BUILD_NUMBER</span> -a -m <span class="string">&quot;Auto Taged By TravisCI With Build <span class="variable">$TRAVIS_BUILD_NUMBER</span>&quot;</span></span><br><span class="line">  <span class="comment"># Github Pages</span></span><br><span class="line">  - git push --quiet <span class="string">&quot;https://<span class="variable">$&#123;GH_TOKEN&#125;</span>@<span class="variable">$&#123;GH_REF&#125;</span>&quot;</span> master:master --tags</span><br><span class="line">  <span class="comment"># Coding Pages</span></span><br><span class="line">  - git push --quiet <span class="string">&quot;https://XuxuGood:<span class="variable">$&#123;CO_TOKEN&#125;</span>@<span class="variable">$&#123;CO_REF&#125;</span>&quot;</span> master:master --tags</span><br><span class="line"></span><br><span class="line">  <span class="comment"># Build Salver Repository(Github Pages)</span></span><br><span class="line">  <span class="comment">#- git push --force --quiet &quot;https://$&#123;GH_TOKEN&#125;@$&#123;GH_REF&#125;&quot; master:master</span></span><br><span class="line">  <span class="comment"># Build Salver Repository(Github Pages)</span></span><br><span class="line">  <span class="comment">#- git push --force --quiet &quot;https://$&#123;GH_TOKEN&#125;@$&#123;GH_REF&#125;&quot; master:master</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># End: Build LifeCycle</span></span><br></pre></td></tr></table></figure><p>4、然后，准备 <code>push</code> 该项目到 <code>github</code> ，看下是否成功，最终成功则会看到 <code>Travis</code> 构建页面显示如下图</p><p><img src="https://s2.ax1x.com/2019/10/24/KNo94P.png" class="lazyload placeholder" data-srcset="https://s2.ax1x.com/2019/10/24/KNo94P.png" srcset="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/site-img/img-loading.gif" alt="Travis-构建页面"></p><p>以上就是基于 TravisCI 实现 Hexo 在 Github 和 Coding 同步部署的全部介绍，如有不明白的地方欢迎下方留言 o(<sup>▽</sup>)o ，谢谢阅读。</p>]]></content>
      
      
      <categories>
          
          <category> Hexo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Hexo </tag>
            
            <tag> Github </tag>
            
            <tag> Coding </tag>
            
            <tag> TravisCI </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hexo搭建本地个人博客（基础篇）</title>
      <link href="posts/e1b9c6c5.html"/>
      <url>posts/e1b9c6c5.html</url>
      
        <content type="html"><![CDATA[<p>Hexo 是一个快速、简洁且高效的博客框架。Hexo 使用 <a href="http://daringfireball.net/projects/markdown/">Markdown</a>（或其他渲染引擎）解析文章，在几秒内，即可利用靓丽的主题生成静态网页。</p><h2 id="安装Hexo">安装Hexo</h2><p>建立 Hexo 只需要几分钟，安装 Hexo 非常简单。但是，您首先需要安装其他一些东西。</p><ol><li><a href="http://nodejs.org/">Node.js</a>   (Node.js 版本需不低于 8.6，建议使用 Node.js 10.0 及以上版本)</li><li><a href="http://git-scm.com/">Git</a></li></ol><p>如果您的电脑中已经安装上述必备程序，那么恭喜您！接下来只需要使用 npm 即可完成 Hexo 的安装。</p><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm install -g hexo-cli</span><br></pre></td></tr></table></figure><p>如果没有，那就一起来看下面吧 (<code>这里只说一下 windows 的安装，因为本人现在比较穷，买不起mac啊 テ_デ，其他相关教程大家就去搜搜很多的。</code>)</p><h3 id="安装git">安装git</h3><p><img src="https://s2.ax1x.com/2019/10/21/KlpZvD.md.png" class="lazyload placeholder" data-srcset="https://s2.ax1x.com/2019/10/21/KlpZvD.md.png" srcset="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/site-img/img-loading.gif" alt="安装git"></p><a href=https://git-scm.com/downloads target='_blank' class='LinkCard'><style type=text/css>.LinkCard,.LinkCard:hover{text-decoration:none;border:none!important;color:inherit!important}.LinkCard{position:relative;display:block;margin:5px auto;width:330px;box-sizing:border-box;border-radius:12px;max-width:100%;overflow:hidden;color:inherit;text-decoration:none}.ztext{word-break:break-word;line-height:1.6}.LinkCard-backdrop{position:absolute;top:0;left:0;right:0;bottom:0;background-repeat:no-repeat;-webkit-filter:blur(20px);filter:blur(20px);background-size:cover;background-position:center}.LinkCard,.LinkCard:hover{text-decoration:none;border:none!important;color:inherit!important}.LinkCard-content{position:relative;display:flex;align-items:center;justify-content:space-between;padding:12px;border-radius:inherit;background-color:rgba(246,246,246,0.88)}.LinkCard-text{overflow:hidden;width:260px;}.LinkCard-title{white-space: nowrap;display:-webkit-box;-webkit-line-clamp:2;overflow:hidden;text-overflow:ellipsis;max-height:calc(16px * 1.25 * 2);font-size:16px;font-weight:500;line-height:1.25;color:#1a1a1a}@media(max-width: 767px){.LinkCard-title{font-size:13px;}}.LinkCard-meta{display:flex;margin-top:4px;font-size:14px;line-height:20px;color:#999;white-space:nowrap}.LinkCard-imageCell{margin-left:28px;border-radius:30px;width:70px;}.LinkCard-image{background-image:url('https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/linkcard/spider-man.png');background-size: 100% 100%;display:block;width:65px;height:65px;border-radius:inherit;margin-bottom: 0 !important;}</style><span class=LinkCard-backdrop style=background-image:url(https://zhstatic.zhihu.com/assets/zhihu/editor/zhihu-card-default.svg)></span><span class=LinkCard-content><span class=LinkCard-text><span class=LinkCard-title>安装地址</span><span class=LinkCard-meta><span style=display:inline-flex;align-items:center><svg class='Zi Zi--InsertLink' fill=currentColor viewBox='0 0 24 24' width=17 height=17><path d='M6.77 17.23c-.905-.904-.94-2.333-.08-3.193l3.059-3.06-1.192-1.19-3.059 3.058c-1.489 1.489-1.427 3.954.138 5.519s4.03 1.627 5.519.138l3.059-3.059-1.192-1.192-3.059 3.06c-.86.86-2.289.824-3.193-.08zm3.016-8.673l1.192 1.192 3.059-3.06c.86-.86 2.289-.824 3.193.08.905.905.94 2.334.08 3.194l-3.059 3.06 1.192 1.19 3.059-3.058c1.489-1.489 1.427-3.954-.138-5.519s-4.03-1.627-5.519-.138L9.786 8.557zm-1.023 6.68c.33.33.863.343 1.177.029l5.34-5.34c.314-.314.3-.846-.03-1.176-.33-.33-.862-.344-1.176-.03l-5.34 5.34c-.314.314-.3.846.03 1.177z' fill-rule=evenodd></path></svg></span><span style='margin-top: -0.1rem;'>https://git-scm.com/downloads</span></span></span><span class='LinkCard-imageCell'><div class='LinkCard-image'></div></span></span></a><p>一切按照默认走就行了，没什么特殊的地方，安装完成之后检查git是否安装成功（执行一下cmd命令），显示版本号即为成功！</p><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git --version</span><br></pre></td></tr></table></figure><h3 id="安装Node-js">安装Node.js</h3><p><img src="https://s2.ax1x.com/2019/10/21/KlpmKe.md.png" class="lazyload placeholder" data-srcset="https://s2.ax1x.com/2019/10/21/KlpmKe.md.png" srcset="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/site-img/img-loading.gif" alt="安装Node.js"></p><a href=https://nodejs.org/en/ target='_blank' class='LinkCard'><style type=text/css>.LinkCard,.LinkCard:hover{text-decoration:none;border:none!important;color:inherit!important}.LinkCard{position:relative;display:block;margin:5px auto;width:330px;box-sizing:border-box;border-radius:12px;max-width:100%;overflow:hidden;color:inherit;text-decoration:none}.ztext{word-break:break-word;line-height:1.6}.LinkCard-backdrop{position:absolute;top:0;left:0;right:0;bottom:0;background-repeat:no-repeat;-webkit-filter:blur(20px);filter:blur(20px);background-size:cover;background-position:center}.LinkCard,.LinkCard:hover{text-decoration:none;border:none!important;color:inherit!important}.LinkCard-content{position:relative;display:flex;align-items:center;justify-content:space-between;padding:12px;border-radius:inherit;background-color:rgba(246,246,246,0.88)}.LinkCard-text{overflow:hidden;width:260px;}.LinkCard-title{white-space: nowrap;display:-webkit-box;-webkit-line-clamp:2;overflow:hidden;text-overflow:ellipsis;max-height:calc(16px * 1.25 * 2);font-size:16px;font-weight:500;line-height:1.25;color:#1a1a1a}@media(max-width: 767px){.LinkCard-title{font-size:13px;}}.LinkCard-meta{display:flex;margin-top:4px;font-size:14px;line-height:20px;color:#999;white-space:nowrap}.LinkCard-imageCell{margin-left:28px;border-radius:30px;width:70px;}.LinkCard-image{background-image:url('https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/linkcard/spider-man.png');background-size: 100% 100%;display:block;width:65px;height:65px;border-radius:inherit;margin-bottom: 0 !important;}</style><span class=LinkCard-backdrop style=background-image:url(https://zhstatic.zhihu.com/assets/zhihu/editor/zhihu-card-default.svg)></span><span class=LinkCard-content><span class=LinkCard-text><span class=LinkCard-title>安装地址</span><span class=LinkCard-meta><span style=display:inline-flex;align-items:center><svg class='Zi Zi--InsertLink' fill=currentColor viewBox='0 0 24 24' width=17 height=17><path d='M6.77 17.23c-.905-.904-.94-2.333-.08-3.193l3.059-3.06-1.192-1.19-3.059 3.058c-1.489 1.489-1.427 3.954.138 5.519s4.03 1.627 5.519.138l3.059-3.059-1.192-1.192-3.059 3.06c-.86.86-2.289.824-3.193-.08zm3.016-8.673l1.192 1.192 3.059-3.06c.86-.86 2.289-.824 3.193.08.905.905.94 2.334.08 3.194l-3.059 3.06 1.192 1.19 3.059-3.058c1.489-1.489 1.427-3.954-.138-5.519s-4.03-1.627-5.519-.138L9.786 8.557zm-1.023 6.68c.33.33.863.343 1.177.029l5.34-5.34c.314-.314.3-.846-.03-1.176-.33-.33-.862-.344-1.176-.03l-5.34 5.34c-.314.314-.3.846.03 1.177z' fill-rule=evenodd></path></svg></span><span style='margin-top: -0.1rem;'>https://nodejs.org/en/</span></span></span><span class='LinkCard-imageCell'><div class='LinkCard-image'></div></span></span></a><p>我们这里简单点，直接下载并运行安装程序就完了，还是走默认就行，安装完成之后检查 node 是否安装成功（执行一下cmd命令），显示版本号即为成功！</p><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">node -v</span><br></pre></td></tr></table></figure><h3 id="安装Hexo-v2">安装Hexo</h3><p>所有必备的应用程序安装完成后，即可使用 npm 安装 Hexo。</p><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm install -g hexo-cli</span><br></pre></td></tr></table></figure><h2 id="利用Hexo初始化我们的站点跟目录-文件">利用Hexo初始化我们的站点跟目录(文件)</h2><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ hexo init &lt;文件夹&gt;</span><br><span class="line">$ <span class="built_in">cd</span> &lt;文件夹&gt;</span><br><span class="line">$ npm install</span><br></pre></td></tr></table></figure><p>选择你想要的盘符来建立我们的博客站点文件,我这里选择 D:\blog ，这里的 blog 是你的文件夹名字（根据自己的喜好建一个文件夹）</p><p><img src="https://s2.ax1x.com/2019/10/21/KlPjo9.png" class="lazyload placeholder" data-srcset="https://s2.ax1x.com/2019/10/21/KlPjo9.png" srcset="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/site-img/img-loading.gif" alt="init hexo"></p><p>cd 到你的站点目录下，然后 初始化站点 $ npm install，执行成功后到你的 blog 文件夹下看看是否这样的（一致就成功啦~~）</p><p><img src="https://s2.ax1x.com/2019/10/21/Klkwa4.png" class="lazyload placeholder" data-srcset="https://s2.ax1x.com/2019/10/21/Klkwa4.png" srcset="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/site-img/img-loading.gif" alt="blog"></p><p>介绍几个个命令 ,以后经常要用到的</p><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">hexo g: 编译,生成静态文件，也就是public文件夹的东西。</span><br><span class="line">hexo s: 开启本地服务(以上两步的操作可以合并成hexo s -g)。</span><br><span class="line">hexo clean: 顾名思义就是清除缓存的意思了啦，这招一般在你改动之后网站没有变化时候用。</span><br></pre></td></tr></table></figure><p>接下来看看 你博客的初步成果吧。</p><p>进入 <code>blog</code> 文件根目录:</p><ol><li>执行命令: <code>hexo g</code> 和 <code>hexo s</code></li><li>然后在你的浏览器输入<code>http://localhost:4000</code>，查看你的博客。</li></ol><p><img src="https://s2.ax1x.com/2019/10/21/KlAJFH.png" class="lazyload placeholder" data-srcset="https://s2.ax1x.com/2019/10/21/KlAJFH.png" srcset="https://cdn.jsdelivr.net/gh/XuxuGood/cdn@master/blogImages/site-img/img-loading.gif" alt="blog首页"></p><p>到此为止，你的个人博客就已经搭建完成了。</p>]]></content>
      
      
      <categories>
          
          <category> Hexo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Hexo </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
